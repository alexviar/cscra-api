{"version":3,"sources":["commons/services/authClient.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/PDFViewer.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","commons/components/ImportModal.tsx","apps/clinica/prestaciones/services/PrestacionesService.ts","apps/clinica/prestaciones/componentes/PrestacionesFilterForm.tsx","apps/clinica/prestaciones/componentes/PrestacionesIndex.tsx","apps/clinica/prestaciones/componentes/PrestacionForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/apiClient.ts","commons/services/index.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","defaults","data","result","keysToCamel","console","log","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","SidebarItem","item","path","to","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","current","total","onChange","minimum","Math","max","maximum","min","pageItems","i","push","Pagination","Item","active","onClick","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","apiClient","get","numero_patronal","ListaMoraService","page","filter","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","e","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","error","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","ceil","required","validation","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","PDFViewer","height","PDFObject","embed","fallbackLink","ImperativeModal","show","useImperativeHandle","Modal","centered","onHide","Dm11Viewer","setUrl","imperativeModalRef","useRef","Header","Body","Footer","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","useLocation","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","length","solicitud","numero","fecha","asegurado","matricula","medico","proveedor","urlDm11","FcDebt","GenIcon","AseguradoChooser","asegurados","scope","apellidoPaterno","apellidoMaterno","nombres","estado","onSelect","AseguradosService","include","AseguradoCard","useFormContext","trigger","pattern","aseguradoChooserRef","buscar","dirtyFields","Card","Accordion","eventKey","Collapse","lg","md","htmlFor","InputGroup","hasValidation","FormControl","format","Append","fechaBaja","validate","afterDate","now","moment","add","isSameOrBefore","fechaExtinsion","titularId","titular","empleador","aportes","mora","MedicosService","source","CancelToken","promise","nombre_completo","undefined","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryKey","queryClient","useQueryClient","isIdle","isStale","Date","flip","filterBy","options","labelKey","trim","useCache","maxResults","minLength","onSearch","newQuery","cancelQueries","renderMenuItemChildren","especialidad","PrestacionesService","PrestacionesTypeahead","paginate","onPaginate","prestacion","ProveedorService","ProveedoresTypeahead","refetchOnMount","subtitle","PrestacionesSolicitadasCard","count","setCount","control","proveedoresTypeaheadController","useController","name","useFieldArray","keyName","fields","append","remove","overflow","prestacionSolicitada","render","field","fieldState","prestacionesSolicitadas","contrato","prestaciones","some","pc","ps","prestacionId","onBlur","every","selected","RegionalesService","RegionalesTypeahead","setOptions","SolicitudAtencionExternaForm","formMethods","nota","registrar","prestacion_id","defaultActiveKey","searchText","promptText","regional","EspecialidadesService","archivo","separador","formato","formData","FormData","EspecialidadesFilter","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","column","File","feedback","maxLength","Check","inline","label","form","EspecialidadesIndex","importModalRef","buscarEspecialidades","ButtonGroup","split","ImportModal","importar","file","import","separator","delete","PrestacionesFilterForm","PrestacionesIndex","buscarPrestaciones","eliminar","replace","PrestacionForm","useParams","history","useHistory","location","continueRef","guardar","verPrestacion","inputs","status","renderBody","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","search","useDispatch","useMemo","parse","substr","onClickItem","onClickFirst","onClickPrev","onClickNext","onClickLast","setFields","preventDefault","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","UsersPagination","trunc","RolesList","roles","ListGroup","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","p","hash","fetchRoles","Tab","transition","Content","Pane","fetchPermissions","d","checked","defaultChecked","getValues","saveRole","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","matchPassword","RolesCheckList","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","JSON","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","zIndex","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","String","prototype","replaceAll","str","arguments","newStr","Object","toString","call","toLowerCase","this","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","isArray","Array","isObject","o","n","keys","forEach","k","s","$1","toUpperCase"],"mappings":"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","file":"static/js/main.4a95d62a.chunk.js","sourcesContent":["import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    {item.path ? \r\n      <Link to={item.path} \r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </Link> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport default ({current, total, onChange}: Props)=>{\r\n  const minimum=Math.max(1, current - 4)\r\n  const maximum=Math.min(total, current + 4)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>onChange(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>Nº Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule, ValidationValueMessage } from \"react-hook-form\"\r\nimport { isObjectBindingPattern } from \"typescript\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): ValidationValueMessage<boolean> => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(pattern)\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.asegurado.matricula}</td>\r\n        <td>{solicitud.medico}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n                !!solicitud.urlDm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.urlDm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscarSolicitudesAtencionExterna.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrícula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n  console.log(props.asegurados.length)\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado ? \"Alta\" : \"Baja\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import { AxiosTransformer } from \"axios\"\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\n// export type Asegurado = Titular | Beneficiario\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  tipo_id: number,\r\n  estado: string,\r\n  fechaBaja?: string,\r\n  fechaExtinsion?: string,\r\n  empleadorId: string\r\n  titularId: string\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    fechaBaja: string,\r\n    aportes: string\r\n  }\r\n  titular?: {\r\n    id: string,\r\n    matricula: string,\r\n    apellidoPaterno: string | null,\r\n    apellidoMaterno: string,\r\n    nombres: string,\r\n    estado: string,\r\n    fechaBaja?: string,\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useController, ValidationRule } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number,\r\n  asegurado: Asegurado,\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    reset,\r\n    trigger,\r\n    setValue,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  console.log(\"FormState\", watch(), formState.errors)\r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: {records}}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        onChange(asegurado)\r\n      }\r\n      else {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const onChange = (asegurado: Asegurado) => {\r\n    setValue(\"asegurado\", asegurado)\r\n    trigger(\"asegurado.fechaExtinsion\")\r\n    trigger(\"asegurado.fechaBaja\")\r\n    trigger(\"asegurado.titular.fechaBaja\")\r\n    trigger(\"asegurado.empleador.fechaBaja\")\r\n    trigger(\"asegurado.empleador.aportes\")\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(watch(\"asegurado.id\") && formState.dirtyFields.asegurado?.matricula){\r\n      setValue(\"asegurado.id\", \"\")\r\n      setValue(\"asegurado.apellidoPaterno\", \"\")\r\n      setValue(\"asegurado.apellidoMaterno\", \"\")\r\n      setValue(\"asegurado.nombres\", \"\")\r\n      setValue(\"asegurado.estado\", \"\")\r\n      setValue(\"asegurado.fechaBaja\", \"\")\r\n      setValue(\"asegurado.fechaExtinsion\", \"\")\r\n      setValue(\"asegurado.empleador.numeroPatronal\", \"\")\r\n      setValue(\"asegurado.empleador.nombre\", \"\")\r\n      setValue(\"asegurado.empleador.estado\", \"\")\r\n      setValue(\"asegurado.empleador.aportes\", \"\")\r\n    }\r\n  }, [matricula])\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formState.errors.asegurado?.matricula || !!formState.errors.asegurado?.id}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\", {\r\n                required: rules.required(),\r\n                pattern: rules.pattern(/^\\d{2}-\\d{4}-[a-zA-Z]{3}(-\\d)?$/)\r\n              })} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  trigger(\"asegurado.matricula\")\r\n                  if(!formState.errors.asegurado?.matricula){\r\n                    // setValue(\"asegurado.matricula\", watch(\"asegurado.matricula\"))\r\n                    if(formState.dirtyFields.asegurado?.matricula)\r\n                      delete formState.dirtyFields.asegurado.matricula\r\n                    buscar.refetch()\r\n                  }\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.nombres\", {required: rules.required()})}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\", {\r\n                required: rules.required()\r\n              })}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"1\">Alta</option>\r\n              <option value=\"0\">Baja</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaBaja}\r\n              {...register(\"asegurado.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha ext.</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)){\r\n                      return \"Se ha cumplido la fecha de extinsion\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaExtinsion?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <div className={watch(\"asegurado\")?.titularId ? \"\" : \"d-none\"}>\r\n          <h2 style={{fontSize: \"1.25rem\"}}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control \r\n                as=\"select\"\r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.estado}\r\n                {...register(\"asegurado.titular.estado\", {  \r\n                  validate: {\r\n                    required: (value) => {\r\n                      return watch(\"asegurado.titularId\") && rules.required().message\r\n                    }\r\n                  }\r\n                })}\r\n              >\r\n                <option value=\"\"></option>\r\n                <option value=\"1\">Alta</option>\r\n                <option value=\"0\">Baja</option>\r\n              </Form.Control>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.fechaBaja}\r\n                {...register(\"asegurado.titular.fechaBaja\", {\r\n                  validate: {\r\n                    afterDate: (value) => {\r\n                      const now = moment()\r\n                      if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                        return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                      } \r\n                    }\r\n                  }\r\n                })}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.titular?.fechaBaja?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n        </div>\r\n\r\n        <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.numeroPatronal}\r\n              {...register(\"asegurado.empleador.numeroPatronal\")}\r\n            />\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.nombre}\r\n              {...register(\"asegurado.empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.estado}\r\n              {...register(\"asegurado.empleador.estado\")}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"0\">Baja</option>\r\n              <option value=\"1\">Alta</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.fechaBaja}\r\n              {...register(\"asegurado.empleador.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.aportes}\r\n              {...register(\"asegurado.empleador.aportes\", {\r\n                validate: {\r\n                  mora: (value) => {\r\n                    if(value == \"0\"){\r\n                      return \"El empleador esta en mora\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            >\r\n              <option></option>\r\n              <option value=\"0\">En mora</option>\r\n              <option value=\"1\">Al día</option>\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.aportes?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          title=\"Resultados\"\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado)=>{\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            onChange(asegurado)\r\n            aseguradoChooserRef.current!.show(false)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string,\r\n  regionalId: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n\r\n  const queryKey = [\"buscarMedico\", query];\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/prestaciones/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  buscar: (filter: {nombre?: string}, page: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Prestacion>>(\"prestaciones\", {\r\n      params: {\r\n        filter, page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [page, setPage] = useState(1)\r\n  const queryKey = [\"buscarPrestaciones\", query, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscar({\r\n      nombre: query||undefined\r\n    }, {\r\n      size: 50,\r\n      current: page\r\n    })\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(!buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data?.records || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    paginate\r\n    onPaginate={(e, size)=>{\r\n      setPage((page => page + 1))\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  regionalId: number\r\n  contrato: {\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId: number\r\n}\r\n\r\nexport const ProveedorService = {\r\n  buscar: (filter?: Filter, page?: Page) => {\r\n    return apiClient.get<Proveedor[]>(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Proveedor[]>(\"proveedores/buscar-nombre\", {\r\n      params: {nombre},\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  // const [query, setQuery] = useState(\"\")\r\n  // const [options, setOptions] = useState<Proveedor[]>([])\r\n\r\n  \r\n  const queryKey = \"buscarProveedor\"\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    // return ProveedorService.buscarPorNombre(query)\r\n    return ProveedorService.buscar()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnMount: false,\r\n    // enabled: false,\r\n    // onSuccess: ({data})=>{\r\n    //   setOptions(data)\r\n    // }\r\n  })\r\n\r\n  return <AsyncTypeahead flip \r\n    // filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    // options={options}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        const nombre_completo = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{}}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        title = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = proveedor.nombre\r\n        subtitle = \"Empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor } from \"../services/ProveedoresService\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regionalId: number | null,\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number | null,\r\n    nota: string,\r\n  }[],\r\n  proveedor?: Proveedor[]\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const proveedoresTypeaheadController = useController({\r\n    name:\"proveedor\",\r\n    control,\r\n    rules: {\r\n      required: rules.required()\r\n    }\r\n  })\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\",\r\n    keyName: \"prestacionId\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Prestacion</th>\r\n            <th>Proveedor</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    return <>\r\n                      <PrestacionesTypeahead\r\n                        id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                        className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        filterBy={(prestacion) => {\r\n                          const proveedor = watch(\"proveedor.0\")\r\n                          const prestacionesSolicitadas = watch(\"prestacionesSolicitadas\")\r\n                          return !proveedor ||\r\n                            proveedor.contrato.prestaciones.some(pc => pc.id == prestacion.id) && \r\n                            !prestacionesSolicitadas.some(ps=>ps.prestacionId == prestacion.id)\r\n                        }}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(prestacion) => {\r\n                          field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                    </>\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <ProveedoresTypeahead\r\n                  filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                  onChange={proveedoresTypeaheadController.field.onChange}\r\n                  onBlur={proveedoresTypeaheadController.field.onBlur}\r\n                  selected={proveedoresTypeaheadController.field.value}\r\n                />\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const)} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data})=>{\r\n      setOptions(data)\r\n    }\r\n  })\r\n\r\n  return <AsyncTypeahead\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import React, { ComponentProps, useRef } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport { Medico } from \"../services/MedicosService\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medico?: Medico[]\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacionId: null,\r\n        nota: \"\"\r\n      }],\r\n      asegurado: {\r\n        titular: undefined\r\n      }\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    trigger,\r\n    formState,\r\n    control,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id: prestacion_id as number,\r\n        nota\r\n      }))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11}}) => {\r\n      dm11ViewerRef.current?.setUrl(urlDm11)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(\"onSubmit\", values)\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", undefined)\r\n                          setValue(\"proveedor\", undefined)\r\n                          trigger(\"medico\")\r\n                          trigger(\"proveedor\")\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medico\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        filterBy={(medico)=>medico.regionalId == watch(\"regionalId\")}\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!formState.errors.medico}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n        {/* <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"4\">\r\n            Proveedor\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"4\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller\r\n                    control={control}\r\n                    name=\"proveedor\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <>\r\n                        <ProveedoresTypeahead\r\n                          id=\"solicitud-atencion-externa-form/proveedores\"\r\n                          searchText=\"Buscando...\"\r\n                          promptText=\"Introduce un texto\"\r\n                          filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                          className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                          isInvalid={!!formState.errors.proveedor}\r\n                          onBlur={field.onBlur}\r\n                          onChange={field.onChange}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                      </>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n       */}\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </FormProvider>\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\ntype Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\nexport const EspecialidadesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<{\r\n      meta: {\r\n        total: number\r\n      },\r\n      records: Especialidad[]\r\n    }>(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import { AxiosResponse } from \"axios\"\r\nimport { forwardRef, useImperativeHandle, useRef } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, ModalProps, Row, Spinner } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"./ImperativeModal\"\r\nimport * as rules from \"./rules\"\r\n\r\ntype ImportOptions= {\r\n  separator: string,\r\n  format: string \r\n}\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\n\r\ntype Props = {\r\n  // import: (file: File, options: ImportOptions) => void\r\n  import: (\r\n    file: File,\r\n    options: ImportOptions\r\n  )=>Promise<any>\r\n} & ModalProps\r\n\r\nexport const ImportModal = forwardRef<ImperativeModalRef, Props>((props, ref)=>{\r\n  \r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importar = useMutation(({file, options}: {file: File, options: ImportOptions})=>{\r\n    return props.import(file, options)\r\n  })\r\n\r\n  // const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  // useImperativeHandle(ref, () => ({\r\n  //   show: (show: boolean)=>{\r\n  //     imperativeModalRef.current?.show(show)\r\n  //   }\r\n  // }),[])\r\n  \r\n  return <ImperativeModal ref={ref} {...props}>\r\n  <Modal.Header>\r\n    Importar Datos\r\n  </Modal.Header>\r\n  <Modal.Body>\r\n    <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador: separator, formatoSaltoLinea: format})=>{\r\n      importar.mutate({\r\n        file: archivo![0],\r\n        options: {\r\n          separator,\r\n          format\r\n        }\r\n      })\r\n    })}>\r\n      {importar.data ? <Alert variant={importar.isError ? \"danger\" : \"success\"}>\r\n        {importar.isError ? \"Error\" : \"Importacion existosa\"}\r\n      </Alert> :  null}\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Archivo</Form.Label>\r\n        <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n          <Form.File\r\n            isInvalid={!!formState.errors.archivo}\r\n            {...register(\"archivo\", {\r\n              required: rules.required(),\r\n            })}\r\n            feedback={formState.errors.archivo?.message}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Separador</Form.Label>\r\n        <Col xs={\"auto\"}>\r\n          <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n            isInvalid={!!formState.errors.separador}\r\n            {...register(\"separador\", {\r\n              required: rules.required()\r\n            })}\r\n          ></Form.Control>\r\n          <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n        isInvalid={!!formState.errors.aggrement}\r\n        feedback={formState.errors.aggrement?.message}\r\n        {...register(\"aggrement\", {\r\n          required: rules.required()\r\n        })}\r\n      ></Form.Check>\r\n    </Form>\r\n  </Modal.Body>\r\n  <Modal.Footer>\r\n      <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">\r\n        {importar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Importar\r\n      </Button>\r\n      <Button>Cancelar</Button>\r\n  </Modal.Footer>\r\n</ImperativeModal>\r\n\r\n})","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<PaginatedResponse<Prestacion>>(\"/prestaciones\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  ver: (id: number) => {\r\n    return apiClient.get<Prestacion>(`prestaciones/${id}`)\r\n  },\r\n  registrar: (nombre: string) => {\r\n    return apiClient.post<Prestacion>(\"prestaciones\", {\r\n      nombre\r\n    })\r\n  },\r\n  actualizar: (id: number, nombre: string) => {\r\n    return apiClient.put<Prestacion>(`prestaciones/${id}`, {\r\n      nombre\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`prestaciones/${id}`)\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/prestaciones/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const PrestacionesFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { FaSync, FaEdit, FaTrash } from \"react-icons/fa\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { ImportModal } from \"../../../../commons/components/ImportModal\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { PrestacionesService } from \"../services\"\r\nimport { PrestacionesFilterForm } from \"./PrestacionesFilterForm\"\r\n// import { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\n// import { ImportarPrestaciones } from \"./ImportarPrestaciones\"\r\n\r\nexport const PrestacionesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscarPrestaciones = useQuery([\"buscarPrestaciones\", page, filter], ()=>{\r\n    return PrestacionesService.buscar(page, filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return PrestacionesService.eliminar(id)\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarPrestaciones.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarPrestaciones.isError) {\r\n      const { error } = buscarPrestaciones\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarPrestaciones.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((prestacion, index)=>{\r\n      return <tr key={prestacion.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{prestacion.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-prestacion-${prestacion.id}`}\r\n            />\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} replace to={{\r\n                pathname: `/clinica/configuracion/prestaciones/${prestacion.id}/editar`,\r\n                state: {\r\n                  prestacion\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(prestacion.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\">Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Servicios subrogados</h2>\r\n    <Row className=\"mb-2\">\r\n      <Col className=\"ml-auto pr-0\" xs=\"auto\" >\r\n        <Button onClick={()=>buscarPrestaciones.refetch()}><FaSync /></Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Dropdown as={ButtonGroup}>\r\n          <Button as={Link} replace to={\"/clinica/configuracion/prestaciones/registrar\"}>Nuevo</Button>\r\n          <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={()=>{\r\n              console.log(importModalRef)\r\n              importModalRef.current && importModalRef.current.show(true)\r\n            }}\r\n            >Importar</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </Col>\r\n    </Row>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <PrestacionesFilterForm onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportModal ref={importModalRef}\r\n      import={(file, options)=>{\r\n        return PrestacionesService.importar(file, options.separator, options.format)\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Alert, Button, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery} from \"react-query\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Prestacion, PrestacionesService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\n\r\nexport type Inputs = {\r\n  nombre: string\r\n}\r\n\r\nexport const PrestacionForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    prestacion: Prestacion\r\n  }>()\r\n  \r\n  const { state} = history.location\r\n  \r\n  const prestacion = state?.prestacion\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation(({nombre}: Inputs)=>{\r\n    return id ? PrestacionesService.actualizar(parseInt(id), nombre) : PrestacionesService.registrar(nombre)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }\r\n  })\r\n\r\n  const verPrestacion = useQuery([\"verPrestacion\", id], ()=>{\r\n    return PrestacionesService.ver(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !prestacion,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(verPrestacion.data?.data || prestacion){\r\n      setValue(\"nombre\", (verPrestacion.data?.data || prestacion).nombre)\r\n    }\r\n  }, [verPrestacion.data])\r\n\r\n  const renderBody = ()=>{\r\n    if(verPrestacion.isFetching){\r\n      return <Spinner animation=\"border\">Cargando</Spinner>\r\n    }\r\n    const error = verPrestacion.error as AxiosError\r\n    if(error){\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? guardar.error.response?.data?.message || guardar.error.message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Group>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.nombre}\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form>\r\n  }\r\n\r\n\r\n  return <Modal\r\n    show\r\n    centered\r\n    onHide={()=>{\r\n      history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }}\r\n  >\r\n    <Modal.Header>\r\n      {id ? \"Editar\" : \"Registrar\" }\r\n    </Modal.Header> \r\n    <Modal.Body>\r\n      {renderBody()}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      {!id ? <Button \r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = true\r\n        }}\r\n      >\r\n        {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar y continuar\r\n      </Button> : null}\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = false\r\n        }}\r\n      >\r\n        {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, FaCoins } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { Settings } from './settings/components/Settings';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { EspecialidadesIndex } from './especialidades/components/EspecialidadesIndex';\r\nimport { PrestacionesIndex, PrestacionForm } from './prestaciones/componentes';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención exterana\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        // path: `${url}/configuracion`,\r\n        title: \"Configuración\",\r\n        icon: <FaCog />,\r\n        items: [\r\n          {\r\n            id: \"configuracion/especialidades\",\r\n            path: `${url}/configuracion/especialidades`,\r\n            title: \"Especialidades\",\r\n            icon: <FaCog />,\r\n          },\r\n          {\r\n            id: \"configuracion/prestaciones\",\r\n            path: `${url}/configuracion/prestaciones`,\r\n            title: \"Servicios subrogados\",\r\n            icon: <FaCog />,\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/configuracion/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route>\r\n      {/* <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    <Route exact path={[`${url}/configuracion/prestaciones/registrar`, `${url}/configuracion/prestaciones/:id/editar`]}>\r\n        Hola mundo\r\n        <PrestacionForm />\r\n      </Route>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"¿Está seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripción</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potosí</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseñas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarán</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Información personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Información de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Hipócrates</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Hipócrates</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  // transformRequest: [(data, headers)=>{\r\n  //   console.log(\"TransformRequest\", data)\r\n  //   return data\r\n  // }],\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"","\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}