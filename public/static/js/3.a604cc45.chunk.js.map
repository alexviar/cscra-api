{"version":3,"sources":["commons/auth/constants/Permisos.ts","commons/auth/index.ts","commons/click-outside-handler/useOnClickOutside.ts","commons/click-outside-handler/ClickOutsideHandler.tsx","commons/components/layouts/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","../node_modules/react-bootstrap/esm/Container.js","../node_modules/react-bootstrap/esm/Table.js","../node_modules/react-bootstrap/esm/AccordionContext.js","../node_modules/react-bootstrap/esm/AccordionToggle.js","../node_modules/react-bootstrap/esm/AccordionCollapse.js","../node_modules/react-bootstrap/esm/Accordion.js","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js","../node_modules/react-bootstrap/esm/CardImg.js","../node_modules/react-bootstrap/esm/Card.js","apps/iam/usuarios/services/UserService.ts","apps/iam/roles/services/RolService.ts","apps/iam/usuarios/components/RolesCheckList.tsx","apps/iam/usuarios/components/UserForm.tsx","apps/iam/usuarios/components/CambiarContrasenaForm.tsx","apps/iam/usuarios/policies/index.ts","apps/iam/usuarios/components/UserFilterForm.tsx","apps/iam/usuarios/components/RowOptions.tsx","apps/iam/usuarios/components/UserIndex.tsx","apps/iam/usuarios/components/UserView.tsx","apps/iam/roles/services/PermisoService.ts","apps/iam/roles/components/PermisoCheckList.tsx","apps/iam/roles/components/RolForm.tsx","apps/iam/roles/components/RolFilterForm.tsx","apps/iam/roles/policies/index.ts","apps/iam/roles/components/RowOptions.tsx","apps/iam/roles/components/RolIndex.tsx","apps/iam/roles/components/RolView.tsx","apps/iam/IamApp.tsx"],"names":["VER_SOLICITUDES_DE_ATENCION_EXTERNA","VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","VER_USUARIOS","VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","REGISTRAR_USUARIOS","REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","EDITAR_USUARIOS","EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","BLOQUEAR_USUARIOS","BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","DESBLOQUEAR_USUARIOS","DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","CAMBIAR_CONTRASEÑA","CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","VER_ROLES","REGISTRAR_ROLES","EDITAR_ROLES","ELIMINAR_ROLES","VER_LISTA_DE_MORA","VER_LISTA_DE_MORA_REGIONAL","AGREGAR_EMPLEADOR_EN_MORA","AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","QUITAR_EMPLEADOR_EN_MORA","QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","VER_MEDICOS","VER_MEDICOS_REGIONAL","REGISTRAR_MEDICOS","REGISTRAR_MEDICOS_REGIONAL","EDITAR_MEDICOS","EDITAR_MEDICOS_REGIONAL","BAJA_MEDICOS","BAJA_MEDICOS_REGIONAL","VER_PROVEEDORES","VER_PROVEEDORES_REGIONAL","REGISTRAR_PROVEEDORES","REGISTRAR_PROVEEDORES_REGIONAL","EDITAR_PROVEEDORES","EDITAR_PROVEEDORES_REGIONAL","BAJA_PROVEEDOR","BAJA_PROVEEDOR_REGIONAL","VER_CONTRATOS_PROVEEDOR","VER_CONTRATOS_PROVEEDOR_REGIONAL","REGISTRAR_CONTRATOS_PROVEEDOR","REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL","CONSUMIR_CONTRATOS_PROVEEDOR","CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL","EXTENDER_CONTRATOS_PROVEEDOR","EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL","ANULAR_CONTRATOS_PROVEEDOR","ANULAR_CONTRATOS_PROVEEDOR_REGIONAL","VER_ESPECIALIDADES","REGISTRAR_ESPECIALIDADES","EDITAR_ESPECIALIDADES","ELIMINAR_ESPECIALIDADES","IMPORTAR_ESPECIALIDADES","VER_PRESTACIONES","REGISTRAR_PRESTACIONES","EDITAR_PRESTACIONES","ELIMINAR_PRESTACIONES","IMPORTAR_PRESTACIONES","useOnClickOutside","ref","handler","useEffect","listener","event","el","current","contains","target","document","querySelector","addEventListener","removeEventListener","ClickOutsideHandler","children","onClickOutside","props","containerRef","useRef","SidebarItem","item","match","useRouteMatch","path","ListGroup","Item","as","Link","to","action","active","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","side","header","renderItem","left","right","variant","SidebarLayout","sidebar","showSidebar","useSelector","state","sidebarVisibility","dispatch","useDispatch","onClickOutsideHandler","React","useCallback","toggle","type","Container","forwardRef","_ref","bsPrefix","fluid","_ref$as","Component","_objectWithoutPropertiesLoose","prefix","useBootstrapPrefix","suffix","createElement","_extends","classNames","displayName","defaultProps","Table","striped","bordered","borderless","hover","size","responsive","decoratedBsPrefix","classes","table","responsiveClass","context","createContext","AccordionToggle","eventKey","onClick","accordionOnClick","contextEventKey","useContext","AccordionContext","onSelect","SelectableContext","e","useAccordionToggle","AccordionCollapse","Provider","value","Collapse","in","Children","only","Accordion","_useUncontrolled","useUncontrolled","activeKey","_useUncontrolled$as","controlledProps","finalClassName","Toggle","undefined","disabled","ListGroupItem","handleClick","preventDefault","stopPropagation","tabIndex","AbstractNavItem","makeEventKey","href","horizontal","horizontalVariant","initialBsPrefix","AbstractNav","CardImg","DivStyledAsH5","divWithClassName","DivStyledAsH6","CardBody","createWithBsPrefix","CardTitle","CardSubtitle","CardLink","CardText","CardHeader","CardFooter","CardImgOverlay","Card","bg","text","border","body","cardContext","useMemo","cardHeaderBsPrefix","CardContext","Img","Title","Subtitle","Body","Text","Header","Footer","ImgOverlay","UserService","filter","page","apiClient","get","params","keysToUnderscore","userId","data","post","put","RolService","delete","RolesCheckList","memo","isInvalid","selected","onChange","buscar","useQuery","refetchOnReconnect","refetchOnWindowFocus","roles","isFetching","Spinner","animation","isError","Alert","refetch","maxHeight","rol","index","Form","Check","label","name","checked","some","rolChecked","isChecked","rch","UserForm","loggedUser","useLoggedUser","useParams","schema","yup","shape","informacionPersonal","ci","ciComplemento","trim","length","nullable","optional","apellidoPaterno","when","is","apellidoMaterno","then","required","nombres","informacionUsuario","min","username","max","matches","password","passwordRepeat","test","this","parent","regional","useForm","resolver","yupResolver","mode","defaultValues","control","formState","handleSubmit","register","setValue","trigger","watch","formErrors","errors","history","useHistory","queryClient","useQueryClient","queryKey","cargar","parseInt","enabled","location","user","guardar","useMutation","regionalId","r","onSuccess","invalidateQueries","replace","useState","regionales","setRegionales","filterRegional","can","Permisos","String","ciRaiz","find","onSubmit","mutate","fontSize","status","error","response","message","defaultActiveKey","join","Row","Group","Col","xs","md","Label","Control","Feedback","lg","isSubmitted","controlId","validate","matchPassword","render","field","fieldState","onLoad","feedback","filterBy","onBlur","Button","isLoading","CambiarContrasenaForm","oldPassword","notRequired","oneOf","parsedId","isNaN","UsuarioPolicy","canAny","edit","view","changePassword","disable","enable","UserFilterForm","reset","numCi","compCi","nombre","nombreCompleto","onFilter","sm","RowOptions","modal","useModal","cambiarEstado","estado","close","setQueryData","oldData","records","u","open","Dropdown","position","VerticalEllipsisDropdownToggle","Menu","authorize","pathname","UserIndex","setPage","defaultFilter","setFilter","filterFormVisible","showFilterForm","total","meta","visible","width","colSpan","renderRows","Math","ceil","UserView","useLocation","scope","createdAt","updatedAt","PermisoService","PermisoCheckList","permisos","permiso","s","RolForm","description","permissions","setError","queryLoader","ignoreAuthorization","onError","permissionNames","noValidate","validated","isValid","RolFilterForm","texto","onSearch","htmlFor","srOnly","minWidth","RolPolicy","eliminar","inactive","window","confirm","RolIndex","setTotal","RolView","locationState","refetchOnMount","p","i","IamApp","url","sidebarItems","push","Image","src","exact","currentUrl"],"mappings":"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","file":"static/js/3.a604cc45.chunk.js","sourcesContent":["/**\r\n * Permisos de solicitud de transferencia externa\r\n */\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA = \"Ver solicitudes de atencion externa\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Ver solicitudes de atencion externa (misma regional)\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Ver solicitudes de atencion externa (registrado por)\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Registrar solicitudes de atencion externa\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Registrar solicitudes de atencion externa (misma regional)\";\r\n// export const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Registrar solicitudes de atencion externa (registrado por)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Emitir solicitudes de atencion externa\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Emitir solicitudes de atencion externa (misma regional)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Emitir solicitudes de atencion externa (registrado por)\";\r\n  \r\n/**\r\n * Permisos de usuarios\r\n */\r\nexport const VER_USUARIOS = \"Ver usuarios\";\r\nexport const VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Ver usuarios (misma regional)\";\r\nexport const REGISTRAR_USUARIOS = \"Registrar usuarios\";\r\nexport const REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Registrar usuarios (misma regional)\";\r\nexport const EDITAR_USUARIOS = \"Editar usuarios\";\r\nexport const EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Editar usuarios (misma regional)\";\r\nexport const BLOQUEAR_USUARIOS = \"Bloquear usuarios\";\r\nexport const BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Bloquear usuarios (misma regional)\";\r\nexport const DESBLOQUEAR_USUARIOS = \"Desbloquear usuarios\";\r\nexport const DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Desbloquear usuarios (misma regional)\";\r\nexport const CAMBIAR_CONTRASEÑA = \"Cambiar contraseña\";\r\nexport const CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Cambiar contraseña (misma regional)\";\r\n\r\n/**\r\n * Permisos de roles\r\n */\r\nexport const VER_ROLES = \"Ver roles\";\r\nexport const REGISTRAR_ROLES = \"Registrar roles\";\r\nexport const EDITAR_ROLES = \"Editar roles\";\r\nexport const ELIMINAR_ROLES = \"Eliminar roles\";\r\n\r\n\r\n/**\r\n * Permisos de lista de mora\r\n */\r\nexport const VER_LISTA_DE_MORA = \"Ver lista de mora\"\r\nexport const VER_LISTA_DE_MORA_REGIONAL = \"Ver lista de mora (regional)\"\r\nexport const AGREGAR_EMPLEADOR_EN_MORA = \"Agregar empleador en mora\";\r\nexport const AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Agregar empleador en mora (misma regional)\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA = \"Quitar empleador en mora\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Quitar empleador en mora (misma regional)\";\r\n\r\n\r\n\r\n/**\r\n * Medicos\r\n */\r\nexport const VER_MEDICOS = \"Ver médicos\";\r\nexport const VER_MEDICOS_REGIONAL = \"Ver médicos (regional)\";\r\nexport const REGISTRAR_MEDICOS = \"Registrar médicos\";\r\nexport const REGISTRAR_MEDICOS_REGIONAL = \"Registrar médicos (regional)\";\r\nexport const EDITAR_MEDICOS = \"Editar médicos\";\r\nexport const EDITAR_MEDICOS_REGIONAL = \"Editar médicos (regional)\";\r\nexport const BAJA_MEDICOS = \"Baja médicos\";\r\nexport const BAJA_MEDICOS_REGIONAL = \"Baja médicos (regional)\";\r\n\r\n/**\r\n* Proveedores\r\n*/\r\nexport const VER_PROVEEDORES = \"Ver proveedores\";\r\nexport const VER_PROVEEDORES_REGIONAL = \"Ver proveedores (regional)\";\r\nexport const REGISTRAR_PROVEEDORES = \"Registrar proveedores\";\r\nexport const REGISTRAR_PROVEEDORES_REGIONAL = \"Registrar proveedores (regional)\";\r\nexport const EDITAR_PROVEEDORES = \"Editar proveedores\";\r\nexport const EDITAR_PROVEEDORES_REGIONAL = \"Editar proveedores (regional)\";\r\nexport const BAJA_PROVEEDOR = \"Baja proveedores\";\r\nexport const BAJA_PROVEEDOR_REGIONAL = \"Baja proveedores (regional)\";\r\n\r\nexport const VER_CONTRATOS_PROVEEDOR = \"Ver contratos de proveedores\";\r\nexport const VER_CONTRATOS_PROVEEDOR_REGIONAL = \"Ver contratos de proveedores (regional)\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR = \"Registrar contratos de proveedores\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Registrar contratos de proveedores (regional)\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR = \"Consumir contratos de proveedores\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL = \"Consumir contratos de proveedores (regional)\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR = \"Extender contratos de proveedores\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL = \"Extender contratos de proveedores (regional)\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR = \"Anular contratos de proveedores\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Anular contratos de proveedores (regional)\";\r\n\r\n/**\r\n* Especialidades\r\n*/\r\nexport const VER_ESPECIALIDADES = \"Ver especialidades\";\r\nexport const REGISTRAR_ESPECIALIDADES = \"Registrar especialidades\";\r\nexport const EDITAR_ESPECIALIDADES = \"Editar especialidades\";\r\nexport const ELIMINAR_ESPECIALIDADES = \"Eliminar especialidades\";\r\nexport const IMPORTAR_ESPECIALIDADES = \"Importar especialidades\";\r\n\r\n/**\r\n* Prestaciones\r\n*/\r\nexport const VER_PRESTACIONES = \"Ver prestaciones\";\r\nexport const REGISTRAR_PRESTACIONES = \"Registrar prestaciones\";\r\nexport const EDITAR_PRESTACIONES = \"Editar prestaciones\";\r\nexport const ELIMINAR_PRESTACIONES = \"Eliminar prestaciones\";\r\nexport const IMPORTAR_PRESTACIONES = \"Importar prestaciones\";","export { ProtectedContent, ProtectedRoute } from \"./components\"\r\nexport * from \"./hooks\"\r\nexport { Permisos } from \"./constants\"","import { RefObject, useEffect } from 'react'\r\n\r\ntype AnyEvent = MouseEvent | TouchEvent\r\n\r\nexport function useOnClickOutside<T extends HTMLElement = HTMLElement>(\r\n  ref: RefObject<T>,\r\n  handler: (event: AnyEvent) => void,\r\n) {\r\n  useEffect(() => {\r\n    const listener = (event: AnyEvent) => {\r\n      const el = ref?.current\r\n\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!el || el.contains(event.target as Node) || document.querySelector('html') == event.target) {\r\n        return\r\n      }\r\n      handler(event)\r\n    }\r\n\r\n    document.addEventListener(`mousedown`, listener)\r\n    document.addEventListener(`touchstart`, listener)\r\n\r\n    return () => {\r\n      document.removeEventListener(`mousedown`, listener)\r\n      document.removeEventListener(`touchstart`, listener)\r\n    }\r\n\r\n    // Reload only if ref or handler changes\r\n  }, [ref, handler])\r\n}\r\n\r\nexport default useOnClickOutside\r\n","import { FC, useRef, ComponentProps } from 'react'\r\nimport { useOnClickOutside } from './useOnClickOutside'\r\n\r\ntype Props = {\r\n  onClickOutside: (event: MouseEvent | TouchEvent) => void\r\n} & ComponentProps<\"div\">\r\nexport const ClickOutsideHandler:FC<Props> = ({children, onClickOutside, ...props}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(containerRef, onClickOutside)\r\n  return <div ref={containerRef} {...props}>\r\n    {children}\r\n  </div>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading mt-2\">{header}</div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <ListGroup variant=\"flush\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </ListGroup>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ClickOutsideHandler } from '../../click-outside-handler'\r\nimport { Sidebar, SidebarProps } from './Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props) => {\r\n  const showSidebar = useSelector((state:any) => state.sidebarVisibility)\r\n  const dispatch = useDispatch()\r\n\r\n  const onClickOutsideHandler = React.useCallback((event: MouseEvent | TouchEvent)=>{\r\n    const toggle = document.querySelector('[aria-label=\"Toggle navigation\"]')\r\n    if(!toggle?.contains(event.target as Node)){\r\n      dispatch({\r\n        type: \"CLOSE_SIDEBAR\"\r\n      })\r\n    }\r\n  }, [showSidebar])\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \" toggled\" : \"\")}  id=\"wrapper\">\r\n    <ClickOutsideHandler onClickOutside={onClickOutsideHandler}>\r\n      <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    </ClickOutsideHandler>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  fluid: false\n};\nvar Container = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      fluid = _ref.fluid,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"fluid\", \"as\", \"className\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'container');\n  var suffix = typeof fluid === 'string' ? \"-\" + fluid : '-fluid';\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, fluid ? \"\" + prefix + suffix : prefix)\n  }));\n});\nContainer.displayName = 'Container';\nContainer.defaultProps = defaultProps;\nexport default Container;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React from 'react';\nvar context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'AccordionContext';\nexport default context;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport SelectableContext from './SelectableContext';\nimport AccordionContext from './AccordionContext';\nexport function useAccordionToggle(eventKey, onClick) {\n  var contextEventKey = useContext(AccordionContext);\n  var onSelect = useContext(SelectableContext);\n  return function (e) {\n    /*\n      Compare the event key in context with the given event key.\n      If they are the same, then collapse the component.\n    */\n    var eventKeyPassed = eventKey === contextEventKey ? null : eventKey;\n    if (onSelect) onSelect(eventKeyPassed, e);\n    if (onClick) onClick(e);\n  };\n}\nvar AccordionToggle = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'button' : _ref$as,\n      children = _ref.children,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"as\", \"children\", \"eventKey\", \"onClick\"]);\n\n  var accordionOnClick = useAccordionToggle(eventKey, onClick);\n\n  if (Component === 'button') {\n    props.type = 'button';\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    onClick: accordionOnClick\n  }, props), children);\n});\nexport default AccordionToggle;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport Collapse from './Collapse';\nimport AccordionContext from './AccordionContext';\nimport SelectableContext from './SelectableContext';\nvar AccordionCollapse = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      eventKey = _ref.eventKey,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eventKey\"]);\n\n  var contextEventKey = useContext(AccordionContext); // Empty SelectableContext is to prevent elements in the collapse\n  // from collapsing the accordion when clicked.\n\n  return /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(Collapse, _extends({\n    ref: ref,\n    in: contextEventKey === eventKey\n  }, props), /*#__PURE__*/React.createElement(\"div\", null, React.Children.only(children))));\n});\nAccordionCollapse.displayName = 'AccordionCollapse';\nexport default AccordionCollapse;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AccordionToggle from './AccordionToggle';\nimport SelectableContext from './SelectableContext';\nimport AccordionCollapse from './AccordionCollapse';\nimport AccordionContext from './AccordionContext';\nvar Accordion = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      _useUncontrolled$as = _useUncontrolled.as,\n      Component = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      activeKey = _useUncontrolled.activeKey,\n      bsPrefix = _useUncontrolled.bsPrefix,\n      children = _useUncontrolled.children,\n      className = _useUncontrolled.className,\n      onSelect = _useUncontrolled.onSelect,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"as\", \"activeKey\", \"bsPrefix\", \"children\", \"className\", \"onSelect\"]);\n\n  var finalClassName = classNames(className, useBootstrapPrefix(bsPrefix, 'accordion'));\n  return /*#__PURE__*/React.createElement(AccordionContext.Provider, {\n    value: activeKey || null\n  }, /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: onSelect || null\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, controlledProps, {\n    className: finalClassName\n  }), children)));\n});\nAccordion.displayName = 'Accordion';\nAccordion.Toggle = AccordionToggle;\nAccordion.Collapse = AccordionCollapse;\nexport default Accordion;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { makeEventKey } from './SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"eventKey\", \"onClick\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    // TODO: Restrict eventKey to string in v5?\n    eventKey: makeEventKey(eventKey, props.href) // eslint-disable-next-line no-nested-ternary\n    ,\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"]);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: null\n};\nvar CardImg = /*#__PURE__*/React.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      variant = _ref.variant,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'img' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"variant\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card-img');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    className: classNames(variant ? prefix + \"-\" + variant : prefix, className)\n  }, props));\n});\nCardImg.displayName = 'CardImg';\nCardImg.defaultProps = defaultProps;\nexport default CardImg;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport divWithClassName from './divWithClassName';\nimport CardContext from './CardContext';\nimport CardImg from './CardImg';\nvar DivStyledAsH5 = divWithClassName('h5');\nvar DivStyledAsH6 = divWithClassName('h6');\nvar CardBody = createWithBsPrefix('card-body');\nvar CardTitle = createWithBsPrefix('card-title', {\n  Component: DivStyledAsH5\n});\nvar CardSubtitle = createWithBsPrefix('card-subtitle', {\n  Component: DivStyledAsH6\n});\nvar CardLink = createWithBsPrefix('card-link', {\n  Component: 'a'\n});\nvar CardText = createWithBsPrefix('card-text', {\n  Component: 'p'\n});\nvar CardHeader = createWithBsPrefix('card-header');\nvar CardFooter = createWithBsPrefix('card-footer');\nvar CardImgOverlay = createWithBsPrefix('card-img-overlay');\nvar defaultProps = {\n  body: false\n};\nvar Card = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      bg = _ref.bg,\n      text = _ref.text,\n      border = _ref.border,\n      body = _ref.body,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"bg\", \"text\", \"border\", \"body\", \"children\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card');\n  var cardContext = useMemo(function () {\n    return {\n      cardHeaderBsPrefix: prefix + \"-header\"\n    };\n  }, [prefix]);\n  return /*#__PURE__*/React.createElement(CardContext.Provider, {\n    value: cardContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, prefix, bg && \"bg-\" + bg, text && \"text-\" + text, border && \"border-\" + border)\n  }), body ?\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(CardBody, null, children) : children));\n});\nCard.displayName = 'Card';\nCard.defaultProps = defaultProps;\nCard.Img = CardImg;\nCard.Title = CardTitle;\nCard.Subtitle = CardSubtitle;\nCard.Body = CardBody;\nCard.Link = CardLink;\nCard.Text = CardText;\nCard.Header = CardHeader;\nCard.Footer = CardFooter;\nCard.ImgOverlay = CardImgOverlay;\nexport default Card;","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\nimport { Rol } from \"../../roles/services\"\r\n\r\nexport type UserFilter = {\r\n  ci?: string\r\n  ciComplemento?: string\r\n  nombreCompleto?: string\r\n  username?: string\r\n  estado?: boolean\r\n  regionalId?: number\r\n}\r\n\r\nexport type User = {\r\n  id: number\r\n  username: string\r\n  estado: boolean\r\n  ciRaiz: number\r\n  ciComplemento: string\r\n  ci: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  nombreCompleto: string\r\n  roles: Rol[]\r\n  // roleNames: string[]\r\n  regionalId: number\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const UserService = {\r\n  buscar: (filter: UserFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<User>>('/usuarios', {\r\n      params: keysToUnderscore({\r\n        page,\r\n        filter\r\n      })\r\n    })\r\n  },\r\n  cargar: (userId: number) =>{\r\n    return apiClient.get<User>(`/usuarios/${userId}`)\r\n  },\r\n  registrar: (data: {\r\n    username: string\r\n    password: string\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: number\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n  }) => {\r\n    return apiClient.post('/usuarios', keysToUnderscore(data))\r\n  },\r\n  actualizar: (id: number, data: {\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: number\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n  }) => {\r\n    return apiClient.put(`/usuarios/${id}`, keysToUnderscore(data))\r\n  },\r\n  cambiarContrasena: (id: number, data: {oldPassword?: string, password: string}) => {\r\n    return apiClient.put(`/usuarios/${id}/cambiar-contrasena`, keysToUnderscore(data))\r\n  },\r\n  bloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/bloquear`)\r\n  },\r\n  desbloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/desbloquear`)\r\n  }\r\n}\r\n","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { Permiso } from \"./PermisoService\"\r\n\r\nexport type RolFilter = {\r\n  texto?: string,\r\n}\r\n\r\nexport type Rol = {\r\n  id: number,\r\n  name: string,\r\n  description: string,\r\n  permissionNames: string[]\r\n  permissions: Permiso[]\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const RolService = {\r\n  buscar: (filter?: RolFilter, page?: Page)=>{\r\n    return apiClient.get<PaginatedResponse<Rol>|Rol[]>('/roles', {\r\n      params: { filter, page }\r\n    })\r\n  },\r\n  cargar: (id: number)=>{\r\n    return apiClient.get<Rol>(`/roles/${id}`)\r\n  },\r\n  registrar: (data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.post<Rol>('roles', data)\r\n  },\r\n  actualizar: (id: number, data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.put<Rol>(`roles/${id}`, data)\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`roles/${id}`)\r\n  }\r\n}","import React, { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup, Spinner } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { RolService, Rol } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  selected?: Rol[],\r\n  onChange?: (roles: Rol[])=>void\r\n}\r\n\r\nexport const RolesCheckList = React.memo(({\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery(\"roles.buscar\", ()=>{\r\n    return RolService.buscar()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    // refetchOnMount: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = (buscar.data?.data || []) as Rol[]\r\n\r\n  const renderContent = ()=>{\r\n    if(buscar.isFetching){\r\n      return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de roles. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {roles.map((rol, index)=>{\r\n        return <ListGroup.Item key={rol.id} as=\"li\"\r\n          className={\"py-2 px-3 text-capitalize\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={rol.name}\r\n            checked={selected.some(rolChecked=>rolChecked.id == rol.id)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, rol] : selected.filter(rch=>rch.id != rol.id)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {renderContent()}\r\n  </div>\r\n})","import { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { Alert, Accordion, Button, Card, Col, Form, Row, Spinner } from 'react-bootstrap'\r\nimport { useForm, Controller } from 'react-hook-form'\r\nimport { AxiosError } from 'axios'\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query'\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { Regional } from \"../../../../commons/services\"\r\nimport { UserService, User, Rol } from \"../services\"\r\nimport { RolesCheckList } from './RolesCheckList'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { Permisos } from '../../../../commons/auth/constants'\r\nimport { useLoggedUser } from '../../../../commons/auth/hooks'\r\n\r\n\r\ntype Inputs = {\r\n  informacionPersonal: {\r\n    ci: string,\r\n    ciComplemento: string,\r\n    apellidoPaterno: string,\r\n    apellidoMaterno: string,\r\n    nombres: string\r\n  }\r\n  informacionUsuario: {\r\n    username: string,\r\n    password?: string,\r\n    passwordRepeat?: string,\r\n    roles: Rol[],\r\n    regional: Regional[]\r\n  }\r\n}\r\n\r\nexport const UserForm = () => {\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const { id } = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const schema = useMemo(()=> yup.object().shape({\r\n    informacionPersonal: yup.object().shape({\r\n      ci: yup.number().label(\"carnet de identidad\"),\r\n      ciComplemento: yup.lazy(value => value ? yup.string().label(\"'complemento'\").trim().length(2) : yup.string().nullable().optional()),\r\n      apellidoPaterno: yup.string().label(\"apellido paterno\").trim().when(\"apellidoMaterno\", {\r\n        is: (apellidoMaterno: string) => !apellidoMaterno,\r\n        then: yup.string().required(\"Debe proporcionar al menos un apellido\")\r\n      }),\r\n      apellidoMaterno: yup.string().label(\"apellido materno\").trim().when(\"apellidoPaterno\", {\r\n        is: (apellidoPaterno: string) => !apellidoPaterno,\r\n        then: yup.string().required(\"Debe proporcionar al menos un apellido\")\r\n      }),\r\n      nombres: yup.string().label(\"nombres\").trim().required().label(\"'Nombres'\"),\r\n    }, [[\"apellidoMaterno\", \"apellidoPaterno\"]]),\r\n    informacionUsuario: yup.object().shape(id ? {\r\n        roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n      } : {\r\n      username: yup.string().label(\"usuario\").required().min(6).max(16).matches(/[a-zA-Z0-9]*/),\r\n      password: yup.string().label(\"contraseña\").min(8).max(256).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\/()=?\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      passwordRepeat: yup.string().label(\"confirmar contraseña\").test(\"password-match\", \"Las contraseñas no coinciden\", function (value) {\r\n        const { parent: { password } } = this\r\n        return value === password\r\n      }),\r\n      regional: yup.array().label(\"regional\").length(1, \"Debe seleccionar una regional\"),\r\n      roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n    })\r\n  }), [])\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    trigger,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    mode: 'onBlur',\r\n    defaultValues: {\r\n      informacionUsuario: {\r\n        roles: [],\r\n        regional: []\r\n      }\r\n    }\r\n  })\r\n  const formErrors = formState.errors\r\n\r\n  const history = useHistory<{\r\n    user: User\r\n  }>()\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const queryKey = [\"usuarios.cargar\", id];\r\n  const cargar = useQuery(queryKey, () => {\r\n    return UserService.cargar(parseInt(id!))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.user\r\n  })\r\n\r\n  const guardar = useMutation(({informacionPersonal, informacionUsuario}: Inputs) => {\r\n    return id ? UserService.actualizar(parseInt(id), {\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: parseInt(informacionPersonal.ci),\r\n      ciComplemento: informacionPersonal.ciComplemento,\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombres: informacionPersonal.nombres\r\n    }) : UserService.registrar({\r\n      username: informacionUsuario.username,\r\n      password: informacionUsuario.password as string,\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: parseInt(informacionPersonal.ci),\r\n      ciComplemento: informacionPersonal.ciComplemento,\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombres: informacionPersonal.nombres\r\n    })\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      queryClient.invalidateQueries(\"usuarios.buscar\")\r\n      history.replace(`/iam/usuarios/${data.id}`, {\r\n        user: data\r\n      })\r\n    }\r\n  })\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n\r\n  const filterRegional = useCallback((regional: Regional)=>{\r\n    return loggedUser?.can(Permisos.REGISTRAR_USUARIOS) ? true : (regional.id == loggedUser?.regionalId)\r\n  }, [loggedUser])\r\n\r\n  const user = cargar.data?.data || history.location.state?.user\r\n\r\n  useEffect(()=>{\r\n    if(user && regionales.length) {\r\n      setValue(\"informacionPersonal\", {\r\n        ci: String(user.ciRaiz),\r\n        ciComplemento: user.ciComplemento,\r\n        apellidoPaterno: user.apellidoPaterno,\r\n        apellidoMaterno: user.apellidoMaterno,\r\n        nombres: user.nombres\r\n      })\r\n      setValue(\"informacionUsuario\", {\r\n        username: user.username,\r\n        roles: user.roles,\r\n        regional: [regionales.find(r=>r.id == user.id)!]\r\n      })\r\n    }\r\n  }, [user, regionales])\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      <h1 style={{ fontSize: \"2rem\" }}>Usuarios</h1>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Accordion className=\"mb-2\" defaultActiveKey=\"0\">\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header} className={[\"text-light\",\r\n              formErrors.informacionPersonal ? \"bg-danger\" : \"bg-primary\"\r\n            ].join(\" \")} eventKey=\"0\">\r\n              Información personal\r\n              </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"0\">\r\n              <Card.Body>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} xs={8} md={4}>\r\n                    <Form.Label title=\"Numero raiz del carnet de identidad\">Carnet de identidad</Form.Label>\r\n                    <Form.Control type=\"number\"\r\n                      isInvalid={!!formState.errors.informacionPersonal?.ci}\r\n                      {...register(\"informacionPersonal.ci\")}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.ci?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} xs={4} md={2}>\r\n                    <Form.Label title=\"Complemento del carnet de identiad\">Complemento</Form.Label>\r\n                    <Form.Control\r\n                      isInvalid={!!formErrors.informacionPersonal?.ciComplemento}\r\n                      {...register(\"informacionPersonal.ciComplemento\")}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.ciComplemento?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} lg={4}>\r\n                    <Form.Label>Apellido Paterno</Form.Label>\r\n                    <Form.Control\r\n                      isInvalid={!!formErrors.informacionPersonal?.apellidoPaterno}\r\n                      {...register(\"informacionPersonal.apellidoPaterno\")}\r\n                      onChange={(e)=>{\r\n                        register(\"informacionPersonal.apellidoPaterno\").onChange(e)\r\n                        formState.isSubmitted && trigger(\"informacionPersonal.apellidoMaterno\")\r\n                      }}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.apellidoPaterno?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} lg={4}>\r\n                    <Form.Label>Apellido Materno</Form.Label>\r\n                    <Form.Control\r\n                      isInvalid={!!formErrors.informacionPersonal?.apellidoMaterno}\r\n                      {...register(\"informacionPersonal.apellidoMaterno\")}\r\n                      onChange={(e)=>{\r\n                        register(\"informacionPersonal.apellidoPaterno\").onChange(e)\r\n                        formState.isSubmitted && trigger(\"informacionPersonal.apellidoMaterno\")\r\n                      }}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.apellidoMaterno?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} lg={4}>\r\n                    <Form.Label>Nombres</Form.Label>\r\n                    <Form.Control\r\n                      isInvalid={!!formState.errors.informacionPersonal?.nombres}\r\n                      {...register(\"informacionPersonal.nombres\")}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.nombres?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header} className={[\"text-light\", formErrors.informacionUsuario ? \"bg-danger\" : \"bg-primary\"].join(\" \")} eventKey=\"1\">\r\n              Informacion de usuario\r\n              </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n              <Card.Body>\r\n                <Form.Row>\r\n                  <Form.Group controlId=\"username\" as={Col} md={4}>\r\n                    <Form.Label >Usuario</Form.Label>\r\n                    <Form.Control\r\n                      disabled={!!id}\r\n                      isInvalid={!!formState.errors.informacionUsuario?.username}\r\n                      {...register(\"informacionUsuario.username\")}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.username?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  {id ? null : <><Form.Group as={Col} md={4}>\r\n                    <Form.Label>Contraseña</Form.Label>\r\n                    <Form.Control type=\"password\"\r\n                      isInvalid={!!formState.errors.informacionUsuario?.password}\r\n                      {...register(\"informacionUsuario.password\")}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.password?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} md={4}>\r\n                    <Form.Label>Confirmar contraseña</Form.Label>\r\n                    <Form.Control type=\"password\"\r\n                      isInvalid={!!formState.errors.informacionUsuario?.passwordRepeat}\r\n                      {...register(\"informacionUsuario.passwordRepeat\", {\r\n                        required: { value: true, message: \"Este campo es requerido\" },\r\n                        validate: {\r\n                          matchPassword: (value) => value === watch('informacionUsuario.password') || \"Las contraseñas no coinciden\"\r\n                        }\r\n                      })}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.passwordRepeat?.message}</Form.Control.Feedback>\r\n                  </Form.Group></>}\r\n                </Form.Row>\r\n                <Form.Group>\r\n                  <Form.Label>Regional</Form.Label>\r\n                  <Controller\r\n                    name=\"informacionUsuario.regional\"\r\n                    control={control}\r\n                    render={({ field, fieldState }) => {\r\n                      return <RegionalesTypeahead\r\n                        id=\"usuario/regionales-typeahead\"\r\n                        onLoad={setRegionales}\r\n                        isInvalid={!!fieldState.error}\r\n                        feedback={fieldState.error?.message}\r\n                        filterBy={filterRegional}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Row>\r\n                  <Form.Group as={Col}>\r\n                    <Form.Label>Roles</Form.Label>\r\n                    <Controller\r\n                      name=\"informacionUsuario.roles\"\r\n                      control={control}\r\n                      render={({ field, fieldState }) => {\r\n                        return <><RolesCheckList\r\n                          isInvalid={!!fieldState.error}\r\n                          onChange={field.onChange}\r\n                          selected={field.value}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                      }}\r\n                    />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n      </Accordion>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Button, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { UserService } from '../services'\r\nimport { useLoggedUser } from '../../../../commons/auth'\r\n\r\ntype Inputs = {\r\n  oldPassword: string\r\n  password: string\r\n  passwordRepeat: string\r\n}\r\n\r\nexport const CambiarContrasenaForm = ()=>{\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const history = useHistory()\r\n\r\n  const user = useLoggedUser()\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      oldPassword: !id ? yup.string().label(\"antigüa contraseña\").trim().required() : yup.mixed().notRequired(),\r\n      password: yup.string().label(\"nueva contraseña\").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      passwordRepeat: yup.string().label(\"repita la nueva contraseña\").oneOf([yup.ref(\"password\")], \"Las contraseñas no coinciden\")\r\n    })\r\n  }, [])\r\n\r\n  const {\r\n    formState,\r\n    handleSubmit,\r\n    register\r\n  } = useForm<Inputs>({\r\n    mode: 'onBlur',\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      oldPassword: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\"\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((data: Inputs) =>{\r\n    const parsedId = parseInt(id)\r\n    return UserService.cambiarContrasena(isNaN(parsedId) ? user!.id : parsedId, {\r\n      password: data.password,\r\n      oldPassword: data.oldPassword\r\n    })\r\n  }, {\r\n    onSuccess: ({data})=>{\r\n      // history.replace(\"/iam/usuarios\");\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors;\r\n\r\n  return <Form onSubmit={handleSubmit((data)=>{\r\n    guardar.mutate(data)\r\n  })}>\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Cambiar contraseña</h1>\r\n    {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n      {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n    </Alert> : null}\r\n    {!id ? <Form.Group>\r\n      <Form.Label>Antigüa contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.oldPassword}\r\n        {...register(\"oldPassword\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.oldPassword?.message}</Form.Control.Feedback>\r\n    </Form.Group> : null}\r\n    <Form.Group>\r\n      <Form.Label>Nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.password}\r\n        {...register(\"password\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.password?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Form.Group>\r\n      <Form.Label>Repita la nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.passwordRepeat}\r\n        {...register(\"passwordRepeat\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.passwordRepeat?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Button type=\"submit\">\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      Guardar\r\n    </Button>\r\n\r\n  </Form>\r\n}","import { Permisos, User } from \"../../../../commons/auth\";\r\n\r\nexport const UsuarioPolicy = {\r\n  index: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_USUARIOS,\r\n      Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,\r\n      Permisos.REGISTRAR_USUARIOS,\r\n      Permisos.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  register: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.REGISTRAR_USUARIOS,\r\n      Permisos.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  edit: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.EDITAR_USUARIOS,\r\n      Permisos.EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  view: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_USUARIOS,\r\n      Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  changePassword: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.CAMBIAR_CONTRASEÑA,\r\n      Permisos.CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  disable: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.BLOQUEAR_USUARIOS,\r\n      Permisos.BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  enable: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.DESBLOQUEAR_USUARIOS,\r\n      Permisos.DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n}","import { Button, Col, Form } from \"react-bootstrap\"\r\nimport { useForm, Controller } from \"react-hook-form\"\r\nimport { UserFilter as Filter } from \"../services\"\r\n\r\ntype Inputs = {\r\n  numCi: string\r\n  compCi: string\r\n  nombre: string\r\n  username: string\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const UserFilterForm = (props: Props) => {\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>()\r\n  return <Form onSubmit={handleSubmit((data) => {\r\n    const filter: Filter = {}\r\n    if(data.numCi) filter.ci = data.numCi\r\n    if(data.compCi) filter.ciComplemento = data.compCi\r\n    if(data.nombre) filter.nombreCompleto = data.nombre\r\n    if(data.username) filter.username = data.username\r\n    props.onFilter(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4} lg={3}>\r\n        <Form.Label>Nº Carnet</Form.Label>\r\n        <Form.Control {...register(\"numCi\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={2} lg={1}>\r\n        <Form.Label>Comp. Carnet</Form.Label>\r\n        <Form.Control {...register(\"compCi\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={6} lg={8}>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control {...register(\"nombre\")} />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm=\"6\">\r\n        <Form.Label>Nombre de usuario</Form.Label>\r\n        <Form.Control {...register(\"username\")} />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { User, UserService } from \"../services\"\r\nimport { UsuarioPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  user: User\r\n}\r\nexport const RowOptions = ({user}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cambiarEstado = useMutation(()=>{\r\n    return user.estado ? UserService.bloquear(user.id) : UserService.desbloquear(user.id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(\"usuarios.buscar\", (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.map((u: any)=>{\r\n              return u == user ? {\r\n                ...u,\r\n                estado: !user.estado\r\n              } : {...u}\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(cambiarEstado.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(cambiarEstado.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: cambiarEstado.error as any\r\n      })\r\n    }\r\n  }, [cambiarEstado.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-users-${user.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.view}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Ver</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.edit}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: { user }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.changePassword}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/cambiar-contrasena`,\r\n          state: { user }\r\n        }}>Cambiar contraseña</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(loggedUser)=>user.estado ? UsuarioPolicy.disable(loggedUser) : UsuarioPolicy.enable(loggedUser)}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n            cambiarEstado.mutate()\r\n        }}>{user.estado ? \"Bloquear\" : \"Desbloquear\"}</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useMemo} from \"react\"\r\nimport { Button, Collapse, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery } from \"react-query\"\r\nimport { FaSync, FaFilter, FaUserPlus } from \"react-icons/fa\"\r\nimport { Page } from \"../../../../commons/services\"\r\nimport { Pagination } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Permisos } from \"../../../../commons/auth/constants\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { UserService, UserFilter } from \"../services\"\r\nimport { UsuarioPolicy } from \"../policies\"\r\nimport { UserFilterForm } from \"./UserFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\n\r\n\r\nexport const UserIndex = ()=>{\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const defaultFilter = useMemo(()=>{\r\n    const filter: UserFilter =  {}\r\n    if(loggedUser?.can(Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO, false)){\r\n      filter.regionalId = loggedUser.regionalId\r\n    }\r\n    return filter\r\n  }, [loggedUser])\r\n\r\n  const [filter, setFilter] = useState<UserFilter>(defaultFilter)\r\n\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const queryKey = \"usuarios.buscar\"\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UserService.buscar(filter, page)\r\n  }, {\r\n    enabled: UsuarioPolicy.view(loggedUser),\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  // const didMountRef = useRef(false)\r\n  // useEffect(()=>{\r\n  //   if(!didMountRef.current) {\r\n  //     didMountRef.current = true\r\n  //     return\r\n  //   }\r\n  //   if(UsuarioPolicy.view(loggedUser)) buscar.refetch()\r\n  // }, [page, filter, loggedUser])\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.data){\r\n      const records = buscar.data.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((user, index)=>{\r\n        return <tr key={user.id}>\r\n          <td>{index + 1}</td>\r\n          <td>{user.ci} - {user.nombreCompleto}</td>\r\n          <td>{user.username}</td>\r\n          <td>{user.estado ? \"Activo\" : \"Bloqueado\"}</td>\r\n          <td>\r\n            <RowOptions user={user} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Usuarios</h2>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={UsuarioPolicy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              showFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={UsuarioPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`/iam/usuarios/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaUserPlus className=\"mr-2\" />Nuevo\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={UsuarioPolicy.view}\r\n    >\r\n      <Collapse in={filterFormVisible}>\r\n        <div>\r\n          <UserFilterForm onFilter={(filter)=>{\r\n            setFilter({...filter, ...defaultFilter})\r\n          }} />\r\n        </div>\r\n      </Collapse>\r\n      <div className=\"d-flex\">\r\n        <div className=\"ml-auto mb-2\">          \r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Propietario</th>\r\n            <th>Usuario</th>\r\n            <th>Estado</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <Row>\r\n        <Col>\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        </Col>\r\n        <Col>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Button, Col, Form, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { useQuery } from 'react-query'\r\nimport { UserService, User } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {id} = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const cargar = useQuery([\"cargarUsuario\", id], ()=>{\r\n    return UserService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const user = state?.user || cargar.data?.data \r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\">Carnet de identidad</th>\r\n          <td>: {user?.ci}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Nombre completo</th>\r\n          <td>: {user?.nombreCompleto}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.estado ? 'Activo' : user?.estado === false ? 'Bloqueado' : ''}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado el</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado el</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td className=\"text-capitalize\">: {user?.roles?.map(r => r.name)}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {user ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\">Bloquear</Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { apiClient } from \"../../../../commons/services\"\r\n\r\nexport type Permiso = string\r\n\r\nexport const PermisoService = {\r\n  buscar: ()=>{\r\n    return apiClient.get<Permiso[]>('/permisos')\r\n  }\r\n}","import { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup, Spinner } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { PermisoService, Permiso } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  selected?: Permiso[],\r\n  onChange?: (permisos: Permiso[])=>void\r\n}\r\nexport const PermisoCheckList = ({\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery(\"permisos.buscar\", ()=>{\r\n    return PermisoService.buscar()\r\n  }, {\r\n    // refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const permisos = (buscar.data?.data || []) as Permiso[]\r\n\r\n  const renderContent = ()=>{\r\n    if(buscar.isFetching){\r\n      return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de permisos. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {permisos.map((permiso, index)=>{\r\n        return <ListGroup.Item key={permiso} as=\"li\"\r\n          className={\"py-2 px-3 text-capitalize\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={permiso}\r\n            checked={selected.some(s=>s == permiso)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, permiso] : selected.filter(s=>s != permiso)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {renderContent()}\r\n  </div>\r\n}","import { useMemo, useEffect } from 'react'\r\nimport { Button, Form, Col, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { AxiosError } from 'axios'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { useModal } from '../../../../commons/reusable-modal'\r\nimport {PermisoCheckList} from './PermisoCheckList'\r\nimport { RolService, Rol, Permiso } from '../services'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: Permiso[]\r\n}\r\nexport const RolForm = () => {\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      name: yup.string().label(\"nombre\").trim()/*.lowercase()*/.required(\"El nombre es requerido\").max(50, \"Ha excedido el limite de $max caracteres\"),\r\n      description: yup.string().label(\"descripcion\").max(250, \"Ha excedido el limite de $max caracteres\"),\r\n      permissions: yup.array().label(\"permisos\").min(1, \"Debe marcar al menos 1 permiso\")\r\n    })\r\n  }, [])\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState,\r\n    reset,\r\n    setError\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    rol?: Rol,\r\n    ignoreAuthorization?: boolean\r\n  }>()\r\n\r\n  const queryLoader = useModal('queryLoader')\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cargar = useQuery([\"fetchRole\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.rol,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const guardar = useMutation((data: Inputs)=>{\r\n    if(id){\r\n      return RolService.actualizar(parseInt(id), {\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n    else{\r\n      return RolService.registrar({\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      queryClient.invalidateQueries(\"roles.buscar\")\r\n      history.replace(`/iam/roles/${data.id}`, {\r\n        rol: data,\r\n        ignoreAuthorization: true\r\n      })\r\n    },\r\n    onError: (error: AxiosError) => {\r\n      if(error!.response?.status !== 422)\r\n        queryLoader.open({\r\n          state: \"error\",\r\n          error\r\n        })\r\n    }\r\n  })\r\n  const rol = cargar.data?.data || history.location.state?.rol\r\n  const formErrors = formState.errors\r\n\r\n  useEffect(()=>{\r\n    if(rol) {\r\n      reset({\r\n        name: rol.name,\r\n        description: rol.description,\r\n        permissions: rol.permissionNames,\r\n      })\r\n    }\r\n  }, [rol])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isFetching){\r\n      queryLoader.open({\r\n        state: \"loading\",\r\n      })\r\n    }\r\n  }, [cargar.isFetching])\r\n\r\n  useEffect(()=>{\r\n    if(guardar.error){\r\n      const error = (guardar.error as AxiosError)\r\n      if(error.response?.status == 422){\r\n        const { errors } = error.response.data\r\n        if(errors.name) setError(\"name\", {message: errors.name})\r\n        if(errors.description) setError(\"description\", {message: errors.description})\r\n        if(errors.permissions) setError(\"permissions\", {message: errors.permissions})\r\n      }      \r\n    }\r\n  }, [guardar.error])\r\n\r\n  return <>\r\n    <Form noValidate validated={formState.isValid} onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      <h1 style={{ fontSize: \"2rem\" }}>Roles</h1>\r\n      <Form.Group>\r\n        <Form.Label >Nombre</Form.Label>\r\n        <Form.Control \r\n          isInvalid={!!formState.errors.name}\r\n          {...register(\"name\")}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.name?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Descripcion</Form.Label>\r\n        <Form.Control\r\n          as=\"textarea\"\r\n          isInvalid={!!formErrors.description}\r\n          {...register(\"description\")}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.description?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Permisos</Form.Label>\r\n        <Controller\r\n          name=\"permissions\"\r\n          control={control}\r\n          render={({ field, fieldState }) => {\r\n            return <><PermisoCheckList\r\n              isInvalid={!!fieldState.error}\r\n              onChange={field.onChange}\r\n              // onBlur={field.onBlur}\r\n              selected={field.value}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n          }}\r\n        />\r\n\r\n      </Form.Group>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Registrar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (texto: string) => void \r\n}\r\nexport const RolFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{texto: string}>()\r\n  return <Form onSubmit={handleSubmit(({texto})=>{\r\n    props.onSearch(texto)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"texto\" srOnly>Texto</Form.Label>\r\n        <Form.Control type=\"search\" id=\"texto\" style={{minWidth: \"10rem\"}} {...register(\"texto\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { Permisos, User } from \"../../../../commons/auth\";\r\n\r\nexport const RolPolicy = {\r\n  index: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_ROLES,\r\n      Permisos.REGISTRAR_ROLES,\r\n    ])\r\n  },\r\n  register: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.REGISTRAR_ROLES,\r\n    ])\r\n  },\r\n  edit: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.EDITAR_ROLES,\r\n    ])\r\n  },\r\n  view: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_ROLES,\r\n    ])\r\n  },\r\n  delete: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.ELIMINAR_ROLES\r\n    ])\r\n  },\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient, QueryKey } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Rol, RolService } from \"../services\"\r\nimport { RolPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  rol: Rol\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({rol, queryKey}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return RolService.eliminar(id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.invalidateQueries(\"roles.buscar\",{inactive: true})\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.filter((u: any)=>{\r\n              return u !== rol\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(eliminar.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(eliminar.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: eliminar.error as any\r\n      })\r\n    }\r\n  }, [eliminar.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-roles-${rol.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={RolPolicy.view}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}`,\r\n          state: {\r\n            rol\r\n          }\r\n        }} >Ver</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={RolPolicy.edit}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            rol\r\n          }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={RolPolicy.delete}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n          if(window.confirm(\"Esta accion es irreversible, ¿Esta seguro de continuar?\")){\r\n            eliminar.mutate(rol.id)\r\n          }\r\n        }}>Eliminar</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosPromise, AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Alert, Dropdown, ButtonGroup, Button, Form, Modal, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { FaSync, FaFilter, FaPlus } from \"react-icons/fa\"\r\nimport { Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { RolFilterForm } from \"./RolFilterForm\"\r\nimport { Pagination, VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { Rol, RolService, RolFilter } from \"../services\"\r\nimport { RolPolicy } from \"../policies\"\r\nimport { RowOptions } from \"./RowOptions\"\r\n\r\nexport const RolIndex = ()=>{\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<RolFilter>({})\r\n\r\n  const queryKey = [\"roles.buscar\", page, filter]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RolService.buscar(filter, page) as AxiosPromise<PaginatedResponse<Rol>>\r\n  }, {\r\n    enabled: RolPolicy.view(loggedUser),\r\n    // refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if(buscar.data){\r\n      const records = buscar.data.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((rol, index)=>{\r\n        return <tr key={rol.id}>\r\n          <td>{index + 1}</td>\r\n          <td className=\"text-capitalize\">{rol.name}</td>\r\n          <td>{rol.description}</td>\r\n          <td>\r\n            <RowOptions rol={rol} queryKey={queryKey} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Roles</h2>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={RolPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`/iam/roles/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaPlus className=\"mr-2\" />Nuevo\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={RolPolicy.view}\r\n    >\r\n      <Row>\r\n        <Col className=\"mb-2\">\r\n          <RolFilterForm onSearch={(filter)=>{\r\n            setFilter({texto: filter})\r\n          }} />\r\n        </Col>\r\n        <Col className=\"mb-2\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n              <span>Mostrar</span>\r\n              <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n                const value = e.target.value\r\n                setPage((page) => ({\r\n                  current: 1,\r\n                  size: parseInt(value)\r\n                }))\r\n              }}>\r\n                <option value={10}>10</option>\r\n                <option value={20}>20</option>\r\n                <option value={30}>30</option>\r\n                <option value={50}>50</option>\r\n                <option value={100}>100</option>\r\n              </Form.Control>\r\n              <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Nombre</th>\r\n            <th>Descripcion</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <div className=\"row\">\r\n        <Col>\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        </Col>\r\n        <Col>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </Col>\r\n      </div>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import { useEffect, useRef } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Button, Col, Form, Modal, Spinner, Table } from 'react-bootstrap'\r\nimport { RolService, Rol } from '../services'\r\nimport { useQuery, useMutation } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation, useParams } from 'react-router-dom'\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\n\r\n\r\nexport const RolView = ()=>{\r\n  const { pathname, state: locationState } = useLocation<{\r\n    rol?: Rol\r\n  }>()\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const queryLoader = useModal(\"queryLoader\")\r\n\r\n  const cargar = useQuery([\"cargar\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !locationState?.rol,\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: () => {\r\n      queryLoader.close()\r\n    },\r\n    onError: (error) => {\r\n      queryLoader.open({\r\n        state: \"error\",\r\n        error\r\n      })\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation(()=>{\r\n    return RolService.eliminar(parseInt(id))\r\n  }, {\r\n    onSuccess: () => {\r\n      queryLoader.close()\r\n    },\r\n    onError: (error) => {\r\n      queryLoader.open({\r\n        state: error,\r\n        error\r\n      })\r\n    }\r\n  })\r\n\r\n  const rol = cargar.data?.data || locationState?.rol\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isFetching){\r\n      queryLoader.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n  }, [cargar.isFetching])\r\n\r\n  \r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{rol?.name}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{rol?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={rol?.description ? \"\" : \"bg-light\"}>{rol?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{rol?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{rol?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${rol?.permissionNames.length ? \"\" : \"bg-light\"}`}>{\r\n              rol?.permissionNames.length ? \r\n              <ul className=\"d-inline-block\">{rol?.permissionNames.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {rol ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            rol\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\" onClick={()=>{\r\n          queryLoader.open({\r\n            state: \"loading\"\r\n          })\r\n          eliminar.mutate()\r\n        }}>\r\n          {eliminar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : null}\r\n          Eliminar\r\n        </Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport { ProtectedRoute } from '../../commons/auth/components'\r\nimport { useLoggedUser } from '../../commons/auth/hooks'\r\nimport {UserIndex, UserView, UserForm, CambiarContrasenaForm } from './usuarios/components'\r\nimport {RolIndex, RolView, RolForm} from './roles/components'\r\nimport { UsuarioPolicy } from './usuarios/policies'\r\nimport { RolPolicy } from './roles/policies'\r\nimport { Image } from 'react-bootstrap'\r\n\r\nexport const IamApp = ()=>{\r\n  const { url } = useRouteMatch()\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n    if(UsuarioPolicy.index(loggedUser)) {\r\n      items.push({\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n      })\r\n    }\r\n    if(RolPolicy.index(loggedUser)){\r\n      items.push(\r\n        {\r\n          id: \"roles\",\r\n          icon: <FaTasks />,\r\n          path: `${url}/roles`,\r\n          title: \"Roles\"\r\n        }\r\n      )\r\n    }\r\n    return items\r\n  }, [loggedUser])\r\n\r\n  return <SidebarLayout \r\n    sidebar={{\r\n        header: <div className=\"d-flex justify-content-center\"><Image src=\"/logo-lg.png\" /></div>,\r\n        items: sidebarItems\r\n    }}\r\n  >\r\n    <Switch>\r\n      {/* <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route> */}\r\n      <ProtectedRoute exact path={`${url}/usuarios`}\r\n        authorize={UsuarioPolicy.index}\r\n      >\r\n        <UserIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/usuarios/registrar`, `${url}/usuarios/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/usuarios/registrar` ? UsuarioPolicy.register(user) : UsuarioPolicy.edit(user)}\r\n      >\r\n        <UserForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id/cambiar-contrasena`}\r\n        authorize={UsuarioPolicy.changePassword}\r\n      >\r\n        <CambiarContrasenaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/cambiar-contrasena`}>\r\n        <CambiarContrasenaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id`}\r\n        authorize={UsuarioPolicy.view}\r\n      >\r\n        <UserView />\r\n      </ProtectedRoute>\r\n      \r\n      <ProtectedRoute exact path={`${url}/roles`}\r\n        authorize={RolPolicy.index}\r\n      >\r\n        <RolIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/roles/registrar`, `${url}/roles/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/roles/registrar` ? RolPolicy.register(user) : RolPolicy.edit(user)}\r\n      >\r\n        <RolForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/roles/:id`}\r\n        authorize={RolPolicy.view}\r\n      >\r\n        <RolView />\r\n      </ProtectedRoute>\r\n    </Switch>\r\n  \r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp"],"sourceRoot":""}