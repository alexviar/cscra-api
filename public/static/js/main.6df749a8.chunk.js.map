{"version":3,"sources":["commons/services/authClient.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","apps/clinica/settings/components/Settings.tsx","commons/components/PDFViewer.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/apiClient.ts","commons/services/index.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","data","result","keysToCamel","JSON","parse","console","log","e","error","defaults","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","SidebarItem","item","to","path","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","overflow","current","minimum","maximum","total","pageItems","i","push","Pagination","Item","active","onClick","onClickItem","First","onClickFirst","Prev","onClickPrev","Next","onClickNext","Last","onClickLast","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","apiClient","get","filter","numero_patronal","first","ListaMoraService","page","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","onChange","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","Math","max","min","trunc","required","validation","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","EspecialidadesService","undefined","archivo","separador","formato","formData","FormData","append","name","EspecialidadesFilter","onSearch","htmlFor","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","show","Modal","centered","onHide","Header","Body","column","File","feedback","maxLength","Check","inline","label","Footer","form","EspecialidadesIndex","importModalRef","useRef","buscarEspecialidades","ButtonGroup","split","length","especialidad","Settings","hash","useLocation","Tab","defaultActiveKey","transition","ListGroup","eventKey","Content","Pane","PDFViewer","height","PDFObject","embed","fallbackLink","ImperativeModal","useImperativeHandle","Dm11Viewer","setUrl","imperativeModalRef","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","solicitud","numero","fecha","matricula_asegurado","doctor","proveedor","url_dm11","FcDebt","GenIcon","nombreCompleto","apellidoPaterno","apellidoMaterno","nombres","AseguradoChooser","asegurados","asegurado","onSelect","matricula","estado","AseguradosService","AseguradoCard","useFormContext","trigger","aseguradoChooserRef","buscar","fechaExtinsion","empleador","aportes","Card","Accordion","Collapse","md","InputGroup","FormControl","Append","MedicosService","source","CancelToken","promise","nombre_completo","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryClient","useQueryClient","isIdle","isStale","Date","now","flip","options","labelKey","medico","trim","useCache","filterBy","maxResults","minLength","newQuery","cancelQueries","renderMenuItemChildren","ProveedorService","ProveedoresTypeahead","queryKey","subtitle","PrestacionesService","PrestacionesTypeahead","prestacion","PrestacionesSolicitadasCard","count","setCount","control","useFieldArray","fields","remove","prestacionSolicitada","render","field","prestacionesContratadas","some","pc","onBlur","RegionalesService","RegionalesTypeahead","setOptions","SolicitudAtencionExternaForm","formMethods","prestacionesSolicitadas","registrar","medicoId","prestacion_id","prestacionId","nota","fieldState","searchText","promptText","regional","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","search","useDispatch","useMemo","substr","setFields","preventDefault","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","scope","UsersPagination","RolesList","roles","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","p","useHistory","location","fetchRoles","fetchPermissions","d","checked","defaultChecked","useParams","getValues","saveRole","format","validate","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","lg","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","pattern","matchPassword","RolesCheckList","status","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","zIndex","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","String","prototype","replaceAll","str","arguments","newStr","Object","toString","call","toLowerCase","this","replace","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","isArray","Array","isObject","o","n","keys","forEach","k","s","$1","toUpperCase"],"mappings":"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","file":"static/js/main.6df749a8.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [(data)=>{\r\n    try{\r\n      const result = keysToCamel(JSON.parse(data))\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n    catch(e){\r\n      console.error(\"OnTransformResponse\", data, e)\r\n    }\r\n    return data\r\n  }]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: MenuItem[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    <Link to={item.path} \r\n      className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n      style={{\r\n        padding: \".5rem 1rem\"\r\n      }}\r\n      key={item.id}>\r\n        {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n    </Link>\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\" style={{overflow: \"auto\"}}>\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores\", {\r\n      params: {\r\n        filter: {\r\n          numero_patronal: numeroPatronal\r\n        },\r\n        first: true\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>Nº Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          minimum={Math.max(1, page.current - 4)}\r\n          maximum={Math.min(Math.trunc((total - page.size) / page.size) + 1, page.current + 4)}\r\n          total={((total - page.size) / page.size) + 1}\r\n          onClickFirst={() => setPage((page) => ({ ...page, current: 1 }))}\r\n          onClickPrev={() => setPage((page) => ({ ...page, current: page.current - 1 }))}\r\n          onClickItem={(current) => setPage((page) => ({ ...page, current: page.current }))}\r\n          onClickNext={() => setPage(page => ({ ...page, current: page.current + 1 }))}\r\n          onClickLast={() => setPage(page => ({ ...page, current: ((total - page.size) / page.size) + 1 }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule } from \"react-hook-form\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): RegisterOptions[\"required\"] => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(\"XXX-XXXXX\")\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\ntype Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\nexport const EspecialidadesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<{\r\n      meta: {\r\n        total: number\r\n      },\r\n      records: Especialidad[]\r\n    }>(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        minimum={Math.max(1, page.current - 4)}\r\n        maximum={Math.min(Math.trunc((total - page.size) / page.size) + 1, page.current + 4)}\r\n        total={((total - page.size) / page.size) + 1}\r\n        onClickFirst={() => setPage((page) => ({ ...page, current: 1 }))}\r\n        onClickPrev={() => setPage((page) => ({ ...page, current: page.current - 1 }))}\r\n        onClickItem={(current) => setPage((page) => ({ ...page, current: page.current }))}\r\n        onClickNext={() => setPage(page => ({ ...page, current: page.current + 1 }))}\r\n        onClickLast={() => setPage(page => ({ ...page, current: ((total - page.size) / page.size) + 1 }))}\r\n      />\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import React from \"react\"\r\nimport { ListGroup, Tab, Col, Row } from \"react-bootstrap\"\r\nimport { useLocation } from \"react-router\"\r\nimport { EspecialidadesIndex } from \"../../especialidades/components/EspecialidadesIndex\"\r\n\r\nexport const Settings = () => {\r\n  const {hash} = useLocation()\r\n  return <>\r\n    <h1 style={{fontSize: \"2rem\"}}>Configuración</h1>\r\n      <Row className=\"mt-2 flex-nowrap\">\r\n        <Tab.Container defaultActiveKey={hash || \"#especialidades\"} transition={false} >\r\n          <Col className=\"pr-0\" sm={\"auto\"}>\r\n            <ListGroup>\r\n              <ListGroup.Item eventKey={\"#especialidades\"}\r\n              >Especialidades</ListGroup.Item>\r\n              <ListGroup.Item eventKey={\"#prestaciones\"}\r\n              >Prestaciones</ListGroup.Item>\r\n            </ListGroup>\r\n          </Col>\r\n          <Tab.Content as={Col}>\r\n            <Tab.Pane eventKey={\"#especialidades\"}>\r\n              <EspecialidadesIndex />\r\n            </Tab.Pane>\r\n            <Tab.Pane eventKey={\"#prestaciones\"}></Tab.Pane>\r\n          </Tab.Content>\r\n        </Tab.Container>\r\n      </Row>\r\n  </>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  matricula_asegurado: number,\r\n  doctor: string,\r\n  proveedor: string,\r\n  url_dm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.matricula_asegurado}</td>\r\n        <td>{solicitud.doctor}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n              !!solicitud.url_dm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.url_dm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrícula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        minimum={Math.max(1, page.current - 4)}\r\n        maximum={Math.min(Math.trunc((total - page.size) / page.size) + 1, page.current + 4)}\r\n        total={((total - page.size) / page.size) + 1}\r\n        onClickFirst={() => setPage((page) => ({ ...page, current: 1 }))}\r\n        onClickPrev={() => setPage((page) => ({ ...page, current: page.current - 1 }))}\r\n        onClickItem={(current) => setPage((page) => ({ ...page, current: page.current }))}\r\n        onClickNext={() => setPage(page => ({ ...page, current: page.current + 1 }))}\r\n        onClickLast={() => setPage(page => ({ ...page, current: ((total - page.size) / page.size) + 1 }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (id: string) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <td style={{width: 1}}>#</td>\r\n            <td>Matricula</td>\r\n            <td>Nombre completo</td>\r\n            <td>Estado</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {props.asegurados.map((asegurado, index)=>{\r\n            return <tr onClick={()=>{\r\n              props.onSelect(asegurado.id)\r\n            }}>\r\n              <td>{index+1}</td>\r\n              <td>{asegurado.matricula}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado}</td>\r\n            </tr>\r\n          })}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  estado: string,\r\n  fechaExtinsion: string,\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    aportes: string\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<Asegurado[]>(\"asegurados/buscar-matricula\", {\r\n      params: {\r\n        matricula\r\n      }\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useController } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\n\r\nexport type AseguradoInputs = {\r\n  asegurado: {\r\n    id: string,\r\n    matricula: string,\r\n    nombreCompleto: string\r\n    estado: string,\r\n    fechaExtinsion: string,\r\n    empleador: {\r\n      id: string,\r\n      numeroPatronal: string,\r\n      nombre: string,\r\n      estado: string,\r\n      aportes: string\r\n    }\r\n  },\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    trigger,\r\n    setValue,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: records}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        setValue(\"asegurado.id\", asegurado.id)\r\n        setValue(\"asegurado.nombreCompleto\", nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres))\r\n        setValue(\"asegurado.estado\", asegurado.estado)\r\n        setValue(\"asegurado.fechaExtinsion\", asegurado.fechaExtinsion)\r\n        setValue(\"asegurado.empleador.numeroPatronal\", asegurado.empleador.numeroPatronal)\r\n        setValue(\"asegurado.empleador.nombre\", asegurado.empleador.nombre)\r\n        setValue(\"asegurado.empleador.estado\", asegurado.empleador.estado)\r\n        setValue(\"asegurado.empleador.aportes\", asegurado.empleador.aportes)\r\n        trigger(\"asegurado\")\r\n      }\r\n      else if(records.length > 1) {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    setValue(\"asegurado.id\", \"\")\r\n    setValue(\"asegurado.nombreCompleto\", \"\")\r\n    setValue(\"asegurado.estado\", \"\")\r\n    setValue(\"asegurado.fechaExtinsion\", \"\")\r\n    setValue(\"asegurado.empleador.numeroPatronal\", \"\")\r\n    setValue(\"asegurado.empleador.nombre\", \"\")\r\n    setValue(\"asegurado.empleador.estado\", \"\")\r\n    setValue(\"asegurado.empleador.aportes\", \"\")\r\n  }, [matricula])\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col md={4}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\" {...register(\"asegurado.matricula\")} />\r\n              <InputGroup.Append>\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  buscar.refetch()\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.nombreCompleto}\r\n              {...register(\"asegurado.nombreCompleto\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha ext.</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n      {/* </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n  <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Empleador\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body> */}\r\n      <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.numeroPatronal}\r\n              {...register(\"asegurado.empleador.numeroPatronal\")}\r\n            />\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.nombre}\r\n              {...register(\"asegurado.empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.estado}\r\n              {...register(\"asegurado.empleador.estado\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.nombre}\r\n              {...register(\"asegurado.empleador.aportes\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          asegurados={buscar.data?.data || []}\r\n          onSelect={(id: string)=>{\r\n            setValue(\"asegurado.id\", id)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const buscar = useQuery([\"buscarMedico\", query], ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    filterBy={()=>true}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      console.log(\"Query\", newQuery)\r\n      queryClient.cancelQueries([\"buscarMedico\", query])\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = Empresa | Medico\r\n\r\nexport const ProveedorService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Proveedor>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const queryKey = [\"buscarProveedor\", query]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return ProveedorService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if((proveedor as Medico).especialidad){\r\n        const medico = (proveedor as Medico)\r\n        const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    filterBy={()=>true}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      console.log(\"Query\", newQuery)\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if((proveedor as Medico).especialidad){\r\n        const medico = (proveedor as Medico)\r\n        title = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = (proveedor as Empresa).nombre\r\n        subtitle = \"empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/especialidades/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const queryKey = [\"buscarPrestaciones\", query]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { createIndexSignature } from \"typescript\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number,\r\n    nota: string,\r\n  }[],\r\n  proveedor: {\r\n    id: number,\r\n    nombre: string,\r\n    prestacionesContratadas: {\r\n      id: number\r\n    }[]\r\n  }\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const { fields, append, remove } = useFieldArray<PrestacionesSolicitadasInputs>({\r\n    name: \"prestacionesSolicitadas\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"2\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Nombre</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field }) => {\r\n                    return <PrestacionesTypeahead\r\n                      id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                      filterBy={(prestacion) => {\r\n                        const proveedor = watch(\"proveedor\")\r\n                        return !proveedor || proveedor.prestacionesContratadas.some(pc => pc.id == prestacion.id)\r\n                      }}\r\n                      onBlur={field.onBlur}\r\n                      onChange={(prestacion) => {\r\n                        field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                      }}\r\n                    />\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const, {\r\n                  required: rules.required()\r\n                })} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data})=>{\r\n      setOptions(data)\r\n    }\r\n  })\r\n\r\n  return <AsyncTypeahead flip\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import React, { ComponentProps } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medicoId: number | null\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: []\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    formState,\r\n    control,\r\n    watch\r\n  } = formMethods\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medicoId as number,\r\n      values.proveedor.id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id,\r\n        nota\r\n      }))\r\n    )\r\n  })\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n      <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          console.log(\"Regional elegida\", regional)\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medicoId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field})=>{\r\n                      return <MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!formState.errors.medicoId}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(medico)=>{\r\n                          console.log(\"Medico elegido\", medico)\r\n                          field.onChange(medico.length ? medico[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n            Proveedor\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"3\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller\r\n                    control={control}\r\n                    name=\"proveedor\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <>\r\n                        <ProveedoresTypeahead\r\n                          id=\"medico\"\r\n                          searchText=\"Buscando...\"\r\n                          isInvalid={!!fieldState.error}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                      </>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n      <Button>\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n  </FormProvider>\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, FaCoins } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { Settings } from './settings/components/Settings';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención exterana\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        path: `${url}/configuracion`,\r\n        title: \"Configuración\",\r\n        icon: <FaCog />\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route>\r\n    </Switch>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"¿Está seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripción</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potosí</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseñas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarán</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Información personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Información de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Hipócrates</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Hipócrates</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  // transformRequest: [(data, headers)=>{\r\n  //   console.log(\"TransformRequest\", data)\r\n  //   return data\r\n  // }],\r\n  transformResponse: [(data)=>{\r\n    try{\r\n      const result = keysToCamel(JSON.parse(data))\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n    catch(e){\r\n      console.error(\"OnTransformResponse\", data, e)\r\n    }\r\n    return data\r\n  }]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"","\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}