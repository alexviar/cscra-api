{"version":3,"sources":["commons/auth/constants/Permisos.ts","commons/auth/index.ts","commons/click-outside-handler/useOnClickOutside.ts","commons/click-outside-handler/ClickOutsideHandler.tsx","commons/components/layouts/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/ListaMoraService.ts","apps/clinica/mora/components/ListaMoraFilterForm.tsx","apps/clinica/mora/policies/index.ts","apps/clinica/mora/components/RowOptions.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/icons/FcDebt.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/RowOptions.tsx","apps/clinica/solicitud_atencion_externa/policies/index.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","apps/clinica/solicitud_atencion_externa/utils/EstadosAfi.ts","apps/clinica/solicitud_atencion_externa/utils/EstadosEmp.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/ClinicaApp.tsx"],"names":["VER_SOLICITUDES_DE_ATENCION_EXTERNA","VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","VER_USUARIOS","VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","REGISTRAR_USUARIOS","REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","EDITAR_USUARIOS","EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","BLOQUEAR_USUARIOS","BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","DESBLOQUEAR_USUARIOS","DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","CAMBIAR_CONTRASEÑA","CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","VER_ROLES","REGISTRAR_ROLES","EDITAR_ROLES","ELIMINAR_ROLES","VER_LISTA_DE_MORA","VER_LISTA_DE_MORA_REGIONAL","AGREGAR_EMPLEADOR_EN_MORA","AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","QUITAR_EMPLEADOR_EN_MORA","QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","VER_MEDICOS","VER_MEDICOS_REGIONAL","REGISTRAR_MEDICOS","REGISTRAR_MEDICOS_REGIONAL","EDITAR_MEDICOS","EDITAR_MEDICOS_REGIONAL","BAJA_MEDICOS","BAJA_MEDICOS_REGIONAL","VER_PROVEEDORES","VER_PROVEEDORES_REGIONAL","REGISTRAR_PROVEEDORES","REGISTRAR_PROVEEDORES_REGIONAL","EDITAR_PROVEEDORES","EDITAR_PROVEEDORES_REGIONAL","BAJA_PROVEEDOR","BAJA_PROVEEDOR_REGIONAL","VER_CONTRATOS_PROVEEDOR","VER_CONTRATOS_PROVEEDOR_REGIONAL","REGISTRAR_CONTRATOS_PROVEEDOR","REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL","CONSUMIR_CONTRATOS_PROVEEDOR","CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL","EXTENDER_CONTRATOS_PROVEEDOR","EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL","ANULAR_CONTRATOS_PROVEEDOR","ANULAR_CONTRATOS_PROVEEDOR_REGIONAL","VER_ESPECIALIDADES","REGISTRAR_ESPECIALIDADES","EDITAR_ESPECIALIDADES","ELIMINAR_ESPECIALIDADES","IMPORTAR_ESPECIALIDADES","VER_PRESTACIONES","REGISTRAR_PRESTACIONES","EDITAR_PRESTACIONES","ELIMINAR_PRESTACIONES","IMPORTAR_PRESTACIONES","useOnClickOutside","ref","handler","useEffect","listener","event","el","current","contains","target","document","querySelector","addEventListener","removeEventListener","ClickOutsideHandler","children","onClickOutside","props","containerRef","useRef","SidebarItem","item","match","useRouteMatch","path","ListGroup","Item","as","Link","to","action","active","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","side","header","renderItem","left","right","variant","SidebarLayout","sidebar","showSidebar","useSelector","state","sidebarVisibility","dispatch","useDispatch","onClickOutsideHandler","React","useCallback","toggle","type","Container","EmpleadorService","numeroPatronal","apiClient","get","params","numero_patronal","ListaMoraService","filter","page","keysToUnderscore","idEmpleador","post","empleador_id","console","log","ListaMoraFilterForm","useForm","handleSubmit","register","reset","Form","onSubmit","inputs","nombre","onApply","Row","Group","Col","sm","Label","Control","xs","Button","onClick","ListaMoraPolicy","index","user","canAny","Permisos","view","agregar","quitar","RowOptions","queryKey","modal","useModal","queryClient","useQueryClient","useMutation","empleadorId","onSuccess","close","setQueryData","oldData","data","records","i","status","open","error","Dropdown","Toggle","VerticalEllipsisDropdownToggle","Menu","authorize","href","window","confirm","mutate","useState","size","setPage","loggedUser","useLoggedUser","can","regionalId","setFilter","filterFormVisible","showFilterForm","buscar","useQuery","enabled","refetchOnWindowFocus","refetchOnReconnect","total","meta","fontSize","refetch","visible","Collapse","in","value","onChange","e","parseInt","Table","responsive","width","isFetching","colSpan","Spinner","animation","isError","response","message","length","lineHeight","renderRows","Math","ceil","schema","yup","shape","label","trim","uppercase","required","mode","resolver","yupResolver","defaultValues","watch","setError","clearErrors","setValue","trigger","formState","formErrors","errors","history","useHistory","buscarEmpleador","guardar","invalidateQueries","replace","isSuccess","Alert","guardarError","renderAlert","InputGroup","hasValidation","isInvalid","Append","then","valid","Feedback","readOnly","isLoading","FcDebt","GenIcon","SolicitudesAtencionExternaService","regional_id","asegurado_id","medico","especialidad","proveedor","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","control","input","onFilter","numero","matriculaAsegurado","matricula","desde","hasta","solicitud","position","url","urlDm11","SolicitudATPolicy","emit","SolicitudAtencionExternaIndex","useLocation","pathname","setTotal","getDefaultFilter","registradoPor","ProtectedContent","fecha","asegurado","AseguradoChooser","asegurados","Modal","Header","Body","scope","matriculaComplemento","nombreCompleto","estadoText","onSelect","AseguradosService","include","AseguradoCard","useFormContext","aseguradoChooserVisible","showAseguradoChooser","empleador","apellidoPaterno","apellidoMaterno","nombres","valSeguro","afiliacion","baja","fechaValidezSeguro","moment","format","fechaBaja","enMora","tipo","titular","extincion","fechaExtincion","parentesco","code","getParentesco","valSeguroTit","dirtyFields","hasErrors","Card","Accordion","eventKey","lg","md","htmlFor","FormControl","validation","estado","show","onHide","PrestacionesSolicitadasCard","useFieldArray","name","fields","append","remove","prestacionesSolicitadas","overflow","prestacionSolicitada","textTransform","prestacion","EstadosAfi","1","2","EstadosEmp","3","hoy","estadoAfiSchema","oneOf","Object","values","test","context","parent","tieneBaja","createError","date","fechaRegBaja","validezSchema","isSameOrBefore","matches","nullable","notRequired","min","toDate","options","validateSync","when","is","subtract","aportes","regional","of","max","SolicitudAtencionExternaForm","setAsegurado","formMethods","dm11Viewer","registrar","registrarError","keys","forEach","key","localKey","defaultActiveKey","render","field","fieldState","inputProps","filterBy","feedback","selected","onBlur","ClinicaApp","sidebarItems","useMemo","push","Image","src","exact","ListaMoraItemForm","ListaMoraIndex"],"mappings":"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","file":"static/js/4.d74faa13.chunk.js","sourcesContent":["/**\r\n * Permisos de solicitud de transferencia externa\r\n */\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA = \"Ver solicitudes de atencion externa\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Ver solicitudes de atencion externa (misma regional)\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Ver solicitudes de atencion externa (registrado por)\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Registrar solicitudes de atencion externa\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Registrar solicitudes de atencion externa (misma regional)\";\r\n// export const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Registrar solicitudes de atencion externa (registrado por)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Emitir solicitudes de atencion externa\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Emitir solicitudes de atencion externa (misma regional)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Emitir solicitudes de atencion externa (registrado por)\";\r\n  \r\n/**\r\n * Permisos de usuarios\r\n */\r\nexport const VER_USUARIOS = \"Ver usuarios\";\r\nexport const VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Ver usuarios (misma regional)\";\r\nexport const REGISTRAR_USUARIOS = \"Registrar usuarios\";\r\nexport const REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Registrar usuarios (misma regional)\";\r\nexport const EDITAR_USUARIOS = \"Editar usuarios\";\r\nexport const EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Editar usuarios (misma regional)\";\r\nexport const BLOQUEAR_USUARIOS = \"Bloquear usuarios\";\r\nexport const BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Bloquear usuarios (misma regional)\";\r\nexport const DESBLOQUEAR_USUARIOS = \"Desbloquear usuarios\";\r\nexport const DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Desbloquear usuarios (misma regional)\";\r\nexport const CAMBIAR_CONTRASEÑA = \"Cambiar contraseña\";\r\nexport const CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Cambiar contraseña (misma regional)\";\r\n\r\n/**\r\n * Permisos de roles\r\n */\r\nexport const VER_ROLES = \"Ver roles\";\r\nexport const REGISTRAR_ROLES = \"Registrar roles\";\r\nexport const EDITAR_ROLES = \"Editar roles\";\r\nexport const ELIMINAR_ROLES = \"Eliminar roles\";\r\n\r\n\r\n/**\r\n * Permisos de lista de mora\r\n */\r\nexport const VER_LISTA_DE_MORA = \"Ver lista de mora\"\r\nexport const VER_LISTA_DE_MORA_REGIONAL = \"Ver lista de mora (regional)\"\r\nexport const AGREGAR_EMPLEADOR_EN_MORA = \"Agregar empleador en mora\";\r\nexport const AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Agregar empleador en mora (misma regional)\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA = \"Quitar empleador en mora\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Quitar empleador en mora (misma regional)\";\r\n\r\n\r\n\r\n/**\r\n * Medicos\r\n */\r\nexport const VER_MEDICOS = \"Ver médicos\";\r\nexport const VER_MEDICOS_REGIONAL = \"Ver médicos (regional)\";\r\nexport const REGISTRAR_MEDICOS = \"Registrar médicos\";\r\nexport const REGISTRAR_MEDICOS_REGIONAL = \"Registrar médicos (regional)\";\r\nexport const EDITAR_MEDICOS = \"Editar médicos\";\r\nexport const EDITAR_MEDICOS_REGIONAL = \"Editar médicos (regional)\";\r\nexport const BAJA_MEDICOS = \"Baja médicos\";\r\nexport const BAJA_MEDICOS_REGIONAL = \"Baja médicos (regional)\";\r\n\r\n/**\r\n* Proveedores\r\n*/\r\nexport const VER_PROVEEDORES = \"Ver proveedores\";\r\nexport const VER_PROVEEDORES_REGIONAL = \"Ver proveedores (regional)\";\r\nexport const REGISTRAR_PROVEEDORES = \"Registrar proveedores\";\r\nexport const REGISTRAR_PROVEEDORES_REGIONAL = \"Registrar proveedores (regional)\";\r\nexport const EDITAR_PROVEEDORES = \"Editar proveedores\";\r\nexport const EDITAR_PROVEEDORES_REGIONAL = \"Editar proveedores (regional)\";\r\nexport const BAJA_PROVEEDOR = \"Baja proveedores\";\r\nexport const BAJA_PROVEEDOR_REGIONAL = \"Baja proveedores (regional)\";\r\n\r\nexport const VER_CONTRATOS_PROVEEDOR = \"Ver contratos de proveedores\";\r\nexport const VER_CONTRATOS_PROVEEDOR_REGIONAL = \"Ver contratos de proveedores (regional)\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR = \"Registrar contratos de proveedores\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Registrar contratos de proveedores (regional)\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR = \"Consumir contratos de proveedores\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL = \"Consumir contratos de proveedores (regional)\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR = \"Extender contratos de proveedores\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL = \"Extender contratos de proveedores (regional)\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR = \"Anular contratos de proveedores\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Anular contratos de proveedores (regional)\";\r\n\r\n/**\r\n* Especialidades\r\n*/\r\nexport const VER_ESPECIALIDADES = \"Ver especialidades\";\r\nexport const REGISTRAR_ESPECIALIDADES = \"Registrar especialidades\";\r\nexport const EDITAR_ESPECIALIDADES = \"Editar especialidades\";\r\nexport const ELIMINAR_ESPECIALIDADES = \"Eliminar especialidades\";\r\nexport const IMPORTAR_ESPECIALIDADES = \"Importar especialidades\";\r\n\r\n/**\r\n* Prestaciones\r\n*/\r\nexport const VER_PRESTACIONES = \"Ver prestaciones\";\r\nexport const REGISTRAR_PRESTACIONES = \"Registrar prestaciones\";\r\nexport const EDITAR_PRESTACIONES = \"Editar prestaciones\";\r\nexport const ELIMINAR_PRESTACIONES = \"Eliminar prestaciones\";\r\nexport const IMPORTAR_PRESTACIONES = \"Importar prestaciones\";","export { ProtectedContent, ProtectedRoute } from \"./components\"\r\nexport * from \"./hooks\"\r\nexport { Permisos } from \"./constants\"","import { RefObject, useEffect } from 'react'\r\n\r\ntype AnyEvent = MouseEvent | TouchEvent\r\n\r\nexport function useOnClickOutside<T extends HTMLElement = HTMLElement>(\r\n  ref: RefObject<T>,\r\n  handler: (event: AnyEvent) => void,\r\n) {\r\n  useEffect(() => {\r\n    const listener = (event: AnyEvent) => {\r\n      const el = ref?.current\r\n\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!el || el.contains(event.target as Node) || document.querySelector('html') == event.target) {\r\n        return\r\n      }\r\n      handler(event)\r\n    }\r\n\r\n    document.addEventListener(`mousedown`, listener)\r\n    document.addEventListener(`touchstart`, listener)\r\n\r\n    return () => {\r\n      document.removeEventListener(`mousedown`, listener)\r\n      document.removeEventListener(`touchstart`, listener)\r\n    }\r\n\r\n    // Reload only if ref or handler changes\r\n  }, [ref, handler])\r\n}\r\n\r\nexport default useOnClickOutside\r\n","import { FC, useRef, ComponentProps } from 'react'\r\nimport { useOnClickOutside } from './useOnClickOutside'\r\n\r\ntype Props = {\r\n  onClickOutside: (event: MouseEvent | TouchEvent) => void\r\n} & ComponentProps<\"div\">\r\nexport const ClickOutsideHandler:FC<Props> = ({children, onClickOutside, ...props}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(containerRef, onClickOutside)\r\n  return <div ref={containerRef} {...props}>\r\n    {children}\r\n  </div>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading mt-2\">{header}</div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <ListGroup variant=\"flush\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </ListGroup>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ClickOutsideHandler } from '../../click-outside-handler'\r\nimport { Sidebar, SidebarProps } from './Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props) => {\r\n  const showSidebar = useSelector((state:any) => state.sidebarVisibility)\r\n  const dispatch = useDispatch()\r\n\r\n  const onClickOutsideHandler = React.useCallback((event: MouseEvent | TouchEvent)=>{\r\n    const toggle = document.querySelector('[aria-label=\"Toggle navigation\"]')\r\n    if(!toggle?.contains(event.target as Node)){\r\n      dispatch({\r\n        type: \"CLOSE_SIDEBAR\"\r\n      })\r\n    }\r\n  }, [showSidebar])\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \" toggled\" : \"\")}  id=\"wrapper\">\r\n    <ClickOutsideHandler onClickOutside={onClickOutsideHandler}>\r\n      <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    </ClickOutsideHandler>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import { apiClient, Page, PaginatedResponse} from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  buscar: (filter: ListaMoraFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<ListaMoraItem>>(\"/lista-mora\", {\r\n      params: keysToUnderscore({\r\n        page, filter\r\n      })\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}","import { Button, Col, Form } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string\r\n  nombre: string\r\n}\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport const ListaMoraFilterForm = (props: Props)=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>()\r\n\r\n  return <Form onSubmit={handleSubmit((inputs)=>{\r\n    const filter: Filter = {}\r\n    if(inputs.nombre) filter.nombre = inputs.nombre\r\n    if(inputs.numeroPatronal) filter.numeroPatronal = inputs.numeroPatronal\r\n    props.onApply(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Nº Patronal</Form.Label>\r\n        <Form.Control {...register(\"numeroPatronal\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control {...register(\"nombre\")} />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { Permisos } from \"../../../../commons/auth/constants\";\r\nimport { User } from \"../../../../commons/auth/hooks\";\r\n\r\nexport const ListaMoraPolicy = {\r\n  index: (user: User) => {\r\n    return user?.canAny([\r\n      Permisos.VER_LISTA_DE_MORA,\r\n      Permisos.VER_LISTA_DE_MORA_REGIONAL,\r\n      Permisos.AGREGAR_EMPLEADOR_EN_MORA,\r\n      Permisos.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL\r\n    ])\r\n  },\r\n  view: (user: User) => {\r\n    return user?.canAny([\r\n      Permisos.VER_LISTA_DE_MORA,\r\n      Permisos.VER_LISTA_DE_MORA_REGIONAL\r\n    ])\r\n  },\r\n  agregar: (user: User) => {\r\n    return user?.canAny([\r\n      Permisos.AGREGAR_EMPLEADOR_EN_MORA,\r\n      Permisos.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL\r\n    ])\r\n  },\r\n  quitar: (user: User) => {\r\n    return user?.canAny([\r\n      Permisos.QUITAR_EMPLEADOR_EN_MORA,\r\n      Permisos.QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL\r\n    ])\r\n  },\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQueryClient, QueryKey } from \"react-query\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { ListaMoraItem, ListaMoraService } from \"../services\"\r\nimport { ListaMoraPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  item: ListaMoraItem\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({item, queryKey}: Props) => {\r\n\r\n  const modal = useModal(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const quitar = useMutation(()=>{\r\n    return ListaMoraService.quitar(item.empleadorId)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        console.log(oldData)\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.filter((i: any)=>{\r\n              return i !== item\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(quitar.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(quitar.status == \"error\"){\r\n      console.log(quitar.error)\r\n      modal.open({\r\n        state: \"error\",\r\n        error: quitar.error\r\n      })\r\n    }\r\n  }, [quitar.status])\r\n\r\n  return <Dropdown>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-${item.id}`}\r\n    />\r\n    \r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={ListaMoraPolicy.quitar}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n          if (window.confirm(\"¿Está seguro?\")) {\r\n            quitar.mutate()\r\n          }\r\n        }}>Quitar</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>  \r\n}","import { AxiosError } from \"axios\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport { Button, Col, Collapse, Form, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport {Pagination} from \"../../../../commons/components\"\r\nimport { useLoggedUser, ProtectedContent, Permisos } from \"../../../../commons/auth\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport { ListaMoraFilterForm } from \"./ListaMoraFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { ListaMoraPolicy } from \"../policies\"\r\n\r\nexport default () => {\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const loggedUser = useLoggedUser();\r\n  \r\n  const getDefaultFilter = ()=>{\r\n    const filter: Filter = {}\r\n    if(!loggedUser?.can(Permisos.VER_LISTA_DE_MORA)){\r\n      if(loggedUser?.can(Permisos.VER_LISTA_DE_MORA_REGIONAL)){\r\n        filter.regionalId = loggedUser.regionalId;\r\n      }\r\n    }\r\n    return filter\r\n  }\r\n\r\n  const [filter, setFilter] = useState<Filter>(getDefaultFilter)\r\n\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const queryKey = [\"listaMora.buscar\", filter, page]\r\n  const buscar = useQuery(queryKey, () => {\r\n    return ListaMoraService.buscar(filter, page)\r\n  }, {\r\n    enabled: ListaMoraPolicy.view(loggedUser),\r\n    // refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if(buscar.data)\r\n    {\r\n      const records = buscar.data!.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((item, index) => {\r\n        return <tr key={item.id}>\r\n          <td style={{ lineHeight: \"26px\" }}>\r\n            {index + 1}\r\n          </td>\r\n          <td style={{ lineHeight: \"26px\" }}>\r\n            {item.numeroPatronal}\r\n          </td>\r\n          <td style={{ lineHeight: \"26px\" }}>\r\n            {item.nombre}\r\n          </td>\r\n          <td>\r\n            <RowOptions item={item} queryKey={queryKey} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }    \r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{ fontSize: \"1.75rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\">\r\n        <ProtectedContent\r\n          authorize={ListaMoraPolicy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button className=\"my-2\" onClick={() => {\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col xs=\"auto\" >\r\n            <Button className=\"my-2\" onClick={() => {\r\n              showFilterForm(visible => !visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={ListaMoraPolicy.agregar}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button as={Link}\r\n              to=\"/clinica/lista-mora/agregar\"\r\n              className=\"my-2\"\r\n            >\r\n              <FaPlus className=\"mr-1\" />\r\n              Agregar\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={ListaMoraPolicy.view}\r\n    >\r\n      <Collapse in={filterFormVisible}>\r\n        <div>\r\n          <ListaMoraFilterForm\r\n            onApply={(filter) => {\r\n              setFilter(filter)\r\n              setPage(page => ({...page, current: 1}))\r\n            }}\r\n          />\r\n        </div>\r\n      </Collapse>\r\n      <div className=\"d-flex\">\r\n        <div className=\"ml-auto mb-2\">\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Table responsive className=\"text-nowrap\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th style={{ width: 1 }}>Nº Patronal</th>\r\n            <th >Nombre</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      {buscar.status === \"success\" ? <div className=\"d-flex flex-row\">\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </div> : null}\r\n    </ProtectedContent>\r\n  </div>\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, InputGroup, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  numeroPatronal: yup.string().label(\"número patronal\").trim().uppercase().required(),\r\n  nombre: yup.string().required()\r\n})\r\n\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setError,\r\n    clearErrors,\r\n    setValue,\r\n    reset,\r\n    trigger,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n  \r\n  console.log(\"Vlues\", watch(), formErrors)\r\n\r\n  const history = useHistory()\r\n\r\n  const queryClient = useQueryClient()\r\n  \r\n  const onBuscarEmpleadorSuccess = ({data}: any) => {\r\n    console.log(\"Nombre\",data.nombre)\r\n    setValue(\"nombre\", data.nombre)\r\n  }\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: onBuscarEmpleadorSuccess\r\n  })\r\n\r\n  const guardar = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(\"listaMora.buscar\")\r\n      history.replace(\"/clinica/lista-mora\")\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.isError){\r\n      const error = buscarEmpleador.error as AxiosError\r\n      setError(\"numeroPatronal\", {\r\n        type: \"searchError\",\r\n        message: error.response?.status == 404 ? \"Empleador no encontrado\" : \"Ocurrio un error\"\r\n      })\r\n    }\r\n  }, [buscarEmpleador.isError])\r\n\r\n  const renderAlert = ()=>{\r\n    if(guardar.isSuccess){\r\n      return <Alert variant=\"success\">\r\n      La operacion se realizó exitosamente\r\n    </Alert>\r\n    }\r\n    if(guardar.isError){\r\n      const guardarError = guardar.error as AxiosError\r\n      return <Alert variant=\"danger\">\r\n        {guardarError.response?.data?.message || guardarError.message}\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit(()=>{\r\n      guardar.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Agregar empleador en mora</h1>\r\n    {renderAlert()}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <InputGroup hasValidation className=\"mb-2\">\r\n          <Form.Control\r\n            isInvalid={!!formErrors.numeroPatronal}\r\n            className=\"text-uppercase\" {...register(\"numeroPatronal\")} />\r\n          <InputGroup.Append >\r\n            <Button variant={formErrors.numeroPatronal ? \"danger\" : \"outline-secondary\"} onClick={()=>{\r\n              trigger(\"numeroPatronal\")\r\n              .then((valid)=>{\r\n                if(!formErrors.numeroPatronal){\r\n                  clearErrors()\r\n                  if(!buscarEmpleador.data){\r\n                    buscarEmpleador.refetch()\r\n                  }\r\n                }\r\n              })\r\n            }}>\r\n              {buscarEmpleador.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n            </Button>\r\n          </InputGroup.Append>\r\n          <Form.Control.Feedback type=\"invalid\">{formErrors.numeroPatronal?.message}</Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            readOnly\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\")}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {guardar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : null}\r\n      <span className=\"\"></span>Agregar\r\n    </Button>\r\n  </Form>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  numero?: number\r\n  desde?: string\r\n  hasta?: string\r\n  numeroPatronal?: string\r\n  matriculaAsegurado?: string\r\n  medico?: string\r\n  proveedor?: string\r\n  regionalId?: number\r\n  registradoPor?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  especialidad: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: keysToUnderscore({filter, page})\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico: string, especialidad: string, proveedor: string, prestaciones_solicitadas: { prestacion: string }[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico,\r\n      especialidad,\r\n      proveedor,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Button, Col, Form } from 'react-bootstrap'\r\nimport { useForm, Controller }  from 'react-hook-form'\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n// import { Medico, MedicosTypeahead } from \"./MedicosTypeahead\"\r\n// import { Proveedor, ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\ntype Inputs = {\r\n  numero: string\r\n  desde: string\r\n  hasta: string\r\n  numeroPatronal: string\r\n  matricula: string\r\n  // medico: Medico[]\r\n  medico: string\r\n  // proveedor: Proveedor[]\r\n  proveedor: string\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      medico: \"\",\r\n      proveedor: \"\"\r\n    }\r\n  })\r\n  console.log(formState)\r\n  return <Form className={\"mb-2\"} onSubmit={handleSubmit((input)=>{\r\n    const filter: SolicitudesAtencionExternaFilter = {}\r\n    console.log(input)\r\n    props.onFilter({\r\n      numero: parseInt(input.numero),\r\n      numeroPatronal: input.numeroPatronal,\r\n      matriculaAsegurado: input.matricula,\r\n      desde: input.desde,\r\n      hasta: input.hasta,\r\n      medico: input.medico,\r\n      proveedor: input.proveedor\r\n    })\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Número de solicitud</Form.Label>\r\n        <Form.Control {...register(\"numero\")}/>\r\n      </Form.Group>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Nº Patronal</Form.Label>\r\n        <Form.Control {...register(\"numeroPatronal\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Matricula</Form.Label>\r\n        <Form.Control {...register(\"matricula\")} />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Médico</Form.Label>\r\n        <Form.Control\r\n          {...register(\"medico\")}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Proveedor</Form.Label>\r\n        <Form.Control\r\n            {...register(\"proveedor\")}\r\n          />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n          <Form.Label>Desde</Form.Label>\r\n          <Form.Control\r\n            type=\"date\"\r\n            {...register(\"desde\")}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4}>\r\n          <Form.Label>Hasta</Form.Label>\r\n          <Form.Control\r\n            type=\"date\"\r\n            {...register(\"hasta\")}\r\n          />\r\n        </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { Dropdown } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { SolicitudATPolicy } from \"../policies\"\r\nimport { SolicitudAtencionExterna } from \"../services\"\r\n\r\ntype Props = {\r\n  solicitud: SolicitudAtencionExterna\r\n}\r\nexport const RowOptions = ({solicitud}: Props) => {\r\n\r\n  const modal = useModal(\"pdfModal\")\r\n\r\n  return   <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n    />\r\n    <Dropdown.Menu >\r\n      <Dropdown.Item href=\"#\" onClick={() => {\r\n        modal.open({\r\n          title: \"Formulario D.M. - 11\",\r\n          url: solicitud.urlDm11\r\n        })\r\n      }}>Ver D.M. - 11</Dropdown.Item>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { Permisos, User } from \"../../../../commons/auth\";\r\n\r\nexport const SolicitudATPolicy = {\r\n  index: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR,\r\n      Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL\r\n    ])\r\n  },\r\n  register: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL\r\n    ])\r\n  },\r\n  view: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR,\r\n    ])\r\n  },\r\n  emit: function(user: User){\r\n    return user?.canAny([\r\n      Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,\r\n      Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR\r\n    ])\r\n  }\r\n}","import { useState} from \"react\"\r\nimport { AxiosError } from \"axios\"\r\nimport { Button, Col, Collapse, Form, Spinner, Table } from \"react-bootstrap\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Pagination } from \"../../../../commons/components\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter as Filter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport { Permisos } from \"../../../../commons/auth/constants\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components/ProtectedContent\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { SolicitudATPolicy } from \"../policies\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const loggedUser = useLoggedUser();\r\n\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const getDefaultFilter = ()=>{\r\n    const filter: Filter = {}\r\n    if(!loggedUser?.can(Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA)){\r\n      if(loggedUser?.can(Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)){\r\n        filter.regionalId = loggedUser.regionalId;\r\n      }\r\n      if(loggedUser?.can(Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR)){\r\n        filter.registradoPor = loggedUser.id;\r\n      }\r\n    }\r\n    return filter\r\n  }\r\n\r\n  const [filter, setFilter] = useState<Filter>(getDefaultFilter)\r\n\r\n  const buscar = useQuery([\"solicitudesAtencionExterna.buscar\", page, filter], ()=>{\r\n    console.log({...filter, ...getDefaultFilter()})\r\n    return SolicitudesAtencionExternaService.buscar({...filter, ...getDefaultFilter()}, page)\r\n  }, {\r\n    enabled: loggedUser?.canAny([\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,\r\n      Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR,\r\n    ]),\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.data){\r\n      const records = buscar.data!.data.records\r\n      if(records.length === 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((solicitud, index)=>{\r\n        return <tr key={solicitud.id}>\r\n          <td>{index + 1}</td>\r\n          <td>{solicitud.numero}</td>\r\n          <td>{solicitud.fecha}</td>\r\n          <td>{solicitud.asegurado.matricula}</td>\r\n          <td>{solicitud.medico}</td>\r\n          <td>{solicitud.proveedor}</td>\r\n          <td>\r\n            <RowOptions solicitud={solicitud} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={SolicitudATPolicy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              showFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={SolicitudATPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`${path}/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaPlus className=\"mr-1\" /><span>Nuevo</span>\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={SolicitudATPolicy.view}\r\n    >\r\n      <Form.Row className=\"mb-2\">\r\n        <Col xs={12}>\r\n          <Collapse in={filterFormVisible}>\r\n            <div>\r\n              <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n                setFilter(filter)\r\n                setPage(page=>({ ...page, current: 1 }))\r\n              }} />\r\n            </div>\r\n          </Collapse>\r\n        </Col>\r\n        <Col className=\"ml-auto\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n              <span>Mostrar</span>\r\n              <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n                const value = e.target.value\r\n                setPage((page) => ({\r\n                  ...page,\r\n                  size: parseInt(value)\r\n                }))\r\n              }}>\r\n                <option value={10}>10</option>\r\n                <option value={20}>20</option>\r\n                <option value={30}>30</option>\r\n                <option value={50}>50</option>\r\n                <option value={100}>100</option>\r\n              </Form.Control>\r\n              <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Form.Row>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Nº</th>\r\n            <th>Fecha y hora</th>\r\n            <th>Matrícula asegurado</th>\r\n            <th>Doctor</th>\r\n            <th>Proveedor</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      {buscar.status === \"success\" ? <div className=\"d-flex flex-row\">\r\n        <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </div> : null}\r\n    </ProtectedContent>\r\n  </div>\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { Asegurado } from \"../services\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\nexport const AseguradoChooser = (props: Props) => {\r\n  console.log(props.asegurados.length)\r\n  return <Modal {...props} >\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}-{asegurado.matriculaComplemento}</td>\r\n              <td>{asegurado.nombreCompleto}</td>\r\n              <td className={asegurado.estadoText ? \"\" : \"bg-ligth\"}>{asegurado.estadoText || \"Desconocido\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </Modal>\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\ninterface Afiliacion {\r\n  id: string\r\n  baja: {\r\n    regDate: string,\r\n    fechaValidezSeguro: string\r\n  } | null\r\n}\r\n\r\ninterface AfiliacionBeneficiario extends Afiliacion  {\r\n  parentesco: number\r\n  idAfiliacionTitular: string\r\n  fechaExtincion: string | null\r\n}\r\n\r\ninterface Afiliado {\r\n  id: string\r\n  matricula: string\r\n  matriculaComplemento: string\r\n  apellidoPaterno: string | null\r\n  apellidoMaterno: string | null\r\n  nombres: string\r\n  nombreCompleto: string\r\n  estado: number\r\n  estadoText: string\r\n  tipo: number\r\n  empleador: {\r\n    id: number\r\n    numeroPatronal: string\r\n    nombre: string\r\n    estado: number\r\n    estadoText: string\r\n    fechaBaja: string\r\n    enMora: boolean\r\n  }\r\n}\r\n\r\nexport interface Titular extends Afiliado {\r\n  tipo: 1\r\n  afiliacion: Afiliacion\r\n}\r\n\r\nexport interface Beneficiario extends Afiliado {\r\n  tipo: 2\r\n  titular: Titular\r\n  afiliacion: AfiliacionBeneficiario\r\n}\r\n\r\nexport type Asegurado = Titular | Beneficiario\r\n\r\n// export type Asegurado = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   matriculaComplemento: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   tipo_id: number,\r\n//   estado: number,\r\n//   baja: {\r\n//     regDate: string,\r\n//     fechaValidezSeguro: string\r\n//   },\r\n//   fechaExtinsion?: string\r\n//   titularId: string\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     fechaBaja: string,\r\n//     aportes: string\r\n//   }\r\n//   titular?: {\r\n//     id: string,\r\n//     matricula: string,\r\n//     apellidoPaterno: string | null,\r\n//     apellidoMaterno: string | null,\r\n//     nombres: string,\r\n//     estado: string,\r\n//     baja: {\r\n//       regDate: string,\r\n//       fechaValidezSeguro: string\r\n//     },\r\n//   }\r\n// }\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useState, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number\r\n  asegurado: {\r\n    matricula: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    parentesco: string\r\n    estado: string\r\n    fechaValidezSeguro: string\r\n    fechaExtincion: string\r\n  }\r\n  titular: {\r\n    matricula: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    estado: string\r\n    fechaValidezSeguro: string\r\n  }\r\n  empleador: {\r\n    numeroPatronal: string\r\n    nombre: string\r\n    estado: string\r\n    fechaBaja: string\r\n    enMora: string\r\n  }\r\n}\r\n\r\nexport const AseguradoCard = (props: {\r\n  value: Asegurado | null\r\n  onChange(asegurado: Asegurado | null): void\r\n}) => {\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    trigger,\r\n    setValue,\r\n    clearErrors,\r\n    control,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  const [aseguradoChooserVisible, showAseguradoChooser] = useState(false)\r\n\r\n  const asegurado = props.value\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"asegurados.buscar\", matricula], () => {\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({ data: { records } }) => {\r\n      if (records.length == 1) {\r\n        const asegurado = records[0]\r\n        console.log(\"Choosed\", asegurado)\r\n        props.onChange(asegurado)\r\n      }\r\n      else {\r\n        showAseguradoChooser(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const getParentesco = (code: number) => {\r\n    switch(code){\r\n      case 1: return \"Hijo(a)\"\r\n      case 2: return \"Esposa\"\r\n      case 3: return \"Conviviente\"\r\n      case 4: return \"Madre\"\r\n      case 5: return \"Padre\"\r\n      case 6: return \"Hermano(a)\"\r\n      case 7: return \"Esposo\"\r\n      case 8: return \"Derechohabiente\"\r\n      default: return \"\"\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    const empleador = asegurado?.empleador\r\n    console.log(\"empleador\", empleador)\r\n    // setValue(\"asegurado.matricula\", asegurado?.matricula || \"\")\r\n    setValue(\"asegurado.apellidoPaterno\", asegurado?.apellidoPaterno || \"\")\r\n    setValue(\"asegurado.apellidoMaterno\", asegurado?.apellidoMaterno || \"\")\r\n    setValue(\"asegurado.nombres\", asegurado?.nombres || \"\")\r\n    setValue(\"asegurado.estado\", asegurado?.estadoText || \"\")\r\n    const valSeguro = asegurado?.afiliacion?.baja?.fechaValidezSeguro\r\n    setValue(\"asegurado.fechaValidezSeguro\", valSeguro ? moment(valSeguro).format('L') : \"\")\r\n    setValue(\"empleador.numeroPatronal\", empleador?.numeroPatronal || \"\")\r\n    setValue(\"empleador.nombre\", empleador?.nombre || \"\")\r\n    setValue(\"empleador.estado\", empleador?.estadoText || \"\")\r\n    setValue(\"empleador.fechaBaja\", empleador?.fechaBaja || \"\")\r\n    setValue(\"empleador.enMora\", empleador?.enMora ? \"Sí\" : empleador?.enMora === false ? \"No\" : \"\")\r\n\r\n    if(asegurado?.tipo == 2) {\r\n      const titular = asegurado?.titular\r\n      const extincion = asegurado?.afiliacion?.fechaExtincion\r\n      const parentesco = getParentesco(asegurado?.afiliacion?.parentesco);\r\n\r\n      setValue(\"asegurado.parentesco\", parentesco)\r\n      setValue(\"asegurado.fechaExtincion\", extincion ? moment(extincion).format('L') : \"\")\r\n      setValue(\"titular.matricula\", titular?.matricula || \"\")\r\n      setValue(\"titular.apellidoPaterno\", titular?.apellidoPaterno || \"\")\r\n      setValue(\"titular.apellidoMaterno\", titular?.apellidoMaterno || \"\")\r\n      setValue(\"titular.nombres\", titular?.nombres || \"\")\r\n      setValue(\"titular.estado\", titular?.estadoText)\r\n      const valSeguroTit = titular?.afiliacion?.baja?.fechaValidezSeguro\r\n      setValue(\"titular.fechaValidezSeguro\", valSeguroTit ? moment(valSeguroTit).format('L') : \"\")\r\n    }\r\n  }, [asegurado])\r\n\r\n  useEffect(() => {\r\n    if (asegurado && formState.dirtyFields.asegurado?.matricula) {\r\n      props.onChange(null)\r\n    }\r\n  }, [matricula])\r\n\r\n  const formErrors = formState.errors\r\n  const hasErrors = formErrors.asegurado || formErrors.titular || formErrors.empleador\r\n\r\n  const buscarAseguradoHandler = () => {\r\n    trigger(\"asegurado.matricula\")\r\n      .then((validation) => {\r\n        console.log(\"Matricula validation\", validation)\r\n        if (!formErrors.asegurado?.matricula) {\r\n          if (formState.dirtyFields.asegurado?.matricula)\r\n            delete formState.dirtyFields.asegurado.matricula\r\n          clearErrors([\"asegurado\", \"titular\", \"empleador\"])\r\n          if (!buscar.data) {\r\n            buscar.refetch()\r\n          }\r\n          else {\r\n            const { data: { records } } = buscar.data\r\n            if (records.length == 1) {\r\n              const asegurado = records[0]\r\n              props.onChange(asegurado)\r\n            }\r\n            else {\r\n              showAseguradoChooser(true)\r\n            }\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className={\"text-light \" + (hasErrors ? \"bg-danger\" : \"bg-primary\")} eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formErrors.asegurado?.matricula /*|| !!formErrors.asegurado?.id*/}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\")} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={buscarAseguradoHandler}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"asegurado.nombres\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\")}\r\n            >\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.asegurado?.estado?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          {asegurado?.tipo == 2 && <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Parentesco</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.asegurado?.fechaValidezSeguro}\r\n              {...register(\"asegurado.parentesco\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{\r\n              formErrors.asegurado?.fechaValidezSeguro?.message\r\n            }</Form.Control.Feedback>\r\n          </Form.Group>}\r\n          {asegurado?.afiliacion?.baja && <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Validez del seguro</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.asegurado?.fechaValidezSeguro}\r\n              {...register(\"asegurado.fechaValidezSeguro\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{\r\n              formErrors.asegurado?.fechaValidezSeguro?.message\r\n            }</Form.Control.Feedback>\r\n          </Form.Group>}\r\n          {asegurado?.tipo == 2 ? <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de extinción</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.asegurado?.fechaExtincion}\r\n              {...register(\"asegurado.fechaExtincion\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.asegurado?.fechaExtincion?.message}</Form.Control.Feedback>\r\n          </Form.Group> : null}\r\n        </Form.Row>\r\n        {asegurado?.tipo == 2 && <div /*className={asegurado.tipo == 2 ? \"\" : \"d-none\"}*/ >\r\n          {/* {watch(\"titular.id\") ? <> */}\r\n          <hr />\r\n          <h2 style={{ fontSize: \"1.25rem\" }}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.titular?.estado}\r\n                {...register(\"titular.estado\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.titular?.estado?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            {asegurado?.titular?.afiliacion?.baja && <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Validez del seguro</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.titular?.fechaValidezSeguro}\r\n                {...register(\"titular.fechaValidezSeguro\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.titular?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n            </Form.Group>}\r\n          </Form.Row>\r\n          {/* </> : null} */}\r\n        </div>}\r\n        <hr />\r\n        <h2 style={{ fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.empleador?.numeroPatronal}\r\n              {...register(\"empleador.numeroPatronal\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.numeroPatronal?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.empleador?.estado}\r\n              {...register(\"empleador.estado\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.estado?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.empleador?.fechaBaja}\r\n              {...register(\"empleador.fechaBaja\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>En mora</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formErrors.empleador?.enMora}\r\n              {...register(\"empleador.enMora\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.enMora?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser\r\n          title=\"Resultados\"\r\n          show={aseguradoChooserVisible}\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado) => {\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            props.onChange(asegurado)\r\n            showAseguradoChooser(false)\r\n          }}\r\n          onHide={()=>showAseguradoChooser(false)}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { Regional } from \"../../../../commons/services\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regional: Regional[],\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacion: string\r\n  }[],\r\n  proveedor?: string\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\"\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n  const hasErrors = !!formErrors.prestacionesSolicitadas || !!formErrors.proveedor\r\n\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className={\"text-light \" + (hasErrors ? \"bg-danger\" : \"bg-primary\")} eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <div>\r\n        <Table className={formErrors.prestacionesSolicitadas ? \"is-invalid\": \"\"}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: 1 }}>#</th>\r\n              <th>Prestacion</th>\r\n              <th>Proveedor</th>\r\n              <th style={{ width: 1 }}></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {fields.map((prestacionSolicitada, index) => {\r\n              return <tr key={prestacionSolicitada.id}>\r\n                <td>{index + 1}</td>\r\n                <td>\r\n                  <Form.Control \r\n                    style={{textTransform: \"uppercase\"}}\r\n                    isInvalid={!!(formState.errors.prestacionesSolicitadas && formState.errors.prestacionesSolicitadas[index]?.prestacion)}\r\n                    {...register(`prestacionesSolicitadas.${index}.prestacion` as const)}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{\r\n                    formState.errors.prestacionesSolicitadas && \r\n                    formState.errors.prestacionesSolicitadas[index]?.prestacion?.message\r\n                  }</Form.Control.Feedback>\r\n                </td>\r\n                <td>\r\n                  <Form.Control\r\n                    style={{textTransform: \"uppercase\"}}\r\n                    isInvalid={!!formState.errors.proveedor}\r\n                    {...register(\"proveedor\")}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{\r\n                    formState.errors.proveedor?.message\r\n                  }</Form.Control.Feedback>\r\n                </td>\r\n                <td>\r\n                  {/* <Button variant=\"link\" onClick={() => {\r\n                    console.log(\"Remove\", index)\r\n                    remove(index)\r\n                  }} className=\"btn-icon\"><FaMinus /></Button> */}\r\n                </td>\r\n              </tr>\r\n            })}\r\n            {/* <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td></td>\r\n              <td></td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(count)\r\n                  append({\r\n                    id: count\r\n                  })\r\n                  setCount(count => count+1)\r\n                }} className=\"btn-icon\"><FaPlus /></Button>\r\n              </td>\r\n            </tr> */}\r\n          </tbody>\r\n        </Table>\r\n        <Form.Control.Feedback type=\"invalid\">{\r\n          //@ts-ignore\r\n          formErrors.prestacionesSolicitadas?.message}</Form.Control.Feedback>\r\n      </div>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","export const EstadosAfi: {[k: number]: string} = {\r\n  1: \"Activo\",\r\n  2: \"Baja\"\r\n}","export const EstadosEmp: {[k: number]: string} = {\r\n  1: \"Activo\",\r\n  2: \"Baja\",\r\n  3: \"Baja temporal\"\r\n}","import { useEffect, useState } from \"react\"\r\nimport { AxiosError } from \"axios\"\r\nimport { Accordion, Alert, Button, Card,Col,Form, Spinner } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport moment from \"moment\"\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport { useMutation } from \"react-query\"\r\nimport { Asegurado, SolicitudesAtencionExternaService } from \"../services\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { Permisos } from \"../../../../commons/auth/constants\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { EstadosAfi, EstadosEmp } from \"../utils\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regional: Regional[]\r\n  medico: string\r\n  especialidad: string\r\n}\r\n\r\nconst hoy = moment()\r\n\r\nconst estadoAfiSchema = yup.string().label(\"estado\").oneOf(Object.values(EstadosAfi), \"Estado desconocido\")\r\n.test(\"estado-incoherente\", \"\", function(value, context) {\r\n  if(value == EstadosAfi[1] && context.parent.tieneBaja){\r\n    return context.createError({\r\n      message: \"El asegurado figura como activo, pero hay un registro de su baja con fecha ${date}\",\r\n      params: {\r\n        date: context.parent.fechaRegBaja\r\n      }\r\n    })\r\n  }\r\n  if(value == EstadosAfi[2] && !context.parent.tieneBaja){\r\n    return context.createError({\r\n      message: \"El asegurado figura como dado de baja, aunque no se encontraron registros de la baja.\"\r\n    })\r\n  }\r\n  return true\r\n})\r\n\r\nconst validezSchema = yup.mixed().label(\"fecha de extinsion\")\r\n.test(\"min\", \"\", function(value, context){\r\n  const {estado, tieneBaja} = context.parent\r\n  if(estado == EstadosAfi[2] && tieneBaja)\r\n    if(!value) return context.createError({\r\n      message: \"Fecha sin especificar, se asume que el seguro ya no tiene validez\"\r\n    })\r\n    if(moment(value).isSameOrBefore(hoy)) return context.createError({\r\n      message: \"El seguro ya no tiene validez\"\r\n    })\r\n  return true\r\n})\r\n\r\nconst schema = yup.object().shape({\r\n  asegurado: yup.object().shape({\r\n    matricula: yup.string().label(\"matricula\").trim().uppercase().required().matches(/^\\d{2}-\\d{4}-[a-zA-ZñÑ]{2,3}$/, \"Formato incorrecto.\"),\r\n    estado: estadoAfiSchema,\r\n    fechaExtincion: yup.lazy(value => value ? \r\n      yup.date().label(\"fecha de extinsion\").nullable().notRequired().min(hoy.toDate(), \"Fecha de extinsion alcanzada\") :\r\n      yup.mixed()),\r\n    fechaValidezSeguro: validezSchema\r\n  }),\r\n  titular: yup.mixed().test(\"titular\", \"\", (value, context) => {\r\n    const asegurado = context.options.context?.asegurado\r\n    if(asegurado?.tipo == 2 && asegurado?.afiliacion?.parentesco != 8) {\r\n      if(!asegurado.titular){\r\n        return context.createError({\r\n          message: \"No se encontraron datos del titular\"\r\n        })\r\n      }\r\n      try {\r\n        yup.object().shape({\r\n          estado: estadoAfiSchema,\r\n          fechaValidezSeguro: validezSchema\r\n        }).validateSync(value, {context: {asegurado: asegurado.titular}})\r\n      } catch (e: any){\r\n        return e\r\n      }\r\n    }\r\n    return true\r\n  }),\r\n  empleador: yup.object().shape({\r\n    numeroPatronal: yup.string().label(\"numero patronal\").required(),\r\n    estado: yup.string().label(\"estado\").oneOf(Object.values(EstadosEmp), \"Estado desconocido\")\r\n    .test(\"estado-incoherente\", \"El empleador figura como activo, pero tiene fecha de baja\", function(value, context) {\r\n      const empleador = context.options.context?.asegurado?.empleador\r\n      return empleador.estado != 1 || !empleador.fechaBaja\r\n    }),\r\n    fechaBaja: yup.mixed().when(\"estado\", {\r\n      is: (estado: string) => estado == EstadosEmp[2] || estado == EstadosEmp[3],\r\n      then: yup.date().required(\"Fecha sin especificar, se asume que el seguro ya no tiene validez\")\r\n               .min(hoy.subtract(2, \"months\").toDate())\r\n    }),\r\n    aportes: yup.lazy(value => value ? yup.string().oneOf([\"No\"], \"El empleador esta en mora\") : yup.string())\r\n  }),\r\n  regional: yup.array().length(1, \"Debe seleccionar una regional\"),\r\n  medico: yup.string().trim().uppercase().required(),\r\n  especialidad: yup.string().trim().uppercase().required(),\r\n  proveedor: yup.string().trim().uppercase().required(),\r\n  prestacionesSolicitadas: yup.array().of(yup.object().shape({\r\n    prestacion: yup.string().trim().uppercase().required(\"Debe indicar una prestacion\")\r\n  })).min(1, \"Debe solicitar un servicio\").max(1, \"Solo puede solicitar un servicio por solicitud\")\r\n})\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const [asegurado, setAsegurado] = useState<Asegurado|null>(null)\r\n  console.log(\"Asegurado\", asegurado)\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    context: {\r\n      asegurado\r\n    },\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      regional: [],\r\n      medico: \"\",\r\n      proveedor: \"\",\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacion: \"\"\r\n      }],\r\n      asegurado: {},\r\n      titular: {},\r\n      empleador: {}\r\n    }\r\n  })\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState,\r\n    control,\r\n    reset,\r\n    setValue,\r\n    setError,\r\n    watch\r\n  } = formMethods\r\n\r\n  const dm11Viewer = useModal(\"pdfModal\")\r\n\r\n  const loggedUser = useLoggedUser()\r\n  \r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regional![0].id,\r\n      asegurado!.id,\r\n      values.medico,\r\n      values.especialidad,\r\n      values.proveedor!,\r\n      values.prestacionesSolicitadas.map(({prestacion})=>({prestacion}))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11, regionalId}}) => {\r\n      if(loggedUser?.canAny([\r\n        Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,\r\n        Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR\r\n      ]) || (loggedUser?.can(Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL) && regionalId == loggedUser?.regionalId)){\r\n        dm11Viewer.open({url: urlDm11, title: \"Formulario D.M. - 11\"})\r\n        reset()\r\n      }\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n  const registrarError = registrar.error as AxiosError\r\n\r\n  useEffect(()=>{\r\n    if(registrarError?.response?.status == 422){\r\n      const {errors} = registrarError.response?.data\r\n      Object.keys(errors).forEach((key: any)=>{\r\n        let localKey = key\r\n        if(key == \"asegurado.id\") localKey = \"asegurado.matricula\"\r\n        setError(localKey, {type: \"serverError\", message: errors[key]})\r\n      })\r\n    }\r\n  }, [registrarError])\r\n\r\n  const renderAlert = ()=>{\r\n    if(registrar.isSuccess){\r\n      return <Alert variant=\"success\">\r\n      La operacion se realizó exitosamente\r\n    </Alert>\r\n    }\r\n    if(registrar.isError){\r\n      return registrarError.response?.status != 422 ? <Alert variant=\"danger\">\r\n        {registrarError ? registrarError.response?.data?.message || registrarError.message : \"\"}\r\n      </Alert> : null\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      {renderAlert()}\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard value={asegurado} onChange={(asegurado)=>{\r\n          setAsegurado(asegurado)\r\n        }} />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className={\"text-light \" + (formErrors.regional ? \"bg-danger\" : \"bg-primary\")} eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regional\"\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        //@ts-ignore\r\n                        style={{textTransform: \"uppercase\"}}                        \r\n                        inputProps={{\r\n                          style: {textTransform: \"uppercase\"}\r\n                        }}\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        filterBy={(regional: Regional)=>{\r\n                          return (loggedUser?.can(Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA) ? true : \r\n                            (regional.id == loggedUser?.regionalId))\r\n                        }}\r\n                        isInvalid={!!fieldState.error}\r\n                        feedback={fieldState.error?.message}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", \"\")\r\n                          setValue(\"proveedor\", \"\")\r\n                          field.onChange(regional)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header}  className={\"text-light \" + (formErrors.medico ? \"bg-danger\" : \"bg-primary\")} eventKey=\"2\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Form.Control\r\n                    style={{textTransform: \"uppercase\"}}\r\n                    isInvalid={!!formState.errors.medico}\r\n                    {...register(\"medico\")}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors?.medico?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Especialidad</Form.Label>\r\n                  <Form.Control\r\n                    style={{textTransform: \"uppercase\"}}\r\n                    isInvalid={!!formState.errors.especialidad}\r\n                    {...register(\"especialidad\")}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors?.especialidad?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\"/> : null}\r\n        <span>Guardar</span>\r\n      </Button>\r\n    </Form>\r\n  </FormProvider>\r\n}","import { useMemo } from \"react\"\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaProcedures, /*FaCoins,*/ FaHandshake, FaUserMd } from 'react-icons/fa';  \r\nimport { GiRodOfAsclepius } from 'react-icons/gi';  \r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { SolicitudATPolicy } from './solicitud_atencion_externa/policies';\r\nimport { Permisos, ProtectedRoute, useLoggedUser } from '../../commons/auth';\r\nimport { ListaMoraPolicy } from \"./mora/policies\";\r\nimport { Image } from \"react-bootstrap\";\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { url } = useRouteMatch()\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n\r\n    if(ListaMoraPolicy.index(loggedUser)){\r\n      items.push(\r\n        {\r\n          id: \"lista-mora\",\r\n          path: `${url}/lista-mora`,\r\n          title: \"Lista de mora\",\r\n          icon: <FcDebt  />\r\n        }\r\n      )\r\n    }\r\n\r\n    if(SolicitudATPolicy.index(loggedUser)) {\r\n      items.push({\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención externa\",\r\n        icon: <BiTransfer />\r\n      })\r\n    }\r\n    // if(MedicoPolicy.index(loggedUser)){\r\n    //   items.push({\r\n    //     id: \"medicos\",\r\n    //     path: `${url}/medicos`,\r\n    //     title: \"Medicos\",\r\n    //     icon: <FaUserMd />,\r\n    //   })\r\n    // }\r\n    // if(ProveedorPolicy.index(loggedUser)){\r\n    //   items.push({\r\n    //     id: \"proveedores\",\r\n    //     path: `${url}/proveedores`,\r\n    //     title: \"Proveedores\",\r\n    //     icon: <FaHandshake />\r\n    //   })\r\n    // }\r\n\r\n    // items.push(\r\n    //       {\r\n    //         id: \"especialidades\",\r\n    //         path: `${url}/especialidades`,\r\n    //         title: \"Especialidades\",\r\n    //         icon: <GiRodOfAsclepius />,\r\n    //       },\r\n    //       {\r\n    //         id: \"prestaciones\",\r\n    //         path: `${url}/prestaciones`,\r\n    //         title: \"Prestaciones\",\r\n    //         icon: <FaProcedures />,\r\n    //       }\r\n    // )\r\n    return items\r\n  }, [loggedUser])\r\n\r\n  return <SidebarLayout sidebar={{\r\n    header: <div className=\"d-flex justify-content-center\"><Image src=\"/logo-lg.png\" /></div>,\r\n    items: sidebarItems\r\n  }}>\r\n    <Switch>\r\n      <ProtectedRoute exact path={`${url}/lista-mora/agregar`}\r\n        authorize={ListaMoraPolicy.index}>\r\n        <ListaMoraItemForm />\r\n      </ProtectedRoute>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <ProtectedRoute exact path={`${url}/atencion-externa`}\r\n        authorize={SolicitudATPolicy.index}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/atencion-externa/registrar`}\r\n        authorize={SolicitudATPolicy.register}\r\n      >\r\n        <SolicitudAtencionExternaForm />\r\n      </ProtectedRoute>\r\n      {/* <ProtectedRoute exact path={`${url}/medicos`}\r\n        authorize={MedicoPolicy.index}\r\n      >\r\n        <MedicosIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}\r\n        authorize={(user, path) => path == `${url}/medicos/registrar` ? MedicoPolicy.register(user) : MedicoPolicy.edit(user) }\r\n      >\r\n        <MedicosForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/medicos/:id`}\r\n        authorize={MedicoPolicy.view}\r\n      >\r\n        <MedicoView />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores`}\r\n        authorize={ProveedorPolicy.index}\r\n      >\r\n        <ProveedoresIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/registrar`}\r\n        authorize={ProveedorPolicy.register}\r\n      >\r\n        <ProveedorWizard />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:id`}\r\n        authorize={ProveedorPolicy.view}\r\n      >\r\n        <ProveedorView />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:id/editar`}\r\n        authorize={ProveedorPolicy.edit}>\r\n        <ProveedorForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:idProveedor/editar-contacto`}\r\n        authorize={(user)=>ProveedorPolicy.register(user) || ProveedorPolicy.edit(user)}\r\n      >\r\n        <ContactoForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:idProveedor/contratos/registrar`}\r\n        authorize={ContratoPolicy.register}\r\n      >\r\n        <ContratoForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:idProveedor/contratos/:id`}\r\n        authorize={ProveedorPolicy.view}\r\n      >\r\n        <ContratoView />\r\n      </ProtectedRoute>\r\n      <Route path={`${url}/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={[`${url}/prestaciones/registrar`, `${url}/prestaciones/:id/editar`]}>\r\n      <PrestacionForm />\r\n    </Route>\r\n    <Route exact path={[`${url}/especialidades/registrar`, `${url}/especialidades/:id/editar`]}>\r\n      <EspecialidadForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp"],"sourceRoot":""}