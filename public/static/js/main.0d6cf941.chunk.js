/*! For license information please see main.0d6cf941.chunk.js.LICENSE.txt */
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{116:function(e){e.exports=JSON.parse('{"a":{"required":"Este campo es requerido.","maxLength":"Este campo no debe tener mas de {0} caracteres","pattern":"El valor no coincide con el patron esperado. {0}"}}')},148:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(34),r=a(43),c=a.n(r),i=a(98),s=a(78),o=a.n(s),l=a(58),d=c.a.create({baseURL:i.b,timeout:3e4,transformResponse:[].concat(Object(n.a)(c.a.defaults.transformResponse),[function(e){var t=Object(l.a)(e);return console.log("TransformedResponse",t),t}])});d.defaults.withCredentials=!0,d.interceptors.request.use((function(e){return e.headers.Accept="application/json",e.paramsSerializer=function(e){return o.a.stringify(e,{arrayFormat:"brackets",encode:!1})},e}))},149:function(e,t){},150:function(e,t){},151:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(31),r={getDepartamentos:function(){return n.b.get("departamentos")},getProvincias:function(){return n.b.get("provincias")},getMunicipios:function(){return n.b.get("municipios")}}},175:function(e,t,a){},200:function(e,t){},21:function(e,t,a){"use strict";var n=a(31);a.d(t,"apiClient",(function(){return n.a}));var r=a(148);a.d(t,"authClient",(function(){return r.a}));var c=a(149);a.o(c,"UnidadesTerritorialesService")&&a.d(t,"UnidadesTerritorialesService",(function(){return c.UnidadesTerritorialesService}));var i=a(150);a.o(i,"UnidadesTerritorialesService")&&a.d(t,"UnidadesTerritorialesService",(function(){return i.UnidadesTerritorialesService}));var s=a(151);a.d(t,"UnidadesTerritorialesService",(function(){return s.a}))},217:function(e,t,a){},218:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(36),i=a.n(c),s=a(248),o=a(255),l=a(249),d=a(250),j=a(231),u=a(154),b=a(241),O=a(153),h=a(23),m=a(19),x=a(163),p=a(15),f=a(4),v=a(229),g=a(38),C=a(33),y=a(1),N=function(e){return Object(y.jsxs)(y.Fragment,{children:[e.path?Object(y.jsxs)(h.b,{to:e.path,className:"list-group-item list-group-item-action border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(y.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id):Object(y.jsxs)("div",{className:"list-group-item border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(y.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id),e.items&&e.items.map((function(e){return Object(y.jsxs)(h.b,{to:e.path,style:{padding:".5rem 1rem",paddingLeft:"2rem"},className:"list-group-item list-group-item-action border-0 text-nowrap",children:[e.icon||null,Object(y.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id)}))]})},S=function(e){var t=e.className,a=void 0===t?"":t,n=e.side,r=void 0===n?"right":n,c=e.title,i=void 0===c?"":c,s=e.items,o=void 0===s?[]:s;e.renderItem,Object(C.a)(e,["className","side","title","items","renderItem"]);return Object(y.jsxs)("div",{className:"".concat(a,"  ").concat({left:"border-left",right:"border-right"}[r]),id:"sidebar-wrapper",children:[Object(y.jsx)("div",{className:"sidebar-heading",children:i}),Object(y.jsx)("div",{className:"list-group",children:o.map((function(e){return Object(y.jsx)(N,Object(f.a)({},e),e.id)}))})]})},w=(a(175),function(e){var t=e.sidebar,a=e.children,n=Object(g.c)((function(e){return e.main.showSidebar})),r=Object(m.j)();r.path,r.url;return Object(y.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(n?"":" toggled"),id:"wrapper",children:[Object(y.jsx)(S,Object(f.a)({className:"bg-white shadow-sm"},t)),Object(y.jsx)(v.a,{className:"d-flex flex-column flex-grow-1",children:Object(y.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:a})})]})}),I=a(161),L=a(10),k=a(230),E=a(70),F=a(243),z=a(232),M=a(245),R=a(252),P=a(251),G=function(e){var t=e.current,a=e.total,n=e.onChange,r=(t=Math.min(t,a+1))-1,c=a-t;r=Math.min(4-Math.min(2,c),r),c=Math.min(4-Math.min(2,r),c);var i=t-r,s=t+c;console.log("pag.",t,a,i,s);var o=[];if(s>1)for(var l=function(e){t==e?o.push(Object(y.jsx)(P.a.Item,{active:!0,children:e},e)):o.push(Object(y.jsx)(P.a.Item,{onClick:function(){return n(e)},children:e},e))},d=i;d<=s;d++)l(d);return Object(y.jsxs)(P.a,{children:[i>1?Object(y.jsx)(P.a.First,{onClick:function(){return n(1)}}):null,t>1?Object(y.jsx)(P.a.Prev,{onClick:function(){return n(t-1)}}):null,o,t<a?Object(y.jsx)(P.a.Next,{onClick:function(){return n(t+1)}}):null,s<a?Object(y.jsx)(P.a.Last,{onClick:function(){return n(a)}}):null]})},A=r.a.forwardRef((function(e,t){e.children,e.className;var a=Object(C.a)(e,["children","className"]);return Object(y.jsx)(O.a,Object(f.a)(Object(f.a)({className:"py-0 px-1"},a),{},{ref:t,children:Object(y.jsx)(p.f,{})}))})),B=a(31),T=function(e){return B.b.get("empleadores/buscar-por-patronal",{params:{numero_patronal:e}})},D=function(e,t){return B.b.get("/lista-mora",{params:{page:e,filter:{numero_patronal:t.numeroPatronal,nombre:t.nombre,nit:t.nit,regional_id:t.regionalId}}})},_=function(e){return B.b.post("lista-mora/agregar",{empleador_id:e})},q=function(e){return console.log(e),B.b.post("lista-mora/quitar",{empleador_id:e})},U=function(e){return null},V=function(){var e=Object(n.useState)(0),t=Object(L.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({current:1,size:10}),i=Object(L.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)({}),d=Object(L.a)(l,2),b=d[0],m=d[1],x=Object(n.useState)(!1),v=Object(L.a)(x,2),g=(v[0],v[1]),C=Object(M.a)(["fetchListaMora",s.current,s.size],(function(){return D(s,b)}),{keepPreviousData:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(e){var t=e.data.meta;r(t.total)}}),N=Object(R.a)((function(e){return q(e)}),{onSuccess:function(){C.refetch()}});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:"Empleadores en mora"}),Object(y.jsxs)("div",{className:"d-flex flex-nowrap",children:[Object(y.jsx)(j.a,{className:"mr-auto flex-nowrap",children:Object(y.jsxs)(u.a,{className:"d-flex flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;o((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})}),Object(y.jsxs)(j.a,{className:"ml-auto flex-nowrap",children:[Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{className:"my-2",onClick:function(){C.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{className:"my-2",onClick:function(){g((function(e){return!e}))},children:Object(y.jsx)(p.g,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{as:h.b,to:"/clinica/lista-mora/agregar",className:"my-2",children:"+Agregar"})})]})]}),Object(y.jsx)(U,{onApply:function(e){m(e)}}),Object(y.jsxs)(z.a,{responsive:!0,className:"text-nowrap",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{style:{width:1},children:"N\xba Patronal"}),Object(y.jsx)("th",{children:"Nombre"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(C.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(C.isError){var e,t,a=C.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}return C.data.data.records.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{lineHeight:"26px"},children:t+1}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:e.numeroPatronal}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:e.nombre}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-".concat(e.id)}),Object(y.jsx)(E.a.Menu,{children:Object(y.jsx)(E.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&N.mutate(e.empleadorId)},children:"Quitar"})})]})})]},e.id)}))}()})]}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsx)("span",{children:"Se encontraron ".concat(a," resultados")})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(G,{current:s.current,total:Math.ceil((a-s.size)/s.size)+1,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})})]})]})},H=a(233),K=a(17),W=a(116),Y=function(){return{value:!0,message:W.a.required}},Q=function(e){return{value:e,message:W.a.maxLength.format(e)}},X=function(e){return{value:e,message:W.a.pattern.format(e)}},J=function(){var e,t,a,r=Object(K.e)({mode:"onBlur",defaultValues:{nombre:"",numeroPatronal:""}}),c=r.handleSubmit,i=r.register,s=r.watch,o=r.setValue,l=r.reset,d=r.formState,j=s("numeroPatronal"),b=Object(M.a)(["buscarEmpleadorPorPatronal",j],(function(){return T(j)}),{enabled:!1}),h=Object(R.a)((function(e){return _(e)}));return console.log(h),Object(n.useEffect)((function(){b.data&&o("nombre",b.data.data.nombre)}),[b.data]),Object(n.useEffect)((function(){h.data&&l({nombre:"",numeroPatronal:""})}),[h.data]),Object(y.jsxs)(F.a,{id:"form-empleador-mora",onSubmit:c((function(e){h.mutate(b.data.data.id)})),children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:"Agregar empleador en mora"}),b.isError?Object(y.jsx)(H.a,{variant:"danger",children:(null===(e=b.error.response)||void 0===e?void 0:e.message)||b.error.message}):null,h.isError?Object(y.jsx)(H.a,{variant:"danger",children:(null===(t=h.error.response)||void 0===t?void 0:t.message)||h.error.message}):null,Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"N\xba Patronal"}),Object(y.jsx)(F.a.Control,Object(f.a)({},i("numeroPatronal")))]})}),Object(y.jsxs)(O.a,{className:"mb-3",onClick:function(){l({numeroPatronal:j,nombre:""}),b.refetch()},children:[b.isFetching?Object(y.jsx)(k.a,{className:"mr-2",animation:"border",size:"sm"}):Object(y.jsx)(p.k,{className:"mr-2"}),"Buscar"]}),Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!d.errors.nombre},i("nombre",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=d.errors.nombre)||void 0===a?void 0:a.message})]})}),Object(y.jsxs)(O.a,{type:"subimt",children:[h.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Agregar"]})]})},Z=a(242),$=a(156),ee=a.n($);function te(e){var t=e.url,a=e.height,r=void 0===a?600:a;return Object(n.useEffect)((function(){ee.a.embed(t,"#pdfcontainer",{fallbackLink:'<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href="[url]">aqu\xed</a></p>'})}),[t]),Object(y.jsx)("div",{id:"pdfcontainer",style:{height:r}})}var ae=a(238),ne=a(155),re=a(48),ce=a.n(re),ie=a(234),se=a(235),oe=a(236),le=a(237),de=a(256),je=a(239),ue=a(58),be=(a(204),a(157)),Oe=a(158),he=ce.a.icon({iconUrl:be.a,shadowUrl:Oe.a,iconSize:[25,41],iconAnchor:[12,41]});ce.a.Marker.prototype.options.icon=he;var me=function(e){var t=Object(n.useRef)(null),a=Object(n.useMemo)((function(){return{onclick:function(){var a=t.current;null!=a&&(a.remove(),e.onChange(null))},dragend:function(){var a=t.current;null!=a&&e.onChange(a.getLatLng())}}}),[]),r=Object(ie.a)({click:function(t){e.onChange(t.latlng),r.flyTo(t.latlng,r.getZoom())}});if(!e.position)return null;var c=Array.isArray(e.position)?e.position:[e.position.lat,e.position.lng],i=Object(L.a)(c,2),s=i[0],o=i[1];return Object(y.jsx)(se.a,{draggable:!0,ref:t,position:e.position,eventHandlers:a,children:Object(y.jsxs)(oe.a,{children:["A pretty CSS3 popup. ",Object(y.jsx)("br",{})," Easily customizable.",Object(y.jsx)("a",{href:"maps:".concat(s,",").concat(o),children:"Open with..."})]})})},xe=function(e){var t=Object(n.useState)((function(){return Object(ue.c)(e.value)})),a=Object(L.a)(t,2),r=a[0],c=a[1],i=Object(n.useRef)(null);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(le.a,{whenCreated:function(e){i.current=e},center:e.center,zoom:13,zoomControl:!1,style:{height:240,cursor:"crosshair"},children:[Object(y.jsx)(de.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(y.jsx)("div",{className:"leaflet-control-container",children:Object(y.jsx)("div",{className:"leaflet-top leaflet-left",style:{zIndex:999},children:Object(y.jsxs)(ae.a,{className:"leaflet-control bg-white",ref:function(e){e&&(e.onclick=function(e){e.stopPropagation()},e.onmousemove=function(e){console.log("OnMove"),e.stopPropagation()},e.ondblclick=function(e){e.stopPropagation()})},children:[Object(y.jsx)(ne.a,{value:r,onClick:function(e){console.log("ASFA"),e.preventDefault(),e.stopPropagation()},onChange:function(e){var t=e.target.value;c(t)}}),Object(y.jsx)(ae.a.Append,{children:Object(y.jsx)(O.a,{variant:"outline-secondary",ref:function(t){t&&(t.onclick=function(){var t=r.split(",");if(2==t.length){var a=Object(L.a)(t,2),n=a[0],c=a[1],s=[parseFloat(n),parseFloat(c)],o=s[0],l=s[1];Math.abs(o)<=90&&Math.abs(l)<=180&&(i.current.setView([o,l],13),e.onChange([o,l]))}})},onClick:function(){},children:Object(y.jsx)(p.k,{})})})]})})}),Object(y.jsx)(me,{position:e.value,onChange:function(t){e.onChange(t),c(Object(ue.c)(t))}}),Object(y.jsx)(je.a,{position:"bottomright"})]})})},pe=a(40),fe=a(21),ve=(a(65),function(e){var t,a,r,c,i=e.isInvalid,s=e.feedback,o=Object(C.a)(e,["isInvalid","feedback"]),l=Object(M.a)("getDepartamentos",(function(){return fe.UnidadesTerritorialesService.getDepartamentos()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var e;l.data&&(o.onLoad&&o.onLoad(null===(e=l.data)||void 0===e?void 0:e.data))}),[l.data]),Object(y.jsxs)(ae.a,{hasValidation:!0,children:[Object(y.jsx)(pe.b,Object(f.a)(Object(f.a)({className:l.isError||i?"is-invalid":"",isInvalid:l.isError||i},o),{},{isLoading:l.isFetching,options:(null===(t=l.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre",minLength:0,renderMenuItemChildren:function(e){return e.nombre}})),l.isError?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ae.a.Append,{children:Object(y.jsx)(O.a,{variant:"outline-danger",onClick:function(){return l.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:(null===(a=l.error)||void 0===a||null===(r=a.response)||void 0===r?void 0:r.message)||(null===(c=l.error)||void 0===c?void 0:c.message)||s})]}):null]})}),ge=function(e){var t,a,r,c,i=e.isInvalid,s=e.feedback,o=Object(C.a)(e,["isInvalid","feedback"]),l=Object(M.a)("getProvinciass",(function(){return fe.UnidadesTerritorialesService.getProvincias()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var e;l.data&&(o.onLoad&&o.onLoad(null===(e=l.data)||void 0===e?void 0:e.data))}),[l.data]),Object(y.jsxs)(ae.a,{hasValidation:!0,children:[Object(y.jsx)(pe.b,Object(f.a)(Object(f.a)({className:l.isError||i?"is-invalid":"",isInvalid:l.isError||i},o),{},{isLoading:l.isFetching,options:(null===(t=l.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre",minLength:0,renderMenuItemChildren:function(e){return e.nombre}})),l.isError?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ae.a.Append,{children:Object(y.jsx)(O.a,{variant:"outline-danger",onClick:function(){return l.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:(null===(a=l.error)||void 0===a||null===(r=a.response)||void 0===r?void 0:r.message)||(null===(c=l.error)||void 0===c?void 0:c.message)||s})]}):null]})},Ce=function(e){var t,a,r,c,i=e.isInvalid,s=e.feedback,o=Object(C.a)(e,["isInvalid","feedback"]),l=Object(M.a)("getMunicipios",(function(){return fe.UnidadesTerritorialesService.getMunicipios()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var e;l.data&&(o.onLoad&&o.onLoad(null===(e=l.data)||void 0===e?void 0:e.data))}),[l.data]),Object(y.jsxs)(ae.a,{hasValidation:!0,children:[Object(y.jsx)(pe.b,Object(f.a)(Object(f.a)({className:l.isError||i?"is-invalid":"",isInvalid:l.isError||i},o),{},{isLoading:l.isFetching,options:(null===(t=l.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre",minLength:0,renderMenuItemChildren:function(e){return e.nombre}})),l.isError?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ae.a.Append,{children:Object(y.jsx)(O.a,{variant:"outline-danger",onClick:function(){return l.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:(null===(a=l.error)||void 0===a||null===(r=a.response)||void 0===r?void 0:r.message)||(null===(c=l.error)||void 0===c?void 0:c.message)||s})]}):null]})},ye=function(){return B.b.get("regionales")},Ne=function(e){var t=Object(n.useState)([]),a=Object(L.a)(t,2),r=a[0],c=a[1],i=Object(M.a)("obtenerRegionales",(function(){return ye()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var t,a;i.data&&(c(null===(t=i.data)||void 0===t?void 0:t.data),e.onLoad&&e.onLoad(null===(a=i.data)||void 0===a?void 0:a.data))}),[i.data]),Object(y.jsx)(pe.a,Object(f.a)(Object(f.a)({},e),{},{isLoading:i.isFetching,options:r,labelKey:"nombre",useCache:!1,minLength:0,onSearch:function(e){},renderMenuItemChildren:function(e){return e.nombre}}))},Se=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)(!1),r=Object(L.a)(a,2),c=r[0],i=r[1];return Object(n.useImperativeHandle)(t,(function(){return{show:i}}),[]),Object(y.jsx)(Z.a,Object(f.a)(Object(f.a)({centered:!0},e),{},{show:c,onHide:function(){return i(!1)}}))})),we=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)(""),r=Object(L.a)(a,2),c=r[0],i=r[1],s=Object(n.useRef)(null);return Object(n.useImperativeHandle)(t,(function(){return{show:function(e){var t;return null===(t=s.current)||void 0===t?void 0:t.show(e)},setUrl:i}}),[]),Object(y.jsxs)(Se,Object(f.a)(Object(f.a)({},e),{},{ref:s,children:[Object(y.jsx)(Z.a.Header,{children:"D.M. - 11"}),Object(y.jsx)(Z.a.Body,{children:c?Object(y.jsx)(te,{url:c}):null}),Object(y.jsx)(Z.a.Footer,{})]}))})),Ie=function(e,t){return fe.apiClient.get("solicitudes-atencion-externa",{params:{filter:e,page:t}})},Le=function(e){return fe.apiClient.put("solicitudes-atencion-externa/".concat(e,"/generar-dm11"))},ke=function(e,t,a,n,r){return fe.apiClient.post("solicitudes-atencion-externa",{regional_id:e,asegurado_id:t,medico_id:a,proveedor_id:n,prestaciones_solicitadas:r})},Ee=function(e){return null},Fe=function(){var e=Object(m.h)().pathname,t=Object(n.useState)(0),a=Object(L.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({current:1,size:10}),s=Object(L.a)(i,2),o=s[0],l=s[1],d=Object(n.useState)({}),b=Object(L.a)(d,2),x=b[0],v=b[1],g=Object(n.useRef)(null),C=Object(M.a)(["buscarSolicitudesAtencionExterna",o,x],(function(){return Ie(x,o)}),{keepPreviousData:!0,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;c(t.total)}}),N=Object(R.a)((function(e){return Le(e)}),{onSuccess:function(e){var t,a,n=e.data.url;null===(t=g.current)||void 0===t||t.setUrl(n),null===(a=g.current)||void 0===a||a.show(!0)}});return Object(y.jsxs)("div",{className:"px-1",children:[Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitudes de atenci\xf3n externa"}),Object(y.jsx)("div",{className:"d-flex my-2",children:Object(y.jsxs)(j.a,{className:"ml-auto flex-nowrap",children:[Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){C.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){},children:Object(y.jsx)(p.g,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsxs)(O.a,{as:h.b,to:"".concat(e,"/registrar"),className:"d-flex align-items-center",children:[Object(y.jsx)(p.j,{className:"mr-2"}),"Nuevo"]})})]})}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(Ee,{onFilter:function(e){v(e)}})}),Object(y.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(y.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:o.size,onChange:function(e){var t=e.target.value;l((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})})]}),Object(y.jsxs)(z.a,{responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"N\xba"}),Object(y.jsx)("th",{children:"Fecha y hora"}),Object(y.jsx)("th",{children:"Matr\xedcula asegurado"}),Object(y.jsx)("th",{children:"Doctor"}),Object(y.jsx)("th",{children:"Proveedor"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(C.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(C.isError){var e,t,a=C.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var n=C.data.data.records;return 0==n.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t+1}),Object(y.jsx)("td",{children:e.numero}),Object(y.jsx)("td",{children:e.fecha}),Object(y.jsx)("td",{children:e.asegurado.matricula}),Object(y.jsx)("td",{children:e.medico}),Object(y.jsx)("td",{children:e.proveedor}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-solicitud-".concat(e.id)}),Object(y.jsx)(E.a.Menu,{children:e.urlDm11?Object(y.jsx)(E.a.Item,{href:"#",onClick:function(){var t,a;null===(t=g.current)||void 0===t||t.setUrl(e.urlDm11),null===(a=g.current)||void 0===a||a.show(!0)},children:"Ver D.M. - 11"}):Object(y.jsx)(E.a.Item,{href:"#",onClick:function(){N.mutate(e.numero)},children:"Generar D.M. - 11"})})]})})]},e.id)}))}()})]}),Object(y.jsxs)("div",{className:"d-flex flex-row",children:[Object(y.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(r," resultados")}),Object(y.jsx)(G,{current:o.current,total:Math.ceil((r-o.size)/o.size)+1,onChange:function(e){return l((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})]}),Object(y.jsx)(we,{ref:g})]})},ze=a(0),Me=function(e){return Object(ze.a)({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{d:"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z"}},{tag:"path",attr:{d:"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z"}},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z"}},{tag:"polygon",attr:{points:"14.4,40 10,40 10,44 14.1,44"}}]},{tag:"circle",attr:{cx:"36",cy:"36",r:"10"}},{tag:"path",attr:{fill:"#fff",d:"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z"}}]})(e)},Re=a(246),Pe=a(253);function Ge(e,t,a){return(e?e+" ":"")+"".concat(t,"  ").concat(a)}var Ae=Object(n.forwardRef)((function(e,t){return console.log(e.asegurados.length),Object(y.jsxs)(Se,Object(f.a)(Object(f.a)({},e),{},{ref:t,children:[Object(y.jsx)(Z.a.Header,{children:e.title}),Object(y.jsx)(Z.a.Body,{children:Object(y.jsxs)(z.a,{responsive:!0,className:"small",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Matricula"}),Object(y.jsx)("th",{children:"Nombre completo"}),Object(y.jsx)("th",{children:"Estado"}),Object(y.jsx)("th",{})]})}),Object(y.jsx)("tbody",{children:e.asegurados.length?e.asegurados.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:a+1}),Object(y.jsx)("td",{children:t.matricula}),Object(y.jsx)("td",{children:Ge(t.apellidoPaterno,t.apellidoMaterno,t.nombres)}),Object(y.jsx)("td",{children:t.estado?"Alta":"Baja"}),Object(y.jsx)("td",{children:Object(y.jsx)(O.a,{onClick:function(){console.log(t),e.onSelect(t)},children:"Seleccionar"})})]},t.id)})):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})})})]})})]}))})),Be=function(e){return fe.apiClient.get("asegurados",{params:{filter:{matricula:e},page:{size:10},include:"empleador,titular"}})},Te=a(64),De=a.n(Te),_e=function(){var e,t,a,r,c,i,s,o,l,d,j,b,h,m,x,v,g,N,S,w,I,L,E,z,R,P,G,A=Object(K.f)(),B=A.register,T=A.formState,D=A.trigger,_=A.setValue,q=(A.getValues,A.control),U=A.watch,V=Object(K.g)({control:q,name:"asegurado"}),H=Object(K.g)({control:q,name:"titular"}),W=Object(K.g)({control:q,name:"empleador"}),Q=Object(n.useRef)(null),J=V.matricula,Z=Object(M.a)(["buscarAseguradoPorMatricula",J],(function(){return Be(J)}),{enabled:!1,onSuccess:function(e){var t=e.data.records;if(1==t.length){var a=t[0];$(a)}else{var n;null===(n=Q.current)||void 0===n||n.show(!0)}}}),$=function(e){var t=e.empleador,a=e.titular,n=Object(C.a)(e,["empleador","titular"]);_("asegurado",n),_("titular",a||{}),_("empleador",t||{})};return Object(n.useEffect)((function(){var e;V.id&&(null===(e=T.dirtyFields.asegurado)||void 0===e?void 0:e.matricula)&&(_("asegurado.id",""),_("asegurado.apellidoPaterno",""),_("asegurado.apellidoMaterno",""),_("asegurado.nombres",""),_("asegurado.estado",""),_("asegurado.fechaValidezSeguro",""),_("asegurado.fechaExtinsion",""),_("titular.id",""),_("titular.apellidoPaterno",""),_("titular.apellidoMaterno",""),_("titular.nombres",""),_("titular.estado",""),_("titular.fechaValidezSeguro",""),_("empleador.numeroPatronal",""),_("empleador.nombre",""),_("empleador.estado",""),_("empleador.fechaBaja",""),_("empleador.aportes",""))}),[J]),Object(n.useEffect)((function(){console.log("Change ",V)}),[V]),Object(y.jsxs)(Pe.a,{children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"0",children:"Asegurado"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"0",children:Object(y.jsxs)(Pe.a.Body,{children:[Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(u.a,{lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{htmlFor:"asegurado-matricula",children:"Matr\xedcula"}),Object(y.jsxs)(ae.a,{hasValidation:!0,className:"mb-2",children:[Object(y.jsx)(ne.a,Object(f.a)({id:"asegurado-matricula",isInvalid:!!(null===(e=T.errors.asegurado)||void 0===e?void 0:e.matricula)||!!(null===(t=T.errors.asegurado)||void 0===t?void 0:t.id),className:"text-uppercase"},B("asegurado.matricula",{required:Y(),pattern:X(/^\d{2}-\d{4}-[a\xe1bcde\xe9fghijklmn\xf1o\xf3pqrstu\xfa\xfcvwxyzA\xc1BCDE\xc9FGHIJKLMN\xd1O\xd3PQRSTU\xda\xdcVWXYZ]{2,3}$/)}))),Object(y.jsx)(ae.a.Append,{children:Object(y.jsx)(O.a,{variant:"outline-secondary",onClick:function(){var e,t;(D("asegurado.matricula"),null===(e=T.errors.asegurado)||void 0===e?void 0:e.matricula)||((null===(t=T.dirtyFields.asegurado)||void 0===t?void 0:t.matricula)&&delete T.dirtyFields.asegurado.matricula,Z.refetch())},children:Z.isFetching?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):Object(y.jsx)(p.k,{})})}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=T.errors.asegurado)||void 0===a||null===(r=a.matricula)||void 0===r?void 0:r.message})]})]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Paterno"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(c=T.errors.asegurado)||void 0===c?void 0:c.apellidoPaterno)},B("asegurado.apellidoPaterno")))]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Materno"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(i=T.errors.asegurado)||void 0===i?void 0:i.apellidoPaterno)},B("asegurado.apellidoMaterno")))]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(s=T.errors.asegurado)||void 0===s?void 0:s.apellidoPaterno)},B("asegurado.nombres",{required:Y()})))]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Estado"}),Object(y.jsxs)(F.a.Control,Object(f.a)(Object(f.a)({as:"select",disabled:!0,isInvalid:!!(null===(o=T.errors.asegurado)||void 0===o?void 0:o.estado)},B("asegurado.estado")),{},{children:[Object(y.jsx)("option",{value:""}),Object(y.jsx)("option",{value:"1",children:"Alta"}),Object(y.jsx)("option",{value:"2",children:"Baja"})]}))]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Validez del seguro"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(l=T.errors.asegurado)||void 0===l?void 0:l.fechaValidezSeguro)},B("asegurado.fechaValidezSeguro",{validate:{afterDate:function(e){var t=De()();if(console.log("CHECK",U("asegurado")),"1"!=V.estado&&(!e||De()(e,"DD/MM/YYYY").isSameOrBefore(t)))return"El seguro ya no tiene validez"}}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(d=T.errors.asegurado)||void 0===d||null===(j=d.fechaValidezSeguro)||void 0===j?void 0:j.message})]}),2==U("asegurado.tipo")?Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Fecha extinsion"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(b=T.errors.asegurado)||void 0===b?void 0:b.fechaExtinsion)},B("asegurado.fechaExtinsion",{validate:{afterDate:function(e){var t=De()();if(e&&De()(e,"DD/MM/YYYY").isSameOrBefore(t))return"Se ha cumplido la fecha de extinsion"}}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(h=T.errors.asegurado)||void 0===h||null===(m=h.fechaExtinsion)||void 0===m?void 0:m.message})]}):null]}),Object(y.jsxs)("div",{className:(null===H||void 0===H?void 0:H.id)?"":"d-none",children:[Object(y.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Titular"}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Matricula"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0},B("titular.matricula")))]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Paterno"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0},B("titular.apellidoPaterno")))]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Materno"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0},B("titular.apellidoMaterno")))]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:3,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0},B("titular.nombres")))]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Estado"}),Object(y.jsxs)(F.a.Control,Object(f.a)(Object(f.a)({as:"select",disabled:!0},B("titular.estado")),{},{children:[Object(y.jsx)("option",{value:""}),Object(y.jsx)("option",{value:"1",children:"Alta"}),Object(y.jsx)("option",{value:"2",children:"Baja"})]}))]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Fecha de baja"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(x=T.errors.titular)||void 0===x?void 0:x.fechaValidezSeguro)},B("titular.fechaValidezSeguro",{validate:{afterDate:function(e){var t=De()();if(H.id&&"1"!=H.estado&&(!e||De()(e,"DD/MM/YYYY").isSameOrBefore(t)))return"El seguro del titular ya no tiene validez"}}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(v=T.errors.titular)||void 0===v||null===(g=v.fechaValidezSeguro)||void 0===g?void 0:g.message})]})]})]}),Object(y.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Empleador"}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"N\xba Patronal"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(N=T.errors.empleador)||void 0===N?void 0:N.numeroPatronal)},B("empleador.numeroPatronal",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(S=T.errors.empleador)||void 0===S||null===(w=S.numeroPatronal)||void 0===w?void 0:w.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:8,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0},B("empleador.nombre")))]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Estado"}),Object(y.jsxs)(F.a.Control,Object(f.a)(Object(f.a)({as:"select",disabled:!0},B("empleador.estado")),{},{children:[Object(y.jsx)("option",{value:""}),Object(y.jsx)("option",{value:"2",children:"Baja"}),Object(y.jsx)("option",{value:"1",children:"Alta"})]}))]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Fecha de baja"}),Object(y.jsx)(F.a.Control,Object(f.a)({disabled:!0,isInvalid:!!(null===(I=T.errors.empleador)||void 0===I?void 0:I.fechaBaja)},B("empleador.fechaBaja",{validate:{afterDate:function(e){var t=De()();if("1"!=W.estado&&(!e||De()(e,"DD/MM/YYYY").add(2,"months").isSameOrBefore(t)))return"El empleador ha sido dado de baja"}}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(L=T.errors.empleador)||void 0===L||null===(E=L.fechaBaja)||void 0===E?void 0:E.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Aportes"}),Object(y.jsxs)(F.a.Control,Object(f.a)(Object(f.a)({as:"select",disabled:!0,isInvalid:!!(null===(z=T.errors.empleador)||void 0===z?void 0:z.aportes)},B("empleador.aportes",{validate:{mora:function(e){if("2"==e)return"El empleador esta en mora"}}})),{},{children:[Object(y.jsx)("option",{}),Object(y.jsx)("option",{value:"2",children:"En mora"}),Object(y.jsx)("option",{value:"1",children:"Al d\xeda"})]})),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(R=T.errors.empleador)||void 0===R||null===(P=R.aportes)||void 0===P?void 0:P.message})]})]}),Object(y.jsx)(Ae,{ref:Q,title:"Resultados",asegurados:(null===(G=Z.data)||void 0===G?void 0:G.data.records)||[],onSelect:function(e){$(e),Q.current.show(!1)}})]})})]})},qe=a(99),Ue=a(43),Ve=a.n(Ue),He=function(e){var t=Ve.a.CancelToken.source(),a=fe.apiClient.get("medicos",{params:{filter:{nombre_completo:e||void 0},page:{current:1,size:10}},cancelToken:t.token});return a.cancel=function(){t.cancel("Query was cancelled by React Query")},a},Ke=function(e){var t,a,r=Object(n.useState)(""),c=Object(L.a)(r,2),i=c[0],s=c[1],o=["buscarMedico",i],l=Object(M.a)(o,(function(){return He(i)}),{enabled:!1}),d=Object(qe.b)();return Object(n.useEffect)((function(){i&&!l.data&&l.refetch()}),[i]),console.log("Medicos",i,l.isFetching,l.isError,l.isIdle,l.isStale,null===(t=l.data)||void 0===t?void 0:t.data.records,Date.now()),Object(y.jsx)(pe.a,Object(f.a)(Object(f.a)({flip:!0,filterBy:function(){return!0}},e),{},{isLoading:l.isFetching,options:(null===(a=l.data)||void 0===a?void 0:a.data.records)||[],labelKey:function(e){return(e.apellidoPaterno?e.apellidoPaterno+" ":"")+"".concat(e.apellidoMaterno," ").concat(e.nombres).trim()},useCache:!1,maxResults:10,minLength:2,onSearch:function(e){d.cancelQueries(o),s(e)},renderMenuItemChildren:function(e){var t=(e.apellidoPaterno?e.apellidoPaterno+" ":"")+"".concat(e.apellidoMaterno," ").concat(e.nombres).trim();return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:t}),Object(y.jsx)("div",{className:"small text-secondary",children:e.especialidad})]})}}))},We=function(e,t){var a=Ve.a.CancelToken.source(),n=fe.apiClient.get("prestaciones",{params:{filter:e,page:t}});return n.cancel=function(){a.cancel("Query was cancelled by React Query")},n},Ye=function(e){var t,a,r=Object(n.useState)(""),c=Object(L.a)(r,2),i=c[0],s=c[1],o=Object(n.useState)(1),l=Object(L.a)(o,2),d=l[0],j=l[1],u=["buscarPrestaciones",i,d],b=Object(M.a)(u,(function(){return We({nombre:i||void 0},{size:50,current:d})}),{enabled:!1}),O=Object(qe.b)();return Object(n.useEffect)((function(){b.data||b.refetch()}),[i]),Object(y.jsx)(pe.a,Object(f.a)(Object(f.a)({flip:!0,filterBy:function(){return!0}},e),{},{isLoading:b.isFetching,options:(null===(t=b.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.records)||[],labelKey:"nombre",useCache:!1,maxResults:50,minLength:0,onSearch:function(e){O.cancelQueries(u),s(e)},paginate:!0,onPaginate:function(e,t){j((function(e){return e+1}))},renderMenuItemChildren:function(e){return e.nombre}}))},Qe=function(e,t){return fe.apiClient.get("proveedores",{params:{filter:e,page:t}})},Xe=function(e){var t,a=["buscarProveedor",e.filter],n=Object(M.a)(a,(function(){return Qe(e.filter)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchOnMount:!1});return Object(y.jsx)(pe.a,Object(f.a)(Object(f.a)({flip:!0},e),{},{isLoading:n.isFetching,options:(null===(t=n.data)||void 0===t?void 0:t.data)||[],labelKey:function(e){if(e.medico){var t=e.medico;return t.nombres+(t.apellidoPaterno?" "+t.apellidoPaterno:"")+(t.apellidoMaterno?" "+t.apellidoMaterno:"")}return e.nombre},useCache:!1,maxResults:50,minLength:0,onSearch:function(e){},renderMenuItemChildren:function(e){var t,a;if(e.medico){var n=e.medico;t=n.nombres+(n.apellidoPaterno?" "+n.apellidoPaterno:"")+(n.apellidoMaterno?" "+n.apellidoMaterno:""),a=n.especialidad}else t=e.nombre,a="Empresa";return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:t}),Object(y.jsx)("div",{className:"small text-secondary",children:a})]})}}))},Je=function(){var e=Object(n.useState)(1),t=Object(L.a)(e,2),a=t[0],r=t[1],c=Object(K.f)(),i=c.register,s=c.control,o=(c.formState,c.watch),l=Object(K.c)({name:"proveedor",control:s,rules:{required:Y()}}),d=Object(K.d)({control:s,name:"prestacionesSolicitadas",keyName:"prestacionId"}),j=d.fields,u=d.append,b=d.remove;return Object(y.jsxs)(Pe.a,{style:{overflow:"visible"},children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"3",children:"Prestaciones"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"3",children:Object(y.jsxs)(z.a,{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Prestacion"}),Object(y.jsx)("th",{children:"Proveedor"}),Object(y.jsx)("th",{children:"Nota"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsxs)("tbody",{children:[j.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t+1}),Object(y.jsx)("td",{children:Object(y.jsx)(K.a,{name:"prestacionesSolicitadas.".concat(t,".prestacionId"),control:s,rules:{required:Y()},render:function(e){var a,n=e.field,r=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ye,{id:"solicitud-atencion-externa/prestacionesSolicitadas.".concat(t,".prestacionId"),className:r.error?"is-invalid":"",isInvalid:!!r.error,filterBy:function(e){var t=o("proveedor.0"),a=o("prestacionesSolicitadas");return!t||t.contrato.prestaciones.some((function(t){return t.id==e.id}))&&!a.some((function(t){return t.prestacionId==e.id}))},onBlur:n.onBlur,onChange:function(e){n.onChange(e.length?e[0].id:0)}}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=r.error)||void 0===a?void 0:a.message})]})}})}),Object(y.jsx)("td",{children:Object(y.jsx)(Xe,{id:"solicitud-atencion-externa/proveedor",filter:{activos:1},filterBy:function(e){return(!o("regionalId")||e.regionalId==o("regionalId"))&&o("prestacionesSolicitadas").every((function(t){return e.contrato.prestaciones.some((function(e){return e.id==t.prestacionId}))}))},onChange:l.field.onChange,onBlur:l.field.onBlur,selected:l.field.value})}),Object(y.jsx)("td",{children:Object(y.jsx)(F.a.Control,Object(f.a)({as:"textarea"},i("prestacionesSolicitadas.".concat(t,".nota"))))}),Object(y.jsx)("td",{children:Object(y.jsx)(O.a,{variant:"link",onClick:function(){console.log("Remove",t),b(t)},className:"btn-icon",children:Object(y.jsx)(p.i,{})})})]},e.id)})),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{}),Object(y.jsx)("td",{}),Object(y.jsx)("td",{}),Object(y.jsx)("td",{children:Object(y.jsx)(O.a,{variant:"link",onClick:function(){console.log(a),u({id:a}),r((function(e){return e+1}))},className:"btn-icon",children:Object(y.jsx)(p.j,{})})})]})]})]})})]})},Ze=function(){var e=Object(K.e)({mode:"onBlur",defaultValues:{prestacionesSolicitadas:[{id:0,prestacionId:null,nota:""}],asegurado:{apellidoPaterno:"",apellidoMaterno:"",nombres:"",estado:"",fechaExtinsion:"",fechaValidezSeguro:""}}}),t=e.handleSubmit,a=(e.register,e.trigger),r=e.formState,c=e.control,i=e.setValue,s=e.watch;console.log("Errors",r.errors);var o=Object(n.useRef)(null),l=Object(R.a)((function(e){return ke(e.regionalId,e.asegurado.id,e.medico[0].id,e.proveedor[0].id,e.prestacionesSolicitadas.map((function(e){return{prestacion_id:e.prestacionId,nota:e.nota}})))}),{onSuccess:function(e){var t,a,n=e.data.urlDm11;null===(t=o.current)||void 0===t||t.setUrl(n),null===(a=o.current)||void 0===a||a.show(!0)}});return Object(n.useEffect)((function(){i("asegurado.estado","-2")}),[]),Object(y.jsxs)(K.b,Object(f.a)(Object(f.a)({},e),{},{children:[Object(y.jsxs)(F.a,{onSubmit:t((function(e){console.log("onSubmit",e),l.mutate(e)})),children:[Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitud de atenci\xf3n externa"}),Object(y.jsxs)(Re.a,{className:"mt-3",defaultActiveKey:"0",children:[Object(y.jsx)(_e,{}),Object(y.jsxs)(Pe.a,{style:{overflow:"visible"},children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"1",children:"Regional"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"1",children:Object(y.jsx)(Pe.a.Body,{children:Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(K.a,{control:c,name:"regionalId",rules:{required:Y()},render:function(e){var t=e.field,n=e.fieldState;return Object(y.jsx)(Ne,{id:"solicitud-atencion-externa-form/regionales",searchText:"Buscando...",promptText:"Introduce un texto",isInvalid:!!n.error,onBlur:t.onBlur,onChange:function(e){i("medico",void 0),i("proveedor",void 0),a("medico"),a("proveedor"),t.onChange(e.length?e[0].id:null)}})}})]})})})})]}),Object(y.jsxs)(Pe.a,{style:{overflow:"visible"},children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"2",children:"M\xe9dico"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"2",children:Object(y.jsx)(Pe.a.Body,{children:Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(K.a,{control:c,name:"medico",rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ke,{id:"solicitud-atencion-externa-form/medicos",searchText:"Buscando...",promptText:"Introduce un texto",filterBy:function(e){return e.regionalId==s("regionalId")},className:n.error?"is-invalid":"",isInvalid:!!r.errors.medico,selected:a.value,onBlur:a.onBlur,onChange:a.onChange}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})})})})]}),Object(y.jsx)(Je,{})]}),Object(y.jsxs)(O.a,{className:"mt-3",type:"submit",children:[l.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar"]})]}),Object(y.jsx)(we,{ref:o})]}))},$e=a(240),et=function(e,t){var a=Ve.a.CancelToken.source(),n=B.b.get("/especialidades",{params:{filter:{nombre:e||void 0},page:t}});return n.cancel=function(){a.cancel("Query was cancelled by React Query")},n},tt=function(e,t,a){var n=new FormData;return n.append("archivo",e,e.name),n.append("separador",t),n.append("formato",a),B.b.post("/especialidades/importar",n,{headers:{"Content-Type":"multipart/form-data"}})},at=function(e){var t=Object(K.e)(),a=t.register,n=t.handleSubmit;return Object(y.jsx)(F.a,{onSubmit:n((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(y.jsxs)(F.a.Row,{className:"flex-nowrap",children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(F.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{className:"ml-2",type:"submit",children:Object(y.jsx)(p.k,{})})})]})})},nt=function(e){var t,a,r,c=e.modalRef,i=Object(n.useState)(!1),s=Object(L.a)(i,2),o=s[0],l=s[1],d=Object(K.e)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),b=d.register,h=d.formState,m=d.handleSubmit,x=Object(R.a)((function(e){return tt(e.archivo,e.separador,e.formatoSaltoLinea)}));return Object(n.useEffect)((function(){c.current={show:l}}),[]),Object(y.jsxs)(Z.a,{centered:!0,show:o,onHide:function(){return l(!1)},children:[Object(y.jsx)(Z.a.Header,{children:"Importar Datos"}),Object(y.jsx)(Z.a.Body,{children:Object(y.jsxs)(F.a,{id:"importar-especialidades-form",onSubmit:m((function(e){var t=e.archivo,a=e.separador,n=e.formatoSaltoLinea;x.mutate({archivo:t[0],separador:a,formatoSaltoLinea:n})})),children:[Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(y.jsx)(u.a,{className:"d-flex align-items-center",sm:"auto",children:Object(y.jsx)(F.a.File,Object(f.a)(Object(f.a)({isInvalid:!!h.errors.archivo},b("archivo",{required:Y()})),{},{feedback:null===(t=h.errors.archivo)||void 0===t?void 0:t.message}))})]}),Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Separador"}),Object(y.jsxs)(u.a,{xs:"auto",children:[Object(y.jsx)(F.a.Control,Object(f.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!h.errors.separador},b("separador",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=h.errors.separador)||void 0===a?void 0:a.message})]})]}),Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(y.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(y.jsx)(F.a.Check,Object(f.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},b("formatoSaltoLinea"))),Object(y.jsx)(F.a.Check,Object(f.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},b("formatoSaltoLinea")))]})]}),Object(y.jsx)(F.a.Check,Object(f.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!h.errors.aggrement,feedback:null===(r=h.errors.aggrement)||void 0===r?void 0:r.message},b("aggrement",{required:Y()})))]})}),Object(y.jsxs)(Z.a.Footer,{children:[Object(y.jsx)(O.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:"Importar"}),Object(y.jsx)(O.a,{children:"Cancelar"})]})]})},rt=function(){var e=Object(n.useState)(0),t=Object(L.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({current:1,size:10}),i=Object(L.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(""),d=Object(L.a)(l,2),b=d[0],h=d[1],m=Object(n.useRef)(),x=Object(M.a)(["buscarEspecialidades",s,b],(function(){return et(b,s)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;r(t.total)}});return Object(y.jsxs)("div",{className:"px-1",children:[Object(y.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Especialidades"}),Object(y.jsx)("div",{className:"d-flex mb-2",children:Object(y.jsxs)(E.a,{className:"ml-auto",as:$e.a,children:[Object(y.jsx)(O.a,{children:"Nuevo"}),Object(y.jsx)(E.a.Toggle,{split:!0,id:"especialidades-dropdown"}),Object(y.jsx)(E.a.Menu,{children:Object(y.jsx)(E.a.Item,{href:"#",onClick:function(){m.current&&m.current.show(!0)},children:"Importar"})})]})}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(at,{onSearch:function(e){h(e)}})}),Object(y.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(y.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;o((function(e){return{current:1,size:parseInt(t)}}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})})]}),Object(y.jsxs)(z.a,{responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Nombre"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(x.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(x.isError){var e,t,a=x.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var n=x.data.data.records;return 0==n.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t+1}),Object(y.jsx)("td",{children:e.nombre}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-especialidad-".concat(e.id)}),Object(y.jsx)(E.a.Menu,{children:Object(y.jsx)(E.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")},children:"Eliminar"})})]})})]},e.id)}))}()})]}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)(u.a,{children:Object(y.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(G,{current:s.current,total:Math.ceil((a-s.size)/s.size)+1,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})})]}),Object(y.jsx)(nt,{modalRef:m})]})},ct=Object(n.forwardRef)((function(e,t){var a,n,r,c=Object(K.e)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),i=c.register,s=c.formState,o=c.handleSubmit,l=Object(R.a)((function(t){var a=t.file,n=t.options;return e.import(a,n)}));return Object(y.jsxs)(Se,Object(f.a)(Object(f.a)({ref:t},e),{},{children:[Object(y.jsx)(Z.a.Header,{children:"Importar Datos"}),Object(y.jsx)(Z.a.Body,{children:Object(y.jsxs)(F.a,{id:"importar-especialidades-form",onSubmit:o((function(e){var t=e.archivo,a=e.separador,n=e.formatoSaltoLinea;l.mutate({file:t[0],options:{separator:a,format:n}})})),children:[l.data?Object(y.jsx)(H.a,{variant:l.isError?"danger":"success",children:l.isError?"Error":"Importacion existosa"}):null,Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(y.jsx)(u.a,{className:"d-flex align-items-center",sm:"auto",children:Object(y.jsx)(F.a.File,Object(f.a)(Object(f.a)({isInvalid:!!s.errors.archivo},i("archivo",{required:Y()})),{},{feedback:null===(a=s.errors.archivo)||void 0===a?void 0:a.message}))})]}),Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Separador"}),Object(y.jsxs)(u.a,{xs:"auto",children:[Object(y.jsx)(F.a.Control,Object(f.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!s.errors.separador},i("separador",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(n=s.errors.separador)||void 0===n?void 0:n.message})]})]}),Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(y.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(y.jsx)(F.a.Check,Object(f.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},i("formatoSaltoLinea"))),Object(y.jsx)(F.a.Check,Object(f.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},i("formatoSaltoLinea")))]})]}),Object(y.jsx)(F.a.Check,Object(f.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!s.errors.aggrement,feedback:null===(r=s.errors.aggrement)||void 0===r?void 0:r.message},i("aggrement",{required:Y()})))]})}),Object(y.jsxs)(Z.a.Footer,{children:[Object(y.jsxs)(O.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:[l.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Importar"]}),Object(y.jsx)(O.a,{children:"Cancelar"})]})]}))})),it=function(e,t){return fe.apiClient.get("/prestaciones",{params:{filter:{nombre:t||void 0},page:e}})},st=function(e){return fe.apiClient.get("prestaciones/".concat(e))},ot=function(e){return fe.apiClient.post("prestaciones",{nombre:e})},lt=function(e,t){return fe.apiClient.put("prestaciones/".concat(e),{nombre:t})},dt=function(e){return fe.apiClient.delete("prestaciones/".concat(e))},jt=function(e,t,a){var n=new FormData;return n.append("archivo",e,e.name),n.append("separador",t),n.append("formato",a),fe.apiClient.post("/prestaciones/importar",n,{headers:{"Content-Type":"multipart/form-data"}})},ut=function(e){var t=Object(K.e)(),a=t.register,n=t.handleSubmit;return Object(y.jsx)(F.a,{onSubmit:n((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(y.jsxs)(F.a.Row,{className:"flex-nowrap",children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(F.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{className:"ml-2",type:"submit",children:Object(y.jsx)(p.k,{})})})]})})},bt=function(){var e=Object(n.useState)(0),t=Object(L.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({current:1,size:10}),i=Object(L.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(""),d=Object(L.a)(l,2),b=d[0],m=d[1],x=Object(n.useRef)(null),v=Object(M.a)(["buscarPrestaciones",s,b],(function(){return it(s,b)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;r(t.total)}}),g=Object(R.a)((function(e){return dt(e)}));return Object(y.jsxs)("div",{className:"px-1",children:[Object(y.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Servicios subrogados"}),Object(y.jsxs)(j.a,{className:"mb-2",children:[Object(y.jsx)(u.a,{className:"ml-auto pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){return v.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsxs)(E.a,{as:$e.a,children:[Object(y.jsx)(O.a,{as:h.b,replace:!0,to:"/clinica/configuracion/prestaciones/registrar",children:"Nuevo"}),Object(y.jsx)(E.a.Toggle,{split:!0,id:"especialidades-dropdown"}),Object(y.jsx)(E.a.Menu,{children:Object(y.jsx)(E.a.Item,{onClick:function(){console.log(x),x.current&&x.current.show(!0)},children:"Importar"})})]})})]}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(ut,{onSearch:function(e){m(e)}})}),Object(y.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(y.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;o((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})})]}),Object(y.jsxs)(z.a,{responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Nombre"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(v.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(v.isError){var e,t,a=v.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var n=v.data.data.records;return 0==n.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t+1}),Object(y.jsx)("td",{children:e.nombre}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-prestacion-".concat(e.id)}),Object(y.jsxs)(E.a.Menu,{children:[Object(y.jsxs)(E.a.Item,{as:h.b,replace:!0,to:{pathname:"/clinica/configuracion/prestaciones/".concat(e.id,"/editar"),state:{prestacion:e}},children:[Object(y.jsx)(p.e,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(y.jsxs)(E.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&g.mutate(e.id)},children:[Object(y.jsx)(p.n,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Eliminar"})]})]})]})})]},e.id)}))}()})]}),Object(y.jsxs)("div",{className:"d-flex flex-row",children:[Object(y.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")}),Object(y.jsx)(G,{current:s.current,total:Math.ceil((a-s.size)/s.size)+1,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})]}),Object(y.jsx)(ct,{ref:x,import:function(e,t){return jt(e,t.separator,t.format)}})]})},Ot=function(){var e=Object(m.i)().id,t=Object(m.g)(),a=t.location.state,r=null===a||void 0===a?void 0:a.prestacion,c=Object(n.useRef)(!1),i=Object(K.e)(),s=i.handleSubmit,o=i.register,l=i.setValue,d=i.formState,j=Object(R.a)((function(t){var a=t.nombre;return e?lt(parseInt(e),a):ot(a)}),{onSuccess:function(){c.current||t.replace("/clinica/configuracion/prestaciones")}}),u=Object(M.a)(["verPrestacion",e],(function(){return st(parseInt(e))}),{enabled:!!e&&!r,refetchOnWindowFocus:!1,refetchOnReconnect:!1});Object(n.useEffect)((function(){var e,t;((null===(e=u.data)||void 0===e?void 0:e.data)||r)&&l("nombre",((null===(t=u.data)||void 0===t?void 0:t.data)||r).nombre)}),[u.data]);return Object(y.jsxs)(Z.a,{show:!0,centered:!0,onHide:function(){t.replace("/clinica/configuracion/prestaciones")},children:[Object(y.jsx)(Z.a.Header,{children:e?"Editar":"Registrar"}),Object(y.jsx)(Z.a.Body,{children:function(){var e,t,a;if(u.isFetching)return Object(y.jsx)(k.a,{animation:"border",children:"Cargando"});var n,r,c=u.error;return c?Object(y.jsx)(H.a,{variant:"danger",children:(null===(n=c.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||c.message}):Object(y.jsxs)(F.a,{id:"prestacion-form",onSubmit:s((function(e){j.mutate(e)})),children:["error"==j.status||"success"==j.status?Object(y.jsx)(H.a,{variant:j.isError?"danger":"success",children:j.isError?(null===(e=j.error.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||j.error.message:"Guardado"}):null,Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!d.errors.nombre},o("nombre",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=d.errors.nombre)||void 0===a?void 0:a.message})]})]})}()}),Object(y.jsxs)(Z.a.Footer,{children:[e?null:Object(y.jsxs)(O.a,{type:"submit",form:"prestacion-form",onClick:function(){c.current=!0},children:[j.isLoading&&c.current?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(y.jsxs)(O.a,{type:"submit",form:"prestacion-form",onClick:function(){c.current=!1},children:[j.isLoading&&!c.current?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]})},ht=function(e,t){return fe.apiClient.get("medicos",{params:{filter:e,page:t}})},mt=function(e){return fe.apiClient.get("medicos/".concat(e))},xt=function(e,t,a,n,r,c){return fe.apiClient.post("medicos",{ci:e.raiz,ci_complemento:e.complemento,apellido_paterno:t,apellido_materno:a,nombres:n,especialidad_id:r,regional_id:c})},pt=function(e,t,a,n,r,c,i){return fe.apiClient.put("medicos/".concat(e),{ci:t.raiz,ci_complemento:t.complemento,apellido_paterno:a,apellido_materno:n,nombres:r,especialidad_id:c,regional_id:i})},ft=function(e){return fe.apiClient.delete("medicos/".concat(e))},vt=function(e){return null},gt=function(){var e,t,a,r=Object(m.h)().pathname,c=Object(n.useState)({current:1,size:10}),i=Object(L.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)({}),d=Object(L.a)(l,2),b=d[0],x=d[1],v=Object(n.useState)(!1),g=Object(L.a)(v,2),C=(g[0],g[1]),N=Object(M.a)(["buscarMedicos",s.current,s.size],(function(){return ht(b,s)}),{refetchOnWindowFocus:!1,refetchOnReconnect:!1}),S=(null===(e=N.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0,w=Object(R.a)((function(e){return ft(e)}),{onSuccess:function(){N.refetch()}});return Object(y.jsxs)("div",{className:"px-1",children:[Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Medicos"}),Object(y.jsx)("div",{className:"d-flex my-2",children:Object(y.jsxs)(j.a,{className:"ml-auto flex-nowrap",children:[Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){N.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){C((function(e){return!e}))},children:Object(y.jsx)(p.g,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsxs)(O.a,{as:h.b,to:"".concat(r,"/registrar"),className:"d-flex align-items-center",children:[Object(y.jsx)(p.j,{}),Object(y.jsx)("span",{className:"mr-2",children:"Nuevo"})]})})]})}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(vt,{onFilter:function(e){x(e)}})}),Object(y.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(y.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;o((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})})]}),Object(y.jsxs)(z.a,{responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"C.I."}),Object(y.jsx)("th",{children:"Nombre"}),Object(y.jsx)("th",{children:"Especialidad"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(N.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(N.isError){var e,t,a=N.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}return N.data.data.records.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",style:{lineHeight:"26px"},children:t+1}),Object(y.jsxs)("td",{style:{lineHeight:"26px"},children:[e.ci.raiz,e.ci.complemento?"-".concat(e.ci.complemento):""]}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:Ge(e.apellidoPaterno,e.apellidoMaterno,e.nombres)}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:e.especialidad}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-".concat(e.id)}),Object(y.jsxs)(E.a.Menu,{children:[Object(y.jsxs)(E.a.Item,{as:h.b,to:{pathname:"/clinica/medicos/".concat(e.id,"/editar"),state:{medico:e}},children:[Object(y.jsx)(p.e,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(y.jsxs)(E.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&w.mutate(e.id)},children:[Object(y.jsx)(p.n,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Eliminar"})]})]})]})})]},e.id)}))}()})]}),Object(y.jsxs)("div",{className:"d-flex flex-row",children:[Object(y.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(S," resultados")}),Object(y.jsx)(G,{current:s.current,total:Math.ceil((S-s.size)/s.size)+1,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})]})]})},Ct=function(e){var t,a=Object(M.a)("obtenerEspecialidades",(function(){return et("")}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var t;a.data&&(e.onLoad&&e.onLoad(null===(t=a.data)||void 0===t?void 0:t.data))}),[a.data]),Object(y.jsx)(pe.a,Object(f.a)(Object(f.a)({positionFixed:!0,align:"left"},e),{},{isLoading:a.isFetching,options:(null===(t=a.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre",useCache:!1,minLength:0,onSearch:function(e){},renderMenuItemChildren:function(e){return e.nombre}}))},yt=function(){var e,t,a,r,c,i,s,o,l,d,j,b,h=Object(m.i)().id,x=Object(m.g)(),p=Object(n.useState)([]),v=Object(L.a)(p,2),g=v[0],C=v[1],N=Object(n.useState)([]),S=Object(L.a)(N,2),w=S[0],I=S[1],E=Object(n.useRef)(!1),z=Object(K.e)({defaultValues:{especialidad:[],regional:[]}}),P=z.handleSubmit,G=z.register,A=z.setValue,B=z.control,T=z.formState,D=Object(R.a)((function(e){return h?pt(parseInt(h),{raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id):xt({raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id)}),{onSuccess:function(){E.current||x.goBack()}}),_=Object(M.a)(["loadMedico",h],(function(){return mt(parseInt(h))}),{enabled:!!h&&!(null===(e=x.location.state)||void 0===e?void 0:e.medico),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),q=(null===(t=_.data)||void 0===t?void 0:t.data)||(null===(a=x.location.state)||void 0===a?void 0:a.medico);return Object(n.useEffect)((function(){q&&(A("ci",String(q.ci.raiz)),A("ciComplemento",q.ci.complemento),A("apellidoPaterno",q.apellidoPaterno),A("apellidoMaterno",q.apellidoMaterno),A("nombres",q.nombres))}),[q]),Object(n.useEffect)((function(){q&&g.length&&A("regional",g.filter((function(e){return e.id==q.regionalId})))}),[q,g]),Object(n.useEffect)((function(){q&&w.length&&A("especialidad",w.filter((function(e){return e.id==q.especialidadId})))}),[q,w]),"success"!=D.status||E.current||m.a,Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(F.a,{id:"prestacion-form",onSubmit:P((function(e){D.mutate(e)})),children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:h?"Actualizar":"Registrar Medico"}),"error"==D.status||"success"==D.status?Object(y.jsx)(H.a,{variant:D.isError?"danger":"success",children:D.isError?(null===(r=D.error.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||D.error.message:"Guardado"}):null,Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,xs:8,children:[Object(y.jsx)(F.a.Label,{children:"Carnet de identidad"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!T.errors.ci},G("ci",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(i=T.errors.ci)||void 0===i?void 0:i.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:2,xs:4,children:[Object(y.jsx)(F.a.Label,{children:"Complemento"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!T.errors.ci},G("ciComplemento",{maxLength:Q(2)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(s=T.errors.ciComplemento)||void 0===s?void 0:s.message})]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Paterno"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!T.errors.ci},G("apellidoPaterno",{}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(o=T.errors.apellidoPaterno)||void 0===o?void 0:o.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Materno"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!T.errors.ci},G("apellidoMaterno",{required:Y(),maxLength:Q(20)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(l=T.errors.apellidoMaterno)||void 0===l?void 0:l.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Nombres"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!T.errors.ci},G("nombres",{maxLength:Q(40)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(d=T.errors.nombres)||void 0===d?void 0:d.message})]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Especialidad"}),Object(y.jsx)(K.a,{name:"especialidad",control:B,rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ct,{id:"medicos-form/especialidades-typeahead",onLoad:function(e){return I(e)},className:T.errors.especialidad?"is-invalid":"",isInvalid:!!n.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Regional"}),Object(y.jsx)(K.a,{name:"regional",control:B,rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ne,{id:"medicos-form/regionales-typeahead",onLoad:function(e){return C(e)},className:n.error?"is-invalid":"",isInvalid:!!n.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})]}),Object(y.jsxs)("div",{className:"m-n1",children:[h?null:Object(y.jsxs)(O.a,{className:"m-1",type:"submit",form:"prestacion-form",onClick:function(){E.current=!0},children:[D.isLoading&&E.current?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(y.jsxs)(O.a,{className:"m-1",type:"submit",form:"prestacion-form",onClick:function(){E.current=!1},children:[D.isLoading&&!E.current?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]}),Object(y.jsx)(Z.a,{show:_.isFetching||_.isError,centered:!0,children:Object(y.jsx)(Z.a.Body,{children:_.isFetching?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(k.a,{animation:"border"}),"Cargando"]}):_.isError?Object(y.jsx)(H.a,{variant:"danger",children:(null===(j=_.error.response)||void 0===j||null===(b=j.data)||void 0===b?void 0:b.message)||_.error.message}):null})})]})},Nt={buscar:function(e,t){return fe.apiClient.get("proveedores",{params:{filter:e,page:t}})},cargar:function(e){return fe.apiClient.get("proveedores/".concat(e))},registrar:function(e){return fe.apiClient.post("proveedores",Object(ue.b)(e))},actualizar:function(e,t){return fe.apiClient.put("proveedores/".concat(e),Object(ue.b)(t))},eliminar:function(e){return fe.apiClient.get("proveedores/".concat(e))},actualizarInformacionDeContacto:function(e,t){return fe.apiClient.put("proveedores/".concat(e,"/contacto"),Object(ue.b)(t))}},St=function(e,t){return fe.apiClient.post("proveedores/".concat(e,"/contratos"),t)},wt=function(e){return null},It=function(){var e,t,a,r=Object(m.h)().pathname,c=Object(n.useState)({current:1,size:10}),i=Object(L.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)({}),d=Object(L.a)(l,2),b=d[0],x=d[1],v=Object(n.useState)(!1),g=Object(L.a)(v,2),C=(g[0],g[1]),N=Object(M.a)(["buscarProveedoress",b,s],(function(){return Nt.buscar(b,s)}),{refetchOnWindowFocus:!1,refetchOnReconnect:!1}),S=(null===(e=N.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0,w=Object(R.a)((function(e){return Nt.eliminar(e)}),{onSuccess:function(){N.refetch()}});return Object(y.jsxs)("div",{className:"px-1",children:[Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Proveedores"}),Object(y.jsx)("div",{className:"d-flex my-2",children:Object(y.jsxs)(j.a,{className:"ml-auto flex-nowrap",children:[Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){N.refetch()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){C((function(e){return!e}))},children:Object(y.jsx)(p.g,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsxs)(O.a,{as:h.b,to:"".concat(r,"/registrar"),className:"d-flex align-items-center",children:[Object(y.jsx)(p.j,{}),Object(y.jsx)("span",{className:"mr-2",children:"Nuevo"})]})})]})}),Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(wt,{onFilter:function(e){x(e)}})}),Object(y.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(y.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;o((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})})]}),Object(y.jsxs)(z.a,{responsive:!0,children:[Object(y.jsx)("thead",{className:"text-center",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Nombre"}),Object(y.jsx)("th",{style:{width:1},children:"Tipo"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){if(N.isFetching)return Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(N.isError){var e,t,a=N.error;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}return N.data.data.records.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",style:{lineHeight:"26px"},children:t+1}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:e.medico&&Ge(e.medico.apellidoPaterno,e.medico.apellidoMaterno,e.medico.nombres)||e.nombre}),Object(y.jsx)("td",{style:{lineHeight:"26px"},children:e.tipo}),Object(y.jsx)("td",{children:Object(y.jsxs)(E.a,{children:[Object(y.jsx)(E.a.Toggle,{as:A,variant:"link",id:"dropdown-".concat(e.id)}),Object(y.jsxs)(E.a.Menu,{children:[Object(y.jsxs)(E.a.Item,{as:h.b,to:{pathname:"".concat(r,"/").concat(e.id,"/editar"),state:{medico:e}},children:[Object(y.jsx)(p.e,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(y.jsxs)(E.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&w.mutate(e.id)},children:[Object(y.jsx)(p.n,{}),Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Eliminar"})]})]})]})})]},e.id)}))}()})]}),Object(y.jsxs)("div",{className:"d-flex flex-row",children:[Object(y.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(S," resultados")}),Object(y.jsx)(G,{current:s.current,total:Math.ceil((S-s.size)/s.size)+1,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))}})]})]})},Lt=function(e){e.proveedor,e.noRedirect;var t=e.next,a=Object(m.i)().id,r=Object(m.g)(),c=Object(n.useState)([]),i=Object(L.a)(c,2),s=(i[0],i[1]),o=Object(K.e)(),l=o.handleSubmit,d=o.register,j=o.control,b=Object(R.a)((function(e){return a?Nt.actualizar(parseInt(a),{tipoId:2,nit:parseInt(e.nit)||void 0,nombre:e.nombre,regionalId:e.regional.id}):Nt.registrar({tipoId:2,nit:parseInt(e.nit)||void 0,nombre:e.nombre,regionalId:e.regional.id})}));return Object(n.useEffect)((function(){b.data&&(t?(r.replace(r.location.pathname,{proveedor:b.data.data}),t()):r.replace("/clinica/proveedores/".concat(b.data.data.id)))}),[b.data]),Object(y.jsxs)(F.a,{onSubmit:l((function(e){b.mutate(e)})),children:[Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"NIT"}),Object(y.jsx)(F.a.Control,Object(f.a)({},d("nit",{pattern:X(/\d*/)})))]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:8,children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({},d("nombre",{required:Y()})))]})]}),Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Regional"}),Object(y.jsx)(K.a,{name:"regional",control:j,rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ne,{id:"medicos-form/regionales-typeahead",onLoad:function(e){return s(e)},className:n.error?"is-invalid":"",isInvalid:!!n.error,selected:a.value?[a.value]:[],onChange:function(e){return a.onChange(e.length&&e[0])},onBlur:a.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})}),Object(y.jsxs)(O.a,{type:"submit",children:[b.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},kt=function(e){var t,a,r,c,i,s,o,l,d,j,b,h,x,p,v,g=e.proveedor,C=(e.noRedirect,e.next),N=Object(n.useState)([]),S=Object(L.a)(N,2),w=S[0],I=S[1],E=Object(n.useState)([]),z=Object(L.a)(E,2),M=z[0],P=z[1],G=Object(m.i)().id,A=Object(m.g)(),B=Object(K.e)({mode:"onBlur",defaultValues:{nit:(null===g||void 0===g||null===(t=g.nit)||void 0===t?void 0:t.toString())||"",ci:(null===g||void 0===g||null===(a=g.medico)||void 0===a||null===(r=a.ci)||void 0===r?void 0:r.raiz.toString())||"",ciComplemento:(null===g||void 0===g||null===(c=g.medico)||void 0===c?void 0:c.ci.complemento)||"",apellidoPaterno:(null===g||void 0===g||null===(i=g.medico)||void 0===i?void 0:i.apellidoPaterno)||"",apellidoMaterno:(null===g||void 0===g||null===(s=g.medico)||void 0===s?void 0:s.apellidoMaterno)||"",nombres:null===g||void 0===g||null===(o=g.medico)||void 0===o?void 0:o.nombres,especialidad:[],regional:[]}}),T=B.handleSubmit,D=B.register,_=B.setValue,q=B.control,U=B.formState,V=Object(R.a)((function(e){return G?Nt.actualizar(parseInt(G),{tipoId:1,nit:parseInt(e.nit),ci:e.ci,ciComplemento:e.ciComplemento,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombres:e.nombres,especialidadId:e.especialidad[0].id,regionalId:e.regional[0].id}):Nt.registrar({tipoId:1,nit:parseInt(e.nit),ci:e.ci,ciComplemento:e.ciComplemento,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombres:e.nombres,especialidadId:e.especialidad[0].id,regionalId:e.regional[0].id})}));return Object(n.useEffect)((function(){g&&w.length&&_("regional",w.filter((function(e){return e.id==g.regionalId})))}),[g,w]),Object(n.useEffect)((function(){g&&M.length&&_("especialidad",M.filter((function(e){var t;return e.id==(null===(t=g.medico)||void 0===t?void 0:t.especialidadId)})))}),[g,M]),Object(n.useEffect)((function(){V.data&&(C?(A.replace(A.location.pathname,{proveedor:V.data.data}),C()):A.replace("/clinica/proveedores/".concat(V.data.data.id)))}),[V.data]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(F.a,{id:"prestacion-form",onSubmit:T((function(e){V.mutate(e)})),children:["error"==V.status||"success"==V.status?Object(y.jsx)(H.a,{variant:V.isError?"danger":"success",children:V.isError?(null===(l=V.error.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||V.error.message:"Guardado"}):null,Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,xs:8,children:[Object(y.jsx)(F.a.Label,{children:"NIT"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.nit},D("nit",{pattern:X(/\d*/)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(j=U.errors.ci)||void 0===j?void 0:j.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,xs:8,children:[Object(y.jsx)(F.a.Label,{children:"Carnet de identidad"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.ci},D("ci",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(b=U.errors.ci)||void 0===b?void 0:b.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:2,xs:4,children:[Object(y.jsx)(F.a.Label,{children:"Complemento"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.ciComplemento},D("ciComplemento",{maxLength:Q(2)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(h=U.errors.ciComplemento)||void 0===h?void 0:h.message})]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Paterno"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.apellidoPaterno},D("apellidoPaterno",{}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(x=U.errors.apellidoPaterno)||void 0===x?void 0:x.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Apellido Materno"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.apellidoMaterno},D("apellidoMaterno",{required:Y(),maxLength:Q(20)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(p=U.errors.apellidoMaterno)||void 0===p?void 0:p.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Nombres"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!U.errors.nombres},D("nombres",{required:Y(),maxLength:Q(40)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(v=U.errors.nombres)||void 0===v?void 0:v.message})]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Especialidad"}),Object(y.jsx)(K.a,{name:"especialidad",control:q,rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ct,{id:"medicos-form/especialidades-typeahead",onLoad:function(e){return P(e)},className:U.errors.especialidad?"is-invalid":"",isInvalid:!!n.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Regional"}),Object(y.jsx)(K.a,{name:"regional",control:q,rules:{required:Y()},render:function(e){var t,a=e.field,n=e.fieldState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ne,{id:"medicos-form/regionales-typeahead",onLoad:function(e){return I(e)},className:n.error?"is-invalid":"",isInvalid:!!n.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})]}),Object(y.jsxs)(O.a,{type:"submit",form:"prestacion-form",children:[V.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})})},Et=function(e){var t,a,r,c,i,s=Object(m.i)().id,o=Object(m.g)(),l=Object(n.useState)([]),d=Object(L.a)(l,2),j=(d[0],d[1]),b=Object(n.useState)([]),h=Object(L.a)(b,2),x=(h[0],h[1]),p=Object(n.useState)([]),v=Object(L.a)(p,2),g=(v[0],v[1]),C=Object(n.useState)(!1),N=Object(L.a)(C,2),S=N[0],w=N[1],I=Object(K.e)({defaultValues:{departamento:[],provincia:[],municipio:[],ubicacion:[-17.78629,-63.18117]}}),E=I.register,z=I.control,P=I.watch,G=I.formState,A=Object(M.a)(["cargarProveedor",s],(function(){return Nt.cargar(parseInt(s))}),{enabled:!(null===(t=o.location.state)||void 0===t?void 0:t.proveedor),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),B=Object(R.a)((function(e){var t,a;if(Array.isArray(e.ubicacion)){var n=Object(L.a)(e.ubicacion,2);t=n[0],a=n[1]}else{var r=e.ubicacion;t=r.lat,a=r.lng}return Nt.guardarInformacionDeContacto({municipioId:e.municipio[0].id,direccion:e.direccion,ubicacion:{latitud:t,longitud:a},telefono1:e.telefono1,telefono2:e.telefono2||void 0})}));(null===(a=o.location.state)||void 0===a?void 0:a.proveedor)||null===(r=A.data)||void 0===r||r.data;Object(n.useEffect)((function(){A.data&&(e.next?e.next():o.replace("/clinica/proveedores/".concat(s||A.data.data.id)))}),[A.data]),Object(n.useEffect)((function(){A.isLoading&&w(!0)}),[A.isLoading]);return Object(y.jsxs)(F.a,{children:[function(){var e,t,a;return Object(y.jsxs)(Z.a,{centered:!0,show:S,onHide:function(){A.isError&&w(!1)},children:[Object(y.jsx)(Z.a.Header,{children:"Cargando"}),Object(y.jsx)(Z.a.Body,{children:A.isLoading?Object(y.jsx)(k.a,{animation:"border"}):Object(y.jsx)(H.a,{variant:"danger",children:(null===(e=A.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.message)||(null===(a=A.error)||void 0===a?void 0:a.message)})})]})}(),Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Informaci\xf3n de contacto"}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Departamento"}),Object(y.jsx)(K.a,{name:"departamento",control:z,rules:{required:Y()},render:function(e){var t=e.field,a=e.fieldState;return Object(y.jsx)(ve,{id:"contacto-form/departamentos",onLoad:function(e){j(e)},isInvalid:!!a.error,selected:t.value,onChange:t.onChange,onBlur:t.onBlur})}})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Provincia"}),Object(y.jsx)(K.a,{name:"provincia",control:z,rules:{required:Y()},render:function(e){var t=e.field,a=e.fieldState;return Object(y.jsx)(ge,{id:"contacto-form/provincias",onLoad:function(e){x(e)},filterBy:function(e){var t=P("departamento");return!!t.length&&e.departamentoId==t[0].id},isInvalid:!!a.error,selected:t.value,onChange:t.onChange,onBlur:t.onBlur})}})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Municipio"}),Object(y.jsx)(K.a,{name:"municipio",control:z,render:function(e){var t=e.field,a=e.fieldState;return Object(y.jsx)(Ce,{id:"contacto-form/municipios",onLoad:function(e){g(e)},filterBy:function(e){var t=P("provincia");return!!t.length&&e.provinciaId==t[0].id},isInvalid:!!a.error,selected:t.value,onChange:t.onChange,onBlur:t.onBlur})}})]})]}),Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,children:[Object(y.jsx)(F.a.Label,{children:"Direccion"}),Object(y.jsx)(F.a.Control,{as:"textarea"})]})}),Object(y.jsx)(F.a.Row,{children:Object(y.jsxs)(F.a.Group,{as:u.a,children:[Object(y.jsx)(F.a.Label,{children:"Ubicaci\xf3n"}),Object(y.jsx)(K.a,{name:"ubicacion",control:z,render:function(e){var t=e.field;e.fieldState;return console.log("Location",t),Object(y.jsx)(xe,{center:t.value||[-17.78629,-63.18117],value:t.value,onChange:t.onChange})}})]})}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Tel\xe9fono 1"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!G.errors.telefono1},E("telefono1",{required:Y(),pattern:X(/\d{7,8}/)}))),Object(y.jsx)(F.a.Control.Feedback,{children:null===(c=G.errors.telefono1)||void 0===c?void 0:c.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,children:[Object(y.jsx)(F.a.Label,{children:"Tel\xe9fono 2"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!G.errors.telefono1},E("telefono1",{pattern:X(/\d{7,8}/)}))),Object(y.jsx)(F.a.Control.Feedback,{children:null===(i=G.errors.telefono1)||void 0===i?void 0:i.message})]})]}),Object(y.jsxs)(O.a,{children:[B.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,Object(y.jsx)("span",{className:"ml-2 align-middle",children:"Guardar"})]}),e.next?Object(y.jsx)(O.a,{variant:"link",onClick:function(){e.next&&e.next()},children:"Omitir"}):null]})},Ft=function(){var e=Object(K.f)(),t=(e.register,e.control),a=(e.trigger,e.watch),n=Object(K.d)({name:"prestaciones",control:t}),r=n.fields,c=n.append,i=n.remove;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Servicios subrogados"}),r.map((function(e,n){return Object(y.jsx)(F.a.Row,{className:"py-2 border-bottom",children:Object(y.jsx)(F.a.Group,{as:u.a,xs:12,children:Object(y.jsx)(K.a,{name:"prestaciones.".concat(n,".prestacion"),control:t,rules:{required:Y()},render:function(e){var t,r=e.field,c=e.fieldState;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(Ye,{id:"proveedor-contrato/prestaciones.".concat(n),className:c.error?"is-invalid":"",isInvalid:!!c.error,filterBy:function(e){return!a("prestaciones").some((function(t){var a;return(null===(a=t.prestacion)||void 0===a?void 0:a.id)==e.id}))},selected:r.value?[r.value]:[],onChange:function(e){r.onChange(e.length?e[0]:0)},onBlur:r.onBlur}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=c.error)||void 0===t?void 0:t.message})]}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{variant:"danger",onClick:function(){i(n)},children:"Quitar"})})]})})}})})},e.id)})),Object(y.jsx)(F.a.Row,{className:"py-2",children:Object(y.jsx)(u.a,{className:"ml-auto",xs:"auto",children:Object(y.jsx)(O.a,{onClick:function(){c({})},children:"Agregar"})})})]})},zt=function(e){var t,a,r=Object(m.i)().idProveedor,c=Object(m.g)(),i=Object(K.e)({defaultValues:{prestaciones:[{}]}}),s=Object(R.a)((function(e){return St(parseInt(r)||c.location.state.proveedor.id,{inicio:e.inicio,fin:e.fin,prestacion_ids:e.prestaciones.map((function(e){return e.prestacion.id}))})})),o=i.handleSubmit,l=i.register,d=i.formState;i.control;return Object(n.useEffect)((function(){s.data&&(e.next?e.next():c.replace("/clinica/proveedores/".concat(parseInt(r)||c.location.state.proveedor.id,"#contratos")))}),[s.data]),Object(y.jsx)(K.b,Object(f.a)(Object(f.a)({},i),{},{children:Object(y.jsxs)(F.a,{onSubmit:o((function(e){console.log(e),s.mutate(e)})),children:[Object(y.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Contrato"}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:6,children:[Object(y.jsx)(F.a.Label,{children:"Inicio"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"date",isInvalid:!!d.errors.inicio},l("inicio",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=d.errors.inicio)||void 0===t?void 0:t.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:6,children:[Object(y.jsx)(F.a.Label,{children:"Fin"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"date",isInvalid:!!d.errors.fin},l("fin",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=d.errors.fin)||void 0===a?void 0:a.message})]})]}),Object(y.jsx)(F.a.Row,{children:Object(y.jsx)(u.a,{children:Object(y.jsx)(Ft,{})})}),Object(y.jsx)(F.a.Row,{children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(O.a,{type:"submit",children:[s.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,Object(y.jsx)("span",{className:"ml-1 align-middle",children:"Guardar"})]})})})]})}))},Mt=function(){var e,t,a,r=Object(n.useState)(0),c=Object(L.a)(r,2),i=c[0],s=c[1],o=Object(n.useState)(1),l=Object(L.a)(o,2),d=l[0],b=l[1],O=Object(n.useState)(!1),h=Object(L.a)(O,2),x=h[0],p=h[1],f=Object(m.i)().id,v=Object(m.g)(),g=Object(M.a)(["cargarProveedor",f],(function(){return Nt.cargar(parseInt(f))}),{enabled:!!f&&!(null===(e=v.location.state)||void 0===e?void 0:e.proveedor),refetchOnReconnect:!1,refetchOnWindowFocus:!1}),C=(null===(t=g.data)||void 0===t?void 0:t.data)||(null===(a=v.location.state)||void 0===a?void 0:a.proveedor);Object(n.useEffect)((function(){C&&s(C.tipoId)}),[C]),Object(n.useEffect)((function(){g.isLoading&&p(!0)}),[g.isLoading]);console.log(i,d);return 1==d?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:f?"Actualizacion de Proveedor":"Registro de Proveedor"}),Object(y.jsxs)(F.a.Group,{as:j.a,children:[Object(y.jsx)(F.a.Label,{column:!0,sm:"auto",children:"Tipo de proveedor"}),Object(y.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(y.jsx)(F.a.Check,{disabled:!!f,inline:!0,type:"radio",label:"M\xe9dico",value:1,checked:1==i,onChange:function(e){e.target.checked&&!f&&s(1)}}),Object(y.jsx)(F.a.Check,{inline:!0,type:"radio",label:"Empresa",value:2,checked:2==i,onChange:function(e){e.target.checked&&!f&&s(2)}})]})]}),function(){var e,t,a;return Object(y.jsxs)(Z.a,{centered:!0,show:x,onHide:function(){g.isError&&p(!1)},children:[Object(y.jsx)(Z.a.Header,{children:"Cargando"}),Object(y.jsx)(Z.a.Body,{children:g.isLoading?Object(y.jsx)(k.a,{animation:"border"}):Object(y.jsx)(H.a,{variant:"danger",children:(null===(e=g.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.message)||(null===(a=g.error)||void 0===a?void 0:a.message)})})]})}(),1==i?Object(y.jsx)(kt,{proveedor:C,next:function(){f||b(2)}}):2==i?Object(y.jsx)(Lt,{proveedor:C,next:function(){f||b(2)}}):null]}):2==d?Object(y.jsx)(Et,{next:function(){b(3)}}):3==d?Object(y.jsx)(zt,{next:function(){v.replace("/clinica/proveedores/".concat(v.location.state.proveedor.id))}}):null},Rt=function(){var e=Object(m.j)(),t=(e.path,e.url);return Object(y.jsxs)(w,{sidebar:{items:[{id:"lista-mora",path:"".concat(t,"/lista-mora"),title:"Lista de mora",icon:Object(y.jsx)(Me,{})},{id:"atencion-externa",path:"".concat(t,"/atencion-externa"),title:"Atenci\xf3n exterana",icon:Object(y.jsx)(I.a,{})},{id:"configuracion/medicos",path:"".concat(t,"/medicos"),title:"Medicos",icon:Object(y.jsx)(p.p,{})},{id:"configuracion/proveedores",path:"".concat(t,"/proveedores"),title:"Proveedores",icon:Object(y.jsx)(p.h,{})},{id:"configuracion",title:"Configuraci\xf3n",icon:Object(y.jsx)(p.d,{}),items:[{id:"configuracion/especialidades",path:"".concat(t,"/configuracion/especialidades"),title:"Especialidades",icon:Object(y.jsx)(p.d,{})},{id:"configuracion/prestaciones",path:"".concat(t,"/configuracion/prestaciones"),title:"Servicios subrogados",icon:Object(y.jsx)(p.d,{})}]}]},children:[Object(y.jsxs)(m.d,{children:[Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/lista-mora/agregar"),children:Object(y.jsx)(J,{})}),Object(y.jsx)(m.b,{path:"".concat(t,"/lista-mora"),children:Object(y.jsx)(V,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/atencion-externa"),children:Object(y.jsx)(Fe,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/atencion-externa/registrar"),children:Object(y.jsx)(Ze,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/medicos"),children:Object(y.jsx)(gt,{})}),Object(y.jsx)(m.b,{exact:!0,path:["".concat(t,"/medicos/registrar"),"".concat(t,"/medicos/:id/editar")],children:Object(y.jsx)(yt,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/proveedores"),children:Object(y.jsx)(It,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/proveedores/registrar"),children:Object(y.jsx)(Mt,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/proveedores/:id/contacto"),children:Object(y.jsx)(Et,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/proveedores/:idProveedor/contratos/registrar"),children:Object(y.jsx)(zt,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/configuracion/especialidades"),children:Object(y.jsx)(rt,{})}),Object(y.jsx)(m.b,{path:"".concat(t,"/configuracion/prestaciones"),children:Object(y.jsx)(bt,{})})]}),Object(y.jsx)(m.b,{exact:!0,path:["".concat(t,"/configuracion/prestaciones/registrar"),"".concat(t,"/configuracion/prestaciones/:id/editar")],children:Object(y.jsx)(Ot,{})})]})},Pt=a(27),Gt=a.n(Pt),At=a(46),Bt=a(162),Tt=function(e,t){return B.b.get("/users",{params:{page:e,filter:t}})},Dt=function(e){return B.b.get("/users/".concat(e))},_t=function(e){var t=e.username,a=e.password,n=e.externalId,r=e.roleIds;return B.b.post("/users",{username:t,password:a,external_id:n,role_ids:r})},qt=function(e){var t=e.id,a=e.username,n=e.roleIds;return B.b.put("/users/".concat(t),{username:a,role_ids:n})},Ut=function(){return B.b.get("/roles")},Vt=function(e){return B.b.get("/roles/".concat(e))},Ht=function(e){return B.b.post("roles",e)},Kt=function(e){return B.b.put("roles/".concat(e.id),e)},Wt=function(){return B.b.get("/permissions")},Yt=a(78),Qt=a.n(Yt),Xt=function(e){var t=e.current,a=e.minimum,r=e.maximum,c=e.total,i=Object(C.a)(e,["current","minimum","maximum","total"]);console.log(t,a,r,c);for(var s=Object(m.h)(),o=(s.pathname,s.search),l=(Object(g.b)(),Object(n.useMemo)((function(){return Qt.a.parse(o.substr(1))}),[o]).page,[]),d=function(e){t==e?l.push(Object(y.jsx)(P.a.Item,{active:!0,children:e},e)):l.push(Object(y.jsx)(P.a.Item,{onClick:function(){return i.onClickItem(e)},children:e},e))},j=a;j<=r;j++)d(j);return Object(y.jsxs)(P.a,{children:[a>1?Object(y.jsx)(P.a.First,{onClick:i.onClickFirst}):null,t>1?Object(y.jsx)(P.a.Prev,{onClick:i.onClickPrev}):null,l,t<c?Object(y.jsx)(P.a.Next,{onClick:i.onClickNext}):null,r<c?Object(y.jsx)(P.a.Last,{onClick:i.onClickLast}):null]})},Jt=function(e){var t=Object(n.useState)({username:"",active:""}),a=Object(L.a)(t,2),r=a[0],c=a[1];return Object(y.jsx)(F.a,Object(f.a)(Object(f.a)({},e),{},{onSubmit:function(t){t.preventDefault(),e.onSubmit&&e.onSubmit(t)},children:Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(F.a.Label,{htmlFor:"username-filter",srOnly:!0,children:"Usuario"}),Object(y.jsx)(F.a.Control,{className:"mb-2",id:"username-filter",value:r.username,onChange:function(e){var t=e.target.value;c((function(e){return Object(f.a)(Object(f.a)({},e),{},{username:t})}))},placeholder:"Usuario"})]}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(F.a.Label,{htmlFor:"status-filter",srOnly:!0,children:"Estado"}),Object(y.jsxs)(F.a.Control,{as:"select",className:"mb-2",id:"status-filter",value:r.active,onChange:function(e){var t=e.target.value;c((function(e){return Object(f.a)(Object(f.a)({},e),{},{active:t})}))},children:[Object(y.jsx)("option",{value:"",children:"Elige un estado"}),Object(y.jsx)("option",{value:"1",children:"Activo"}),Object(y.jsx)("option",{value:"0",children:"Inactivo"})]})]}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{type:"submit",children:"Aplicar"})})]})}))},Zt=function(){Object(g.b)();var e=Object(n.useState)({current:1,size:10}),t=Object(L.a)(e,2),a=t[0],r=a.current,c=a.size,i=t[1],s=Object(n.useState)({username:void 0,active:void 0}),o=Object(L.a)(s,2),l=o[0],d=o[1],b=Object(n.useState)(!1),x=Object(L.a)(b,2),v=x[0],C=x[1],N=Object(m.h)(),S=(N.search,N.state,Object(m.j)()),w=(S.url,S.path),I=Object(M.a)(["fetchUsers",r,c,l],Object(At.a)(Gt.a.mark((function e(){var t;return Gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt({current:r,size:c},l);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),{keepPreviousData:!0,refetchOnWindowFocus:!1}),E=I.isFetching,R=I.isError,P=I.data,G=I.error,A=I.refetch,B=null===P||void 0===P?void 0:P.data.records,T=(null===P||void 0===P?void 0:P.data.meta.total)||0;return Object(n.useEffect)((function(){document.title="Usuarios"}),[]),Object(y.jsxs)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:"Usuarios"}),Object(y.jsxs)("div",{className:"d-flex flex-nowrap",children:[Object(y.jsx)(j.a,{className:"mr-auto flex-nowrap",children:Object(y.jsxs)(u.a,{className:"d-flex flex-nowrap align-items-center",children:[Object(y.jsx)("span",{children:"Mostrar"}),Object(y.jsxs)(F.a.Control,{className:"mx-2",as:"select",value:c,onChange:function(e){var t=e.target.value;i((function(e){return Object(f.a)(Object(f.a)({},e),{},{size:parseInt(t)})}))},children:[Object(y.jsx)("option",{value:10,children:"10"}),Object(y.jsx)("option",{value:20,children:"20"}),Object(y.jsx)("option",{value:30,children:"30"}),Object(y.jsx)("option",{value:50,children:"50"}),Object(y.jsx)("option",{value:100,children:"100"})]}),Object(y.jsx)("span",{children:"filas"})]})}),Object(y.jsxs)(j.a,{className:"ml-auto flex-nowrap",children:[Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{className:"my-2",onClick:function(){A()},children:Object(y.jsx)(p.l,{})})}),Object(y.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(y.jsx)(O.a,{className:"my-2",onClick:function(){C((function(e){return!e}))},children:Object(y.jsx)(p.g,{})})}),Object(y.jsx)(u.a,{xs:"auto",children:Object(y.jsx)(O.a,{as:h.b,to:"".concat(w,"/registrar"),className:"my-2",onClick:function(){},children:Object(y.jsx)(p.q,{})})})]})]}),Object(y.jsx)(Jt,{className:"mt-2"+(v?"":" d-none"),onApply:function(e){C(!1),d(e)}}),Object(y.jsxs)(z.a,{responsive:!0,className:"small text-nowrap",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:1},children:"#"}),Object(y.jsx)("th",{children:"Nombre de usuario"}),Object(y.jsx)("th",{style:{width:"6rem"},children:"Estado"}),Object(y.jsx)("th",{style:{width:1}})]})}),Object(y.jsx)("tbody",{children:function(){var e,t;return E?Object(y.jsx)("tr",{children:Object(y.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(y.jsx)(k.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})}):R?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"bg-light text-center",colSpan:100,children:(null===(e=G.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||G.message})}):null===B||void 0===B?void 0:B.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:t+1}),Object(y.jsx)("td",{children:e.username}),Object(y.jsx)("td",{className:e.active?"bg-success":"bg-danger",children:Object(y.jsx)("span",{className:"text-light",children:e.active?"Activo":"Inactivo"})}),Object(y.jsx)("td",{children:Object(y.jsx)("div",{className:"d-flex",children:Object(y.jsx)(O.a,{className:"btn-icon",variant:"link",children:Object(y.jsx)(Bt.a,{})})})})]},e.id)}))}()})]}),Object(y.jsx)("div",{className:"mt-auto align-self-center",children:Object(y.jsx)(Xt,{current:r,minimum:Math.max(1,r-4),maximum:Math.min(Math.trunc((T-c)/c)+1,r+4),total:(T-c)/c+1,onClickFirst:function(){return i((function(e){return Object(f.a)(Object(f.a)({},e),{},{current:1})}))},onClickPrev:function(){console.log("Previous"),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{current:e.current-1})}))},onClickItem:function(e){return i((function(t){return Object(f.a)(Object(f.a)({},t),{},{current:e})}))},onClickNext:function(){return i((function(e){return Object(f.a)(Object(f.a)({},e),{},{current:e.current+1})}))},onClickLast:function(){return i((function(e){return Object(f.a)(Object(f.a)({},e),{},{current:(T-c)/c+1})}))}})})]})},$t=a(247),ea=a(254),ta=function(e){var t=e.roles;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(ea.a,{className:"flex-grow-1",variant:"flush",children:t.map((function(e){return Object(y.jsx)(ea.a.Item,{className:"py-2 px-3 text-capitalize",href:"#".concat(e.id),action:!0,children:e.name},e.id)}))})})},aa=function(e){var t,a=e.roleId,r=Object(m.h)().pathname,c=Object(M.a)(["fetchRole",a],(function(){return Vt(a)}),{enabled:!1});Object(n.useEffect)((function(){c.refetch()}),[]);var i,s,o,l=null===(t=c.data)||void 0===t?void 0:t.data;return c.isFetching?Object(y.jsx)(k.a,{animation:"border",variant:"primary",className:"d-block m-auto"}):c.isError?Object(y.jsx)(H.a,{variant:"danger",children:(null===(i=c.error)||void 0===i||null===(s=i.response)||void 0===s?void 0:s.message)||(null===(o=c.error)||void 0===o?void 0:o.message)}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"mb-2 d-flex flex-nowrap",children:[Object(y.jsx)("h2",{className:"text-capitalize d-inline-block",style:{fontSize:"1.75rem"},children:null===l||void 0===l?void 0:l.name}),Object(y.jsx)(O.a,{as:h.b,to:{pathname:"/iam/roles/".concat(a,"/editar"),state:{from:r}},className:"btn-icon mb-auto",variant:"link",children:Object(y.jsx)(p.e,{})})]}),Object(y.jsx)(z.a,{children:Object(y.jsxs)("tbody",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",style:{width:"1px"},children:"Nombre"}),Object(y.jsx)("td",{className:"text-capitalize",children:null===l||void 0===l?void 0:l.name})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"text-nowrap",scope:"row",children:"Descripci\xf3n"}),Object(y.jsx)("td",{className:(null===l||void 0===l?void 0:l.description)?"":"bg-light",children:(null===l||void 0===l?void 0:l.description)||"Sin descripci\xf3n"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Fecha de creaci\xf3n"}),Object(y.jsx)("td",{children:null===l||void 0===l?void 0:l.createdAt})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Fecha de actualizaci\xf3n"}),Object(y.jsx)("td",{children:null===l||void 0===l?void 0:l.updatedAt})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Permisos"}),Object(y.jsx)("td",{className:"d-flex ".concat((null===l||void 0===l?void 0:l.permissions.length)?"":"bg-light"),children:(null===l||void 0===l?void 0:l.permissions.length)?Object(y.jsx)("ul",{className:"d-inline-block",children:null===l||void 0===l?void 0:l.permissions.map((function(e,t){return Object(y.jsx)("li",{className:"text-capitalize",children:e},t)}))}):"No se agregaron permisos"})]})]})})]})},na=function(){var e,t=Object(m.g)().location,a=t.hash,r=t.pathname,c=Object(M.a)("fetchRoles",(function(){return Ut()}),{enabled:!1,refetchOnWindowFocus:!1});Object(n.useEffect)((function(){c.refetch()}),[]);var i=(null===(e=c.data)||void 0===e?void 0:e.data)||[];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"mb-2 d-flex flex-nowrap",children:[Object(y.jsx)("h2",{className:"d-inline-block",style:{fontSize:"2rem"},children:"Roles"}),Object(y.jsx)(O.a,{as:h.b,to:{pathname:"/iam/roles/crear",state:{from:r}},className:"ml-auto my-auto",variant:"primary",children:Object(y.jsx)(p.j,{})})]}),Object(y.jsx)($t.a.Container,{defaultActiveKey:a,transition:!1,children:Object(y.jsxs)("div",{className:"list-details position-relative d-flex flex-grow-1",children:[Object(y.jsx)("div",{className:"list border",children:c.isFetching?Object(y.jsx)(k.a,{animation:"border",variant:"primary",className:"m-auto"}):Object(y.jsx)(ta,{roles:i})}),Object(y.jsx)($t.a.Content,{className:"p-3 border flex-grow-1 overflow-auto",style:{marginLeft:"11rem"},children:i.map((function(e){return Object(y.jsx)($t.a.Pane,{eventKey:"#".concat(e.id),children:Object(y.jsx)(aa,{roleId:e.id})},e.id)}))})]})})]})},ra=function(e){var t,a=e.isInvalid,r=(e.onChange,Object(M.a)("fetchPermissions",(function(){return console.log("fetchingRoles"),Wt()}),{enabled:!1,refetchOnWindowFocus:!1})),c=(null===(t=r.data)||void 0===t?void 0:t.data)||[];return Object(n.useEffect)((function(){r.refetch()}),[]),console.log("isInvalid",e),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(ea.a,{className:"overflow-auto flex-grow-1 ".concat(a?"is-invalid":""),style:{height:"10rem"},children:r.isFetching?"Cargando":r.isError?"Error":c.map((function(t,n){return Object(y.jsx)(ea.a.Item,{as:"li",className:"py-2 px-3 text-capitalize",action:!0,children:Object(y.jsx)(F.a.Check,{type:"checkbox",checked:e.defaultChecked.some((function(e){return e==t})),label:t,isInvalid:a,onChange:function(a){e.onChange&&e.onChange(t,a.target.checked)}})},t)}))})})},ca=function(){var e,t,a,r=Object(m.i)(),c=(r.action,r.id),i=(Object(m.g)(),Object(K.e)({mode:"onBlur",defaultValues:{name:"",description:"",permissions:[]}})),s=i.handleSubmit,o=i.register,l=i.control,d=i.formState.errors,j=i.reset,u=i.watch,b=(i.getValues,Object(M.a)(["fetchRole",c],(function(){return Vt(parseInt(c))}),{enabled:!1})),h=Object(R.a)((function(e){return c?Kt(e):Ht(e)}));return console.log("Values",u()),console.log("FetchRole",b),Object(n.useEffect)((function(){console.log("Mounting")}),[]),Object(n.useEffect)((function(){!b.data&&c&&b.refetch()}),[c]),Object(n.useEffect)((function(){var e,t,a;console.log("Change data",b.data),j({name:null===(e=b.data)||void 0===e?void 0:e.data.name,description:null===(t=b.data)||void 0===t?void 0:t.data.description,permissions:null===(a=b.data)||void 0===a?void 0:a.data.permissions})}),[b.data]),b.isFetching?Object(y.jsx)(k.a,{animation:"border"}):(console.log("Data",b.data),Object(y.jsxs)(F.a,{id:"role-form",onSubmit:s((function(e){console.log(e),h.mutate(Object(f.a)({id:parseInt(c),createdAt:void 0,updatedAt:void 0},e))})),children:[Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Nombre"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"text",className:"text-capitalize",isInvalid:!!d.name},o("name",{required:Y(),maxLength:Q(32)}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(e=d.name)||void 0===e?void 0:e.message})]}),Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Descripci\xf3n"}),Object(y.jsx)(F.a.Control,{as:"textarea",isInvalid:!!d.description,name:"description"}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=d.description)||void 0===t?void 0:t.message})]}),Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Permisos"}),Object(y.jsx)(K.a,{name:"permissions",control:l,rules:{validate:{nonEmpty:function(e){return e.length>0||"Debe elegir al menos uno."}}},render:function(e){return Object(y.jsx)(ra,{defaultChecked:u("permissions")||[],isInvalid:!!d.permissions,onChange:function(e,t){}})}}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=d.permissions)||void 0===a?void 0:a.message})]}),Object(y.jsx)(O.a,{type:"submit",children:"Guardar"})]}))},ia=function(e){var t=Object(K.e)({defaultValues:{dni:"",dniComplement:"",dniIssuedAt:"",name:"",middlename:"",lastname:"",gender:"",dateOfBirth:"",nationality:""}}),a=t.handleSubmit,r=(t.register,t.reset,t.getValues,Object(n.useState)(!1)),c=Object(L.a)(r,2);c[0],c[1];return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(F.a,{onSubmit:a((function(e){})),children:[Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,sm:8,md:6,children:[Object(y.jsx)(F.a.Label,{children:"Documento de identidad"}),Object(y.jsx)(F.a.Control,{type:"number",name:"dni"})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,md:3,children:[Object(y.jsx)(F.a.Label,{children:"Complemento"}),Object(y.jsx)(F.a.Control,{name:"dniComplement"})]}),Object(y.jsxs)(F.a.Group,{as:u.a,sm:4,md:3,children:[Object(y.jsx)(F.a.Label,{children:"Expedido en"}),Object(y.jsxs)(F.a.Control,{as:"select",name:"dniIssuedAt",children:[Object(y.jsx)("option",{disabled:!0,value:""}),Object(y.jsx)("option",{value:"BN",children:"Beni"}),Object(y.jsx)("option",{value:"CB",children:"Cochabamba"}),Object(y.jsx)("option",{value:"CH",children:"Chuquisaca"}),Object(y.jsx)("option",{value:"LP",children:"La Paz"}),Object(y.jsx)("option",{value:"OR",children:"Oruro"}),Object(y.jsx)("option",{value:"PN",children:"Pando"}),Object(y.jsx)("option",{value:"PT",children:"Potos\xed"}),Object(y.jsx)("option",{value:"TJ",children:"Tarija"}),Object(y.jsx)("option",{value:"SC",children:"Santa Cruz"})]})]})]}),Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{as:u.a,lg:4,children:[Object(y.jsx)(F.a.Label,{children:"Nombres"}),Object(y.jsx)(F.a.Control,{name:"name"})]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:4,children:[Object(y.jsx)(F.a.Label,{children:"Primer Apellido"}),Object(y.jsx)(F.a.Control,{name:"middlename"})]}),Object(y.jsxs)(F.a.Group,{as:u.a,lg:4,children:[Object(y.jsx)(F.a.Label,{children:"Segundo Apellido"}),Object(y.jsx)(F.a.Control,{name:"lastname"})]})]})]})})},sa=a(34),oa=function(){var e,t,a=Object(K.f)(),r=a.register,c=a.formState.errors,i=(a.watch,a.setValue),s=a.getValues,o=Object(M.a)("fetchRoles",(function(){return console.log("fetchingRoles"),Ut()}),{enabled:!1}),l=(null===(e=o.data)||void 0===e?void 0:e.data)||[];return Object(n.useEffect)((function(){r("roleIds",{validate:{nonEmpty:function(e){return e.length>0||"Debe elegir al menos un rol."}}})}),[r]),Object(n.useEffect)((function(){o.refetch()}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ea.a,{as:"ul",className:"overflow-auto flex-grow-1 ".concat(c.roleIds?"is-invalid":""),style:{height:"10rem"},children:o.isFetching?"Cargando":o.isError?"Error":l.map((function(e,t){return Object(y.jsx)(ea.a.Item,{as:"li",className:"py-2 px-3 text-capitalize",action:!0,children:Object(y.jsx)(F.a.Check,{type:"checkbox",label:e.name,isInvalid:!!c.roleIds,name:"roleIds[".concat(e.id,"]"),onChange:function(t){var a=t.target.checked,n=s("roleIds");i("roleIds",a?[].concat(Object(sa.a)(n),[e.id]):n.filter((function(t){return t!=e.id})),{shouldValidate:!0})}})},e.id)}))}),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=c.roleIds)||void 0===t?void 0:t.message})]})},la=function(e){Object(m.i)().id;var t,a,r,c=Object(K.e)({mode:"onBlur",defaultValues:{username:"",password:"",passwordRepeat:"",roleIds:[]}}),i=c.register,s=c.reset,o=c.handleSubmit,l=c.watch,d=c.formState,b=d.isValid,x=d.errors,p=Object(R.a)(_t),v=Object(n.useState)(!1),g=Object(L.a)(v,2),C=g[0],N=g[1];Object(n.useEffect)((function(){p.error&&N(!0)}),[p.error]);return Object(n.useEffect)((function(){p.data&&s()}),[p.data]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(K.b,Object(f.a)(Object(f.a)({},c),{},{children:Object(y.jsxs)(F.a,{noValidate:!0,validated:b,onSubmit:o((function(t){console.log("OnSubmit",t),p.mutate({externalId:e.personId,username:t.username,password:t.password,roleIds:t.roleIds})})),children:[Object(y.jsxs)(F.a.Row,{children:[Object(y.jsxs)(F.a.Group,{controlId:"username",as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Usuarios"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!x.username},i("username",{pattern:{value:/^\S*$/,message:"Este campo no debe contener espacios."},required:{value:!0,message:"Este campo es requerido."},minLength:{value:4,message:"Este campo no debe tener al menos 4 caracteres."},maxLength:{value:16,message:"Este campo no debe exceder los 16 caracteres."}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(t=x.username)||void 0===t?void 0:t.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Contrase\xf1a"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"password",isInvalid:!!x.password},i("password",{required:{value:!0,message:"Este campo es requerido"},minLength:{value:8,message:"Este campo no debe tener al menos 8 caracteres"},maxLength:{value:16,message:"Este campo no debe exceder los 16 caracteres"}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(a=x.password)||void 0===a?void 0:a.message})]}),Object(y.jsxs)(F.a.Group,{as:u.a,md:4,children:[Object(y.jsx)(F.a.Label,{children:"Confirmar contrase\xf1a"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"password",isInvalid:!!x.passwordRepeat},i("passwordRepeat",{required:{value:!0,message:"Este campo es requerido"},validate:{matchPassword:function(e){return e===l("password")||"Las contrase\xf1as no coinciden"}}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(r=x.passwordRepeat)||void 0===r?void 0:r.message})]})]}),Object(y.jsx)("label",{className:"mb-2",children:"Descuentos que se aplicar\xe1n"}),Object(y.jsx)(j.a,{children:Object(y.jsx)(u.a,{children:Object(y.jsx)(oa,{})})}),Object(y.jsx)(F.a.Row,{children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(O.a,{type:"submit",children:[p.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,Object(y.jsx)("span",{className:"ml-2",children:"Registrar"})]})})})]})})),function(){var e,t;return 409==(null===(e=p.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?function(){var e,t,a,n;console.log(null===(e=p.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data);var r=(null===(a=p.error)||void 0===a||null===(n=a.response)||void 0===n?void 0:n.data).payload;return Object(y.jsxs)(Z.a,{centered:!0,show:C,onHide:function(){return N(!1)},children:[Object(y.jsx)(Z.a.Header,{children:"Conflicto"}),Object(y.jsx)(Z.a.Body,{children:Object(y.jsx)(H.a,{variant:"danger",children:Object(y.jsxs)("p",{children:["Ya existe un ",Object(y.jsx)(h.b,{to:{pathname:"/iam/usuarios/".concat(r.id),state:{user:r}},children:"usuario"})," para esta persona"]})})})]})}():null}()]})},da=function(){Object(g.b)();var e=Object(n.useState)("0"),t=Object(L.a)(e,2),a=t[0],r=(t[1],Object(n.useState)(null)),c=Object(L.a)(r,2),i=c[0],s=c[1];return Object(y.jsxs)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:[Object(y.jsx)("h1",{style:{fontSize:"2rem"},children:"Usuarios"}),Object(y.jsxs)(Re.a,{defaultActiveKey:a,children:[Object(y.jsxs)(Pe.a,{children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"0",children:"Informaci\xf3n personal"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"0",children:Object(y.jsx)(Pe.a.Body,{children:Object(y.jsx)(ia,{onComplete:function(e){s(e)}})})})]}),Object(y.jsxs)(Pe.a,{children:[Object(y.jsx)(Re.a.Toggle,{as:Pe.a.Header,className:"bg-primary text-light",eventKey:"1",children:"Informaci\xf3n de Usuario"}),Object(y.jsx)(Re.a.Collapse,{eventKey:"1",children:Object(y.jsx)(Pe.a.Body,{children:Object(y.jsx)(la,{personId:i})})})]})]})]})},ja=function(){var e=Object(m.h)().state,t=Object(m.i)().userId,a=Object(n.useState)(null===e||void 0===e?void 0:e.user),r=Object(L.a)(a,2),c=r[0],i=r[1],s=Object(M.a)(["fetchUser",t],(function(){return Dt(parseInt(t))}),{enabled:!(null===e||void 0===e?void 0:e.user),refetchOnWindowFocus:!1});return Object(n.useEffect)((function(){var e;s.data&&i(null===(e=s.data)||void 0===e?void 0:e.data)}),[s.data]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{style:{fontSize:"1.75rem"},children:null===c||void 0===c?void 0:c.username}),Object(y.jsx)(z.a,{children:Object(y.jsxs)("tbody",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"text-nowrap",scope:"row",style:{width:"1px"},children:"Nombre de usuario"}),Object(y.jsxs)("td",{children:[": ",null===c||void 0===c?void 0:c.username]})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Estado"}),Object(y.jsxs)("td",{children:[": ",(null===c||void 0===c?void 0:c.active)?"Activo":"Inactivo"]})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Creado en"}),Object(y.jsxs)("td",{children:[": ",null===c||void 0===c?void 0:c.createdAt]})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Actualizado en"}),Object(y.jsxs)("td",{children:[": ",null===c||void 0===c?void 0:c.updatedAt]})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"row",children:"Roles"}),Object(y.jsxs)("td",{children:[": ",null===c||void 0===c?void 0:c.updatedAt]})]})]})})]})},ua=function(){var e,t=Object(m.i)().userId,a=Object(K.e)({mode:"onBlur",defaultValues:{username:"",roleIds:[]}}),r=a.register,c=a.reset,i=a.handleSubmit,s=a.watch,o=a.formState.errors;a.formState.isValid;console.log("Fields",s());var l=Object(R.a)(qt),d=Object(M.a)(["loadUser",t],(function(){return Dt(parseInt(t))}),{enabled:!1});return Object(n.useEffect)((function(){d.refetch()}),[t]),Object(n.useEffect)((function(){d.data&&c({username:d.data.data.username,roleIds:d.data.data.roleIds})}),[d.data]),Object(y.jsx)(K.b,Object(f.a)(Object(f.a)({},a),{},{children:Object(y.jsxs)(F.a,{onSubmit:i((function(e){l.mutate({id:parseInt(t),username:e.username,roleIds:e.roleIds})})),children:[Object(y.jsxs)(F.a.Group,{controlId:"username",children:[Object(y.jsx)(F.a.Label,{children:"Nombre de usuario"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!o.username},r("username",{pattern:{value:/^\S*$/,message:"Este campo no debe contener espacios."},required:{value:!0,message:"Este campo es requerido."},minLength:{value:4,message:"Este campo no debe tener al menos 4 caracteres."},maxLength:{value:16,message:"Este campo no debe exceder los 16 caracteres."}}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(e=o.username)||void 0===e?void 0:e.message})]}),Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Roles"}),Object(y.jsx)(oa,{})]}),Object(y.jsxs)(O.a,{type:"submit",children:[l.isLoading?Object(y.jsx)(k.a,{animation:"border",size:"sm"}):null,Object(y.jsx)("span",{className:"ml-2",children:"Registrar"})]})]})}))},ba=function(){var e=Object(m.j)(),t=(e.path,e.url);return Object(y.jsx)(w,{sidebar:{items:[{id:"users",icon:Object(y.jsx)(p.r,{}),path:"".concat(t,"/usuarios"),title:"Usuarios"},{id:"roles",icon:Object(y.jsx)(p.m,{}),path:"".concat(t,"/roles"),title:"Roles"}]},children:Object(y.jsxs)(m.d,{children:[Object(y.jsx)(m.b,{exact:!0,path:"".concat(t),children:Object(y.jsx)(m.a,{to:"".concat(t,"/usuarios")})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/usuarios"),children:Object(y.jsx)(Zt,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/usuarios/registrar"),children:Object(y.jsx)(da,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/usuarios/:userId"),children:Object(y.jsx)(ja,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/usuarios/:userId/editar"),children:Object(y.jsx)(ua,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/roles/:action(crear)"),children:Object(y.jsx)(ca,{})}),Object(y.jsx)(m.b,{exact:!0,path:"".concat(t,"/roles/:id/:action(editar)"),children:Object(y.jsx)(ca,{})}),Object(y.jsx)(m.b,{path:"".concat(t,"/roles"),children:Object(y.jsx)(na,{})})]})})},Oa=function(e){return e.auth.user},ha=function(e){return null!=e.auth.user},ma={login:function(){var e=Object(At.a)(Gt.a.mark((function e(t,a,n){return Gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.authClient.get("sanctum/csrf-cookie");case 2:return e.next=4,fe.authClient.post("login",{username:t,password:a,remember_me:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},xa=(a(217),function(){var e,t,a,n,r,c=Object(g.b)(),i=Object(m.h)().state,s=Object(g.c)(ha),o=Object(K.e)({defaultValues:{username:"",password:"",remember_me:!1}}),l=o.handleSubmit,d=o.register,j=o.formState,u=Object(R.a)((function(e){var t=e.username,a=e.password,n=e.remember_me;return ma.login(t,a,n)}),{onSuccess:function(e){var t=e.data;localStorage.setItem("user",JSON.stringify(t)),c({type:"SET_USER",payload:t})}});return s?Object(y.jsx)(m.a,{to:(null===i||void 0===i?void 0:i.from)||"/"}):Object(y.jsx)("div",{className:"auth-wrapper bg-light",children:Object(y.jsx)("div",{className:"auth-inner shadow-sm",children:Object(y.jsxs)(F.a,{onSubmit:l((function(e){u.mutate(e)})),children:[Object(y.jsx)("h3",{className:"mb-2 text-center",style:{fontSize:"1.25rem"},children:"Iniciar Sesi\xf3n en Hip\xf3crates"}),u.isError?Object(y.jsx)(H.a,{variant:"danger",children:(null===(e=u.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.message)||(null===(a=u.error)||void 0===a?void 0:a.message)}):null,Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Usuario"}),Object(y.jsx)(F.a.Control,Object(f.a)({isInvalid:!!j.errors.username},d("username",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(n=j.errors.username)||void 0===n?void 0:n.message})]}),Object(y.jsxs)(F.a.Group,{children:[Object(y.jsx)(F.a.Label,{children:"Contrase\xf1a"}),Object(y.jsx)(F.a.Control,Object(f.a)({type:"password",isInvalid:!!j.errors.password},d("password",{required:Y()}))),Object(y.jsx)(F.a.Control.Feedback,{type:"invalid",children:null===(r=j.errors.password)||void 0===r?void 0:r.message})]}),Object(y.jsx)(F.a.Group,{children:Object(y.jsx)(F.a.Check,Object(f.a)({type:"checkbox",label:"Recordar sesi\xf3n"},d("remember_me")))}),Object(y.jsxs)(O.a,{type:"submit",className:"btn btn-primary btn-block",children:[u.isLoading?Object(y.jsx)(k.a,{size:"sm",animation:"border"}):null,Object(y.jsx)("span",{className:"align-middle ml-1",children:"Iniciar Sesi\xf3n"})]})]})})})}),pa=function(e){var t=e.children,a=Object(C.a)(e,["children"]),n=Object(g.c)(ha);return Object(y.jsx)(m.b,Object(f.a)(Object(f.a)({},a),{},{render:function(e){var a=e.location;return n?t:Object(y.jsx)(m.a,{to:{pathname:"/login",state:{from:a}}})}}))},fa=(a(218),a(112)),va=Gt.a.mark(Na),ga=Gt.a.mark(Sa),Ca="UNAUTHORIZED";function ya(){return{type:Ca}}function Na(e){return Gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user");case 1:case"end":return e.stop()}}),va)}function Sa(){return Gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fa.b)(Ca,Na);case 2:case"end":return e.stop()}}),ga)}var wa=function(){var e=Object(g.b)(),t=Object(g.c)(Oa);return Object(n.useEffect)((function(){B.b.interceptors.response.use((function(e){return e}),(function(t){var a,n;return 401!=(null===(a=t.response)||void 0===a?void 0:a.status)&&419!=(null===(n=t.response)||void 0===n?void 0:n.status)||e(ya()),Promise.reject(t)}));var t=localStorage.getItem("user");e({type:"SET_USER",payload:t?JSON.parse(t):null})}),[]),Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(s.a,{className:"shadow-sm border-bottom",bg:"white",variant:"light",style:{zIndex:1},children:[t?Object(y.jsx)(s.a.Toggle,{style:{display:"initial"},onClick:function(){e({type:"TOGGLE_SIDEBAR"})},children:Object(y.jsx)(p.a,{})}):null,Object(y.jsx)(s.a.Brand,{href:"#home",className:"ml-4",children:"Hip\xf3crates"}),Object(y.jsxs)(o.a,{className:"ml-auto",children:[Object(y.jsx)(l.a,{trigger:"click",rootClose:!0,placement:"bottom",overlay:Object(y.jsxs)(d.a,{id:"apps",style:{maxWidth:"none"},children:[Object(y.jsx)(d.a.Title,{className:"text-center",as:"h3",children:"Aplicaciones"}),Object(y.jsx)(d.a.Content,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{className:"text-center",children:Object(y.jsxs)(h.b,{to:"/iam",children:[Object(y.jsx)(p.o,{className:"d-block mx-auto",size:48}),Object(y.jsx)("span",{children:"IAM"})]})}),Object(y.jsx)(u.a,{className:"text-center",children:Object(y.jsxs)(h.b,{to:"/clinica",children:[Object(y.jsx)(p.c,{className:"d-block mx-auto",size:48}),Object(y.jsx)("span",{children:"Cl\xednica"})]})})]})})]}),children:Object(y.jsx)(o.a.Link,{children:Object(y.jsx)(x.a,{size:"1.5em"})})}),t?Object(y.jsx)(l.a,{trigger:"click",rootClose:!0,placement:"bottom",overlay:Object(y.jsxs)(d.a,{id:"apps",children:[Object(y.jsx)(d.a.Title,{className:"text-center",as:"h3",children:"Notificaciones"}),Object(y.jsx)(d.a.Content,{})]}),children:Object(y.jsxs)(o.a.Link,{style:{whiteSpace:"nowrap"},children:[Object(y.jsx)(p.b,{}),Object(y.jsx)("div",{className:"pulse bg-danger",style:{left:"0.65rem",top:"-1.35rem",width:"0.5rem",height:"0.5rem",borderRadius:"50%"}})]})}):null,t?Object(y.jsxs)(b.a,{title:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(p.o,{}),Object(y.jsx)("span",{className:"d-none d-sm-inline ml-1",children:t.username})]}),id:"collasible-nav-dropdown",children:[Object(y.jsx)(b.a.Item,{href:"#action/3.2",children:"Cuenta"}),Object(y.jsx)(b.a.Item,{href:"#action/3.3",children:"Configuracion"}),Object(y.jsx)(b.a.Divider,{}),Object(y.jsx)(b.a.Item,{as:O.a,className:"btn-link",onClick:function(){B.b.post("logout").then((function(){e(ya()),localStorage.removeItem("user")}))},children:"Cerrar sesi\xf3n"})]}):Object(y.jsx)(o.a.Link,{as:h.b,to:"/login",children:"Iniciar sesi\xf3n"})]})]}),Object(y.jsxs)(m.d,{children:[Object(y.jsx)(pa,{path:"/iam",children:Object(y.jsx)(ba,{})}),Object(y.jsx)(pa,{path:"/clinica",children:Object(y.jsx)(Rt,{})}),Object(y.jsx)(m.b,{exact:!0,path:"/login",children:Object(y.jsx)(xa,{})})]})]})},Ia=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,257)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},La=a(244),ka=a(164),Ea=a(49),Fa={fields:{username:"",password:""},errors:{username:"",password:""},message:""},za=Object(Ea.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=t.error;switch(a){case"SET_USER":case"LOGIN_COMPLETED":case"LOAD_USER_COMPLETED":return r?e:n;case"UNAUTHORIZED":return null;default:return e}},loadUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=(t.payload,t.type);switch(a){case"LOAD_USER":return{completed:!1};case"LOAD_USER_COMPLETED":return{completed:!0}}return e},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type;t.payload;switch(a){case"LOGIN":return{completed:!1};case"LOGIN_COMPLETED":return{completed:!0}}return e},loginForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;if("UPDATE_LOGIN_FORM"==t.type)return Object(f.a)(Object(f.a)({},e),t.payload);if("LOGIN"==t.type)return Object(f.a)(Object(f.a)({},e),{},{message:"",errors:Fa.errors});if("LOGIN_COMPLETED"==t.type&&t.error){var a=t.payload,n=a.message,r=a.errors;return Object(f.a)(Object(f.a)({},e),{},{message:n,errors:r||Fa.errors})}return"LOGIN_COMPLETED"==t.type?Fa:e}});var Ma=Object(Ea.c)({showSidebar:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_SIDEBAR"==t.type?!e:e}}),Ra=Gt.a.mark(Pa);function Pa(){return Gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fa.a)([Sa()]);case 2:case"end":return e.stop()}}),Ra)}var Ga=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ea.d,Aa=function(){var e=Object(Ea.c)({main:Ma,auth:za}),t=Object(ka.a)(),a=Object(Ea.e)(e,Ga(Object(Ea.a)(t)));return t.run(Pa),a};String.prototype.replaceAll||(String.prototype.replaceAll=function(){var e=arguments[0],t=arguments[1];return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,a){return"undefined"!=typeof e[a]?e[a]:t}))});a(219),a(220);var Ba=new La.a({defaultOptions:{queries:{retry:0},mutations:{retry:0}}});i.a.render(Object(y.jsx)(qe.a,{client:Ba,children:Object(y.jsx)(g.a,{store:Aa(),children:Object(y.jsx)(wa,{})})}),document.getElementById("root")),Ia()},31:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(34),r=a(43),c=a.n(r),i=a(98),s=a(78),o=a.n(s),l=a(58),d=c.a.create({baseURL:i.a,timeout:3e4,headers:{Accept:"application/json"},transformResponse:[].concat(Object(n.a)(c.a.defaults.transformResponse),[function(e){var t=Object(l.a)(e);return console.log("TransformedResponse",t),t}])});d.defaults.withCredentials=!0,d.interceptors.request.use((function(e){return e.headers.Accept="application/json",e.paramsSerializer=function(e){return o.a.stringify(e,{arrayFormat:"brackets",encode:!1})},console.log("Axios config",e),e})),t.b=d},58:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var n=a(10),r=function(e){var t,a;if(e){if(Array.isArray(e)){var r=Object(n.a)(e,2);t=r[0],a=r[1]}else t=e.lat,a=e.lng;return"".concat(t.toFixed(8),", ").concat(a.toFixed(8))}return""},c=function(e){return Array.isArray(e)},i=function(e){return e===Object(e)&&!c(e)&&"function"!==typeof e},s=function e(t){if(i(t)){var a={};return Object.keys(t).forEach((function(n){var r;a[(r=n,r.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")})))]=e(t[n])})),a}return c(t)?t.map((function(t){return e(t)})):t},o=function e(t){if(i(t)){var a={};return Object.keys(t).forEach((function(n){var r;a[(r=n,r.replace(/([A-Z])/g,"_$1").toLowerCase())]=e(t[n])})),a}return c(t)?t.map((function(t){return e(t)})):t}},98:function(e){e.exports=JSON.parse('{"a":"http://api.example.com/api/","b":"http://api.example.com/"}')}},[[221,1,2]]]);
//# sourceMappingURL=main.0d6cf941.chunk.js.map