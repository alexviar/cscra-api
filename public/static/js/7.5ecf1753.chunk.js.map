{"version":3,"sources":["commons/auth/index.ts","commons/auth/constants/Permisos.ts","commons/click-outside-handler/useOnClickOutside.ts","commons/click-outside-handler/ClickOutsideHandler.tsx","commons/components/layouts/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","apps/seguimiento/planes/queries/index.ts","apps/seguimiento/planes/services/PlanService.ts","apps/seguimiento/planes/services/AreaService.ts","apps/seguimiento/planes/policies/Permisos.ts","apps/seguimiento/planes/policies/PlanPolicy.ts","apps/seguimiento/planes/components/RowOptions.tsx","apps/seguimiento/planes/components/PlanIndex.tsx","apps/seguimiento/planes/components/AreasTypeahead.tsx","apps/seguimiento/planes/components/PlanForm.tsx","apps/seguimiento/planes/components/ActividadRowOptions.tsx","apps/seguimiento/planes/components/PlanView.tsx","apps/seguimiento/planes/components/AvanceForm.tsx","apps/seguimiento/planes/components/HistorialRowOptions.tsx","apps/seguimiento/planes/components/ActividadView.tsx","apps/seguimiento/SeguimientoApp.tsx"],"names":["VER_SOLICITUDES_DE_ATENCION_EXTERNA","VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","VER_USUARIOS","VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","REGISTRAR_USUARIOS","REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","EDITAR_USUARIOS","EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","BLOQUEAR_USUARIOS","BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","DESBLOQUEAR_USUARIOS","DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","CAMBIAR_CONTRASEÑA","CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","VER_ROLES","REGISTRAR_ROLES","EDITAR_ROLES","ELIMINAR_ROLES","VER_LISTA_DE_MORA","VER_LISTA_DE_MORA_REGIONAL","AGREGAR_EMPLEADOR_EN_MORA","AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","QUITAR_EMPLEADOR_EN_MORA","QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","VER_MEDICOS","VER_MEDICOS_REGIONAL","REGISTRAR_MEDICOS","REGISTRAR_MEDICOS_REGIONAL","EDITAR_MEDICOS","EDITAR_MEDICOS_REGIONAL","BAJA_MEDICOS","BAJA_MEDICOS_REGIONAL","VER_PROVEEDORES","VER_PROVEEDORES_REGIONAL","REGISTRAR_PROVEEDORES","REGISTRAR_PROVEEDORES_REGIONAL","EDITAR_PROVEEDORES","EDITAR_PROVEEDORES_REGIONAL","BAJA_PROVEEDOR","BAJA_PROVEEDOR_REGIONAL","VER_CONTRATOS_PROVEEDOR","VER_CONTRATOS_PROVEEDOR_REGIONAL","REGISTRAR_CONTRATOS_PROVEEDOR","REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL","CONSUMIR_CONTRATOS_PROVEEDOR","CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL","EXTENDER_CONTRATOS_PROVEEDOR","EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL","ANULAR_CONTRATOS_PROVEEDOR","ANULAR_CONTRATOS_PROVEEDOR_REGIONAL","VER_ESPECIALIDADES","REGISTRAR_ESPECIALIDADES","EDITAR_ESPECIALIDADES","ELIMINAR_ESPECIALIDADES","IMPORTAR_ESPECIALIDADES","VER_PRESTACIONES","REGISTRAR_PRESTACIONES","EDITAR_PRESTACIONES","ELIMINAR_PRESTACIONES","IMPORTAR_PRESTACIONES","useOnClickOutside","ref","handler","useEffect","listener","event","el","current","contains","target","document","querySelector","addEventListener","removeEventListener","ClickOutsideHandler","children","onClickOutside","props","containerRef","useRef","SidebarItem","item","match","useRouteMatch","path","ListGroup","Item","as","Link","to","action","active","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","side","header","renderItem","left","right","variant","SidebarLayout","sidebar","showSidebar","useSelector","state","sidebarVisibility","dispatch","useDispatch","onClickOutsideHandler","React","useCallback","toggle","type","Container","queryKey","PlanService","filter","page","apiClient","get","params","keysToUnderscore","payload","post","actividadId","formData","FormData","append","String","avance","observaciones","informe","headers","AreaService","useCargarPlan","options","queryClient","useQueryClient","cargarQueryKey","queryState","getQueryState","status","planesQueryData","getQueryData","plan","data","records","find","p","console","log","setQueryData","cargar","useQuery","refetchOnWindowFocus","refetchOnReconnect","select","VER_PLANES","VER_PLANES_REGIONAL","REGISTRAR_PLANES","PlanPolicy","verIndice","user","canAny","Permisos","ver","usuarioId","registrar","registrarAvance","RowOptions","useModal","Dropdown","position","Toggle","VerticalEllipsisDropdownToggle","Menu","authorize","PlanIndex","loggedUser","useLoggedUser","useState","size","setPage","defaultFilter","useMemo","can","regionalId","creadoPor","filterFormVisible","showFilterForm","buscar","useBuscarPlanes","total","meta","fontSize","Form","Row","Col","xs","Button","onClick","refetch","visible","Collapse","in","Control","value","onChange","e","parseInt","Table","responsive","width","isFetching","colSpan","Spinner","animation","isError","error","response","message","length","index","objetivoGeneral","concluido","renderRows","Math","ceil","AreasTypeahead","isInvalid","feedback","filterBy","refetchOnMount","onLoad","Array","isArray","InputGroup","hasValidation","clearButton","emptyLabel","align","regional","text","isMatch","nombre","isLoading","labelKey","Append","Feedback","schema","yup","shape","area","label","required","max","actividades","min","of","test","context","from","a","indicadores","inicio","emptyStringTo","typeError","fin","when","moment","toDate","PlanForm","history","useHistory","useForm","mode","resolver","yupResolver","defaultValues","control","handleSubmit","register","formState","formErrors","watch","errors","useFieldArray","name","actividadesField","fields","appendActividad","removeActividad","remove","guardar","useMutation","inputs","areaId","actividad","toISOString","split","onSuccess","invalidateQueries","replace","onSubmit","mutate","Group","sm","Label","render","field","fieldState","selected","onBlur","minWidth","actividadField","scope","ActividadRowOptions","planId","useLocation","useParams","PlanView","queryLoader","onError","open","Card","Header","Body","avanceEsperado","estado","isBefore","overflow","top","files","file","this","createError","formatBytes","nullable","notRequired","AvanceForm","modalProps","reset","vars","ctx","updatePlan","actual","esperado","historial","oldData","useRegistrarAvance","onHide","Modal","centered","values","disabled","format","Text","File","Footer","form","HistorialRowOptions","pdfModal","url","informeUrl","scales","yAxes","ticks","beginAtZero","LineChart","memo","ActividadView","avanceFormVisible","showAvanceForm","getData","first","fecha","last","subtract","conclusion","hoy","startDate","clone","endDate","ultimoAvance","isSameOrBefore","entries","h","push","add","getIdealData","duration","diff","asDays","date","day","round","labels","getLabels","datasets","fill","backgroundColor","borderColor","borderDash","lg","height","fromNow","show","SeguimientoApp","removeTrailingSlashes","location","sidebarItems","background","Image","src","exact"],"mappings":"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","file":"static/js/7.5ecf1753.chunk.js","sourcesContent":["export { ProtectedContent, ProtectedRoute } from \"./components\"\r\nexport * from \"./hooks\"\r\nexport { Permisos } from \"./constants\"","/**\r\n * Permisos de solicitud de transferencia externa\r\n */\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA = \"Ver solicitudes de atencion externa\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Ver solicitudes de atencion externa (misma regional)\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Ver solicitudes de atencion externa (registrado por)\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Registrar solicitudes de atencion externa\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Registrar solicitudes de atencion externa (misma regional)\";\r\n// export const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Registrar solicitudes de atencion externa (registrado por)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Emitir solicitudes de atencion externa\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Emitir solicitudes de atencion externa (misma regional)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Emitir solicitudes de atencion externa (registrado por)\";\r\n  \r\n/**\r\n * Permisos de usuarios\r\n */\r\nexport const VER_USUARIOS = \"Ver usuarios\";\r\nexport const VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Ver usuarios (misma regional)\";\r\nexport const REGISTRAR_USUARIOS = \"Registrar usuarios\";\r\nexport const REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Registrar usuarios (misma regional)\";\r\nexport const EDITAR_USUARIOS = \"Editar usuarios\";\r\nexport const EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Editar usuarios (misma regional)\";\r\nexport const BLOQUEAR_USUARIOS = \"Bloquear usuarios\";\r\nexport const BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Bloquear usuarios (misma regional)\";\r\nexport const DESBLOQUEAR_USUARIOS = \"Desbloquear usuarios\";\r\nexport const DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Desbloquear usuarios (misma regional)\";\r\nexport const CAMBIAR_CONTRASEÑA = \"Cambiar contraseña\";\r\nexport const CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Cambiar contraseña (misma regional)\";\r\n\r\n/**\r\n * Permisos de roles\r\n */\r\nexport const VER_ROLES = \"Ver roles\";\r\nexport const REGISTRAR_ROLES = \"Registrar roles\";\r\nexport const EDITAR_ROLES = \"Editar roles\";\r\nexport const ELIMINAR_ROLES = \"Eliminar roles\";\r\n\r\n\r\n/**\r\n * Permisos de lista de mora\r\n */\r\nexport const VER_LISTA_DE_MORA = \"Ver lista de mora\"\r\nexport const VER_LISTA_DE_MORA_REGIONAL = \"Ver lista de mora (regional)\"\r\nexport const AGREGAR_EMPLEADOR_EN_MORA = \"Agregar empleador en mora\";\r\nexport const AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Agregar empleador en mora (misma regional)\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA = \"Quitar empleador en mora\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Quitar empleador en mora (misma regional)\";\r\n\r\n\r\n\r\n/**\r\n * Medicos\r\n */\r\nexport const VER_MEDICOS = \"Ver médicos\";\r\nexport const VER_MEDICOS_REGIONAL = \"Ver médicos (regional)\";\r\nexport const REGISTRAR_MEDICOS = \"Registrar médicos\";\r\nexport const REGISTRAR_MEDICOS_REGIONAL = \"Registrar médicos (regional)\";\r\nexport const EDITAR_MEDICOS = \"Editar médicos\";\r\nexport const EDITAR_MEDICOS_REGIONAL = \"Editar médicos (regional)\";\r\nexport const BAJA_MEDICOS = \"Baja médicos\";\r\nexport const BAJA_MEDICOS_REGIONAL = \"Baja médicos (regional)\";\r\n\r\n/**\r\n* Proveedores\r\n*/\r\nexport const VER_PROVEEDORES = \"Ver proveedores\";\r\nexport const VER_PROVEEDORES_REGIONAL = \"Ver proveedores (regional)\";\r\nexport const REGISTRAR_PROVEEDORES = \"Registrar proveedores\";\r\nexport const REGISTRAR_PROVEEDORES_REGIONAL = \"Registrar proveedores (regional)\";\r\nexport const EDITAR_PROVEEDORES = \"Editar proveedores\";\r\nexport const EDITAR_PROVEEDORES_REGIONAL = \"Editar proveedores (regional)\";\r\nexport const BAJA_PROVEEDOR = \"Baja proveedores\";\r\nexport const BAJA_PROVEEDOR_REGIONAL = \"Baja proveedores (regional)\";\r\n\r\nexport const VER_CONTRATOS_PROVEEDOR = \"Ver contratos de proveedores\";\r\nexport const VER_CONTRATOS_PROVEEDOR_REGIONAL = \"Ver contratos de proveedores (regional)\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR = \"Registrar contratos de proveedores\";\r\nexport const REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Registrar contratos de proveedores (regional)\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR = \"Consumir contratos de proveedores\";\r\nexport const CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL = \"Consumir contratos de proveedores (regional)\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR = \"Extender contratos de proveedores\";\r\nexport const EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL = \"Extender contratos de proveedores (regional)\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR = \"Anular contratos de proveedores\";\r\nexport const ANULAR_CONTRATOS_PROVEEDOR_REGIONAL = \"Anular contratos de proveedores (regional)\";\r\n\r\n/**\r\n* Especialidades\r\n*/\r\nexport const VER_ESPECIALIDADES = \"Ver especialidades\";\r\nexport const REGISTRAR_ESPECIALIDADES = \"Registrar especialidades\";\r\nexport const EDITAR_ESPECIALIDADES = \"Editar especialidades\";\r\nexport const ELIMINAR_ESPECIALIDADES = \"Eliminar especialidades\";\r\nexport const IMPORTAR_ESPECIALIDADES = \"Importar especialidades\";\r\n\r\n/**\r\n* Prestaciones\r\n*/\r\nexport const VER_PRESTACIONES = \"Ver prestaciones\";\r\nexport const REGISTRAR_PRESTACIONES = \"Registrar prestaciones\";\r\nexport const EDITAR_PRESTACIONES = \"Editar prestaciones\";\r\nexport const ELIMINAR_PRESTACIONES = \"Eliminar prestaciones\";\r\nexport const IMPORTAR_PRESTACIONES = \"Importar prestaciones\";","import { RefObject, useEffect } from 'react'\r\n\r\ntype AnyEvent = MouseEvent | TouchEvent\r\n\r\nexport function useOnClickOutside<T extends HTMLElement = HTMLElement>(\r\n  ref: RefObject<T>,\r\n  handler: (event: AnyEvent) => void,\r\n) {\r\n  useEffect(() => {\r\n    const listener = (event: AnyEvent) => {\r\n      const el = ref?.current\r\n\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!el || el.contains(event.target as Node) || document.querySelector('html') == event.target) {\r\n        return\r\n      }\r\n      handler(event)\r\n    }\r\n\r\n    document.addEventListener(`mousedown`, listener)\r\n    document.addEventListener(`touchstart`, listener)\r\n\r\n    return () => {\r\n      document.removeEventListener(`mousedown`, listener)\r\n      document.removeEventListener(`touchstart`, listener)\r\n    }\r\n\r\n    // Reload only if ref or handler changes\r\n  }, [ref, handler])\r\n}\r\n\r\nexport default useOnClickOutside\r\n","import { FC, useRef, ComponentProps } from 'react'\r\nimport { useOnClickOutside } from './useOnClickOutside'\r\n\r\ntype Props = {\r\n  onClickOutside: (event: MouseEvent | TouchEvent) => void\r\n} & ComponentProps<\"div\">\r\nexport const ClickOutsideHandler:FC<Props> = ({children, onClickOutside, ...props}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(containerRef, onClickOutside)\r\n  return <div ref={containerRef} {...props}>\r\n    {children}\r\n  </div>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading mt-2\">{header}</div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <ListGroup variant=\"flush\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </ListGroup>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ClickOutsideHandler } from '../../click-outside-handler'\r\nimport { Sidebar, SidebarProps } from './Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props) => {\r\n  const showSidebar = useSelector((state:any) => state.sidebarVisibility)\r\n  const dispatch = useDispatch()\r\n\r\n  const onClickOutsideHandler = React.useCallback((event: MouseEvent | TouchEvent)=>{\r\n    const toggle = document.querySelector('[aria-label=\"Toggle navigation\"]')\r\n    if(!toggle?.contains(event.target as Node)){\r\n      dispatch({\r\n        type: \"CLOSE_SIDEBAR\"\r\n      })\r\n    }\r\n  }, [showSidebar])\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \" toggled\" : \"\")}  id=\"wrapper\">\r\n    <ClickOutsideHandler onClickOutside={onClickOutsideHandler}>\r\n      <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    </ClickOutsideHandler>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo } from 'react'\r\nimport { AxiosResponse, AxiosError } from 'axios';\r\nimport { Page, PaginatedResponse } from '../../../../commons/services'\r\nimport { QueryKey, UseMutationOptions, UseQueryOptions, UseQueryResult, useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { Avance, Actividad, Plan, PlanService, PlanFilter } from '../services'\r\n\r\nexport type { PlanFilter }\r\n\r\nlet queryKey: QueryKey;\r\n\r\nexport const useBuscarPlanes = (filter: PlanFilter, page: Page) => {\r\n  queryKey = [\"planes.buscar\", filter, page]\r\n  return useQuery(queryKey, ()=>{\r\n    return PlanService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n}\r\n\r\nexport const useCargarPlan = (id: number, options?: UseQueryOptions<AxiosResponse<Plan>, AxiosError, Plan>) => {\r\n  const queryClient = useQueryClient()\r\n  const cargarQueryKey = [\"planes.cargar\", id]\r\n  const queryState = queryClient.getQueryState(cargarQueryKey)\r\n  if(!queryState || queryState?.status === 'idle'){\r\n    const planesQueryData = queryClient.getQueryData<any>(queryKey)\r\n    const plan = planesQueryData?.data.records?.find((p: Plan) => p.id === id)\r\n    console.log(\"Cargar plan\", plan)\r\n    if(plan) {\r\n      queryClient.setQueryData(cargarQueryKey, {\r\n        data: plan\r\n      })\r\n    }\r\n  }\r\n  const cargar = useQuery(cargarQueryKey, ()=>{\r\n    return PlanService.cargar(id)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    select: (data) => data.data,\r\n    ...options\r\n  })\r\n  console.log(\"Cargar plan\", cargar)\r\n  return cargar\r\n}\r\n\r\nexport const useCargarActividad = (planId: number, actividadId: number, options?: UseQueryOptions<AxiosResponse<Plan>, AxiosError, Actividad|null>) => {\r\n  // const queryClient = useQueryClient()\r\n  // const cargarQueryKey = [\"planes.cargar\", planId]\r\n  // if(queryClient.getQueryState(cargarQueryKey)?.status === 'idle'){\r\n  //   const planesQueryData = queryClient.getQueryData<any>(queryKey)\r\n  //   const plan = planesQueryData?.data.records?.find((p: Plan) => p.id === planId)\r\n  //   if(plan) {\r\n  //     queryClient.setQueryData(cargarQueryKey, {\r\n  //       data: plan\r\n  //     })\r\n  //   }\r\n  // }\r\n  // const cargar = useQuery(cargarQueryKey, ()=>{\r\n  //   return PlanService.cargar(planId)\r\n  // }, {\r\n  //   refetchOnWindowFocus: false,\r\n  //   refetchOnReconnect: false,\r\n  //   select: (data) => data.data.actividades?.find(a => a.id == actividadId) || null,\r\n  //   ...options,\r\n  // })\r\n  \r\n  const cargar = useCargarPlan(planId, {\r\n    //@ts-ignore\r\n    select: (data) => data.data.actividades?.find(a => a.id == actividadId) || null,\r\n    //@ts-ignore\r\n    ...options\r\n  })\r\n  return cargar as UseQueryResult<Actividad, AxiosError>\r\n}\r\n\r\nexport const useRegistrarAvance = (options?: UseMutationOptions<AxiosResponse<Avance>, AxiosError, {\r\n  params: {\r\n    planId: number\r\n    actividadId: number\r\n  }\r\n  data: {\r\n    avance: number\r\n    observaciones: string\r\n    informe: File\r\n  }\r\n}>) => {\r\n  const queryClient = useQueryClient()\r\n  return useMutation((vars)=>{\r\n    const {params:{planId, actividadId}, data} = vars\r\n    return PlanService.registrarAvance(planId, actividadId, data)\r\n  }, {\r\n    ...options,\r\n    onSuccess: (data, vars, ctx)=>{\r\n      const { data: avance } = data, { params: { planId, actividadId } } = vars\r\n      options?.onSuccess && options.onSuccess(data, vars, ctx)\r\n      const updatePlan = (plan: Plan, avance: Avance) => {\r\n        const actividades = plan.actividades.map(a => {\r\n          return a.id === actividadId ? {\r\n            ...a,\r\n            avance: avance.actual,\r\n            avanceEsperado: avance.esperado,\r\n            historial: [\r\n              ...a.historial,\r\n              avance\r\n            ]\r\n          } : a\r\n        })\r\n        return {\r\n          ...oldData.data,\r\n          avance: actividades.filter(a => a.avance == 100).length,\r\n          avanceEsperado: actividades.filter(a => a.avanceEsperado == 100).length,\r\n          actividades\r\n        }\r\n      }\r\n\r\n      const oldData = queryClient.getQueryData([\"planes.cargar\", planId]) as AxiosResponse<Plan>\r\n      if(oldData) {\r\n        queryClient.setQueryData([\"planes.cargar\", planId], {\r\n          ...oldData,\r\n          data: updatePlan(oldData.data, avance)\r\n        })\r\n      }\r\n      else {\r\n        queryClient.setQueryData(queryKey, (oldData?: AxiosResponse<PaginatedResponse<Plan>>) => {\r\n          const records = oldData!.data.records.map(p => {\r\n            if(p.id === planId){\r\n              return updatePlan(p, avance)\r\n            }\r\n            return p\r\n          })\r\n          return {\r\n            ...oldData!,\r\n            data: {\r\n              ...oldData!.data,\r\n              records\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n  })\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type PlanFilter = {\r\n  regionalId?: number\r\n  creadoPor?: number\r\n}\r\n\r\nexport type Avance = {\r\n  id: number\r\n  fecha: string\r\n  actual: number\r\n  esperado: number,\r\n  informeUrl: string\r\n  observaciones: string\r\n}\r\n\r\nexport type Actividad = {\r\n  id: number\r\n  nombre: string\r\n  inicio: string\r\n  fin: string\r\n  conclusion: string | null\r\n  avance: number\r\n  avanceEsperado: number\r\n  indicadores: string\r\n  estado: number\r\n  historial: Avance[]\r\n}\r\n\r\nexport type Plan = {\r\n  id: number\r\n  regionalId: number\r\n  areaId: number\r\n  objetivoGeneral: string\r\n  avance: number\r\n  avanceEsperado: number\r\n  concluido: boolean\r\n  actividades: Actividad[]\r\n  usuarioId: number\r\n}\r\n\r\nclass Service {\r\n  buscar(filter: PlanFilter, page: Page) {\r\n    return apiClient.get<PaginatedResponse<Plan>>('/planes', {\r\n      params: keysToUnderscore({\r\n        page,\r\n        filter\r\n      })\r\n    })\r\n  }\r\n\r\n  cargar(id: number) {\r\n    return apiClient.get<Plan>(`/planes/${id}`)\r\n  }\r\n\r\n  registrar(payload: {\r\n    regionalId: number\r\n    areaId: number\r\n    objetivoGeneral: string\r\n    actividades: {\r\n      nombre: string\r\n      indicadores: string\r\n      inicio: string\r\n      fin: string\r\n    }[]\r\n  }) {\r\n    return apiClient.post('/planes', keysToUnderscore(payload))\r\n  }\r\n  \r\n  cargarActividad(id: number, actividadId: number) {\r\n    return apiClient.get<Actividad>(`/planes/${id}/actividades/${actividadId}`)\r\n  }\r\n  \r\n  registrarAvance(id: number, actividadId: number, payload: {\r\n    avance: number,\r\n    informe: File,\r\n    observaciones: string\r\n  }) {\r\n    const formData = new FormData()\r\n    formData.append(\"avance\", String(payload.avance))\r\n    formData.append(\"observaciones\", payload.observaciones)\r\n    formData.append(\"informe\", payload.informe)\r\n    return apiClient.post<Avance>(`/planes/${id}/actividades/${actividadId}/avances`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const PlanService = new Service()","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\nexport type Area = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const AreaService = {\r\n  obtener: () => {\r\n    return apiClient.get<Area[]>(\"areas\")\r\n  }\r\n}","export const VER_PLANES = 'Ver planes'\r\nexport const VER_PLANES_REGIONAL = 'Ver planes (regional)'\r\nexport const REGISTRAR_PLANES = 'Registrar planes'\r\n// export const EDITAR_PLANES = 'Editar planes'\r\n// export const EDITAR_PLANES_REGIONAL = 'Editar planes (regional)'\r\n","import { User } from '../../../../commons/auth'\r\nimport { Plan } from '../services'\r\nimport * as Permisos from './Permisos'\r\n\r\nexport const PlanPolicy = {\r\n  verIndice(user: User) {\r\n    return user?.canAny([\r\n      Permisos.VER_PLANES,\r\n      Permisos.VER_PLANES_REGIONAL,\r\n      Permisos.REGISTRAR_PLANES\r\n    ])\r\n  },\r\n  ver(user: User, plan: Plan) {\r\n    return user?.canAny([\r\n      Permisos.VER_PLANES,\r\n      Permisos.VER_PLANES_REGIONAL,\r\n    ]) || user?.id == plan.usuarioId\r\n  },\r\n  registrar(user: User) {\r\n    return user?.canAny([\r\n      Permisos.REGISTRAR_PLANES\r\n    ])\r\n  },\r\n  registrarAvance(user: User, plan: Plan) {\r\n    return user?.id == plan?.usuarioId\r\n  }\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient, QueryKey } from \"react-query\"\r\nimport { FaEye } from 'react-icons/fa'\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Plan, PlanService } from \"../services\"\r\nimport { PlanPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  plan: Plan\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({plan, queryKey}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  // const eliminar = useMutation((id: number)=>{\r\n  //   return RolService.eliminar(id)\r\n  // }, {\r\n  //   onSuccess: ()=>{\r\n  //     modal.close()\r\n  //     queryClient.invalidateQueries(\"roles.buscar\",{inactive: true})\r\n  //     queryClient.setQueryData(queryKey, (oldData: any) => {\r\n  //       return {\r\n  //         ...oldData,\r\n  //         data: {\r\n  //           ...oldData.data,\r\n  //           records: oldData.data.records.filter((u: any)=>{\r\n  //             return u !== rol\r\n  //           })\r\n  //         }\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // })\r\n\r\n  // useEffect(()=>{\r\n  //   if(eliminar.status == \"loading\"){\r\n  //     modal.open({\r\n  //       state: \"loading\"\r\n  //     })\r\n  //   }\r\n  //   else if(eliminar.status == \"error\"){\r\n  //     modal.open({\r\n  //       state: \"error\",\r\n  //       error: eliminar.error\r\n  //     })\r\n  //   }\r\n  // }, [eliminar.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-planes-${plan.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(user) => PlanPolicy.ver(user, plan)}\r\n      >\r\n        <Dropdown.Item as={Link} to={`/seguimiento/planes/${plan.id}`}><FaEye className=\"mr-2\"/> Detalles</Dropdown.Item>\r\n      </ProtectedContent>\r\n      {/* <ProtectedContent\r\n        authorize={()=>true}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            plan\r\n          }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={()=>true}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n          if(window.confirm(\"Esta accion es irreversible, ¿Esta seguro de continuar?\")){\r\n            eliminar.mutate(rol.id)\r\n          }\r\n        }}>Eliminar</Dropdown.Item>\r\n      </ProtectedContent> */}\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useMemo} from \"react\"\r\nimport { Button, Collapse, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { FaSync, FaFilter } from \"react-icons/fa\"\r\nimport { Page } from \"../../../../commons/services\"\r\nimport { Pagination } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { PlanFilter, useBuscarPlanes } from \"../queries\"\r\nimport { Permisos, PlanPolicy } from \"../policies\"\r\n// import { UserFilterForm } from \"./UserFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\n\r\nexport const PlanIndex = ()=>{\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const defaultFilter = useMemo(()=>{\r\n    const filter: PlanFilter =  {}\r\n    if(loggedUser?.can([Permisos.VER_PLANES])) return filter\r\n    if(loggedUser?.can([Permisos.VER_PLANES_REGIONAL])) {\r\n      filter.regionalId = loggedUser?.regionalId\r\n      return filter\r\n    }\r\n    filter.creadoPor = loggedUser?.id\r\n    return filter\r\n  }, [loggedUser])\r\n\r\n  const [filter, setFilter] = useState<PlanFilter>(defaultFilter)\r\n\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useBuscarPlanes(filter, page)\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.data){\r\n      const records = buscar.data.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((plan, index)=>{\r\n        return <tr key={plan.id}>\r\n          <td>{index + 1}</td>\r\n          <td>{plan.objetivoGeneral}</td>\r\n          <td>{plan.concluido ? \"Sí\" : \"No\"}</td>\r\n          <td>\r\n            <RowOptions plan={plan} queryKey={[\"planes.buscar\", filter, page]} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Planes</h2>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        {/* <ProtectedContent\r\n          authorize={PlanPolicy.ver}\r\n        > */}\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              showFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        {/* </ProtectedContent> */}\r\n        <ProtectedContent\r\n          authorize={PlanPolicy.registrar}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`/seguimiento/planes/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                Nuevo\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    {/* <ProtectedContent\r\n      authorize={PlanPolicy.ver}\r\n    > */}\r\n      <Collapse in={filterFormVisible}>\r\n        <div>\r\n          {/* <UserFilterForm onFilter={(filter)=>{\r\n            setFilter({...filter, ...defaultFilter})\r\n          }} /> */}\r\n        </div>\r\n      </Collapse>\r\n      <div className=\"d-flex\">\r\n        <div className=\"ml-auto mb-2\">          \r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Objetivo general</th>\r\n            <th>Estado</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <Row>\r\n        <Col>\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        </Col>\r\n        <Col>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    {/* </ProtectedContent> */}\r\n  </div>\r\n}","\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { isMatch } from \"../../../../commons/utils\";\r\nimport { Area, AreaService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\nexport type { Area }\r\n\r\nexport const AreasTypeahead = ({isInvalid, feedback, filterBy, ...props}: {feedback?: string, onLoad?: (options:Area[])=>void} & Omit<TypeaheadProps<Area>, \"isLoading\" | \"options\" >) => {\r\n  const queryKey = \"areas.buscar\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return AreaService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data, props.onLoad])\r\n\r\n  const options = useMemo(()=>{\r\n    if(Array.isArray(buscar.data?.data)){\r\n        return buscar.data?.data!\r\n    }\r\n    else if(buscar.data?.data){\r\n        console.error(buscar.data?.data)\r\n    }\r\n    return []\r\n  }, [buscar.data?.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      clearButton\r\n      emptyLabel=\"No se encontraron resultados\"\r\n      align=\"left\"\r\n      {...props}\r\n      className={(buscar.isError || isInvalid) ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={(regional, props)=>{\r\n        return (!props.text || isMatch(regional.nombre, props)) \r\n          && (!filterBy || (typeof filterBy === \"function\" && filterBy(regional, props)))\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      //@ts-ignore\r\n      options={options}\r\n      labelKey=\"nombre\"\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n    {feedback ? <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback> : null}\r\n  </InputGroup>\r\n}","import { Button, Col, Form, Spinner, Table } from 'react-bootstrap'\r\nimport { FaTrash } from 'react-icons/fa'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Controller, useForm, useFieldArray } from 'react-hook-form'\r\nimport { useMutation, useQueryClient } from 'react-query'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport moment from 'moment'\r\nimport * as yup from 'yup'\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { PlanService } from '../services'\r\nimport { Area, AreasTypeahead } from './AreasTypeahead'\r\n\r\ntype Inputs = {\r\n  regional: Regional[]\r\n  area: Area[]\r\n  objetivoGeneral: string\r\n  actividades: {\r\n    nombre: string\r\n    inicio: Date\r\n    fin: Date\r\n    indicadores: string\r\n  }[]\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  regional: yup.array().length(1, \"Debe indicar una regional\"),\r\n  area: yup.array().length(1, \"Debe indicar un area\"),\r\n  objetivoGeneral: yup.string().label(\"objetivo general\").required().max(150),\r\n  actividades: yup.array().min(1, \"Debe indicar al menos una actividad\").of(yup.object().shape({\r\n    nombre: yup.string().required().max(150).test(\"unique\", \"El nombre debe ser único\", function (value, context) {\r\n      //@ts-ignore\r\n      const count = context.from[1].value.actividades.filter((a:any)=>a.nombre === value).length\r\n      return count === 1\r\n    }),\r\n    indicadores: yup.string().required().max(250),\r\n    inicio: yup.date().emptyStringTo().typeError(\"No es una fecha valida\").required(),\r\n    fin: yup.date().emptyStringTo().typeError(\"No es una fecha valida\").required().when('inicio', (inicio: any)=>{\r\n      return inicio && yup.date().min(moment(inicio)/*.add(1, 'days')*/.toDate(), \"La fecha de fin debe ser mayor a la fecha de inicio\")\r\n    })\r\n  }))\r\n})\r\n\r\nexport const PlanForm = () => {\r\n  const history = useHistory<any>()\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    register,\r\n    formState,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    mode: 'onBlur',\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      regional: [],\r\n      area: [],\r\n      actividades: []\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n\r\n  const {\r\n    fields: actividadesField,\r\n    append: appendActividad,\r\n    remove: removeActividad\r\n  } = useFieldArray({\r\n    control,\r\n    name: 'actividades'\r\n  })\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const guardar = useMutation((inputs: Inputs) => {\r\n    return PlanService.registrar({\r\n      regionalId: inputs.regional![0].id,\r\n      areaId: inputs.area![0].id,\r\n      objetivoGeneral: inputs.objetivoGeneral,\r\n      actividades:inputs.actividades.map(actividad => {\r\n        return {\r\n          ...actividad,\r\n          inicio: (actividad.inicio as any)!.toISOString().split(\"T\")[0],\r\n          fin: (actividad.fin as any)!.toISOString().split(\"T\")[0],\r\n        }\r\n      })\r\n    })\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      queryClient.invalidateQueries(\"planes.buscar\")\r\n      history.replace(`/seguimiento/planes/${data.id}`, {\r\n        plan: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return <Form onSubmit={handleSubmit((inputs)=>{\r\n    guardar.mutate(inputs)\r\n  })}>\r\n    <h1 style={{fontSize: '1.75rem'}}>Plan</h1>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"regional\"\r\n          render={({field, fieldState})=>{\r\n            return <RegionalesTypeahead\r\n              id=\"plan-form/regionales\"\r\n              isInvalid={!!fieldState.error}\r\n              feedback={fieldState.error?.message}\r\n              selected={field.value}\r\n              onBlur={field.onBlur}\r\n              onChange={field.onChange}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Area</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"area\"\r\n          render={({field, fieldState})=>{\r\n            return <AreasTypeahead\r\n              id=\"plan-form/regionales\"\r\n              isInvalid={!!fieldState.error}\r\n              feedback={fieldState.error?.message}\r\n              selected={field.value}\r\n              onBlur={field.onBlur}\r\n              onChange={field.onChange}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Group>\r\n      <Form.Label>Objetivo general</Form.Label>\r\n      <Form.Control\r\n        isInvalid={!!formErrors.objetivoGeneral}\r\n        {...register(\"objetivoGeneral\")} />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.objetivoGeneral?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <h2 style={{fontSize: '1.5rem'}}>Actividades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Button className=\"ml-auto\" onClick={()=>appendActividad({})}>Agregar</Button>\r\n    </div>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th style={{minWidth: \"15rem\"}}>Nombre</th>\r\n          <th style={{minWidth: \"20rem\"}}>Indicadores</th>\r\n          <th style={{minWidth: \"5rem\"}}>Inicio</th>\r\n          <th style={{minWidth: \"5rem\"}}>Fin</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {\r\n          actividadesField.map((actividadField, index) => {\r\n            return <tr key={actividadField.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>\r\n                <Form.Group>\r\n                  <Form.Control \r\n                    isInvalid={!!(formErrors.actividades && formErrors.actividades[index]?.nombre)}\r\n                    {...register(`actividades.${index}.nombre` as const)} />\r\n                  <Form.Control.Feedback type=\"invalid\">{(formErrors.actividades && formErrors.actividades[index]?.nombre)?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </td>\r\n              <td>\r\n                <Form.Group>\r\n                  <Form.Control as=\"textarea\"\r\n                    isInvalid={!!(formErrors.actividades && formErrors.actividades[index]?.indicadores)}\r\n                    {...register(`actividades.${index}.indicadores` as const)}/>\r\n                  <Form.Control.Feedback type=\"invalid\">{(formErrors.actividades && formErrors.actividades[index]?.indicadores)?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </td>\r\n              <td>\r\n                <Form.Group>\r\n                  <Form.Control type=\"date\" \r\n                    isInvalid={!!(formErrors.actividades && formErrors.actividades[index]?.inicio)}\r\n                    {...register(`actividades.${index}.inicio` as const)}/>\r\n                  <Form.Control.Feedback type=\"invalid\">{(formErrors.actividades && formErrors.actividades[index]?.inicio)?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </td>\r\n              <td>\r\n                <Form.Group>\r\n                  <Form.Control type=\"date\" \r\n                    isInvalid={!!(formErrors.actividades && formErrors.actividades[index])?.fin}\r\n                    {...register(`actividades.${index}.fin` as const)}/>\r\n                  <Form.Control.Feedback type=\"invalid\">{(formErrors.actividades && formErrors.actividades[index]?.fin)?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </td>\r\n              <td>\r\n                <Button variant=\"danger\" onClick={()=>removeActividad(index)}><FaTrash /></Button>\r\n              </td>\r\n            </tr>\r\n          })\r\n        }\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={100}>\r\n            <div className={formErrors.actividades ? \"is-invalid\" : \"\"}></div>\r\n            <Form.Control.Feedback type=\"invalid\">{\r\n              //@ts-ignore\r\n              formErrors.actividades?.message}</Form.Control.Feedback>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </Table>\r\n    <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient, QueryKey } from \"react-query\"\r\nimport { FaEye, FaChartLine } from 'react-icons/fa'\r\nimport { Link, useParams, useLocation } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Actividad, PlanService } from \"../services\"\r\nimport { PlanPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  actividad: Actividad\r\n}\r\nexport const ActividadRowOptions = ({actividad}: Props) => {\r\n  const location = useLocation()\r\n  const {planId} = useParams<{\r\n    planId: string\r\n  }>()\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-actividades-${actividad.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(user)=>true}\r\n      >\r\n        <Dropdown.Item as={Link} to={`/seguimiento/planes/${planId}/actividades/${actividad.id}`} >\r\n          <FaEye className=\"mr-2\" />Detalles\r\n        </Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Button, Card, Col, Form, Table } from 'react-bootstrap'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport moment from 'moment'\r\nimport { useModal } from '../../../../commons/reusable-modal'\r\nimport { useCargarPlan } from '../queries'\r\nimport { ActividadRowOptions } from './ActividadRowOptions'\r\n\r\nexport const PlanView = ()=>{\r\n  const { planId: id } = useParams<{\r\n    planId: string\r\n  }>()\r\n\r\n  const queryLoader = useModal(\"queryLoader\")\r\n\r\n  const cargar = useCargarPlan(parseInt(id), {\r\n    onError: (error) => queryLoader.open({\r\n      state: \"error\",\r\n      error\r\n    })\r\n  })\r\n\r\n  const plan = cargar.data\r\n\r\n  return <>\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Plan</h1>\r\n    <Card className=\"mb-2\">\r\n      <Card.Header>Información</Card.Header>\r\n      <Card.Body>\r\n        <dl className=\"form-row\">\r\n          <dt className=\"col-sm-3\">Objetivo general</dt>\r\n          <dd className=\"col-sm-9\">{cargar.isFetching ? <Skeleton /> : plan?.objetivoGeneral }</dd>\r\n          <dt className=\"col-sm-3\">Avance</dt>\r\n          <dd className=\"col-sm-9\">{cargar.isFetching ? <Skeleton /> : `${plan?.avance}/${plan?.actividades.length}`}</dd>\r\n          <dt className=\"col-sm-3\">Avance esperado</dt>\r\n          <dd className=\"col-sm-9\">{cargar.isFetching ? <Skeleton /> : `${plan?.avanceEsperado}/${plan?.actividades.length}`}</dd>\r\n        </dl>\r\n      </Card.Body>\r\n    </Card>\r\n    <Card className=\"mb-2\">\r\n      <Card.Header>Actividades</Card.Header>\r\n      <Card.Body>\r\n        <Table responsive>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Nombre</th>\r\n              <th>Indicadores</th>\r\n              <th>Inicio</th>\r\n              <th>Fin</th>\r\n              <th>Estado</th>\r\n              <th>Avance</th>\r\n              <th style={{width: 1}}></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {plan?.actividades.map((actividad, index) => {\r\n              return <tr key={actividad.id}>\r\n                <th scope=\"row\">{index + 1}</th>\r\n                <td>{actividad.nombre}</td>\r\n                <td>{actividad.indicadores}</td>\r\n                <td className=\"text-nowrap\">{actividad.inicio}</td>\r\n                <td className=\"text-nowrap\">{actividad.fin}</td>\r\n                <td>{actividad.estado == 1 ? 'Pendiente' : actividad.estado == 2 ? 'En progreso' : actividad.estado == 3 ? 'En espera' : actividad.estado == 4 ? 'Concluido' : ''}</td>\r\n                <td >\r\n                  <div className=\"text-center\">\r\n                    <div>\r\n                      {`${actividad.avance}%/${actividad.avanceEsperado}%`}\r\n                    </div>\r\n                    <div className={actividad.avance >= actividad.avanceEsperado ? \"bg-success\" : moment().isBefore(moment(actividad.fin)) ? \"bg-warning\" : \"bg-danger\"}\r\n                      style={{width: `${actividad.avance}%`, overflow: 'hidden', position: 'relative', top: '-1.5rem'}}>\r\n                      <div className=\"text-white\" style={{width: 110}}>\r\n                        {`${actividad.avance}%/${actividad.avanceEsperado}%`}\r\n                      </div>\r\n                    </div>\r\n                  </div>              \r\n                </td>\r\n                <td><ActividadRowOptions actividad={actividad}/></td>\r\n              </tr>\r\n            })}\r\n          </tbody>\r\n        </Table>\r\n      </Card.Body>\r\n    </Card>\r\n  </>\r\n}","import { Button, Col, Form, InputGroup, Modal, ModalProps, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport moment from 'moment'\r\nimport { useRegistrarAvance } from '../queries'\r\nimport { Actividad, PlanService } from '../services'\r\nimport { formatBytes } from '../../../../commons/utils'\r\n\r\ntype Inputs = {\r\n  avance: number\r\n  informe: FileList\r\n  observaciones: string\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  avance: yup.number().emptyStringTo().required().min(0).max(100),\r\n  informe: yup.mixed().required(\"Debe proporcionar un archivo\").test(\"max-size\", \"El archivo debe pesar menos de ${max}MB, tamaño actual ${size}\", function(files?: FileList){\r\n    const file = files && files.length ? files[0] : null\r\n    console.log(\"Files\", file?.type)\r\n    if(file && file.size > 1024*1024*1.5){\r\n      return this.createError({\r\n        params: {\r\n          max: 1.5,\r\n          size: formatBytes(file.size)\r\n        }\r\n      })\r\n    }\r\n    return true\r\n  }),\r\n  observaciones: yup.string().emptyStringTo(null).nullable().notRequired().max(250)\r\n})\r\n\r\ntype Props = {\r\n  actividad: Actividad\r\n} & ModalProps\r\n\r\nexport const AvanceForm = ({actividad, ...modalProps}: Props ) => {\r\n\r\n  const params = useParams<any>()\r\n  const planId = parseInt(params.planId)\r\n\r\n  const {\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema)\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n  console.log(formErrors)\r\n\r\n  const guardar = useRegistrarAvance({\r\n    onSuccess: () => {\r\n      reset()\r\n      modalProps.onHide && modalProps.onHide()\r\n    }\r\n  })\r\n  \r\n  return <Modal centered {...modalProps} >\r\n    <Modal.Header>Registro de avance</Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"avance-form\" onSubmit={handleSubmit((values)=>{\r\n        guardar.mutate({\r\n          params: {\r\n            planId,\r\n            actividadId: actividad.id\r\n          },\r\n          data: {\r\n            avance: values.avance,\r\n            observaciones: values.observaciones,\r\n            informe: values.informe[0]\r\n          }\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={6}>\r\n            <Form.Label>Fecha</Form.Label>\r\n            <Form.Control disabled value={moment().format('L')} />\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={3}>\r\n            <Form.Label>Avance esperado</Form.Label>\r\n            <InputGroup hasValidation>\r\n              <Form.Control\r\n                disabled\r\n                value={actividad.avanceEsperado} />\r\n              <InputGroup.Append><InputGroup.Text>%</InputGroup.Text></InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.avance?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={3}>\r\n            <Form.Label>Avance</Form.Label>\r\n            <InputGroup hasValidation>\r\n              <Form.Control\r\n                isInvalid={!!formErrors.avance}\r\n                {...register('avance')} />\r\n              <InputGroup.Append><InputGroup.Text>%</InputGroup.Text></InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.avance?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Group>\r\n          <Form.File\r\n            label='Informe'\r\n            {...register('informe')} \r\n          />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Observaciones</Form.Label>\r\n          <Form.Control as=\"textarea\" {...register('observaciones')} />\r\n        </Form.Group>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      <Button type=\"submit\" form=\"avance-form\">\r\n        {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n        <span className=\"align-middle\">Guardar</span>\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { Dropdown } from \"react-bootstrap\"\r\nimport { VscFilePdf } from 'react-icons/vsc'\r\nimport { useParams } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from '../../../../commons/reusable-modal'\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Avance } from \"../services\"\r\n\r\ntype Props = {\r\n  avance: Avance\r\n}\r\nexport const HistorialRowOptions = ({avance}: Props) => {\r\n  const params = useParams<{\r\n    planId: string\r\n    actividadId: string\r\n  }>()\r\n  const planId = parseInt(params.planId)\r\n  const actividadId = parseInt(params.actividadId)\r\n\r\n  const pdfModal = useModal(\"pdfModal\")\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-historial-${avance.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={()=>true}\r\n      >\r\n        {/* <Dropdown.Item href={avance.informeUrl} download target=\"_self\"><FaDownload className=\"mr-2\" />Descargar informe</Dropdown.Item> */}\r\n        <Dropdown.Item onClick={()=>{\r\n          pdfModal.open({\r\n            title: 'Informe',\r\n            url: avance.informeUrl\r\n          })\r\n        }}><VscFilePdf className=\"mr-2\" />Ver informe</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import React, { useEffect, useMemo, useState, ComponentProps } from 'react'\r\nimport { Button, Card, Col, Form, Row, Table } from 'react-bootstrap'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useHistory, useParams } from 'react-router'\r\nimport moment from 'moment'\r\nimport { Line } from 'react-chartjs-2';\r\nimport { useModal } from '../../../../commons/reusable-modal'\r\nimport { ProtectedContent } from '../../../../commons/auth'\r\nimport { PlanPolicy } from '../policies'\r\nimport { Actividad } from '../services'\r\nimport { useCargarPlan } from '../queries'\r\nimport { AvanceForm } from './AvanceForm'\r\nimport { HistorialRowOptions } from './HistorialRowOptions'\r\n\r\n\r\nconst options = {\r\n  scales: {\r\n    yAxes: [\r\n      {\r\n        ticks: {\r\n          beginAtZero: true\r\n        },\r\n        min: 0,\r\n        max: 100\r\n      },\r\n    ],\r\n  },\r\n};\r\n\r\nconst LineChart = React.memo((props: ComponentProps<typeof Line>)=><Line {...props}/>)\r\n\r\nexport const ActividadView = ()=>{\r\n  const history = useHistory<{actividad: Actividad}>()\r\n  const params = useParams<{\r\n    planId: string\r\n    actividadId: string\r\n  }>()\r\n  const planId = parseInt(params.planId)\r\n  const actividadId = parseInt(params.actividadId)\r\n\r\n  // const queryLoader = useModal('queryLoader')\r\n\r\n  const [avanceFormVisible, showAvanceForm] = useState(false)\r\n\r\n  const cargar = useCargarPlan(planId)\r\n  // const cargar = useCargarActividad(planId, actividadId)\r\n  const plan = cargar.data\r\n  const actividad =  plan?.actividades?.find(a => a.id == actividadId)\r\n\r\n  console.log(\"Actividad\", cargar)\r\n\r\n  const getLabels = () => {\r\n    const labels = [] as string[]\r\n    const first = actividad!.historial.length && moment(actividad!.historial[0].fecha)\r\n    const last = actividad!.historial.length ? moment(actividad!.historial[actividad!.historial.length-1].fecha) : null\r\n    const inicio = moment(actividad!.inicio).subtract(1, 'days')\r\n    const fin = moment(actividad!.fin)\r\n    const conclusion = actividad!.conclusion ? moment(actividad!.conclusion) : null\r\n    const hoy = moment()\r\n\r\n    const startDate = (!first || inicio.isBefore(first)) ? inicio :  first\r\n    let endDate = fin;\r\n    if(conclusion && fin.isBefore(conclusion)){\r\n      endDate = conclusion\r\n    }\r\n    if(last && endDate.isBefore(last)){\r\n      endDate = last\r\n    }\r\n    if(endDate.isBefore(hoy)){\r\n      endDate = hoy\r\n    }\r\n\r\n    while(startDate.isSameOrBefore(endDate)){\r\n      labels.push(startDate.format('Do MMM'))\r\n      startDate.add(1, 'days')\r\n    }\r\n\r\n    return labels\r\n  }\r\n\r\n  const getData = () =>{\r\n    const data = [] as number[]\r\n    const first = actividad!.historial.length ? moment(actividad!.historial[0].fecha) : null\r\n    const last = actividad!.historial.length ? moment(actividad!.historial[actividad!.historial.length-1].fecha) : null\r\n    const inicio = moment(actividad!.inicio).subtract(1, 'days')\r\n    const fin = moment(actividad!.fin)\r\n    const conclusion = actividad!.conclusion ? moment(actividad!.conclusion) : null\r\n    const hoy = moment()\r\n\r\n    console.log(actividad!.conclusion)\r\n\r\n    let startDate = ((!first || inicio.isBefore(first)) ? inicio :  first).clone()\r\n    let endDate = last;\r\n    if(conclusion){\r\n      if(!endDate || endDate.isBefore(conclusion)){\r\n        endDate = conclusion\r\n      }\r\n    }\r\n    else {\r\n      if(!endDate || endDate.isBefore(hoy)){\r\n        console.log(hoy)\r\n        endDate = hoy\r\n      }\r\n    }\r\n\r\n    console.log(actividad)\r\n\r\n    let ultimoAvance = 0\r\n    while(startDate.isSameOrBefore(endDate)){\r\n      const entries = actividad!.historial.filter(h=>h.fecha == startDate.format('YYYY-MM-DD'))\r\n      const avance = entries[entries.length-1]\r\n      ultimoAvance = avance ? avance.actual : ultimoAvance\r\n      data.push(ultimoAvance)\r\n      startDate = startDate.add(1, 'days').clone()\r\n    }\r\n    return data\r\n  }\r\n\r\n  const getIdealData = () => {\r\n    const data = [] as number[]\r\n    const first = actividad!.historial.length ? moment(actividad!.historial[0].fecha) : null\r\n    const last = actividad!.historial.length ? moment(actividad!.historial[actividad!.historial.length-1].fecha) : null\r\n    const inicio = moment(actividad!.inicio).subtract(1, 'days')\r\n    const fin = moment(actividad!.fin)\r\n    const conclusion = actividad!.conclusion ? moment(actividad!.conclusion) : null\r\n    const hoy = moment()\r\n\r\n    \r\n    const duration = moment.duration(fin.diff(inicio)).asDays()\r\n    let date = ((!first || inicio.isBefore(first)) ? inicio :  first).clone()\r\n    let endDate = fin;\r\n    if(conclusion && fin.isBefore(conclusion)){\r\n      endDate = conclusion\r\n    }\r\n    if(last && endDate.isBefore(last)){\r\n      endDate = last\r\n    }\r\n    if(endDate.isBefore(hoy)){\r\n      endDate = hoy\r\n    }\r\n\r\n    while(date.isSameOrBefore(endDate)){\r\n      const day = moment.duration(date.diff(inicio)).asDays()\r\n      data.push(Math.min(100, Math.max(0, Math.round(10000*day/duration)/100)))\r\n      date = date.add(1, 'days').clone()\r\n    }\r\n\r\n    return data\r\n  }\r\n  \r\n  const data = useMemo(()=> {\r\n    if (!actividad) return\r\n    const labels = getLabels()\r\n\r\n    return {\r\n    labels: labels,\r\n    datasets: [\r\n        {\r\n          label: 'Avance real',\r\n          data: getData(),\r\n          fill: false,\r\n          backgroundColor: 'rgb(255, 99, 132)',\r\n          borderColor: 'rgba(255, 99, 132, 0.2)',\r\n        },\r\n        {\r\n          label: 'Avance Esperado',\r\n          data: getIdealData(),\r\n          borderDash: [5, 5],\r\n          fill: false,\r\n          backgroundColor: 'rgb(53, 54, 95)',\r\n          borderColor: 'rgba(53, 54, 95, 0.2)',\r\n        }\r\n      ],\r\n    }\r\n  }, [actividad]);\r\n\r\n  return <>\r\n    <h1 style={{fontSize: \"1.5rem\"}}>Actividad</h1>\r\n    <Row>\r\n      <Col className='mb-3' lg={6}>\r\n        <Card style={{height: '100%'}}>\r\n          <Card.Header>Información</Card.Header>\r\n          <Card.Body>\r\n            <dl className=\"form-row\">\r\n              <dt className=\"col-sm-3\">Nombre</dt>\r\n              <dd className=\"col-sm-9\">{cargar.isFetching ? <Skeleton /> : actividad?.nombre}</dd>\r\n              \r\n              <dt className=\"col-sm-3\">Fecha de inicio</dt>\r\n              <dd className=\"col-sm-9\">{cargar.isFetching ? <Skeleton /> : `${moment(actividad?.inicio).format('L')}`}</dd>\r\n\r\n              <dt className=\"col-sm-3\">Fecha de conclusión</dt>\r\n              <dd className=\"col-sm-9\">{`${moment(actividad?.fin).format('L')} (${moment(actividad?.fin).fromNow()})`}</dd>\r\n\r\n              <dt className=\"col-sm-3\">Avanve</dt>\r\n              <dd className=\"col-sm-9\">{actividad?.avance}%</dd>\r\n\r\n              <dt className=\"col-sm-3\">Avance esperado</dt>\r\n              <dd className=\"col-sm-9\">{actividad?.avanceEsperado}%</dd>\r\n            </dl>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n      <Col className=\"mb-3\" lg={6}>\r\n        <Card style={{height: '100%'}}>\r\n          <Card.Header>Progreso</Card.Header>\r\n          <Card.Body>\r\n            {data && <LineChart data={data} options={options} type=\"line\" />}\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n    <Card>\r\n      <Card.Header>Historial de avance</Card.Header>\r\n      <Card.Body>\r\n        <ProtectedContent\r\n          authorize={(user) => !!plan && PlanPolicy.registrarAvance(user, plan)}\r\n        >\r\n          <div className=\"d-flex mb-2\">\r\n            <Button className=\"ml-auto\" onClick={()=>{\r\n              showAvanceForm(true)\r\n            }}\r\n            ><FaPlus /></Button>\r\n          </div>\r\n        </ProtectedContent>\r\n        <Table>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Fecha</th>\r\n              <th style={{width: 110}}>Avance</th>\r\n              <th>Observaciones</th>\r\n              <th style={{width: 1}}></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {actividad?.historial.map((avance, index) => {\r\n              return <tr key={avance.id}>\r\n                <th scope=\"row\">{index + 1}</th>\r\n                <td className=\"text-nowrap\">{moment(avance.fecha).format(\"L\")}</td>\r\n                <td>\r\n                  <div className=\"text-center\">\r\n                    <div>\r\n                      {`${avance.actual}%/${avance.esperado}%`}\r\n                    </div>\r\n                    <div className={avance.actual >= avance.esperado ? \"bg-success\" : moment().isBefore(moment(actividad.fin)) ? \"bg-warning\" : \"bg-danger\"}\r\n                      style={{width: `${avance.actual}%`, overflow: 'hidden', position: 'relative', top: '-1.5rem'}}>\r\n                      <div className=\"text-white\" style={{width: 110}}>\r\n                        {`${avance.actual}%/${avance.esperado}%`}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td>{avance.observaciones}</td>\r\n                <td><HistorialRowOptions avance={avance}/></td>\r\n              </tr>\r\n            })}\r\n          </tbody>\r\n        </Table>\r\n        <ProtectedContent\r\n          authorize={(user) => !!plan && PlanPolicy.registrarAvance(user, plan)}\r\n        >\r\n          <div className=\"d-flex mb-2\">\r\n            <Button className=\"ml-auto\" onClick={()=>{\r\n              showAvanceForm(true)\r\n            }}\r\n            ><FaPlus /></Button>\r\n          </div>\r\n        </ProtectedContent>\r\n        {actividad && <AvanceForm actividad={actividad} show={avanceFormVisible} onHide={()=>showAvanceForm(false)} />}\r\n      </Card.Body>\r\n    </Card>\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { useRouteMatch, Switch, useLocation} from 'react-router-dom'\r\nimport { Image, Modal } from 'react-bootstrap'\r\nimport { FaTasks } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport { ProtectedRoute } from '../../commons/auth/components'\r\nimport { useLoggedUser } from '../../commons/auth/hooks'\r\nimport { removeTrailingSlashes } from '../../commons/utils'\r\nimport { PlanIndex, PlanForm, PlanView, ActividadView, AvanceForm } from './planes'\r\n\r\nexport const SeguimientoApp = ()=>{\r\n  const match = useRouteMatch()\r\n  const url = removeTrailingSlashes(match.url)\r\n  const location = useLocation<any>()\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n      items.push({\r\n        id: \"planes\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/planes`,\r\n        title: \"Planes\",\r\n      })\r\n    return items\r\n  }, [loggedUser])\r\n\r\n  const background = location.state?.background || location\r\n\r\n  return <SidebarLayout \r\n    sidebar={{\r\n        header: <div className=\"d-flex justify-content-center\"><Image src=\"/logo-lg.png\" /></div>,\r\n        items: sidebarItems\r\n    }}\r\n  >\r\n    <Switch location={background}>\r\n      <ProtectedRoute exact path={`${url}/planes`}\r\n      >\r\n        <PlanIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/planes/registrar`]}\r\n      >\r\n        <PlanForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute path={`${url}/planes/:planId/actividades/:actividadId`}\r\n      >\r\n        <ActividadView />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/planes/:planId`}\r\n      >\r\n        <PlanView />\r\n      </ProtectedRoute>\r\n    </Switch>\r\n    {/* <ProtectedRoute exact path={`${url}/planes/:planId/actividades/:actividadId/registrar-avance`}\r\n    >\r\n      <AvanceForm />\r\n    </ProtectedRoute>   \r\n    <ProtectedRoute exact path={`${url}/planes/:planId/actividades/:actividadId/grafico`}\r\n    >\r\n      <Modal show={true}>\r\n        Grafico\r\n      </Modal>\r\n    </ProtectedRoute>   */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default SeguimientoApp"],"sourceRoot":""}