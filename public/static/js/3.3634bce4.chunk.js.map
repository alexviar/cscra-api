{"version":3,"sources":["../../src/toNestError.ts","../../src/yup.ts","commons/auth/constants/Permisos.ts","commons/components/layouts/SidebarLayout.tsx","../node_modules/react-bootstrap/esm/Container.js","../node_modules/react-bootstrap/esm/Table.js","../node_modules/react-bootstrap/esm/AccordionContext.js","../node_modules/react-bootstrap/esm/AccordionToggle.js","../node_modules/react-bootstrap/esm/AccordionCollapse.js","../node_modules/react-bootstrap/esm/Accordion.js","../node_modules/react-bootstrap/esm/CardImg.js","../node_modules/react-bootstrap/esm/Card.js","apps/iam/usuarios/services/UserService.ts","apps/iam/roles/services/RolService.ts","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js","apps/iam/usuarios/components/RolesCheckList.tsx","apps/iam/usuarios/components/UserForm.tsx","apps/iam/usuarios/components/CambiarContrasenaForm.tsx","apps/iam/usuarios/policies/index.ts","apps/iam/usuarios/components/RowOptions.tsx","apps/iam/usuarios/components/UserIndex.tsx","apps/iam/usuarios/components/UserView.tsx","apps/iam/roles/services/PermisoService.ts","apps/iam/roles/components/PermisoCheckList.tsx","apps/iam/roles/components/RolForm.tsx","apps/iam/roles/policies/index.ts","apps/iam/roles/components/RolIndex.tsx","apps/iam/roles/components/RolView.tsx","apps/iam/IamApp.tsx"],"names":["toNestError","errors","fields","fieldErrors","path","field","get","set","Object","assign","ref","yupResolver","schema","schemaOptions","resolverOptions","abortEarly","values","context","options","mode","result","e","error","validateAllFieldCriteria","criteriaMode","inner","reduce","previous","message","type","types","messages","appendErrors","concat","VER_SOLICITUDES_DE_ATENCION_EXTERNA","VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA","REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL","EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR","VER_USUARIOS","VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","REGISTRAR_USUARIOS","REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","EDITAR_USUARIOS","EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","BLOQUEAR_USUARIOS","BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","DESBLOQUEAR_USUARIOS","DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","CAMBIAR_CONTRASEÑA","CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO","VER_ROLES","REGISTRAR_ROLES","EDITAR_ROLES","ELIMINAR_ROLES","VER_LISTA_DE_MORA","VER_LISTA_DE_MORA_REGIONAL","AGREGAR_EMPLEADOR_EN_MORA","AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","QUITAR_EMPLEADOR_EN_MORA","QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL","VER_MEDICOS","VER_MEDICOS_REGIONAL","REGISTRAR_MEDICOS","REGISTRAR_MEDICOS_REGIONAL","EDITAR_MEDICOS","EDITAR_MEDICOS_REGIONAL","BAJA_MEDICOS","BAJA_MEDICOS_REGIONAL","VER_PROVEEDORES","VER_PROVEEDORES_REGIONAL","REGISTRAR_PROVEEDORES","REGISTRAR_PROVEEDORES_REGIONAL","EDITAR_PROVEEDORES","EDITAR_PROVEEDORES_REGIONAL","REGISTRAR_CONTRATO_PROVEEDOR","REGISTRAR_CONTRATO_PROVEEDOR_REGIONAL","BAJA_PROVEEDORES","BAJA_PROVEEDORES_REGIONAL","VER_ESPECIALIDADES","REGISTRAR_ESPECIALIDADES","EDITAR_ESPECIALIDADES","ELIMINAR_ESPECIALIDADES","IMPORTAR_ESPECIALIDADES","VER_PRESTACIONES","REGISTRAR_PRESTACIONES","EDITAR_PRESTACIONES","ELIMINAR_PRESTACIONES","IMPORTAR_PRESTACIONES","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","className","id","Container","React","forwardRef","_ref","bsPrefix","fluid","_ref$as","as","Component","props","_objectWithoutPropertiesLoose","prefix","useBootstrapPrefix","suffix","createElement","_extends","classNames","displayName","defaultProps","Table","striped","bordered","borderless","hover","size","variant","responsive","decoratedBsPrefix","classes","table","responsiveClass","createContext","AccordionToggle","eventKey","onClick","accordionOnClick","contextEventKey","useContext","AccordionContext","onSelect","SelectableContext","useAccordionToggle","AccordionCollapse","Provider","value","Collapse","in","Children","only","Accordion","_useUncontrolled","useUncontrolled","activeKey","_useUncontrolled$as","controlledProps","finalClassName","Toggle","CardImg","DivStyledAsH5","divWithClassName","DivStyledAsH6","CardBody","createWithBsPrefix","CardTitle","CardSubtitle","CardLink","CardText","CardHeader","CardFooter","CardImgOverlay","Card","bg","text","border","body","cardContext","useMemo","cardHeaderBsPrefix","CardContext","Img","Title","Subtitle","Body","Link","Text","Header","Footer","ImgOverlay","UserService","filter","page","apiClient","params","keysToUnderscore","userId","data","post","put","RolService","delete","undefined","active","disabled","ListGroupItem","action","handleClick","useCallback","event","preventDefault","stopPropagation","tabIndex","AbstractNavItem","makeEventKey","href","horizontal","ListGroup","horizontalVariant","initialBsPrefix","AbstractNav","Item","count","RolesCheckList","memo","isInvalid","selected","onChange","buscar","useQuery","enabled","refetchOnReconnect","refetchOnMount","refetchOnWindowFocus","console","log","roles","isFetching","Spinner","animation","isError","Alert","refetch","style","maxHeight","map","rol","index","Form","Check","label","name","checked","some","rolChecked","isChecked","target","rch","UserForm","loggedUser","useLoggedUser","useParams","yup","shape","informacionPersonal","ci","ciComplemento","trim","length","nullable","optional","apellidoPaterno","when","is","apellidoMaterno","then","required","nombres","informacionUsuario","min","username","matches","max","password","passwordRepeat","test","this","parent","regional","useForm","resolver","defaultValues","control","formState","handleSubmit","register","setValue","trigger","watch","history","useHistory","queryKey","cargar","parseInt","location","user","guardar","useMutation","regionalId","r","onSuccess","replace","useState","regionales","setRegionales","filterRegional","can","Permisos","formErrors","useEffect","String","ciRaiz","find","onSubmit","mutate","fontSize","defaultActiveKey","join","Row","Group","Col","xs","md","Label","title","Control","Feedback","lg","isSubmitted","controlId","validate","matchPassword","render","fieldState","onLoad","feedback","filterBy","onBlur","Button","isLoading","CambiarContrasenaForm","newPassword","newPasswordRepeat","oneOf","UsuarioPolicy","canAny","edit","view","changePassword","disable","enable","RowOptions","modal","useModal","queryClient","useQueryClient","cambiarEstado","estado","close","setQueryData","oldData","records","u","status","open","Dropdown","VerticalEllipsisDropdownToggle","Menu","authorize","to","pathname","UserIndex","current","setPage","total","meta","didMountRef","useRef","width","colSpan","response","nombreCompleto","renderRows","Math","ceil","UserView","useLocation","scope","createdAt","updatedAt","roleNames","PermisoService","PermisoCheckList","permisos","permiso","s","RolForm","description","permissions","reset","setError","modalRef","ignoreAuthorization","onError","show","permissionNames","noValidate","validated","isValid","Modal","renderModalBody","RolPolicy","RolIndex","setTotal","eliminar","window","confirm","RolView","locationState","p","i","IamApp","sidebarItems","items","push","icon","exact","currentUrl"],"mappings":"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","file":"static/js/3.3634bce4.chunk.js","sourcesContent":["import {\n  set,\n  get,\n  FieldError,\n  FieldErrors,\n  Field,\n  InternalFieldName,\n} from 'react-hook-form';\n\nexport const toNestError = <TFieldValues>(\n  errors: Record<string, FieldError>,\n  fields: Record<InternalFieldName, Field['_f']>,\n): FieldErrors<TFieldValues> => {\n  const fieldErrors: FieldErrors<TFieldValues> = {};\n  for (const path in errors) {\n    const field = get(fields, path) as Field['_f'] | undefined;\n    set(\n      fieldErrors,\n      path,\n      Object.assign(errors[path], { ref: field && field.ref }),\n    );\n  }\n\n  return fieldErrors;\n};\n","import Yup from 'yup';\nimport { toNestError } from '@hookform/resolvers';\nimport { appendErrors, FieldError } from 'react-hook-form';\nimport { Resolver } from './types';\n\n/**\n * Why `path!` ? because it could be `undefined` in some case\n * https://github.com/jquense/yup#validationerrorerrors-string--arraystring-value-any-path-string\n */\nconst parseErrorSchema = (\n  error: Yup.ValidationError,\n  validateAllFieldCriteria: boolean,\n) => {\n  return error.inner.reduce<Record<string, FieldError>>((previous, error) => {\n    if (!previous[error.path!]) {\n      previous[error.path!] = { message: error.message, type: error.type! };\n    }\n\n    if (validateAllFieldCriteria) {\n      const types = previous[error.path!].types;\n      const messages = types && types[error.type!];\n\n      previous[error.path!] = appendErrors(\n        error.path!,\n        validateAllFieldCriteria,\n        previous,\n        error.type!,\n        messages\n          ? ([] as string[]).concat(messages as string[], error.message)\n          : error.message,\n      ) as FieldError;\n    }\n\n    return previous;\n  }, {});\n};\n\nexport const yupResolver: Resolver = (\n  schema,\n  schemaOptions = {\n    abortEarly: false,\n  },\n  resolverOptions = {},\n) => async (values, context, options) => {\n  try {\n    if (schemaOptions.context && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(\n        \"You should not used the yup options context. Please, use the 'useForm' context object instead\",\n      );\n    }\n\n    const result = await schema[\n      resolverOptions.mode === 'sync' ? 'validateSync' : 'validate'\n    ](values, Object.assign({}, schemaOptions, { context }));\n\n    return {\n      values: result,\n      errors: {},\n    };\n  } catch (e) {\n    return {\n      values: {},\n      errors: toNestError(\n        parseErrorSchema(e, options.criteriaMode === 'all'),\n        options.fields,\n      ),\n    };\n  }\n};\n","/**\r\n * Permisos de solicitud de transferencia externa\r\n */\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA = \"Ver solicitudes de atencion externa\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Ver solicitudes de atencion externa (misma regional)\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Ver solicitudes de atencion externa (registrado por)\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Registrar solicitudes de atencion externa\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Registrar solicitudes de atencion externa (misma regional)\";\r\n// export const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Registrar solicitudes de atencion externa (registrado por)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Emitir solicitudes de atencion externa\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Emitir solicitudes de atencion externa (misma regional)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR = \"Emitir solicitudes de atencion externa (registrado por)\";\r\n  \r\n/**\r\n * Permisos de usuarios\r\n */\r\nexport const VER_USUARIOS = \"Ver usuarios\";\r\nexport const VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Ver usuarios (misma regional)\";\r\nexport const REGISTRAR_USUARIOS = \"Registrar usuarios\";\r\nexport const REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Registrar usuarios (misma regional)\";\r\nexport const EDITAR_USUARIOS = \"Editar usuarios\";\r\nexport const EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Editar usuarios (misma regional)\";\r\nexport const BLOQUEAR_USUARIOS = \"Bloquear usuarios\";\r\nexport const BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Bloquear usuarios (misma regional)\";\r\nexport const DESBLOQUEAR_USUARIOS = \"Desbloquear usuarios\";\r\nexport const DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Desbloquear usuarios (misma regional)\";\r\nexport const CAMBIAR_CONTRASEÑA = \"Cambiar contraseña\";\r\nexport const CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO = \"Cambiar contraseña (misma regional)\";\r\n\r\n/**\r\n * Permisos de roles\r\n */\r\nexport const VER_ROLES = \"Ver roles\";\r\nexport const REGISTRAR_ROLES = \"Registrar roles\";\r\nexport const EDITAR_ROLES = \"Editar roles\";\r\nexport const ELIMINAR_ROLES = \"Eliminar roles\";\r\n\r\n\r\n/**\r\n * Permisos de lista de mora\r\n */\r\nexport const VER_LISTA_DE_MORA = \"Ver lista de mora\"\r\nexport const VER_LISTA_DE_MORA_REGIONAL = \"Ver lista de mora (regional)\"\r\nexport const AGREGAR_EMPLEADOR_EN_MORA = \"Agregar empleador en mora\";\r\nexport const AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Agregar empleador en mora (misma regional)\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA = \"Quitar empleador en mora\";\r\nexport const QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL = \"Quitar empleador en mora (misma regional)\";\r\n\r\n\r\n\r\n/**\r\n * Medicos\r\n */\r\nexport const VER_MEDICOS = \"Ver médicos\";\r\nexport const VER_MEDICOS_REGIONAL = \"Ver médicos (regional)\";\r\nexport const REGISTRAR_MEDICOS = \"Registrar médicos\";\r\nexport const REGISTRAR_MEDICOS_REGIONAL = \"Registrar médicos (regional)\";\r\nexport const EDITAR_MEDICOS = \"Editar médicos\";\r\nexport const EDITAR_MEDICOS_REGIONAL = \"Editar médicos (regional)\";\r\nexport const BAJA_MEDICOS = \"Baja médicos\";\r\nexport const BAJA_MEDICOS_REGIONAL = \"Baja médicos (regional)\";\r\n\r\n/**\r\n* Proveedores\r\n*/\r\nexport const VER_PROVEEDORES = \"Ver proveedores\";\r\nexport const VER_PROVEEDORES_REGIONAL = \"Ver proveedores (regional)\";\r\nexport const REGISTRAR_PROVEEDORES = \"Registrar proveedores\";\r\nexport const REGISTRAR_PROVEEDORES_REGIONAL = \"Registrar proveedores (regional)\";\r\nexport const EDITAR_PROVEEDORES = \"Editar proveedores\";\r\nexport const EDITAR_PROVEEDORES_REGIONAL = \"Editar proveedores (regional)\";\r\nexport const REGISTRAR_CONTRATO_PROVEEDOR = \"Registrar contratos de preveedores\";\r\nexport const REGISTRAR_CONTRATO_PROVEEDOR_REGIONAL = \"Registrar contratos de preveedores (regional)\";\r\nexport const BAJA_PROVEEDORES = \"Baja proveedores\";\r\nexport const BAJA_PROVEEDORES_REGIONAL = \"Baja proveedores (regional)\";\r\n\r\n/**\r\n* Especialidades\r\n*/\r\nexport const VER_ESPECIALIDADES = \"Ver especialidades\";\r\nexport const REGISTRAR_ESPECIALIDADES = \"Registrar especialidades\";\r\nexport const EDITAR_ESPECIALIDADES = \"Editar especialidades\";\r\nexport const ELIMINAR_ESPECIALIDADES = \"Eliminar especialidades\";\r\nexport const IMPORTAR_ESPECIALIDADES = \"Importar especialidades\";\r\n\r\n/**\r\n* Prestaciones\r\n*/\r\nexport const VER_PRESTACIONES = \"Ver prestaciones\";\r\nexport const REGISTRAR_PRESTACIONES = \"Registrar prestaciones\";\r\nexport const EDITAR_PRESTACIONES = \"Editar prestaciones\";\r\nexport const ELIMINAR_PRESTACIONES = \"Eliminar prestaciones\";\r\nexport const IMPORTAR_PRESTACIONES = \"Importar prestaciones\";","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  fluid: false\n};\nvar Container = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      fluid = _ref.fluid,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"fluid\", \"as\", \"className\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'container');\n  var suffix = typeof fluid === 'string' ? \"-\" + fluid : '-fluid';\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, fluid ? \"\" + prefix + suffix : prefix)\n  }));\n});\nContainer.displayName = 'Container';\nContainer.defaultProps = defaultProps;\nexport default Container;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React from 'react';\nvar context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'AccordionContext';\nexport default context;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport SelectableContext from './SelectableContext';\nimport AccordionContext from './AccordionContext';\nexport function useAccordionToggle(eventKey, onClick) {\n  var contextEventKey = useContext(AccordionContext);\n  var onSelect = useContext(SelectableContext);\n  return function (e) {\n    /*\n      Compare the event key in context with the given event key.\n      If they are the same, then collapse the component.\n    */\n    var eventKeyPassed = eventKey === contextEventKey ? null : eventKey;\n    if (onSelect) onSelect(eventKeyPassed, e);\n    if (onClick) onClick(e);\n  };\n}\nvar AccordionToggle = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'button' : _ref$as,\n      children = _ref.children,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"as\", \"children\", \"eventKey\", \"onClick\"]);\n\n  var accordionOnClick = useAccordionToggle(eventKey, onClick);\n\n  if (Component === 'button') {\n    props.type = 'button';\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    onClick: accordionOnClick\n  }, props), children);\n});\nexport default AccordionToggle;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport Collapse from './Collapse';\nimport AccordionContext from './AccordionContext';\nimport SelectableContext from './SelectableContext';\nvar AccordionCollapse = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      eventKey = _ref.eventKey,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eventKey\"]);\n\n  var contextEventKey = useContext(AccordionContext); // Empty SelectableContext is to prevent elements in the collapse\n  // from collapsing the accordion when clicked.\n\n  return /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(Collapse, _extends({\n    ref: ref,\n    in: contextEventKey === eventKey\n  }, props), /*#__PURE__*/React.createElement(\"div\", null, React.Children.only(children))));\n});\nAccordionCollapse.displayName = 'AccordionCollapse';\nexport default AccordionCollapse;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AccordionToggle from './AccordionToggle';\nimport SelectableContext from './SelectableContext';\nimport AccordionCollapse from './AccordionCollapse';\nimport AccordionContext from './AccordionContext';\nvar Accordion = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      _useUncontrolled$as = _useUncontrolled.as,\n      Component = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      activeKey = _useUncontrolled.activeKey,\n      bsPrefix = _useUncontrolled.bsPrefix,\n      children = _useUncontrolled.children,\n      className = _useUncontrolled.className,\n      onSelect = _useUncontrolled.onSelect,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"as\", \"activeKey\", \"bsPrefix\", \"children\", \"className\", \"onSelect\"]);\n\n  var finalClassName = classNames(className, useBootstrapPrefix(bsPrefix, 'accordion'));\n  return /*#__PURE__*/React.createElement(AccordionContext.Provider, {\n    value: activeKey || null\n  }, /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: onSelect || null\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, controlledProps, {\n    className: finalClassName\n  }), children)));\n});\nAccordion.displayName = 'Accordion';\nAccordion.Toggle = AccordionToggle;\nAccordion.Collapse = AccordionCollapse;\nexport default Accordion;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: null\n};\nvar CardImg = /*#__PURE__*/React.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      variant = _ref.variant,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'img' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"variant\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card-img');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    className: classNames(variant ? prefix + \"-\" + variant : prefix, className)\n  }, props));\n});\nCardImg.displayName = 'CardImg';\nCardImg.defaultProps = defaultProps;\nexport default CardImg;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport divWithClassName from './divWithClassName';\nimport CardContext from './CardContext';\nimport CardImg from './CardImg';\nvar DivStyledAsH5 = divWithClassName('h5');\nvar DivStyledAsH6 = divWithClassName('h6');\nvar CardBody = createWithBsPrefix('card-body');\nvar CardTitle = createWithBsPrefix('card-title', {\n  Component: DivStyledAsH5\n});\nvar CardSubtitle = createWithBsPrefix('card-subtitle', {\n  Component: DivStyledAsH6\n});\nvar CardLink = createWithBsPrefix('card-link', {\n  Component: 'a'\n});\nvar CardText = createWithBsPrefix('card-text', {\n  Component: 'p'\n});\nvar CardHeader = createWithBsPrefix('card-header');\nvar CardFooter = createWithBsPrefix('card-footer');\nvar CardImgOverlay = createWithBsPrefix('card-img-overlay');\nvar defaultProps = {\n  body: false\n};\nvar Card = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      bg = _ref.bg,\n      text = _ref.text,\n      border = _ref.border,\n      body = _ref.body,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"bg\", \"text\", \"border\", \"body\", \"children\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card');\n  var cardContext = useMemo(function () {\n    return {\n      cardHeaderBsPrefix: prefix + \"-header\"\n    };\n  }, [prefix]);\n  return /*#__PURE__*/React.createElement(CardContext.Provider, {\n    value: cardContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, prefix, bg && \"bg-\" + bg, text && \"text-\" + text, border && \"border-\" + border)\n  }), body ?\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(CardBody, null, children) : children));\n});\nCard.displayName = 'Card';\nCard.defaultProps = defaultProps;\nCard.Img = CardImg;\nCard.Title = CardTitle;\nCard.Subtitle = CardSubtitle;\nCard.Body = CardBody;\nCard.Link = CardLink;\nCard.Text = CardText;\nCard.Header = CardHeader;\nCard.Footer = CardFooter;\nCard.ImgOverlay = CardImgOverlay;\nexport default Card;","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\nimport { Rol } from \"../../roles/services\"\r\n\r\nexport type UserFilter = {\r\n  username?: string,\r\n  estado?: boolean,\r\n  regionalId?: number\r\n}\r\n\r\nexport type User = {\r\n  id: number\r\n  username: string\r\n  estado: boolean\r\n  ciRaiz: number\r\n  ciComplemento: string\r\n  ci: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  nombreCompleto: string\r\n  roles: Rol[]\r\n  roleNames: string[]\r\n  regionalId: number\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const UserService = {\r\n  buscar: (filter: UserFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<User>>('/usuarios', {\r\n      params: keysToUnderscore({\r\n        page,\r\n        filter\r\n      })\r\n    })\r\n  },\r\n  cargar: (userId: number) =>{\r\n    return apiClient.get<User>(`/usuarios/${userId}`)\r\n  },\r\n  registrar: (data: {\r\n    username: string\r\n    password: string\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: number\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n  }) => {\r\n    return apiClient.post('/usuarios', keysToUnderscore(data))\r\n  },\r\n  actualizar: (id: number, data: {\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: number\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n  }) => {\r\n    return apiClient.put(`/usuarios/${id}`, keysToUnderscore(data))\r\n  },\r\n  cambiarContrasena: (id: number, data: {newPassword: string}) => {\r\n    return apiClient.put(`/usuarios/${id}/cambiar-contrasena`, keysToUnderscore(data))\r\n  },\r\n  bloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/bloquear`)\r\n  },\r\n  desbloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/desbloquear`)\r\n  }\r\n}\r\n","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { Permiso } from \"./PermisoService\"\r\n\r\nexport type RolFilter = {\r\n  texto?: string,\r\n}\r\n\r\nexport type Rol = {\r\n  id: number,\r\n  name: string,\r\n  description: string,\r\n  permissionNames: string[]\r\n  permissions: Permiso[]\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const RolService = {\r\n  buscar: (filter?: RolFilter, page?: Page)=>{\r\n    return apiClient.get<PaginatedResponse<Rol>|Rol[]>('/roles', {\r\n      params: { filter, page }\r\n    })\r\n  },\r\n  cargar: (id: number)=>{\r\n    return apiClient.get<Rol>(`/roles/${id}`)\r\n  },\r\n  registrar: (data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.post<Rol>('roles', data)\r\n  },\r\n  actualizar: (id: number, data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.put<Rol>(`roles/${id}`, data)\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`roles/${id}`)\r\n  }\r\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { makeEventKey } from './SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"eventKey\", \"onClick\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    // TODO: Restrict eventKey to string in v5?\n    eventKey: makeEventKey(eventKey, props.href) // eslint-disable-next-line no-nested-ternary\n    ,\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"]);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;","import React, { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup, Spinner } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { RolService, Rol } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  selected?: Rol[],\r\n  onChange?: (roles: Rol[])=>void\r\n}\r\n\r\nlet count = 1\r\n\r\nexport const RolesCheckList = React.memo(({\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery(\"roles.buscar\", ()=>{\r\n    return RolService.buscar()\r\n  }, {\r\n    enabled: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  console.log(\"Render count\", count++)\r\n\r\n  const roles = (buscar.data?.data || []) as Rol[]\r\n\r\n  const renderContent = ()=>{\r\n    if(buscar.isFetching){\r\n      return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de roles. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {roles.map((rol, index)=>{\r\n        return <ListGroup.Item key={rol.id} as=\"li\"\r\n          className={\"py-2 px-3 text-capitalize\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={rol.name}\r\n            checked={selected.some(rolChecked=>rolChecked.id == rol.id)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, rol] : selected.filter(rch=>rch.id != rol.id)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {renderContent()}\r\n  </div>\r\n})","import { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { Accordion, Button, Card, Col, Form, Row, Spinner } from 'react-bootstrap'\r\nimport { useForm, Controller } from 'react-hook-form'\r\nimport { useQuery, useMutation } from 'react-query'\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { Regional, RegionalesService } from \"../../../../commons/services\"\r\nimport { UserService, User, Rol } from \"../services\"\r\nimport { RolesCheckList } from './RolesCheckList'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { Permisos } from '../../../../commons/auth/constants'\r\nimport { useLoggedUser } from '../../../../commons/auth/hooks'\r\n\r\n\r\ntype Inputs = {\r\n  informacionPersonal: {\r\n    ci: string,\r\n    ciComplemento: string,\r\n    apellidoPaterno: string,\r\n    apellidoMaterno: string,\r\n    nombres: string\r\n  }\r\n  informacionUsuario: {\r\n    username: string,\r\n    password?: string,\r\n    passwordRepeat?: string,\r\n    roles: Rol[],\r\n    regional: Regional[]\r\n  }\r\n}\r\n\r\nexport const UserForm = () => {\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const { id } = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const schema = useMemo(()=> yup.object().shape({\r\n    informacionPersonal: yup.object().shape({\r\n      ci: yup.number().label(\"carnet de identidad\"),\r\n      ciComplemento: yup.lazy(value => value ? yup.string().label(\"'complemento'\").trim().length(2) : yup.string().nullable().optional()),\r\n      apellidoPaterno: yup.string().label(\"apellido paterno\").trim().when(\"apellidoMaterno\", {\r\n        is: (apellidoMaterno: string) => !apellidoMaterno,\r\n        then: yup.string().required(\"Debe proporcionar al menos un apellido\")\r\n      }),\r\n      apellidoMaterno: yup.string().label(\"apellido materno\").trim().when(\"apellidoPaterno\", {\r\n        is: (apellidoPaterno: string) => !apellidoPaterno,\r\n        then: yup.string().required(\"Debe proporcionar al menos un apellido\")\r\n      }),\r\n      nombres: yup.string().label(\"nombres\").trim().required().label(\"'Nombres'\"),\r\n    }, [[\"apellidoMaterno\", \"apellidoPaterno\"]]),\r\n    informacionUsuario: yup.object().shape(id ? {\r\n        roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n      } : {\r\n      username: yup.string().label(\"usuario\").required().matches(/[a-zA-Z0-9]{4,}/).min(4).max(16),\r\n      password: yup.string().label(\"contraseña\").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      passwordRepeat: yup.string().label(\"confirmar contraseña\").test(\"password-match\", \"Las contraseñas no coinciden\", function (value) {\r\n        const { parent: { password } } = this\r\n        return value === password\r\n      }),\r\n      regional: yup.array().length(1),\r\n      roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n    })\r\n  }), [])\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    trigger,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    mode: 'onBlur',\r\n    defaultValues: {\r\n      informacionUsuario: {\r\n        roles: [],\r\n        regional: []\r\n      }\r\n    }\r\n  })\r\n\r\n  const history = useHistory<{\r\n    user: User\r\n  }>()\r\n\r\n  const queryKey = [\"usuarios.cargar\", id];\r\n  const cargar = useQuery(queryKey, () => {\r\n    return UserService.cargar(parseInt(id!))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.user\r\n  })\r\n\r\n  const guardar = useMutation(({informacionPersonal, informacionUsuario}: Inputs) => {\r\n    return id ? UserService.actualizar(parseInt(id), {\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: parseInt(informacionPersonal.ci),\r\n      ciComplemento: informacionPersonal.ciComplemento,\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombres: informacionPersonal.nombres\r\n    }) : UserService.registrar({\r\n      username: informacionUsuario.username,\r\n      password: informacionUsuario.password as string,\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: parseInt(informacionPersonal.ci),\r\n      ciComplemento: informacionPersonal.ciComplemento,\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombres: informacionPersonal.nombres\r\n    })\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      history.replace(`/iam/usuarios/${data.id}`, {\r\n        user: data\r\n      })\r\n    }\r\n  })\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n\r\n  const filterRegional = useCallback((regional: Regional)=>{\r\n    return loggedUser.can(Permisos.REGISTRAR_USUARIOS) ? true : (regional.id == loggedUser.regionalId)\r\n  }, [loggedUser])\r\n\r\n  const user = cargar.data?.data || history.location.state?.user\r\n  const formErrors = formState.errors\r\n\r\n  useEffect(()=>{\r\n    if(user && regionales.length) {\r\n      setValue(\"informacionPersonal\", {\r\n        ci: String(user.ciRaiz),\r\n        ciComplemento: user.ciComplemento,\r\n        apellidoPaterno: user.apellidoPaterno,\r\n        apellidoMaterno: user.apellidoMaterno,\r\n        nombres: user.nombres\r\n      })\r\n      setValue(\"informacionUsuario\", {\r\n        username: user.username,\r\n        roles: user.roles,\r\n        regional: [regionales.find(r=>r.id == user.id)!]\r\n      })\r\n    }\r\n  }, [user])\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      <h1 style={{ fontSize: \"2rem\" }}>Usuarios</h1>\r\n      <Accordion className=\"mb-2\" defaultActiveKey=\"0\">\r\n        <Card>\r\n          <Accordion.Toggle as={Card.Header} className={[\"text-light\",\r\n            formErrors.informacionPersonal ? \"bg-danger\" : \"bg-primary\"\r\n          ].join(\" \")} eventKey=\"0\">\r\n            Información personal\r\n            </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"0\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col} xs={8} md={4}>\r\n                  <Form.Label title=\"Numero raiz del carnet de identidad\">Carnet de identidad</Form.Label>\r\n                  <Form.Control type=\"number\"\r\n                    isInvalid={!!formState.errors.informacionPersonal?.ci}\r\n                    {...register(\"informacionPersonal.ci\")}\r\n                  ></Form.Control>\r\n                  <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.ci?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                <Form.Group as={Col} xs={4} md={2}>\r\n                  <Form.Label title=\"Complemento del carnet de identiad\">Complemento</Form.Label>\r\n                  <Form.Control\r\n                    isInvalid={!!formErrors.informacionPersonal?.ciComplemento}\r\n                    {...register(\"informacionPersonal.ciComplemento\")}\r\n                  ></Form.Control>\r\n                  <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.ciComplemento?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </Form.Row>\r\n              <Form.Row>\r\n                <Form.Group as={Col} lg={4}>\r\n                  <Form.Label>Apellido Paterno</Form.Label>\r\n                  <Form.Control\r\n                    isInvalid={!!formErrors.informacionPersonal?.apellidoPaterno}\r\n                    {...register(\"informacionPersonal.apellidoPaterno\")}\r\n                    onChange={(e)=>{\r\n                      register(\"informacionPersonal.apellidoPaterno\").onChange(e)\r\n                      formState.isSubmitted && trigger(\"informacionPersonal.apellidoMaterno\")\r\n                    }}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.apellidoPaterno?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                <Form.Group as={Col} lg={4}>\r\n                  <Form.Label>Apellido Materno</Form.Label>\r\n                  <Form.Control\r\n                    isInvalid={!!formErrors.informacionPersonal?.apellidoMaterno}\r\n                    {...register(\"informacionPersonal.apellidoMaterno\")}\r\n                    onChange={(e)=>{\r\n                      register(\"informacionPersonal.apellidoPaterno\").onChange(e)\r\n                      formState.isSubmitted && trigger(\"informacionPersonal.apellidoMaterno\")\r\n                    }}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{formErrors.informacionPersonal?.apellidoMaterno?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                <Form.Group as={Col} lg={4}>\r\n                  <Form.Label>Nombres</Form.Label>\r\n                  <Form.Control\r\n                    isInvalid={!!formState.errors.informacionPersonal?.nombres}\r\n                    {...register(\"informacionPersonal.nombres\")}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.nombres?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card>\r\n          <Accordion.Toggle as={Card.Header} className={[\"text-light\", formErrors.informacionUsuario ? \"bg-danger\" : \"bg-primary\"].join(\" \")} eventKey=\"1\">\r\n            Informacion de usuario\r\n            </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group controlId=\"username\" as={Col} md={4}>\r\n                  <Form.Label >Usuario</Form.Label>\r\n                  <Form.Control\r\n                    disabled={!!id}\r\n                    isInvalid={!!formState.errors.informacionUsuario?.username}\r\n                    {...register(\"informacionUsuario.username\")}\r\n                  ></Form.Control>\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.username?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                {id ? null : <><Form.Group as={Col} md={4}>\r\n                  <Form.Label>Contraseña</Form.Label>\r\n                  <Form.Control type=\"password\"\r\n                    isInvalid={!!formState.errors.informacionUsuario?.password}\r\n                    {...register(\"informacionUsuario.password\")}\r\n                  ></Form.Control>\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.password?.message}</Form.Control.Feedback>\r\n                </Form.Group>\r\n                <Form.Group as={Col} md={4}>\r\n                  <Form.Label>Confirmar contraseña</Form.Label>\r\n                  <Form.Control type=\"password\"\r\n                    isInvalid={!!formState.errors.informacionUsuario?.passwordRepeat}\r\n                    {...register(\"informacionUsuario.passwordRepeat\", {\r\n                      required: { value: true, message: \"Este campo es requerido\" },\r\n                      validate: {\r\n                        matchPassword: (value) => value === watch('informacionUsuario.password') || \"Las contraseñas no coinciden\"\r\n                      }\r\n                    })}\r\n                  ></Form.Control>\r\n                  <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.passwordRepeat?.message}</Form.Control.Feedback>\r\n                </Form.Group></>}\r\n              </Form.Row>\r\n              <Form.Group>\r\n                <Form.Label>Regional</Form.Label>\r\n                <Controller\r\n                  name=\"informacionUsuario.regional\"\r\n                  control={control}\r\n                  render={({ field, fieldState }) => {\r\n                    return <RegionalesTypeahead\r\n                      id=\"usuario/regionales-typeahead\"\r\n                      onLoad={setRegionales}\r\n                      isInvalid={!!fieldState.error}\r\n                      feedback={fieldState.error?.message}\r\n                      filterBy={filterRegional}\r\n                      selected={field.value}\r\n                      onBlur={field.onBlur}\r\n                      onChange={field.onChange}\r\n                    />\r\n                  }}\r\n                />\r\n              </Form.Group>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Roles</Form.Label>\r\n                  <Controller\r\n                    name=\"informacionUsuario.roles\"\r\n                    control={control}\r\n                    render={({ field, fieldState }) => {\r\n                      return <><RolesCheckList\r\n                        isInvalid={!!fieldState.error}\r\n                        onChange={field.onChange}\r\n                        selected={field.value}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group>\r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { Button, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { UserService } from '../services'\r\n\r\ntype Inputs = {\r\n  // oldPassword: string,\r\n  newPassword: string,\r\n  newPasswordRepeat: string\r\n}\r\n\r\nexport const CambiarContrasenaForm = ()=>{\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const history = useHistory()\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      // oldPassword: yup.string().label(\"antigüa contraseña\").trim().required(),\r\n      newPassword: yup.string().label(\"nueva contraseña\").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      // newPasswordRepeat: yup.string().label(\"confirmar nueva contraseña\").test(\"password-match\", \"Las contraseñas no coinciden\", function (value) {\r\n      //   const { parent: { newPassword: password } } = this\r\n      //   return value === password\r\n      // })\r\n      newPasswordRepeat: yup.string().label(\"repita la nueva contraseña\").oneOf([yup.ref(\"newPassword\")], \"Las contraseñas no coinciden\")\r\n    })\r\n  }, [])\r\n\r\n  const {\r\n    formState,\r\n    handleSubmit,\r\n    register\r\n  } = useForm<Inputs>({\r\n    mode: 'onBlur',\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      // oldPassword: \"\",\r\n      newPassword: \"\",\r\n      newPasswordRepeat: \"\"\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((data: Inputs) =>{\r\n    return UserService.cambiarContrasena(parseInt(id), {\r\n      newPassword: data.newPassword,\r\n      // oldPassword: data.oldPassword\r\n    })\r\n  }, {\r\n    onSuccess: ({data})=>{\r\n      history.replace(\"/iam/usuarios\");\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors;\r\n\r\n  console.log(formErrors)\r\n\r\n  return <Form onSubmit={handleSubmit((data)=>{\r\n    console.log(data)\r\n    guardar.mutate(data)\r\n  })}>\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Cambiar contraseña</h1>\r\n    {/* <Form.Group>\r\n      <Form.Label>Antigüa contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.oldPassword}\r\n        {...register(\"oldPassword\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.oldPassword?.message}</Form.Control.Feedback>\r\n    </Form.Group> */}\r\n    <Form.Group>\r\n      <Form.Label>Nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.newPassword}\r\n        {...register(\"newPassword\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.newPassword?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Form.Group>\r\n      <Form.Label>Repita la nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.newPasswordRepeat}\r\n        {...register(\"newPasswordRepeat\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.newPasswordRepeat?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Button type=\"submit\">\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      Guardar\r\n    </Button>\r\n\r\n  </Form>\r\n}","import { Permisos } from \"../../../../commons/auth/constants\";\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\";\r\n\r\nexport const UsuarioPolicy = {\r\n  index: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.VER_USUARIOS,\r\n      Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,\r\n      Permisos.REGISTRAR_USUARIOS,\r\n      Permisos.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  register: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.REGISTRAR_USUARIOS,\r\n      Permisos.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  edit: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.EDITAR_USUARIOS,\r\n      Permisos.EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  view: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.VER_USUARIOS,\r\n      Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  changePassword: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.CAMBIAR_CONTRASEÑA,\r\n      Permisos.CAMBIAR_CONTRASEÑA_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  disable: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.BLOQUEAR_USUARIOS,\r\n      Permisos.BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n  enable: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.DESBLOQUEAR_USUARIOS,\r\n      Permisos.DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO\r\n    ])\r\n  },\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef, VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { User, UserService } from \"../services\"\r\nimport { UsuarioPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  user: User\r\n}\r\nexport const RowOptions = ({user}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cambiarEstado = useMutation(()=>{\r\n    return user.estado ? UserService.bloquear(user.id) : UserService.desbloquear(user.id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(\"usuarios.buscar\", (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.map((u: any)=>{\r\n              return u == user ? {\r\n                ...u,\r\n                estado: !user.estado\r\n              } : {...u}\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(cambiarEstado.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(cambiarEstado.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: cambiarEstado.error\r\n      })\r\n    }\r\n  }, [cambiarEstado.status])\r\n\r\n  return <Dropdown>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-users-${user.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.view}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Ver</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.edit}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: { user }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={UsuarioPolicy.changePassword}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/cambiar-contrasena`,\r\n          state: { user }\r\n        }}>Cambiar contraseña</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(loggedUser)=>user.estado ? UsuarioPolicy.disable(loggedUser) : UsuarioPolicy.enable(loggedUser)}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n            cambiarEstado.mutate()\r\n        }}>{user.estado ? \"Bloquear\" : \"Desbloquear\"}</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef, useEffect} from \"react\"\r\nimport { Alert, Dropdown, Button, Form, Modal, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery } from \"react-query\"\r\nimport { FaSync, FaFilter, FaUserPlus } from \"react-icons/fa\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { Page } from \"../../../../commons/services\"\r\nimport { Pagination } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Permisos } from \"../../../../commons/auth/constants\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { User, UserService, UserFilter } from \"../services\"\r\nimport { UsuarioPolicy } from \"../policies\"\r\n\r\n\r\nexport const UserIndex = ()=>{\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<UserFilter>({})\r\n\r\n  const [showFilterForm, setShowFilterForm] = useState(false)\r\n\r\n  const queryKey = \"usuarios.buscar\"\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    if(loggedUser.can(Permisos.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO, false)){\r\n      filter.regionalId = loggedUser.regionalId\r\n    }\r\n    return UserService.buscar(filter, page)\r\n  }, {\r\n    enabled: UsuarioPolicy.view(loggedUser),\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const didMountRef = useRef(false)\r\n  useEffect(()=>{\r\n    if(!didMountRef.current) {\r\n      didMountRef.current = true\r\n      return\r\n    }\r\n    if(UsuarioPolicy.view(loggedUser)) buscar.refetch()\r\n  }, [page, filter, loggedUser])\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.data){\r\n      const records = buscar.data.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((user, index)=>{\r\n        return <tr key={user.id}>\r\n          <td>{index + 1}</td>\r\n          <td>{user.ci} - {user.nombreCompleto}</td>\r\n          <td>{user.username}</td>\r\n          <td>{user.estado ? \"Activo\" : \"Bloqueado\"}</td>\r\n          <td>\r\n            <RowOptions user={user} />\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Usuarios</h2>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={UsuarioPolicy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          {/* <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              // showUserFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col> */}\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={UsuarioPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`/iam/usuarios/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaUserPlus className=\"mr-2\" />Nuevo\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={UsuarioPolicy.view}\r\n    >\r\n      <Row>\r\n        <Col className=\"mb-2\">\r\n          {/* <UserFilterForm onApply={(filter)=>{\r\n            setFilter(filter)\r\n          }} /> */}\r\n        </Col>\r\n        <Col className=\"mb-2\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n              <span>Mostrar</span>\r\n              <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n                const value = e.target.value\r\n                setPage((page) => ({\r\n                  current: 1,\r\n                  size: parseInt(value)\r\n                }))\r\n              }}>\r\n                <option value={10}>10</option>\r\n                <option value={20}>20</option>\r\n                <option value={30}>30</option>\r\n                <option value={50}>50</option>\r\n                <option value={100}>100</option>\r\n              </Form.Control>\r\n              <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Propietario</th>\r\n            <th>Usuario</th>\r\n            <th>Estado</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <Row>\r\n        <Col>\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        </Col>\r\n        <Col>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Button, Col, Form, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { useQuery } from 'react-query'\r\nimport { UserService, User } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {id} = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const cargar = useQuery([\"cargarUsuario\", id], ()=>{\r\n    return UserService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const user = state?.user || cargar.data?.data \r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\">Carnet de identidad</th>\r\n          <td>: {user?.ci}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Nombre completo</th>\r\n          <td>: {user?.nombreCompleto}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.estado ? 'Activo' : user?.estado === false ? 'Bloqueado' : ''}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado el</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado el</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td className=\"text-capitalize\">: {user?.roleNames}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {user ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\">Bloquear</Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { apiClient } from \"../../../../commons/services\"\r\n\r\nexport type Permiso = string\r\n\r\nexport const PermisoService = {\r\n  buscar: ()=>{\r\n    return apiClient.get<Permiso[]>('/permisos')\r\n  }\r\n}","import { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup, Spinner } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { PermisoService, Permiso } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  selected?: Permiso[],\r\n  onChange?: (permisos: Permiso[])=>void\r\n}\r\nexport const PermisoCheckList = ({\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery(\"permisos.buscar\", ()=>{\r\n    return PermisoService.buscar()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const permisos = (buscar.data?.data || []) as Permiso[]\r\n\r\n  const renderContent = ()=>{\r\n    if(buscar.isFetching){\r\n      return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de permisos. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {permisos.map((permiso, index)=>{\r\n        return <ListGroup.Item key={permiso} as=\"li\"\r\n          className={\"py-2 px-3 text-capitalize\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={permiso}\r\n            checked={selected.some(s=>s == permiso)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, permiso] : selected.filter(s=>s != permiso)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {renderContent()}\r\n  </div>\r\n}","import { useMemo, useEffect, useRef } from 'react'\r\nimport { Alert, Modal, Button, Form, Col, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { AxiosError } from 'axios'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { ImperativeModalRef, ImperativeModal } from '../../../../commons/components'\r\nimport {PermisoCheckList} from './PermisoCheckList'\r\nimport { RolService, Rol, Permiso } from '../services'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: Permiso[]\r\n}\r\nexport const RolForm = () => {\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      name: yup.string().label(\"nombre\").trim()/*.lowercase()*/.required().max(50),\r\n      description: yup.string().label(\"descripcion\").trim().nullable().optional().max(250),\r\n      permissions: yup.array().label(\"permisos\").min(1)\r\n    })\r\n  }, [])\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState,\r\n    reset,\r\n    setError\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    rol?: Rol,\r\n    ignoreAuthorization?: boolean\r\n  }>()\r\n\r\n  const modalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const cargar = useQuery([\"fetchRole\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.rol,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const guardar = useMutation((data: Inputs)=>{\r\n    if(id){\r\n      return RolService.actualizar(parseInt(id), {\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n    else{\r\n      return RolService.registrar({\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      history.replace(`/iam/roles/${data.id}`, {\r\n        rol: data,\r\n        ignoreAuthorization: true\r\n      })\r\n    },\r\n    onError: (error: AxiosError) => {\r\n      if(error!.response?.status !== 422)\r\n        modalRef.current?.show(true)\r\n    }\r\n  })\r\n  const rol = cargar.data?.data || history.location.state?.rol\r\n  const formErrors = formState.errors\r\n\r\n  useEffect(()=>{\r\n    if(rol) {\r\n      reset({\r\n        name: rol.name,\r\n        description: rol.description,\r\n        permissions: rol.permissionNames,\r\n      })\r\n    }\r\n  }, [rol])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isFetching){\r\n      modalRef.current?.show(true)\r\n    }\r\n  }, [cargar.isFetching])\r\n\r\n  useEffect(()=>{\r\n    if(guardar.error){\r\n      const error = (guardar.error as AxiosError)\r\n      if(error.response?.status == 422){\r\n        const { errors } = error.response.data\r\n        if(errors.name) setError(\"name\", {message: errors.name})\r\n        if(errors.description) setError(\"description\", {message: errors.description})\r\n        if(errors.permissions) setError(\"permissions\", {message: errors.permissions})\r\n      }      \r\n    }\r\n  }, [guardar.error])\r\n\r\n  console.log(\"Guardar State\", formErrors)\r\n\r\n  const renderModalHeader = ()=>{\r\n    if(cargar.isFetching) return \"Cargando\"\r\n    if(cargar.isError || guardar.isError) return \"Error\"\r\n    return null\r\n  }\r\n\r\n  const renderModalBody = ()=>{\r\n    if(cargar.isFetching){\r\n      return <>\r\n        <Spinner animation=\"border\" size=\"sm\"></Spinner>\r\n        <span className=\"ml-2\">Espere un momento</span>\r\n      </>\r\n    }\r\n    if(cargar.isError || guardar.isError){\r\n      return <Alert variant=\"danger\">\r\n        {(cargar.error as AxiosError)?.response?.status == 404 ?\r\n        \"El rol no existe\" :\r\n        \"Ocurrio un error mientras se cargaban los datos del rol\"}\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <>\r\n    <Form noValidate validated={formState.isValid} onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      <h1 style={{ fontSize: \"2rem\" }}>Roles</h1>\r\n      <ImperativeModal ref={modalRef}>\r\n        <Modal.Header>\r\n          {renderModalHeader()}\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {renderModalBody()}\r\n        </Modal.Body>\r\n      </ImperativeModal>\r\n      <Form.Group>\r\n        <Form.Label >Nombre</Form.Label>\r\n        <Form.Control \r\n          isInvalid={!!formState.errors.name}\r\n          {...register(\"name\")}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.name?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Descripcion</Form.Label>\r\n        <Form.Control\r\n          as=\"textarea\"\r\n          isInvalid={!!formErrors.description}\r\n          {...register(\"description\")}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.description?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Permisos</Form.Label>\r\n        <Controller\r\n          name=\"permissions\"\r\n          control={control}\r\n          render={({ field, fieldState }) => {\r\n            return <><PermisoCheckList\r\n              isInvalid={!!fieldState.error}\r\n              onChange={field.onChange}\r\n              // onBlur={field.onBlur}\r\n              selected={field.value}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n          }}\r\n        />\r\n\r\n      </Form.Group>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Registrar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import { Permisos } from \"../../../../commons/auth/constants\";\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\";\r\n\r\nexport const RolPolicy = {\r\n  index: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.VER_ROLES,\r\n      Permisos.REGISTRAR_ROLES,\r\n    ])\r\n  },\r\n  register: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.REGISTRAR_ROLES,\r\n    ])\r\n  },\r\n  edit: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.EDITAR_ROLES,\r\n    ])\r\n  },\r\n  view: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.VER_ROLES,\r\n    ])\r\n  },\r\n  delete: function(user: ReturnType<typeof useLoggedUser>){\r\n    return user.canAny([\r\n      Permisos.ELIMINAR_ROLES\r\n    ])\r\n  },\r\n}","import { AxiosPromise, AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Alert, Dropdown, ButtonGroup, Button, Form, Modal, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { FaSync, FaFilter, FaPlus } from \"react-icons/fa\"\r\nimport { Page, PaginatedResponse } from \"../../../../commons/services\"\r\n// import { RolFilterForm } from \"./RolFilterForm\"\r\nimport { ImperativeModal, ImperativeModalRef, Pagination, VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { useLoggedUser } from \"../../../../commons/auth/hooks\"\r\nimport { Rol, RolService, RolFilter } from \"../services\"\r\nimport { RolPolicy } from \"../policies\"\r\n\r\nexport const RolIndex = ()=>{\r\n\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<RolFilter>({})\r\n\r\n  const [showFilterForm, setShowFilterForm] = useState(false)\r\n\r\n  const modalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscar = useQuery([\"roles.buscar\", page, filter], ()=>{\r\n    return RolService.buscar(filter, page) as AxiosPromise<PaginatedResponse<Rol>>\r\n  }, {\r\n    enabled: RolPolicy.view(loggedUser),\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return RolService.eliminar(id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      buscar.refetch()\r\n      modalRef.current?.show(false)\r\n    }\r\n  })\r\n\r\n  const renderModalHeader = ()=>{\r\n    if(eliminar.isLoading){\r\n      return \"Eliminando\"\r\n    }\r\n    if(eliminar.isError){\r\n      return \"Error\"\r\n    }\r\n    return null\r\n  }\r\n\r\n  const renderModalBody = ()=>{\r\n    if(eliminar.isLoading){\r\n      return <>\r\n        <Spinner animation=\"border\" size=\"sm\"></Spinner>\r\n        <span className=\"ml-2\">Espere un momento</span>\r\n      </>\r\n    }\r\n    if(eliminar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error mientras se eliminaba el rol\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  const renderRows = ()=>{\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscar.isError) {\r\n      const { error } = buscar\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    if(buscar.data){\r\n      const records = buscar.data.data.records\r\n      if(records.length == 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return records.map((rol, index)=>{\r\n        return <tr key={rol.id}>\r\n          <td>{index + 1}</td>\r\n          <td className=\"text-capitalize\">{rol.name}</td>\r\n          <td>{rol.description}</td>\r\n          <td>\r\n            <Dropdown>\r\n              <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n                variant=\"link\" id={`dropdown-users-${rol.id}`}\r\n              />\r\n              <Dropdown.Menu>\r\n                <ProtectedContent\r\n                  authorize={RolPolicy.view}\r\n                >\r\n                  <Dropdown.Item as={Link} to={{\r\n                    pathname: `/iam/roles/${rol.id}`,\r\n                    state: {\r\n                      rol\r\n                    }\r\n                  }} >Ver</Dropdown.Item>\r\n                </ProtectedContent>\r\n                <ProtectedContent\r\n                  authorize={RolPolicy.edit}\r\n                >\r\n                  <Dropdown.Item as={Link} to={{\r\n                    pathname: `/iam/roles/${rol.id}/editar`,\r\n                    state: {\r\n                      rol\r\n                    }\r\n                  }}>Editar</Dropdown.Item>\r\n                </ProtectedContent>\r\n                <ProtectedContent\r\n                  authorize={RolPolicy.delete}\r\n                >\r\n                  <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n                    if(window.confirm(\"Esta accion es irreversible, ¿Esta seguro de continuar?\")){\r\n                      eliminar.mutate(rol.id)\r\n                      modalRef.current?.show(true)\r\n                    }\r\n                  }}>Eliminar</Dropdown.Item>\r\n                </ProtectedContent>\r\n              </Dropdown.Menu>\r\n            </Dropdown>\r\n          </td>\r\n        </tr>\r\n      })\r\n    }\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Roles</h2>\r\n    <ImperativeModal ref={modalRef}>\r\n      <Modal.Header>\r\n        {renderModalHeader()}\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {renderModalBody()}\r\n      </Modal.Body>\r\n    </ImperativeModal>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={RolPolicy.view}\r\n        >\r\n          <Col className={\"pr-0\"} xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col className={\"pr-0\"} xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              // showUserFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={RolPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`/iam/roles/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaPlus className=\"mr-2\" />Nuevo\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={RolPolicy.view}\r\n    >\r\n      <Row>\r\n        <Col className=\"mb-2\">\r\n          {/* <UserFilterForm onApply={(filter)=>{\r\n            setFilter(filter)\r\n          }} /> */}\r\n        </Col>\r\n        <Col className=\"mb-2\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n              <span>Mostrar</span>\r\n              <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n                const value = e.target.value\r\n                setPage((page) => ({\r\n                  current: 1,\r\n                  size: parseInt(value)\r\n                }))\r\n              }}>\r\n                <option value={10}>10</option>\r\n                <option value={20}>20</option>\r\n                <option value={30}>30</option>\r\n                <option value={50}>50</option>\r\n                <option value={100}>100</option>\r\n              </Form.Control>\r\n              <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Nombre</th>\r\n            <th>Descripcion</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <div className=\"row\">\r\n        <Col>\r\n          <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        </Col>\r\n        <Col>\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil((total - page.size) / page.size) + 1}\r\n            onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n          />\r\n        </Col>\r\n      </div>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import { useEffect, useRef } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Button, Col, Form, Modal, Spinner, Table } from 'react-bootstrap'\r\nimport { RolService, Rol } from '../services'\r\nimport { useQuery, useMutation } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation, useParams } from 'react-router-dom'\r\nimport { ImperativeModalRef, ImperativeModal } from '../../../../commons/components'\r\n\r\n\r\nexport const RolView = ()=>{\r\n  const { pathname, state: locationState } = useLocation<{\r\n    rol?: Rol\r\n  }>()\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const modalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const cargar = useQuery([\"cargar\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !locationState?.rol,\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: () => {\r\n      modalRef.current?.show(false)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation(()=>{\r\n    return RolService.eliminar(parseInt(id))\r\n  }, {\r\n    onSuccess: () => {\r\n      modalRef.current?.show(false)\r\n    }\r\n  })\r\n\r\n  const rol = cargar.data?.data || locationState?.rol\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isFetching){\r\n      modalRef.current?.show(true)\r\n    }\r\n  }, [cargar.isFetching])\r\n\r\n  const renderModalHeader = ()=>{\r\n    if(eliminar.isLoading) return \"Eliminando\"\r\n    if(cargar.isFetching) return \"Cargando\"\r\n    if(eliminar.isError || cargar.isError) return \"Error\"\r\n    return null\r\n  }\r\n\r\n  const renderModalBody = ()=>{\r\n    if(eliminar.isLoading || cargar.isFetching){\r\n      return <>\r\n        <Spinner animation=\"border\" size=\"sm\"></Spinner>\r\n        <span className=\"ml-2\">Espere un momento</span>\r\n      </>\r\n    }\r\n    if(eliminar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error mientras se eliminaba el rol\r\n      </Alert>\r\n    }\r\n    if(cargar.isError){\r\n      return <Alert variant=\"danger\">\r\n        {(cargar.error as AxiosError).response?.status == 404 ?\r\n        \"El rol no existe\" :\r\n        \"Ocurrio un error mientras se cargaban los datos del rol\"}\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n  \r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{rol?.name}</h2>\r\n\r\n    <ImperativeModal ref={modalRef}>\r\n      <Modal.Header>\r\n        {renderModalHeader()}\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {renderModalBody()}\r\n      </Modal.Body>\r\n    </ImperativeModal>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{rol?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={rol?.description ? \"\" : \"bg-light\"}>{rol?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{rol?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{rol?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${rol?.permissionNames.length ? \"\" : \"bg-light\"}`}>{\r\n              rol?.permissionNames.length ? \r\n              <ul className=\"d-inline-block\">{rol?.permissionNames.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {rol ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            rol\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\" onClick={()=>{\r\n          modalRef.current?.show(true)\r\n          eliminar.mutate()\r\n        }}>\r\n          {eliminar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : null}\r\n          Eliminar\r\n        </Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport { ProtectedRoute } from '../../commons/auth/components'\r\nimport { useLoggedUser } from '../../commons/auth/hooks'\r\nimport {UserIndex, UserView, UserForm, CambiarContrasenaForm } from './usuarios/components'\r\nimport {RolIndex, RolView, RolForm} from './roles/components'\r\nimport { UsuarioPolicy } from './usuarios/policies'\r\nimport { RolPolicy } from './roles/policies'\r\n\r\nexport const IamApp = ()=>{\r\n  const { url } = useRouteMatch()\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n    if(UsuarioPolicy.index(loggedUser)) {\r\n      items.push({\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n      })\r\n    }\r\n    if(RolPolicy.index(loggedUser)){\r\n      items.push(\r\n        {\r\n          id: \"roles\",\r\n          icon: <FaTasks />,\r\n          path: `${url}/roles`,\r\n          title: \"Roles\"\r\n        }\r\n      )\r\n    }\r\n    return items\r\n  }, [loggedUser])\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: sidebarItems\r\n  }}>\r\n    <Switch>\r\n      {/* <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route> */}\r\n      <ProtectedRoute exact path={`${url}/usuarios`}\r\n        authorize={UsuarioPolicy.index}\r\n      >\r\n        <UserIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/usuarios/registrar`, `${url}/usuarios/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/usuarios/registrar` ? UsuarioPolicy.register(user) : UsuarioPolicy.edit(user)}\r\n      >\r\n        <UserForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id/cambiar-contrasena`}\r\n        authorize={UsuarioPolicy.changePassword}\r\n      >\r\n        <CambiarContrasenaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id`}\r\n        authorize={UsuarioPolicy.view}\r\n      >\r\n        <UserView />\r\n      </ProtectedRoute>\r\n      \r\n      <ProtectedRoute exact path={`${url}/roles`}\r\n        authorize={RolPolicy.index}\r\n      >\r\n        <RolIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/roles/registrar`, `${url}/roles/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/roles/registrar` ? RolPolicy.register(user) : RolPolicy.edit(user)}\r\n      >\r\n        <RolForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/roles/:id`}\r\n        authorize={RolPolicy.view}\r\n      >\r\n        <RolView />\r\n      </ProtectedRoute>\r\n    </Switch>\r\n  \r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp"],"sourceRoot":""}