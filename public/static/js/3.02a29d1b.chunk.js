(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{626:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n={};t.r(n),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return a})),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return i})),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return o})),t.d(n,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return c})),t.d(n,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return s})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return l})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return d})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return u})),t.d(n,"VER_USUARIOS",(function(){return j})),t.d(n,"VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return b})),t.d(n,"REGISTRAR_USUARIOS",(function(){return O})),t.d(n,"REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return m})),t.d(n,"EDITAR_USUARIOS",(function(){return h})),t.d(n,"EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return x})),t.d(n,"BLOQUEAR_USUARIOS",(function(){return p})),t.d(n,"BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return v})),t.d(n,"DESBLOQUEAR_USUARIOS",(function(){return f})),t.d(n,"DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return E})),t.d(n,"CAMBIAR_CONTRASE\xd1A",(function(){return R})),t.d(n,"CAMBIAR_CONTRASE\xd1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return g})),t.d(n,"VER_ROLES",(function(){return A})),t.d(n,"REGISTRAR_ROLES",(function(){return _})),t.d(n,"EDITAR_ROLES",(function(){return I})),t.d(n,"ELIMINAR_ROLES",(function(){return S})),t.d(n,"VER_LISTA_DE_MORA",(function(){return N})),t.d(n,"VER_LISTA_DE_MORA_REGIONAL",(function(){return C})),t.d(n,"AGREGAR_EMPLEADOR_EN_MORA",(function(){return L})),t.d(n,"AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return y})),t.d(n,"QUITAR_EMPLEADOR_EN_MORA",(function(){return U})),t.d(n,"QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return w})),t.d(n,"VER_MEDICOS",(function(){return P})),t.d(n,"VER_MEDICOS_REGIONAL",(function(){return D})),t.d(n,"REGISTRAR_MEDICOS",(function(){return M})),t.d(n,"REGISTRAR_MEDICOS_REGIONAL",(function(){return T})),t.d(n,"EDITAR_MEDICOS",(function(){return G})),t.d(n,"EDITAR_MEDICOS_REGIONAL",(function(){return V})),t.d(n,"BAJA_MEDICOS",(function(){return z})),t.d(n,"BAJA_MEDICOS_REGIONAL",(function(){return k})),t.d(n,"VER_PROVEEDORES",(function(){return F})),t.d(n,"VER_PROVEEDORES_REGIONAL",(function(){return Q})),t.d(n,"REGISTRAR_PROVEEDORES",(function(){return B})),t.d(n,"REGISTRAR_PROVEEDORES_REGIONAL",(function(){return q})),t.d(n,"EDITAR_PROVEEDORES",(function(){return K})),t.d(n,"EDITAR_PROVEEDORES_REGIONAL",(function(){return X})),t.d(n,"BAJA_PROVEEDOR",(function(){return H})),t.d(n,"BAJA_PROVEEDOR_REGIONAL",(function(){return W})),t.d(n,"VER_CONTRATOS_PROVEEDOR",(function(){return J})),t.d(n,"VER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return $})),t.d(n,"REGISTRAR_CONTRATOS_PROVEEDOR",(function(){return Z})),t.d(n,"REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return Y})),t.d(n,"CONSUMIR_CONTRATOS_PROVEEDOR",(function(){return ee})),t.d(n,"CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return re})),t.d(n,"EXTENDER_CONTRATOS_PROVEEDOR",(function(){return te})),t.d(n,"EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return ne})),t.d(n,"ANULAR_CONTRATOS_PROVEEDOR",(function(){return ae})),t.d(n,"ANULAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return ie})),t.d(n,"VER_ESPECIALIDADES",(function(){return oe})),t.d(n,"REGISTRAR_ESPECIALIDADES",(function(){return ce})),t.d(n,"EDITAR_ESPECIALIDADES",(function(){return se})),t.d(n,"ELIMINAR_ESPECIALIDADES",(function(){return le})),t.d(n,"IMPORTAR_ESPECIALIDADES",(function(){return de})),t.d(n,"VER_PRESTACIONES",(function(){return ue})),t.d(n,"REGISTRAR_PRESTACIONES",(function(){return je})),t.d(n,"EDITAR_PRESTACIONES",(function(){return be})),t.d(n,"ELIMINAR_PRESTACIONES",(function(){return Oe})),t.d(n,"IMPORTAR_PRESTACIONES",(function(){return me}));var a="Ver solicitudes de atencion externa",i="Ver solicitudes de atencion externa (misma regional)",o="Ver solicitudes de atencion externa (registrado por)",c="Registrar solicitudes de atencion externa",s="Registrar solicitudes de atencion externa (misma regional)",l="Emitir solicitudes de atencion externa",d="Emitir solicitudes de atencion externa (misma regional)",u="Emitir solicitudes de atencion externa (registrado por)",j="Ver usuarios",b="Ver usuarios (misma regional)",O="Registrar usuarios",m="Registrar usuarios (misma regional)",h="Editar usuarios",x="Editar usuarios (misma regional)",p="Bloquear usuarios",v="Bloquear usuarios (misma regional)",f="Desbloquear usuarios",E="Desbloquear usuarios (misma regional)",R="Cambiar contrase\xf1a",g="Cambiar contrase\xf1a (misma regional)",A="Ver roles",_="Registrar roles",I="Editar roles",S="Eliminar roles",N="Ver lista de mora",C="Ver lista de mora (regional)",L="Agregar empleador en mora",y="Agregar empleador en mora (misma regional)",U="Quitar empleador en mora",w="Quitar empleador en mora (misma regional)",P="Ver m\xe9dicos",D="Ver m\xe9dicos (regional)",M="Registrar m\xe9dicos",T="Registrar m\xe9dicos (regional)",G="Editar m\xe9dicos",V="Editar m\xe9dicos (regional)",z="Baja m\xe9dicos",k="Baja m\xe9dicos (regional)",F="Ver proveedores",Q="Ver proveedores (regional)",B="Registrar proveedores",q="Registrar proveedores (regional)",K="Editar proveedores",X="Editar proveedores (regional)",H="Baja proveedores",W="Baja proveedores (regional)",J="Ver contratos de proveedores",$="Ver contratos de proveedores (regional)",Z="Registrar contratos de proveedores",Y="Registrar contratos de proveedores (regional)",ee="Consumir contratos de proveedores",re="Consumir contratos de proveedores (regional)",te="Extender contratos de proveedores",ne="Extender contratos de proveedores (regional)",ae="Anular contratos de proveedores",ie="Anular contratos de proveedores (regional)",oe="Ver especialidades",ce="Registrar especialidades",se="Editar especialidades",le="Eliminar especialidades",de="Importar especialidades",ue="Ver prestaciones",je="Registrar prestaciones",be="Editar prestaciones",Oe="Eliminar prestaciones",me="Importar prestaciones"},627:function(e,r,t){"use strict";var n=t(137);t.d(r,"b",(function(){return n.b})),t.d(r,"c",(function(){return n.c}));var a=t(138);t.d(r,"d",(function(){return a.a}));var i=t(626);t.d(r,"a",(function(){return i.a}))},628:function(e,r,t){},629:function(e,r,t){"use strict";var n=t(27),a=t(1),i=t.n(a),o=t(630),c=t(40);function s(e,r){Object(a.useEffect)((function(){var t=function(t){var n=null===e||void 0===e?void 0:e.current;n&&!n.contains(t.target)&&document.querySelector("html")!=t.target&&r(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,r])}var l=t(84),d=t(4),u=function(e){var r=e.children,t=e.onClickOutside,i=Object(l.a)(e,["children","onClickOutside"]),o=Object(a.useRef)(null);return s(o,t),Object(d.jsx)("div",Object(n.a)(Object(n.a)({ref:o},i),{},{children:r}))},j=t(634),b=t(23),O=t(54),m=function(e){var r=Object(b.j)(e.path||"");return Object(d.jsxs)(d.Fragment,{children:[e.path?Object(d.jsxs)(j.a.Item,{as:O.b,to:e.path,action:!0,active:!!r,className:"border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id):Object(d.jsxs)("div",{className:"list-group-item border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id),e.items&&e.items.map((function(e){return Object(d.jsxs)(O.b,{to:e.path,style:{padding:".5rem 1rem",paddingLeft:"2rem"},className:"list-group-item list-group-item-action border-0 text-nowrap",children:[e.icon||null,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id)}))]})},h=function(e){var r=e.className,t=void 0===r?"":r,a=e.side,i=void 0===a?"right":a,o=e.header,c=void 0===o?"":o,s=e.items,l=void 0===s?[]:s;e.renderItem;return Object(d.jsxs)("div",{className:"".concat(t,"  ").concat({left:"border-left",right:"border-right"}[i]),id:"sidebar-wrapper",children:[Object(d.jsx)("div",{className:"sidebar-heading mt-2",children:c}),Object(d.jsx)("hr",{className:"mx-2"}),Object(d.jsx)(j.a,{variant:"flush",children:l.map((function(e){return Object(d.jsx)(m,Object(n.a)({},e),e.id)}))})]})};t(628),r.a=function(e){var r=e.sidebar,t=e.children,a=Object(c.c)((function(e){return e.sidebarVisibility})),s=Object(c.b)(),l=i.a.useCallback((function(e){var r=document.querySelector('[aria-label="Toggle navigation"]');(null===r||void 0===r?void 0:r.contains(e.target))||s({type:"CLOSE_SIDEBAR"})}),[a]);return Object(d.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(a?" toggled":""),id:"wrapper",children:[Object(d.jsx)(u,{onClickOutside:l,children:Object(d.jsx)(h,Object(n.a)({className:"bg-white shadow-sm"},r))}),Object(d.jsx)(o.a,{className:"d-flex flex-column flex-grow-1",children:Object(d.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:t})})]})}},630:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.fluid,c=e.as,d=void 0===c?"div":c,u=e.className,j=Object(a.a)(e,["bsPrefix","fluid","as","className"]),b=Object(l.a)(t,"container"),O="string"===typeof i?"-"+i:"-fluid";return s.a.createElement(d,Object(n.a)({ref:r},j,{className:o()(u,i?""+b+O:b)}))}));d.displayName="Container",d.defaultProps={fluid:!1},r.a=d},631:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,c=e.striped,d=e.bordered,u=e.borderless,j=e.hover,b=e.size,O=e.variant,m=e.responsive,h=Object(a.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),x=Object(l.a)(t,"table"),p=o()(i,x,O&&x+"-"+O,b&&x+"-"+b,c&&x+"-striped",d&&x+"-bordered",u&&x+"-borderless",j&&x+"-hover"),v=s.a.createElement("table",Object(n.a)({},h,{className:p,ref:r}));if(m){var f=x+"-responsive";return"string"===typeof m&&(f=f+"-"+m),s.a.createElement("div",{className:f},v)}return v}));r.a=d},633:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(57),d=t(9),u=t(36),j=s.a.createContext(null);j.displayName="AccordionContext";var b=j;var O=s.a.forwardRef((function(e,r){var t=e.as,i=void 0===t?"button":t,o=e.children,l=e.eventKey,d=e.onClick,j=Object(a.a)(e,["as","children","eventKey","onClick"]),O=function(e,r){var t=Object(c.useContext)(b),n=Object(c.useContext)(u.a);return function(a){n&&n(e===t?null:e,a),r&&r(a)}}(l,d);return"button"===i&&(j.type="button"),s.a.createElement(i,Object(n.a)({ref:r,onClick:O},j),o)})),m=t(237),h=s.a.forwardRef((function(e,r){var t=e.children,i=e.eventKey,o=Object(a.a)(e,["children","eventKey"]),l=Object(c.useContext)(b);return s.a.createElement(u.a.Provider,{value:null},s.a.createElement(m.a,Object(n.a)({ref:r,in:l===i},o),s.a.createElement("div",null,s.a.Children.only(t))))}));h.displayName="AccordionCollapse";var x=h,p=s.a.forwardRef((function(e,r){var t=Object(l.a)(e,{activeKey:"onSelect"}),i=t.as,c=void 0===i?"div":i,j=t.activeKey,O=t.bsPrefix,m=t.children,h=t.className,x=t.onSelect,p=Object(a.a)(t,["as","activeKey","bsPrefix","children","className","onSelect"]),v=o()(h,Object(d.a)(O,"accordion"));return s.a.createElement(b.Provider,{value:j||null},s.a.createElement(u.a.Provider,{value:x||null},s.a.createElement(c,Object(n.a)({ref:r},p,{className:v}),m)))}));p.displayName="Accordion",p.Toggle=O,p.Collapse=x;r.a=p},634:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=(t(45),t(57)),d=t(9),u=t(240),j=t(239),b=t(36),O={variant:void 0,active:!1,disabled:!1},m=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.active,l=e.disabled,u=e.className,O=e.variant,m=e.action,h=e.as,x=e.eventKey,p=e.onClick,v=Object(a.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);t=Object(d.a)(t,"list-group-item");var f=Object(c.useCallback)((function(e){if(l)return e.preventDefault(),void e.stopPropagation();p&&p(e)}),[l,p]);return l&&void 0===v.tabIndex&&(v.tabIndex=-1,v["aria-disabled"]=!0),s.a.createElement(j.a,Object(n.a)({ref:r},v,{eventKey:Object(b.b)(x,v.href),as:h||(m?v.href?"a":"button":"div"),onClick:f,className:o()(u,t,i&&"active",l&&"disabled",O&&t+"-"+O,m&&t+"-action")}))}));m.defaultProps=O,m.displayName="ListGroupItem";var h=m,x={variant:void 0,horizontal:void 0},p=s.a.forwardRef((function(e,r){var t,i=Object(l.a)(e,{activeKey:"onSelect"}),c=i.className,j=i.bsPrefix,b=i.variant,O=i.horizontal,m=i.as,h=void 0===m?"div":m,x=Object(a.a)(i,["className","bsPrefix","variant","horizontal","as"]),p=Object(d.a)(j,"list-group");return t=O?!0===O?"horizontal":"horizontal-"+O:null,s.a.createElement(u.a,Object(n.a)({ref:r},x,{as:h,className:o()(c,p,b&&p+"-"+b,t&&p+"-"+t)}))}));p.defaultProps=x,p.displayName="ListGroup",p.Item=h;r.a=p},635:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=t(29),u=t(152),j=t(238),b=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,c=e.variant,d=e.as,u=void 0===d?"img":d,j=Object(a.a)(e,["bsPrefix","className","variant","as"]),b=Object(l.a)(t,"card-img");return s.a.createElement(u,Object(n.a)({ref:r,className:o()(c?b+"-"+c:b,i)},j))}));b.displayName="CardImg",b.defaultProps={variant:null};var O=b,m=Object(u.a)("h5"),h=Object(u.a)("h6"),x=Object(d.a)("card-body"),p=Object(d.a)("card-title",{Component:m}),v=Object(d.a)("card-subtitle",{Component:h}),f=Object(d.a)("card-link",{Component:"a"}),E=Object(d.a)("card-text",{Component:"p"}),R=Object(d.a)("card-header"),g=Object(d.a)("card-footer"),A=Object(d.a)("card-img-overlay"),_=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,d=e.bg,u=e.text,b=e.border,O=e.body,m=e.children,h=e.as,p=void 0===h?"div":h,v=Object(a.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),f=Object(l.a)(t,"card"),E=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:f+"-header"}}),[f]);return s.a.createElement(j.a.Provider,{value:E},s.a.createElement(p,Object(n.a)({ref:r},v,{className:o()(i,f,d&&"bg-"+d,u&&"text-"+u,b&&"border-"+b)}),O?s.a.createElement(x,null,m):m))}));_.displayName="Card",_.defaultProps={body:!1},_.Img=O,_.Title=p,_.Subtitle=v,_.Body=x,_.Link=f,_.Text=E,_.Header=R,_.Footer=g,_.ImgOverlay=A;r.a=_},638:function(e,r,t){"use strict";t.r(r),t.d(r,"IamApp",(function(){return be}));var n=t(1),a=t.n(n),i=t(23),o=t(50),c=t(629),s=t(137),l=t(138),d=t(27),u=t(37),j=t(620),b=t(614),O=t(633),m=t(635),h=t(336),x=t(332),p=t(613),v=t(93),f=t(75),E=t(186),R=t(104),g=t(110),A=function(e,r){return R.apiClient.get("/usuarios",{params:Object(g.c)({page:r,filter:e})})},_=function(e){return R.apiClient.get("/usuarios/".concat(e))},I=function(e){return R.apiClient.post("/usuarios",Object(g.c)(e))},S=function(e,r){return R.apiClient.put("/usuarios/".concat(e),Object(g.c)(r))},N=function(e,r){return R.apiClient.put("/usuarios/".concat(e,"/cambiar-contrasena"),Object(g.c)(r))},C=function(e){return R.apiClient.put("/usuarios/".concat(e,"/bloquear"))},L=function(e){return R.apiClient.put("/usuarios/".concat(e,"/desbloquear"))},y=function(e,r){return R.apiClient.get("/roles",{params:{filter:e,page:r}})},U=function(e){return R.apiClient.get("/roles/".concat(e))},w=function(e){return R.apiClient.post("roles",e)},P=function(e,r){return R.apiClient.put("roles/".concat(e),r)},D=function(e){return R.apiClient.delete("roles/".concat(e))},M=t(22),T=t(634),G=t(4),V=1,z=a.a.memo((function(e){var r,t=e.isInvalid,n=e.selected,a=void 0===n?[]:n,i=e.onChange,o=Object(f.useQuery)("roles.buscar",(function(){return y()}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1});console.log("Render count",V++);var c=(null===(r=o.data)||void 0===r?void 0:r.data)||[];return Object(G.jsx)("div",{className:t?"is-invalid":"",children:o.isFetching?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(p.a,{animation:"border",size:"sm"}),Object(G.jsx)("span",{children:"Cargando"})]}):o.isError?Object(G.jsxs)(b.a,{variant:"danger",children:["Ocurrio un error al obtener la lista de roles. Haga clic ",Object(G.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o.refetch()},children:"aqui"})," para volver a intentar"]}):Object(G.jsx)(T.a,{as:"ul",className:"overflow-auto flex-grow-1",style:{maxHeight:"12rem"},children:c.map((function(e,r){return Object(G.jsx)(T.a.Item,{as:"li",className:"py-2 px-3 text-capitalize"+(t?" border-danger":""),action:!0,children:Object(G.jsx)(j.a.Check,{type:"checkbox",isInvalid:t,label:e.name,checked:a.some((function(r){return r.id==e.id})),onChange:function(r){var t=r.target.checked;i&&i(t?[].concat(Object(M.a)(a),[e]):a.filter((function(r){return r.id!=e.id})))}})},e.id)}))})})})),k=t(235),F=t(69),Q=t(626),B=function(){var e,r,t,a,o,c,s,R,g,A,N,C,L,y,U,w,P,D,M,T,V,B,q,K,X,H,W,J,$,Z=Object(l.a)(),Y=Object(i.i)().id,ee=Object(n.useMemo)((function(){return F.g().shape({informacionPersonal:F.g().shape({ci:F.f().label("carnet de identidad"),ciComplemento:F.d((function(e){return e?F.j().label("'complemento'").trim().length(2):F.j().nullable().optional()})),apellidoPaterno:F.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido")}),apellidoMaterno:F.j().label("apellido materno").trim().when("apellidoPaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido")}),nombres:F.j().label("nombres").trim().required().label("'Nombres'")},[["apellidoMaterno","apellidoPaterno"]]),informacionUsuario:F.g().shape(Y?{roles:F.b().label("roles").min(1,"Debe seleccionar al menos un rol")}:{username:F.j().label("usuario").required().min(6).max(16).matches(/[a-zA-Z0-9]*/),password:F.j().label("contrase\xf1a").min(8).max(256).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\/()=?\*])(?=.{8,})/,"La contrase\xf1a debe contener al menos un caracter en minuscula, uno en mayuscula, un n\xfamero y uno de los siguientes caracter especial: !@#$%^&*").required(),passwordRepeat:F.j().label("confirmar contrase\xf1a").test("password-match","Las contrase\xf1as no coinciden",(function(e){return e===this.parent.password})),regional:F.b().length(1),roles:F.b().label("roles").min(1,"Debe seleccionar al menos un rol")})})}),[]),re=Object(v.g)({resolver:Object(k.a)(ee),mode:"onBlur",defaultValues:{informacionUsuario:{roles:[],regional:[]}}}),te=re.control,ne=re.formState,ae=re.handleSubmit,ie=re.register,oe=re.setValue,ce=re.trigger,se=re.watch,le=ne.errors,de=Object(i.g)(),ue=Object(f.useQueryClient)(),je=["usuarios.cargar",Y],be=Object(f.useQuery)(je,(function(){return _(parseInt(Y))}),{enabled:!!Y&&!(null===(e=de.location.state)||void 0===e?void 0:e.user)}),Oe=Object(f.useMutation)((function(e){var r=e.informacionPersonal,t=e.informacionUsuario;return Y?S(parseInt(Y),{regionalId:t.regional[0].id,roles:t.roles.map((function(e){return e.name})),ci:parseInt(r.ci),ciComplemento:r.ciComplemento,apellidoPaterno:r.apellidoPaterno,apellidoMaterno:r.apellidoMaterno,nombres:r.nombres}):I({username:t.username,password:t.password,regionalId:t.regional[0].id,roles:t.roles.map((function(e){return e.name})),ci:parseInt(r.ci),ciComplemento:r.ciComplemento,apellidoPaterno:r.apellidoPaterno,apellidoMaterno:r.apellidoMaterno,nombres:r.nombres})}),{onSuccess:function(e){var r=e.data;ue.invalidateQueries("usuarios.buscar"),de.replace("/iam/usuarios/".concat(r.id),{user:r})}}),me=Object(n.useState)([]),he=Object(u.a)(me,2),xe=he[0],pe=he[1],ve=Object(n.useCallback)((function(e){return!!(null===Z||void 0===Z?void 0:Z.can(Q.a.REGISTRAR_USUARIOS))||e.id==(null===Z||void 0===Z?void 0:Z.regionalId)}),[Z]),fe=(null===(r=be.data)||void 0===r?void 0:r.data)||(null===(t=de.location.state)||void 0===t?void 0:t.user);return console.log(fe),Object(n.useEffect)((function(){fe&&xe.length&&(oe("informacionPersonal",{ci:String(fe.ciRaiz),ciComplemento:fe.ciComplemento,apellidoPaterno:fe.apellidoPaterno,apellidoMaterno:fe.apellidoMaterno,nombres:fe.nombres}),oe("informacionUsuario",{username:fe.username,roles:fe.roles,regional:[xe.find((function(e){return e.id==fe.id}))]}))}),[fe,xe]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(j.a,{onSubmit:ae((function(e){Oe.mutate(e)})),children:[Object(G.jsx)("h1",{style:{fontSize:"2rem"},children:"Usuarios"}),"error"==Oe.status||"success"==Oe.status?Object(G.jsx)(b.a,{variant:Oe.isError?"danger":"success",children:Oe.isError?(null===(a=Oe.error.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||Oe.error.message:"Guardado"}):null,Object(G.jsxs)(O.a,{className:"mb-2",defaultActiveKey:"0",children:[Object(G.jsxs)(m.a,{children:[Object(G.jsx)(O.a.Toggle,{as:m.a.Header,className:["text-light",le.informacionPersonal?"bg-danger":"bg-primary"].join(" "),eventKey:"0",children:"Informaci\xf3n personal"}),Object(G.jsx)(O.a.Collapse,{eventKey:"0",children:Object(G.jsxs)(m.a.Body,{children:[Object(G.jsxs)(j.a.Row,{children:[Object(G.jsxs)(j.a.Group,{as:h.a,xs:8,md:4,children:[Object(G.jsx)(j.a.Label,{title:"Numero raiz del carnet de identidad",children:"Carnet de identidad"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"number",isInvalid:!!(null===(c=ne.errors.informacionPersonal)||void 0===c?void 0:c.ci)},ie("informacionPersonal.ci"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(s=le.informacionPersonal)||void 0===s||null===(R=s.ci)||void 0===R?void 0:R.message})]}),Object(G.jsxs)(j.a.Group,{as:h.a,xs:4,md:2,children:[Object(G.jsx)(j.a.Label,{title:"Complemento del carnet de identiad",children:"Complemento"}),Object(G.jsx)(j.a.Control,Object(d.a)({isInvalid:!!(null===(g=le.informacionPersonal)||void 0===g?void 0:g.ciComplemento)},ie("informacionPersonal.ciComplemento"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(A=le.informacionPersonal)||void 0===A||null===(N=A.ciComplemento)||void 0===N?void 0:N.message})]})]}),Object(G.jsxs)(j.a.Row,{children:[Object(G.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(G.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(G.jsx)(j.a.Control,Object(d.a)(Object(d.a)({isInvalid:!!(null===(C=le.informacionPersonal)||void 0===C?void 0:C.apellidoPaterno)},ie("informacionPersonal.apellidoPaterno")),{},{onChange:function(e){ie("informacionPersonal.apellidoPaterno").onChange(e),ne.isSubmitted&&ce("informacionPersonal.apellidoMaterno")}})),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(L=le.informacionPersonal)||void 0===L||null===(y=L.apellidoPaterno)||void 0===y?void 0:y.message})]}),Object(G.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(G.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(G.jsx)(j.a.Control,Object(d.a)(Object(d.a)({isInvalid:!!(null===(U=le.informacionPersonal)||void 0===U?void 0:U.apellidoMaterno)},ie("informacionPersonal.apellidoMaterno")),{},{onChange:function(e){ie("informacionPersonal.apellidoPaterno").onChange(e),ne.isSubmitted&&ce("informacionPersonal.apellidoMaterno")}})),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(w=le.informacionPersonal)||void 0===w||null===(P=w.apellidoMaterno)||void 0===P?void 0:P.message})]}),Object(G.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(G.jsx)(j.a.Label,{children:"Nombres"}),Object(G.jsx)(j.a.Control,Object(d.a)({isInvalid:!!(null===(D=ne.errors.informacionPersonal)||void 0===D?void 0:D.nombres)},ie("informacionPersonal.nombres"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(M=ne.errors.informacionPersonal)||void 0===M||null===(T=M.nombres)||void 0===T?void 0:T.message})]})]})]})})]}),Object(G.jsxs)(m.a,{children:[Object(G.jsx)(O.a.Toggle,{as:m.a.Header,className:["text-light",le.informacionUsuario?"bg-danger":"bg-primary"].join(" "),eventKey:"1",children:"Informacion de usuario"}),Object(G.jsx)(O.a.Collapse,{eventKey:"1",children:Object(G.jsxs)(m.a.Body,{children:[Object(G.jsxs)(j.a.Row,{children:[Object(G.jsxs)(j.a.Group,{controlId:"username",as:h.a,md:4,children:[Object(G.jsx)(j.a.Label,{children:"Usuario"}),Object(G.jsx)(j.a.Control,Object(d.a)({disabled:!!Y,isInvalid:!!(null===(V=ne.errors.informacionUsuario)||void 0===V?void 0:V.username)},ie("informacionUsuario.username"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(B=ne.errors.informacionUsuario)||void 0===B||null===(q=B.username)||void 0===q?void 0:q.message})]}),Y?null:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(j.a.Group,{as:h.a,md:4,children:[Object(G.jsx)(j.a.Label,{children:"Contrase\xf1a"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!(null===(K=ne.errors.informacionUsuario)||void 0===K?void 0:K.password)},ie("informacionUsuario.password"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(X=ne.errors.informacionUsuario)||void 0===X||null===(H=X.password)||void 0===H?void 0:H.message})]}),Object(G.jsxs)(j.a.Group,{as:h.a,md:4,children:[Object(G.jsx)(j.a.Label,{children:"Confirmar contrase\xf1a"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!(null===(W=ne.errors.informacionUsuario)||void 0===W?void 0:W.passwordRepeat)},ie("informacionUsuario.passwordRepeat",{required:{value:!0,message:"Este campo es requerido"},validate:{matchPassword:function(e){return e===se("informacionUsuario.password")||"Las contrase\xf1as no coinciden"}}}))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(J=ne.errors.informacionUsuario)||void 0===J||null===($=J.passwordRepeat)||void 0===$?void 0:$.message})]})]})]}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Regional"}),Object(G.jsx)(v.a,{name:"informacionUsuario.regional",control:te,render:function(e){var r,t=e.field,n=e.fieldState;return Object(G.jsx)(E.d,{id:"usuario/regionales-typeahead",onLoad:pe,isInvalid:!!n.error,feedback:null===(r=n.error)||void 0===r?void 0:r.message,filterBy:ve,selected:t.value,onBlur:t.onBlur,onChange:t.onChange})}})]}),Object(G.jsx)(j.a.Row,{children:Object(G.jsxs)(j.a.Group,{as:h.a,children:[Object(G.jsx)(j.a.Label,{children:"Roles"}),Object(G.jsx)(v.a,{name:"informacionUsuario.roles",control:te,render:function(e){var r,t=e.field,n=e.fieldState;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(z,{isInvalid:!!n.error,onChange:t.onChange,selected:t.value}),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(r=n.error)||void 0===r?void 0:r.message})]})}})]})})]})})]})]}),Object(G.jsx)(j.a.Row,{children:Object(G.jsx)(h.a,{children:Object(G.jsxs)(x.a,{type:"submit",children:[Oe.isLoading?Object(G.jsx)(p.a,{animation:"border",className:"mr-2",size:"sm"}):null,Object(G.jsx)("span",{className:"align-middle",children:"Guardar"})]})})})]})})},q=t(627),K=function(){var e,r,t,a,o,c=Object(i.i)().id,s=(Object(i.g)(),Object(q.d)()),l=Object(n.useMemo)((function(){return F.g().shape({oldPassword:c?F.e().notRequired():F.j().label("antig\xfca contrase\xf1a").trim().required(),password:F.j().label("nueva contrase\xf1a").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,"La contrase\xf1a debe contener al menos un caracter en minuscula, uno en mayuscula, un n\xfamero y uno de los siguientes caracter especial: !@#$%^&*").required(),passwordRepeat:F.j().label("repita la nueva contrase\xf1a").oneOf([F.h("password")],"Las contrase\xf1as no coinciden")})}),[]),u=Object(v.g)({mode:"onBlur",resolver:Object(k.a)(l),defaultValues:{oldPassword:"",password:"",passwordRepeat:""}}),O=u.formState,m=u.handleSubmit,h=u.register,E=Object(f.useMutation)((function(e){var r=parseInt(c);return N(isNaN(r)?s.id:r,{password:e.password,oldPassword:e.oldPassword})}),{onSuccess:function(e){e.data}}),R=O.errors;return Object(G.jsxs)(j.a,{onSubmit:m((function(e){E.mutate(e)})),children:[Object(G.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Cambiar contrase\xf1a"}),"error"==E.status||"success"==E.status?Object(G.jsx)(b.a,{variant:E.isError?"danger":"success",children:E.isError?(null===(e=E.error.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||E.error.message:"Guardado"}):null,c?null:Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Antig\xfca contrase\xf1a"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!R.oldPassword},h("oldPassword"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=R.oldPassword)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Nueva contrase\xf1a"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!R.password},h("password"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=R.password)||void 0===a?void 0:a.message})]}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Repita la nueva contrase\xf1a"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!R.passwordRepeat},h("passwordRepeat"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=R.passwordRepeat)||void 0===o?void 0:o.message})]}),Object(G.jsxs)(x.a,{type:"submit",children:[E.isLoading?Object(G.jsx)(p.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},X=t(237),H=t(631),W=t(617),J=t(54),$={index:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.VER_USUARIOS,q.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,q.a.REGISTRAR_USUARIOS,q.a.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},register:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.REGISTRAR_USUARIOS,q.a.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},edit:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.EDITAR_USUARIOS,q.a.EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},view:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.VER_USUARIOS,q.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},changePassword:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.CAMBIAR_CONTRASE\u00d1A,q.a.CAMBIAR_CONTRASE\u00d1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},disable:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.BLOQUEAR_USUARIOS,q.a.BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},enable:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.DESBLOQUEAR_USUARIOS,q.a.DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])}},Z=function(e){var r=Object(v.g)(),t=(r.control,r.handleSubmit),n=r.register,a=r.reset;return Object(G.jsxs)(j.a,{onSubmit:t((function(r){var t={};r.numCi&&(t.ci=r.numCi),r.compCi&&(t.ciComplemento=r.compCi),r.nombre&&(t.nombreCompleto=r.nombre),r.username&&(t.username=r.username),e.onFilter(t)})),children:[Object(G.jsxs)(j.a.Row,{children:[Object(G.jsxs)(j.a.Group,{as:h.a,sm:4,lg:3,children:[Object(G.jsx)(j.a.Label,{children:"N\xba Carnet"}),Object(G.jsx)(j.a.Control,Object(d.a)({},n("numCi")))]}),Object(G.jsxs)(j.a.Group,{as:h.a,sm:2,lg:1,children:[Object(G.jsx)(j.a.Label,{children:"Comp. Carnet"}),Object(G.jsx)(j.a.Control,Object(d.a)({},n("compCi")))]}),Object(G.jsxs)(j.a.Group,{as:h.a,sm:6,lg:8,children:[Object(G.jsx)(j.a.Label,{children:"Nombre"}),Object(G.jsx)(j.a.Control,Object(d.a)({},n("nombre")))]})]}),Object(G.jsx)(j.a.Row,{children:Object(G.jsxs)(j.a.Group,{as:h.a,sm:"6",children:[Object(G.jsx)(j.a.Label,{children:"Nombre de usuario"}),Object(G.jsx)(j.a.Control,Object(d.a)({},n("username")))]})}),Object(G.jsxs)(j.a.Row,{children:[Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{type:"submit",children:"Aplicar"})}),Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{variant:"secondary",onClick:function(){return a()},children:"Limpiar"})})]})]})},Y=t(92),ee=t(65),re=function(e){var r=e.user,t=Object(ee.b)("queryLoader"),a=Object(f.useQueryClient)(),i=Object(f.useMutation)((function(){return r.estado?C(r.id):L(r.id)}),{onSuccess:function(){t.close(),a.setQueryData("usuarios.buscar",(function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{records:e.data.records.map((function(e){return e==r?Object(d.a)(Object(d.a)({},e),{},{estado:!r.estado}):Object(d.a)({},e)}))})})}))}});return Object(n.useEffect)((function(){"loading"==i.status?t.open({state:"loading"}):"error"==i.status&&t.open({state:"error",error:i.error})}),[i.status]),Object(G.jsxs)(Y.a,{style:{position:"initial"},children:[Object(G.jsx)(Y.a.Toggle,{as:E.e,variant:"link",id:"dropdown-users-".concat(r.id)}),Object(G.jsxs)(Y.a.Menu,{children:[Object(G.jsx)(s.b,{authorize:$.view,children:Object(G.jsx)(Y.a.Item,{as:J.b,to:{pathname:"/iam/usuarios/".concat(r.id),state:{user:r}},children:"Ver"})}),Object(G.jsx)(s.b,{authorize:$.edit,children:Object(G.jsx)(Y.a.Item,{as:J.b,to:{pathname:"/iam/usuarios/".concat(r.id,"/editar"),state:{user:r}},children:"Editar"})}),Object(G.jsx)(s.b,{authorize:$.changePassword,children:Object(G.jsx)(Y.a.Item,{as:J.b,to:{pathname:"/iam/usuarios/".concat(r.id,"/cambiar-contrasena"),state:{user:r}},children:"Cambiar contrase\xf1a"})}),Object(G.jsx)(s.b,{authorize:function(e){return r.estado?$.disable(e):$.enable(e)},children:Object(G.jsx)(Y.a.Item,{className:"text-danger",onClick:function(){i.mutate()},children:r.estado?"Bloquear":"Desbloquear"})})]})]})},te=function(){var e,r,t,a=Object(l.a)(),i=Object(n.useState)({current:1,size:10}),c=Object(u.a)(i,2),b=c[0],O=c[1],m=Object(n.useMemo)((function(){var e={};return(null===a||void 0===a?void 0:a.can(Q.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,!1))&&(e.regionalId=a.regionalId),e}),[a]),v=Object(n.useState)(m),R=Object(u.a)(v,2),g=R[0],_=R[1],I=Object(n.useState)(!1),S=Object(u.a)(I,2),N=S[0],C=S[1],L=Object(f.useQuery)("usuarios.buscar",(function(){return A(g,b)}),{enabled:$.view(a),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),y=(null===(e=L.data)||void 0===e||null===(r=e.data)||void 0===r||null===(t=r.meta)||void 0===t?void 0:t.total)||0;return Object(G.jsxs)("div",{className:"px-1",children:[Object(G.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Usuarios"}),Object(G.jsx)("div",{className:"d-flex my-2",children:Object(G.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(G.jsxs)(s.b,{authorize:$.view,children:[Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{onClick:function(){L.refetch()},children:Object(G.jsx)(o.g,{})})}),Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{onClick:function(){C((function(e){return!e}))},children:Object(G.jsx)(o.d,{})})})]}),Object(G.jsx)(s.b,{authorize:$.register,children:Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsxs)(x.a,{as:J.b,to:"/iam/usuarios/registrar",className:"d-flex align-items-center",children:[Object(G.jsx)(o.j,{className:"mr-2"}),"Nuevo"]})})})]})}),Object(G.jsxs)(s.b,{authorize:$.view,children:[Object(G.jsx)(X.a,{in:N,children:Object(G.jsx)("div",{children:Object(G.jsx)(Z,{onFilter:function(e){_(Object(d.a)(Object(d.a)({},e),m))}})})}),Object(G.jsx)("div",{className:"d-flex",children:Object(G.jsx)("div",{className:"ml-auto mb-2",children:Object(G.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(G.jsx)("span",{children:"Mostrar"}),Object(G.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:b.size,onChange:function(e){var r=e.target.value;O((function(e){return Object(d.a)(Object(d.a)({},e),{},{size:parseInt(r)})}))},children:[Object(G.jsx)("option",{value:10,children:"10"}),Object(G.jsx)("option",{value:20,children:"20"}),Object(G.jsx)("option",{value:30,children:"30"}),Object(G.jsx)("option",{value:50,children:"50"}),Object(G.jsx)("option",{value:100,children:"100"})]}),Object(G.jsx)("span",{children:"filas"})]})})}),Object(G.jsxs)(H.a,{responsive:!0,children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{style:{width:1},children:"#"}),Object(G.jsx)("th",{children:"Propietario"}),Object(G.jsx)("th",{children:"Usuario"}),Object(G.jsx)("th",{children:"Estado"}),Object(G.jsx)("th",{style:{width:1}})]})}),Object(G.jsx)("tbody",{children:function(){if(L.isFetching)return Object(G.jsx)("tr",{children:Object(G.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(G.jsx)(p.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(L.isError){var e,r,t=L.error;return Object(G.jsx)("tr",{children:Object(G.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||t.message})})}if(L.data){var n=L.data.data.records;return 0==n.length?Object(G.jsx)("tr",{children:Object(G.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,r){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:r+1}),Object(G.jsxs)("td",{children:[e.ci," - ",e.nombreCompleto]}),Object(G.jsx)("td",{children:e.username}),Object(G.jsx)("td",{children:e.estado?"Activo":"Bloqueado"}),Object(G.jsx)("td",{children:Object(G.jsx)(re,{user:e})})]},e.id)}))}}()})]}),Object(G.jsxs)(W.a,{children:[Object(G.jsx)(h.a,{children:Object(G.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(y," resultados")})}),Object(G.jsx)(h.a,{children:Object(G.jsx)(E.a,{current:b.current,total:Math.ceil((y-b.size)/b.size)+1,onChange:function(e){return O((function(r){return Object(d.a)(Object(d.a)({},r),{},{current:e})}))}})})]})]})]})},ne=function(){var e,r,t=Object(i.h)().state,n=Object(i.i)().id,a=Object(f.useQuery)(["cargarUsuario",n],(function(){return _(parseInt(n))}),{enabled:!(null===t||void 0===t?void 0:t.user),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),o=(null===t||void 0===t?void 0:t.user)||(null===(e=a.data)||void 0===e?void 0:e.data);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h2",{style:{fontSize:"1.75rem"},children:null===o||void 0===o?void 0:o.username}),Object(G.jsx)(H.a,{children:Object(G.jsxs)("tbody",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Carnet de identidad"}),Object(G.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.ci]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Nombre completo"}),Object(G.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.nombreCompleto]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{className:"text-nowrap",scope:"row",style:{width:"1px"},children:"Nombre de usuario"}),Object(G.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.username]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Estado"}),Object(G.jsxs)("td",{children:[": ",(null===o||void 0===o?void 0:o.estado)?"Activo":!1===(null===o||void 0===o?void 0:o.estado)?"Bloqueado":""]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Creado el"}),Object(G.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.createdAt]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Actualizado el"}),Object(G.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.updatedAt]})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Roles"}),Object(G.jsxs)("td",{className:"text-capitalize",children:[": ",null===o||void 0===o||null===(r=o.roles)||void 0===r?void 0:r.map((function(e){return e.name}))]})]})]})}),o?Object(G.jsxs)(j.a.Row,{children:[Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{as:J.b,to:{pathname:"/iam/usuarios/".concat(o.id,"/editar"),state:{user:o}},children:"Editar"})}),Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{variant:"danger",children:"Bloquear"})})]}):null]})},ae=function(){return R.apiClient.get("/permisos")},ie=function(e){var r,t=e.isInvalid,n=e.selected,a=void 0===n?[]:n,i=e.onChange,o=Object(f.useQuery)("permisos.buscar",(function(){return ae()}),{refetchOnWindowFocus:!1,refetchOnReconnect:!1}),c=(null===(r=o.data)||void 0===r?void 0:r.data)||[];return Object(G.jsx)("div",{className:t?"is-invalid":"",children:o.isFetching?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(p.a,{animation:"border",size:"sm"}),Object(G.jsx)("span",{children:"Cargando"})]}):o.isError?Object(G.jsxs)(b.a,{variant:"danger",children:["Ocurrio un error al obtener la lista de permisos. Haga clic ",Object(G.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o.refetch()},children:"aqui"})," para volver a intentar"]}):Object(G.jsx)(T.a,{as:"ul",className:"overflow-auto flex-grow-1",style:{maxHeight:"12rem"},children:c.map((function(e,r){return Object(G.jsx)(T.a.Item,{as:"li",className:"py-2 px-3 text-capitalize"+(t?" border-danger":""),action:!0,children:Object(G.jsx)(j.a.Check,{type:"checkbox",isInvalid:t,label:e,checked:a.some((function(r){return r==e})),onChange:function(r){var t=r.target.checked;i&&i(t?[].concat(Object(M.a)(a),[e]):a.filter((function(r){return r!=e})))}})},e)}))})})},oe=function(){var e,r,t,a,o,c=Object(n.useMemo)((function(){return F.g().shape({name:F.j().label("nombre").trim().required().max(50),description:F.j().label("descripcion").trim().nullable().optional().max(250),permissions:F.b().label("permisos").min(1)})}),[]),s=Object(v.g)({mode:"onBlur",resolver:Object(k.a)(c),defaultValues:{name:"",description:"",permissions:[]}}),l=s.handleSubmit,u=s.register,b=s.control,O=s.formState,m=s.reset,E=s.setError,R=Object(i.i)().id,g=Object(i.g)(),A=Object(ee.b)("queryLoader"),_=Object(f.useQueryClient)(),I=Object(f.useQuery)(["fetchRole",R],(function(){return U(parseInt(R))}),{enabled:!!R&&!(null===(e=g.location.state)||void 0===e?void 0:e.rol),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),S=Object(f.useMutation)((function(e){return R?P(parseInt(R),{name:e.name,description:e.description,permissions:e.permissions}):w({name:e.name,description:e.description,permissions:e.permissions})}),{onSuccess:function(e){var r=e.data;_.invalidateQueries("roles.buscar"),g.replace("/iam/roles/".concat(r.id),{rol:r,ignoreAuthorization:!0})},onError:function(e){var r;422!==(null===(r=e.response)||void 0===r?void 0:r.status)&&A.open({state:"error",error:e})}}),N=(null===(r=I.data)||void 0===r?void 0:r.data)||(null===(t=g.location.state)||void 0===t?void 0:t.rol),C=O.errors;return Object(n.useEffect)((function(){N&&m({name:N.name,description:N.description,permissions:N.permissionNames})}),[N]),Object(n.useEffect)((function(){I.isFetching&&A.open({state:"loading"})}),[I.isFetching]),Object(n.useEffect)((function(){if(S.error){var e,r=S.error;if(422==(null===(e=r.response)||void 0===e?void 0:e.status)){var t=r.response.data.errors;t.name&&E("name",{message:t.name}),t.description&&E("description",{message:t.description}),t.permissions&&E("permissions",{message:t.permissions})}}}),[S.error]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(j.a,{noValidate:!0,validated:O.isValid,onSubmit:l((function(e){S.mutate(e)})),children:[Object(G.jsx)("h1",{style:{fontSize:"2rem"},children:"Roles"}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Nombre"}),Object(G.jsx)(j.a.Control,Object(d.a)({isInvalid:!!O.errors.name},u("name"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=C.name)||void 0===a?void 0:a.message})]}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Descripcion"}),Object(G.jsx)(j.a.Control,Object(d.a)({as:"textarea",isInvalid:!!C.description},u("description"))),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=C.description)||void 0===o?void 0:o.message})]}),Object(G.jsxs)(j.a.Group,{children:[Object(G.jsx)(j.a.Label,{children:"Permisos"}),Object(G.jsx)(v.a,{name:"permissions",control:b,render:function(e){var r,t=e.field,n=e.fieldState;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ie,{isInvalid:!!n.error,onChange:t.onChange,selected:t.value}),Object(G.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(r=n.error)||void 0===r?void 0:r.message})]})}})]}),Object(G.jsx)(j.a.Row,{children:Object(G.jsx)(h.a,{children:Object(G.jsxs)(x.a,{type:"submit",children:[S.isLoading?Object(G.jsx)(p.a,{animation:"border",className:"mr-2",size:"sm"}):null,Object(G.jsx)("span",{className:"align-middle",children:"Registrar"})]})})})]})})},ce=function(e){var r=Object(v.g)(),t=r.register,n=r.handleSubmit;return Object(G.jsx)(j.a,{onSubmit:n((function(r){var t=r.texto;e.onSearch(t)})),children:Object(G.jsxs)(j.a.Row,{className:"flex-nowrap",children:[Object(G.jsxs)(h.a,{children:[Object(G.jsx)(j.a.Label,{htmlFor:"texto",srOnly:!0,children:"Texto"}),Object(G.jsx)(j.a.Control,Object(d.a)({type:"search",id:"texto",style:{minWidth:"10rem"}},t("texto")))]}),Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{className:"ml-2",type:"submit",children:Object(G.jsx)(o.f,{})})})]})})},se={index:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.VER_ROLES,q.a.REGISTRAR_ROLES])},register:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.REGISTRAR_ROLES])},edit:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.EDITAR_ROLES])},view:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.VER_ROLES])},delete:function(e){return null===e||void 0===e?void 0:e.canAny([q.a.ELIMINAR_ROLES])}},le=function(e){var r=e.rol,t=e.queryKey,a=Object(ee.b)("queryLoader"),i=Object(f.useQueryClient)(),o=Object(f.useMutation)((function(e){return D(e)}),{onSuccess:function(){a.close(),i.invalidateQueries("roles.buscar",{inactive:!0}),i.setQueryData(t,(function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{records:e.data.records.filter((function(e){return e!==r}))})})}))}});return Object(n.useEffect)((function(){"loading"==o.status?a.open({state:"loading"}):"error"==o.status&&a.open({state:"error",error:o.error})}),[o.status]),Object(G.jsxs)(Y.a,{style:{position:"initial"},children:[Object(G.jsx)(Y.a.Toggle,{as:E.e,variant:"link",id:"dropdown-roles-".concat(r.id)}),Object(G.jsxs)(Y.a.Menu,{children:[Object(G.jsx)(s.b,{authorize:se.view,children:Object(G.jsx)(Y.a.Item,{as:J.b,to:{pathname:"/iam/roles/".concat(r.id),state:{rol:r}},children:"Ver"})}),Object(G.jsx)(s.b,{authorize:se.edit,children:Object(G.jsx)(Y.a.Item,{as:J.b,to:{pathname:"/iam/roles/".concat(r.id,"/editar"),state:{rol:r}},children:"Editar"})}),Object(G.jsx)(s.b,{authorize:se.delete,children:Object(G.jsx)(Y.a.Item,{className:"text-danger",onClick:function(){window.confirm("Esta accion es irreversible, \xbfEsta seguro de continuar?")&&o.mutate(r.id)},children:"Eliminar"})})]})]})},de=function(){var e=Object(l.a)(),r=Object(n.useState)(0),t=Object(u.a)(r,2),a=t[0],i=t[1],c=Object(n.useState)({current:1,size:10}),b=Object(u.a)(c,2),O=b[0],m=b[1],v=Object(n.useState)({}),R=Object(u.a)(v,2),g=R[0],A=R[1],_=["roles.buscar",O,g],I=Object(f.useQuery)(_,(function(){return y(g,O)}),{enabled:se.view(e),refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var r=e.data.meta;i(r.total)}});return Object(G.jsxs)("div",{className:"px-1",children:[Object(G.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Roles"}),Object(G.jsx)("div",{className:"d-flex my-2",children:Object(G.jsx)(W.a,{className:"ml-auto flex-nowrap",children:Object(G.jsx)(s.b,{authorize:se.register,children:Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsxs)(x.a,{as:J.b,to:"/iam/roles/registrar",className:"d-flex align-items-center",children:[Object(G.jsx)(o.e,{className:"mr-2"}),"Nuevo"]})})})})}),Object(G.jsxs)(s.b,{authorize:se.view,children:[Object(G.jsxs)(W.a,{children:[Object(G.jsx)(h.a,{className:"mb-2",children:Object(G.jsx)(ce,{onSearch:function(e){A({texto:e})}})}),Object(G.jsx)(h.a,{className:"mb-2",xs:"auto",children:Object(G.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(G.jsx)("span",{children:"Mostrar"}),Object(G.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:O.size,onChange:function(e){var r=e.target.value;m((function(e){return{current:1,size:parseInt(r)}}))},children:[Object(G.jsx)("option",{value:10,children:"10"}),Object(G.jsx)("option",{value:20,children:"20"}),Object(G.jsx)("option",{value:30,children:"30"}),Object(G.jsx)("option",{value:50,children:"50"}),Object(G.jsx)("option",{value:100,children:"100"})]}),Object(G.jsx)("span",{children:"filas"})]})})]}),Object(G.jsxs)(H.a,{responsive:!0,children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{style:{width:1},children:"#"}),Object(G.jsx)("th",{children:"Nombre"}),Object(G.jsx)("th",{children:"Descripcion"}),Object(G.jsx)("th",{style:{width:1}})]})}),Object(G.jsx)("tbody",{children:function(){if(I.isFetching)return Object(G.jsx)("tr",{children:Object(G.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(G.jsx)(p.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(I.isError){var e,r,t=I.error;return Object(G.jsx)("tr",{children:Object(G.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||t.message})})}if(I.data){var n=I.data.data.records;return 0==n.length?Object(G.jsx)("tr",{children:Object(G.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,r){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:r+1}),Object(G.jsx)("td",{className:"text-capitalize",children:e.name}),Object(G.jsx)("td",{children:e.description}),Object(G.jsx)("td",{children:Object(G.jsx)(le,{rol:e,queryKey:_})})]},e.id)}))}}()})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)(h.a,{children:Object(G.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")})}),Object(G.jsx)(h.a,{children:Object(G.jsx)(E.a,{current:O.current,total:Math.ceil((a-O.size)/O.size)+1,onChange:function(e){return m((function(r){return Object(d.a)(Object(d.a)({},r),{},{current:e})}))}})})]})]})]})},ue=function(){var e,r=Object(i.h)(),t=(r.pathname,r.state),a=Object(i.i)().id,o=Object(ee.b)("queryLoader"),c=Object(f.useQuery)(["cargar",a],(function(){return U(parseInt(a))}),{enabled:!(null===t||void 0===t?void 0:t.rol),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){o.close()},onError:function(e){o.open({state:"error",error:e})}}),s=Object(f.useMutation)((function(){return D(parseInt(a))}),{onSuccess:function(){o.close()},onError:function(e){o.open({state:e,error:e})}}),l=(null===(e=c.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.rol);return Object(n.useEffect)((function(){c.isFetching&&o.open({state:"loading"})}),[c.isFetching]),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h2",{style:{fontSize:"1.75rem"},children:null===l||void 0===l?void 0:l.name}),Object(G.jsx)(H.a,{children:Object(G.jsxs)("tbody",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",style:{width:"1px"},children:"Nombre"}),Object(G.jsx)("td",{className:"text-capitalize",children:null===l||void 0===l?void 0:l.name})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{className:"text-nowrap",scope:"row",children:"Descripci\xf3n"}),Object(G.jsx)("td",{className:(null===l||void 0===l?void 0:l.description)?"":"bg-light",children:(null===l||void 0===l?void 0:l.description)||"Sin descripci\xf3n"})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Fecha de creaci\xf3n"}),Object(G.jsx)("td",{children:null===l||void 0===l?void 0:l.createdAt})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Fecha de actualizaci\xf3n"}),Object(G.jsx)("td",{children:null===l||void 0===l?void 0:l.updatedAt})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:"Permisos"}),Object(G.jsx)("td",{className:"d-flex ".concat((null===l||void 0===l?void 0:l.permissionNames.length)?"":"bg-light"),children:(null===l||void 0===l?void 0:l.permissionNames.length)?Object(G.jsx)("ul",{className:"d-inline-block",children:null===l||void 0===l?void 0:l.permissionNames.map((function(e,r){return Object(G.jsx)("li",{className:"text-capitalize",children:e},r)}))}):"No se agregaron permisos"})]})]})}),l?Object(G.jsxs)(j.a.Row,{children:[Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsx)(x.a,{as:J.b,to:{pathname:"/iam/roles/".concat(l.id,"/editar"),state:{rol:l}},children:"Editar"})}),Object(G.jsx)(h.a,{xs:"auto",children:Object(G.jsxs)(x.a,{variant:"danger",onClick:function(){o.open({state:"loading"}),s.mutate()},children:[s.isLoading?Object(G.jsx)(p.a,{className:"mr-2",animation:"border",size:"sm"}):null,"Eliminar"]})})]}):null]})},je=t(616),be=function(){var e=Object(i.j)().url,r=Object(l.a)(),t=Object(n.useMemo)((function(){var t=[];return $.index(r)&&t.push({id:"users",icon:Object(G.jsx)(o.k,{}),path:"".concat(e,"/usuarios"),title:"Usuarios"}),se.index(r)&&t.push({id:"roles",icon:Object(G.jsx)(o.h,{}),path:"".concat(e,"/roles"),title:"Roles"}),t}),[r]);return Object(G.jsx)(c.a,{sidebar:{header:Object(G.jsx)("div",{className:"d-flex justify-content-center",children:Object(G.jsx)(je.a,{src:"/logo-lg.png"})}),items:t},children:Object(G.jsxs)(i.d,{children:[Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios"),authorize:$.index,children:Object(G.jsx)(te,{})}),Object(G.jsx)(s.c,{exact:!0,path:["".concat(e,"/usuarios/registrar"),"".concat(e,"/usuarios/:id/editar")],authorize:function(r,t){return t=="".concat(e,"/usuarios/registrar")?$.register(r):$.edit(r)},children:Object(G.jsx)(B,{})}),Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/:id/cambiar-contrasena"),authorize:$.changePassword,children:Object(G.jsx)(K,{})}),Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/cambiar-contrasena"),children:Object(G.jsx)(K,{})}),Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/:id"),authorize:$.view,children:Object(G.jsx)(ne,{})}),Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/roles"),authorize:se.index,children:Object(G.jsx)(de,{})}),Object(G.jsx)(s.c,{exact:!0,path:["".concat(e,"/roles/registrar"),"".concat(e,"/roles/:id/editar")],authorize:function(r,t){return t=="".concat(e,"/roles/registrar")?se.register(r):se.edit(r)},children:Object(G.jsx)(oe,{})}),Object(G.jsx)(s.c,{exact:!0,path:"".concat(e,"/roles/:id"),authorize:se.view,children:Object(G.jsx)(ue,{})})]})})};r.default=be}}]);
//# sourceMappingURL=3.02a29d1b.chunk.js.map