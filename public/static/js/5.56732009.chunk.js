(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{626:function(e,t,a){"use strict";var r=a(140);a.d(t,"b",(function(){return r.b})),a.d(t,"c",(function(){return r.c}));var n=a(141);a.d(t,"d",(function(){return n.a}));var c=a(627);a.d(t,"a",(function(){return c.a}))},627:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={};a.r(r),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return n})),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return c})),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return i})),a.d(r,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return o})),a.d(r,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return s})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return l})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return d})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return j})),a.d(r,"VER_USUARIOS",(function(){return u})),a.d(r,"VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return b})),a.d(r,"REGISTRAR_USUARIOS",(function(){return O})),a.d(r,"REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return h})),a.d(r,"EDITAR_USUARIOS",(function(){return x})),a.d(r,"EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return m})),a.d(r,"BLOQUEAR_USUARIOS",(function(){return p})),a.d(r,"BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return v})),a.d(r,"DESBLOQUEAR_USUARIOS",(function(){return f})),a.d(r,"DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return g})),a.d(r,"CAMBIAR_CONTRASE\xd1A",(function(){return E})),a.d(r,"CAMBIAR_CONTRASE\xd1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return R})),a.d(r,"VER_ROLES",(function(){return S})),a.d(r,"REGISTRAR_ROLES",(function(){return I})),a.d(r,"EDITAR_ROLES",(function(){return N})),a.d(r,"ELIMINAR_ROLES",(function(){return _})),a.d(r,"VER_LISTA_DE_MORA",(function(){return C})),a.d(r,"VER_LISTA_DE_MORA_REGIONAL",(function(){return A})),a.d(r,"AGREGAR_EMPLEADOR_EN_MORA",(function(){return y})),a.d(r,"AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return L})),a.d(r,"QUITAR_EMPLEADOR_EN_MORA",(function(){return T})),a.d(r,"QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return w})),a.d(r,"VER_MEDICOS",(function(){return D})),a.d(r,"VER_MEDICOS_REGIONAL",(function(){return G})),a.d(r,"REGISTRAR_MEDICOS",(function(){return M})),a.d(r,"REGISTRAR_MEDICOS_REGIONAL",(function(){return P})),a.d(r,"EDITAR_MEDICOS",(function(){return V})),a.d(r,"EDITAR_MEDICOS_REGIONAL",(function(){return k})),a.d(r,"BAJA_MEDICOS",(function(){return z})),a.d(r,"BAJA_MEDICOS_REGIONAL",(function(){return F})),a.d(r,"VER_PROVEEDORES",(function(){return B})),a.d(r,"VER_PROVEEDORES_REGIONAL",(function(){return U})),a.d(r,"REGISTRAR_PROVEEDORES",(function(){return q})),a.d(r,"REGISTRAR_PROVEEDORES_REGIONAL",(function(){return X})),a.d(r,"EDITAR_PROVEEDORES",(function(){return Q})),a.d(r,"EDITAR_PROVEEDORES_REGIONAL",(function(){return H})),a.d(r,"BAJA_PROVEEDOR",(function(){return K})),a.d(r,"BAJA_PROVEEDOR_REGIONAL",(function(){return W})),a.d(r,"VER_CONTRATOS_PROVEEDOR",(function(){return J})),a.d(r,"VER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return $})),a.d(r,"REGISTRAR_CONTRATOS_PROVEEDOR",(function(){return Z})),a.d(r,"REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return Y})),a.d(r,"CONSUMIR_CONTRATOS_PROVEEDOR",(function(){return ee})),a.d(r,"CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return te})),a.d(r,"EXTENDER_CONTRATOS_PROVEEDOR",(function(){return ae})),a.d(r,"EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return re})),a.d(r,"ANULAR_CONTRATOS_PROVEEDOR",(function(){return ne})),a.d(r,"ANULAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return ce})),a.d(r,"VER_ESPECIALIDADES",(function(){return ie})),a.d(r,"REGISTRAR_ESPECIALIDADES",(function(){return oe})),a.d(r,"EDITAR_ESPECIALIDADES",(function(){return se})),a.d(r,"ELIMINAR_ESPECIALIDADES",(function(){return le})),a.d(r,"IMPORTAR_ESPECIALIDADES",(function(){return de})),a.d(r,"VER_PRESTACIONES",(function(){return je})),a.d(r,"REGISTRAR_PRESTACIONES",(function(){return ue})),a.d(r,"EDITAR_PRESTACIONES",(function(){return be})),a.d(r,"ELIMINAR_PRESTACIONES",(function(){return Oe})),a.d(r,"IMPORTAR_PRESTACIONES",(function(){return he}));var n="Ver solicitudes de atencion externa",c="Ver solicitudes de atencion externa (misma regional)",i="Ver solicitudes de atencion externa (registrado por)",o="Registrar solicitudes de atencion externa",s="Registrar solicitudes de atencion externa (misma regional)",l="Emitir solicitudes de atencion externa",d="Emitir solicitudes de atencion externa (misma regional)",j="Emitir solicitudes de atencion externa (registrado por)",u="Ver usuarios",b="Ver usuarios (misma regional)",O="Registrar usuarios",h="Registrar usuarios (misma regional)",x="Editar usuarios",m="Editar usuarios (misma regional)",p="Bloquear usuarios",v="Bloquear usuarios (misma regional)",f="Desbloquear usuarios",g="Desbloquear usuarios (misma regional)",E="Cambiar contrase\xf1a",R="Cambiar contrase\xf1a (misma regional)",S="Ver roles",I="Registrar roles",N="Editar roles",_="Eliminar roles",C="Ver lista de mora",A="Ver lista de mora (regional)",y="Agregar empleador en mora",L="Agregar empleador en mora (misma regional)",T="Quitar empleador en mora",w="Quitar empleador en mora (misma regional)",D="Ver m\xe9dicos",G="Ver m\xe9dicos (regional)",M="Registrar m\xe9dicos",P="Registrar m\xe9dicos (regional)",V="Editar m\xe9dicos",k="Editar m\xe9dicos (regional)",z="Baja m\xe9dicos",F="Baja m\xe9dicos (regional)",B="Ver proveedores",U="Ver proveedores (regional)",q="Registrar proveedores",X="Registrar proveedores (regional)",Q="Editar proveedores",H="Editar proveedores (regional)",K="Baja proveedores",W="Baja proveedores (regional)",J="Ver contratos de proveedores",$="Ver contratos de proveedores (regional)",Z="Registrar contratos de proveedores",Y="Registrar contratos de proveedores (regional)",ee="Consumir contratos de proveedores",te="Consumir contratos de proveedores (regional)",ae="Extender contratos de proveedores",re="Extender contratos de proveedores (regional)",ne="Anular contratos de proveedores",ce="Anular contratos de proveedores (regional)",ie="Ver especialidades",oe="Registrar especialidades",se="Editar especialidades",le="Eliminar especialidades",de="Importar especialidades",je="Ver prestaciones",ue="Registrar prestaciones",be="Editar prestaciones",Oe="Eliminar prestaciones",he="Importar prestaciones"},628:function(e,t,a){"use strict";var r=a(16),n=(a(1),a(633)),c=a(45),i=a(237),o=(a(629),a(3));t.a=function(e){var t=e.sidebar,a=e.children,s=Object(c.c)((function(e){return e.main.showSidebar}));return Object(o.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(s?"":" toggled"),id:"wrapper",children:[Object(o.jsx)(i.a,Object(r.a)({className:"bg-white shadow-sm"},t)),Object(o.jsx)(n.a,{className:"d-flex flex-column flex-grow-1",children:Object(o.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:a})})]})}},629:function(e,t,a){},643:function(e,t,a){"use strict";a.r(t),a.d(t,"ClinicaApp",(function(){return ra}));var r=a(1),n=a(23),c=a(628),i=a(34),o=a(638),s=a(637),l=a(16),d=a(28),j=a(607),u=a(618),b=a(334),O=a(229),h=a(244),x=a(634),m=a(622),p=a(69),v=a(235),f=a(626),g=a(86),E=function(e){return g.b.get("empleadores/buscar-por-patronal",{params:{numero_patronal:e}})},R=a(60),S=a(42),I=function(e,t){return R.apiClient.get("/lista-mora",{params:Object(S.c)({page:t,filter:e})})},N=function(e){return R.apiClient.post("lista-mora/agregar",{empleador_id:e})},_=function(e){return console.log(e),R.apiClient.post("lista-mora/quitar",{empleador_id:e})},C=a(94),A=a(3),y=function(e){var t=Object(C.h)(),a=t.handleSubmit,r=t.register,n=t.reset;return Object(A.jsxs)(u.a,{onSubmit:a((function(t){var a={};t.nombre&&(a.nombre=t.nombre),t.numeroPatronal&&(a.numeroPatronal=t.numeroPatronal),e.onApply(a)})),children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"N\xba Patronal"}),Object(A.jsx)(u.a.Control,Object(l.a)({},r("numeroPatronal")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:8,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({},r("nombre")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",children:"Aplicar"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{variant:"secondary",onClick:function(){return n()},children:"Limpiar"})})]})]})},L=a(93),T=a(179),w=a(624),D=a(95),G=a(140),M=a(627),P={index:function(e){return e.canAny([M.a.VER_LISTA_DE_MORA,M.a.VER_LISTA_DE_MORA_REGIONAL,M.a.AGREGAR_EMPLEADOR_EN_MORA,M.a.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])},view:function(e){return e.canAny([M.a.VER_LISTA_DE_MORA,M.a.VER_LISTA_DE_MORA_REGIONAL])},agregar:function(e){return e.canAny([M.a.AGREGAR_EMPLEADOR_EN_MORA,M.a.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])},quitar:function(e){return e.canAny([M.a.QUITAR_EMPLEADOR_EN_MORA,M.a.QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])}},V=function(e){var t=e.item,a=e.queryKey,n=Object(D.b)("queryLoader"),c=Object(T.b)(),i=Object(w.a)((function(){return _(t.empleadorId)}),{onSuccess:function(){n.close(),c.setQueryData(a,(function(e){return console.log(e),Object(l.a)(Object(l.a)({},e),{},{data:Object(l.a)(Object(l.a)({},e.data),{},{records:e.data.records.filter((function(e){return e!==t}))})})}))}});return Object(r.useEffect)((function(){"loading"==i.status?n.open({state:"loading"}):"error"==i.status&&(console.log(i.error),n.open({state:"error",error:i.error}))}),[i.status]),Object(A.jsxs)(L.a,{children:[Object(A.jsx)(L.a.Toggle,{as:v.j,variant:"link",id:"dropdown-".concat(t.id)}),Object(A.jsx)(L.a.Menu,{children:Object(A.jsx)(G.b,{authorize:P.quitar,children:Object(A.jsx)(L.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&i.mutate()},children:"Quitar"})})})]})},k=function(){var e,t,a,n=Object(r.useState)({current:1,size:10}),c=Object(d.a)(n,2),o=c[0],s=c[1],g=Object(f.d)(),E=Object(r.useState)((function(){var e={};return g.can(f.a.VER_LISTA_DE_MORA)||g.can(f.a.VER_LISTA_DE_MORA_REGIONAL)&&(e.regionalId=g.regionalId),e})),R=Object(d.a)(E,2),S=R[0],N=R[1],_=Object(r.useState)(!1),C=Object(d.a)(_,2),L=C[0],T=C[1],w=["listaMora.buscar",S,o],D=Object(m.a)(w,(function(){return I(S,o)}),{enabled:P.view(g),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),G=(null===(e=D.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0;return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Empleadores en mora"}),Object(A.jsx)("div",{className:"d-flex my-2",children:Object(A.jsxs)(u.a.Row,{className:"ml-auto flex-nowrap",children:[Object(A.jsxs)(f.b,{authorize:P.view,children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{className:"my-2",onClick:function(){D.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{className:"my-2",onClick:function(){T((function(e){return!e}))},children:Object(A.jsx)(i.e,{})})})]}),Object(A.jsx)(f.b,{authorize:P.agregar,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsxs)(O.a,{as:p.b,to:"/clinica/lista-mora/agregar",className:"my-2",children:[Object(A.jsx)(i.g,{className:"mr-1"}),"Agregar"]})})})]})}),Object(A.jsxs)(f.b,{authorize:P.view,children:[Object(A.jsx)(h.a,{in:L,children:Object(A.jsx)(y,{onApply:function(e){N(e),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:1})}))}})}),Object(A.jsx)("div",{className:"d-flex",children:Object(A.jsx)("div",{className:"ml-auto mb-2",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:o.size,onChange:function(e){var t=e.target.value;s((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})}),Object(A.jsxs)(x.a,{responsive:!0,className:"text-nowrap",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{style:{width:1},children:"N\xba Patronal"}),Object(A.jsx)("th",{children:"Nombre"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(D.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(D.data){var r=D.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{style:{lineHeight:"26px"},children:t+1}),Object(A.jsx)("td",{style:{lineHeight:"26px"},children:e.numeroPatronal}),Object(A.jsx)("td",{style:{lineHeight:"26px"},children:e.nombre}),Object(A.jsx)("td",{children:Object(A.jsx)(V,{item:e,queryKey:w})})]},e.id)}))}}()})]}),"success"===D.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(G," resultados")}),Object(A.jsx)(v.f,{current:o.current,total:Math.ceil((G-o.size)/o.size)+1,onChange:function(e){return s((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null]})]})},z=a(608),F=a(613),B=a(236),U=a(70),q=U.g().shape({numeroPatronal:U.j().label("n\xfamero patronal").trim().uppercase().required(),nombre:U.j().required()}),X=function(){var e,t,a=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(q),defaultValues:{nombre:"",numeroPatronal:""}}),c=a.handleSubmit,o=a.register,s=a.watch,d=a.setError,h=a.clearErrors,x=a.setValue,p=(a.reset,a.trigger),v=a.formState,f=v.errors;console.log("Vlues",s(),f);var g=Object(n.g)(),R=Object(T.b)(),S=s("numeroPatronal"),I=Object(m.a)(["buscarEmpleadorPorPatronal",S],(function(){return E(S)}),{enabled:!1,onSuccess:function(e){var t=e.data;console.log("Nombre",t.nombre),x("nombre",t.nombre)}}),_=Object(w.a)((function(e){return N(e)}),{onSuccess:function(){R.invalidateQueries("listaMora.buscar"),g.replace("/clinica/lista-mora")}});Object(r.useEffect)((function(){if(I.isError){var e,t=I.error;d("numeroPatronal",{type:"searchError",message:404==(null===(e=t.response)||void 0===e?void 0:e.status)?"Empleador no encontrado":"Ocurrio un error"})}}),[I.isError]);return Object(A.jsxs)(u.a,{id:"form-empleador-mora",onSubmit:c((function(){_.mutate(I.data.data.id)})),children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Agregar empleador en mora"}),function(){if(_.isSuccess)return Object(A.jsx)(z.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"});if(_.isError){var e,t,a=_.error;return Object(A.jsx)(z.a,{variant:"danger",children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})}return null}(),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"N\xba Patronal"}),Object(A.jsxs)(F.a,{hasValidation:!0,className:"mb-2",children:[Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!f.numeroPatronal,className:"text-uppercase"},o("numeroPatronal"))),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{variant:f.numeroPatronal?"danger":"outline-secondary",onClick:function(){p("numeroPatronal").then((function(e){f.numeroPatronal||(h(),I.data||I.refetch())}))},children:I.isFetching?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):Object(A.jsx)(i.i,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(e=f.numeroPatronal)||void 0===e?void 0:e.message})]})]})}),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!v.errors.nombre},o("nombre"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(t=v.errors.nombre)||void 0===t?void 0:t.message})]})}),Object(A.jsxs)(O.a,{type:"subimt",children:[_.isLoading?Object(A.jsx)(j.a,{className:"mr-2",animation:"border",size:"sm"}):null,Object(A.jsx)("span",{className:""}),"Agregar"]})]})},Q=a(0),H=function(e){return Object(Q.a)({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{d:"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z"}},{tag:"path",attr:{d:"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z"}},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z"}},{tag:"polygon",attr:{points:"14.4,40 10,40 10,44 14.1,44"}}]},{tag:"circle",attr:{cx:"36",cy:"36",r:"10"}},{tag:"path",attr:{fill:"#fff",d:"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z"}}]})(e)},K=function(e,t){return R.apiClient.get("solicitudes-atencion-externa",{params:Object(S.c)({filter:e,page:t})})},W=function(e,t,a,r,n){return R.apiClient.post("solicitudes-atencion-externa",{regional_id:e,asegurado_id:t,medico_id:a,proveedor_id:r,prestaciones_solicitadas:n})},J=a(35),$=a(85),Z=function(e){return R.apiClient.get("asegurados",{params:{filter:{matricula:e},page:{size:10},include:"empleador,titular"}})},Y=function(e,t){return R.apiClient.get("medicos",{params:Object(S.c)({filter:e,page:t})})},ee=function(e){return R.apiClient.get("medicos/".concat(e))},te=function(e,t,a,r,n,c,i){return R.apiClient.post("medicos",{tipo:e,ci:t.raiz,ci_complemento:t.complemento,apellido_paterno:a,apellido_materno:r,nombres:n,especialidad_id:c,regional_id:i})},ae=function(e,t,a,r,n,c,i,o){return R.apiClient.put("medicos/".concat(e),{tipo:t,ci:a.raiz,ci_complemento:a.complemento,apellido_paterno:r,apellido_materno:n,nombres:c,especialidad_id:i,regional_id:o})},re=function(e,t){return R.apiClient.put("medicos/".concat(e,"/cambiar-estado"),{estado:t})},ne=a(26),ce=a(27),ie=new(function(){function e(){Object(ne.a)(this,e)}return Object(ce.a)(e,[{key:"buscar",value:function(e,t){return R.apiClient.get("proveedores",{params:Object(S.c)({filter:e,page:t})})}},{key:"cargar",value:function(e){return R.apiClient.get("proveedores/".concat(e))}},{key:"registrar",value:function(e){return R.apiClient.post("proveedores",Object(S.c)(e))}},{key:"actualizar",value:function(e,t){return R.apiClient.put("proveedores/".concat(e),Object(S.c)(t))}},{key:"actualizarInformacionDeContacto",value:function(e,t){return R.apiClient.put("proveedores/".concat(e,"/contacto"),Object(S.c)(t))}}]),e}()),oe=a(111),se=a.n(oe),le=function(e){return R.apiClient.post("prestaciones",{nombre:e})},de=function(e,t){var a=se.a.CancelToken.source(),r=R.apiClient.get("prestaciones",{params:{filter:e,page:t}});return r.cancel=function(){a.cancel("Query was cancelled by React Query")},r},je=(a(142),function(e){var t,a,n,c,o,s=e.isInvalid,d=e.feedback,j=e.filter,b=e.filterBy,h=Object(J.a)(e,["isInvalid","feedback","filter","filterBy"]),x=["medicos.buscar",j],p=Object(m.a)(x,(function(){return Y(j)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1});Object(r.useEffect)((function(){var e;p.data&&(h.onLoad&&h.onLoad(null===(e=p.data)||void 0===e?void 0:e.data))}),[p.data]);var v=Object(r.useMemo)((function(){var e,t,a,r;return Array.isArray(null===(e=p.data)||void 0===e?void 0:e.data)?null===(a=p.data)||void 0===a?void 0:a.data:((null===(t=p.data)||void 0===t?void 0:t.data)&&console.error(null===(r=p.data)||void 0===r?void 0:r.data),[])}),[null===(t=p.data)||void 0===t?void 0:t.data]);return Object(A.jsxs)(F.a,{hasValidation:!0,children:[Object(A.jsx)($.a,Object(l.a)(Object(l.a)({clearButton:!0,emptyLabel:"No se encontraron resultados",align:"left"},h),{},{disabled:!p.data,className:p.isError||s?"is-invalid":"",isInvalid:p.isError||s,filterBy:function(e,t){return(!t.text||Object(S.a)(e.nombreCompleto,t)||Object(S.a)(e.especialidad,t))&&(!b||"function"===typeof b&&b(e,t))},isLoading:!p.data,options:v,labelKey:"nombreCompleto",minLength:0,renderMenuItemChildren:function(e){return Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{children:e.nombreCompleto}),Object(A.jsx)("div",{className:"small text-secondary",children:e.especialidad})]})}})),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{disabled:!p.data,variant:p.isError?"outline-danger":"outline-secondary",onClick:function(){return p.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:(null===(a=p.error)||void 0===a||null===(n=a.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||(null===(o=p.error)||void 0===o?void 0:o.message)||d})]})}),ue=function(e){var t,a,n,c,o,s=e.isInvalid,d=e.feedback,j=e.filter,b=void 0===j?{}:j,h=e.filterBy,x=Object(J.a)(e,["isInvalid","feedback","filter","filterBy"]),p=["proveedores.buscar",b],v=Object(m.a)(p,(function(){return ie.buscar(b)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1});Object(r.useEffect)((function(){var e;v.data&&(x.onLoad&&x.onLoad(null===(e=v.data)||void 0===e?void 0:e.data))}),[v.data]);var f=Object(r.useMemo)((function(){var e,t,a,r;return Array.isArray(null===(e=v.data)||void 0===e?void 0:e.data)?null===(a=v.data)||void 0===a?void 0:a.data:((null===(t=v.data)||void 0===t?void 0:t.data)&&console.error(null===(r=v.data)||void 0===r?void 0:r.data),[])}),[null===(t=v.data)||void 0===t?void 0:t.data]);return Object(A.jsxs)(F.a,{hasValidation:!0,children:[Object(A.jsx)($.a,Object(l.a)(Object(l.a)({clearButton:!0,emptyLabel:"No se encontraron resultados",align:"left"},x),{},{disabled:!v.data,className:v.isError||s?"is-invalid":"",isInvalid:v.isError||s,filterBy:function(e,t){return(!t.text||(e.nombre?Object(S.a)(e.nombre,t):Object(S.a)(e.nombreCompleto,t)))&&(!h||"function"===typeof h&&h(e,t))},isLoading:v.isFetching,options:f,labelKey:function(e){return e.nombre||e.nombreCompleto},minLength:0,renderMenuItemChildren:function(e){var t;return Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{children:e.nombre||e.nombreCompleto}),Object(A.jsx)("div",{className:"small text-secondary",children:(null===(t=e.especialidad)||void 0===t?void 0:t.nombre)||"Empresa"})]})}})),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{disabled:v.isFetching,variant:v.isError?"outline-danger":"outline-secondary",onClick:function(){return v.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:(null===(a=v.error)||void 0===a||null===(n=a.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||(null===(o=v.error)||void 0===o?void 0:o.message)||d})]})},be=function(e){var t=Object(C.h)({defaultValues:{medico:[],proveedor:[]}}),a=t.control,r=t.formState,n=t.handleSubmit,c=t.register,i=t.reset;return console.log(r),Object(A.jsxs)(u.a,{className:"mb-2",onSubmit:n((function(t){console.log(t),e.onFilter({numero:parseInt(t.numero),numeroPatronal:t.numeroPatronal,matriculaAsegurado:t.matricula,desde:t.desde,hasta:t.hasta,medicoId:t.medico.length&&t.medico[0].id,proveedorId:t.proveedor.length&&t.proveedor[0].id})})),children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"N\xfamero de solicitud"}),Object(A.jsx)(u.a.Control,Object(l.a)({},c("numero")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"N\xba Patronal"}),Object(A.jsx)(u.a.Control,Object(l.a)({},c("numeroPatronal")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Matricula"}),Object(A.jsx)(u.a.Control,Object(l.a)({},c("matricula")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"M\xe9dico"}),Object(A.jsx)(C.a,{control:a,name:"medico",render:function(e){var t=e.field;return Object(A.jsx)(je,{id:"solicitud-atencion-externa-filter/medicos",selected:t.value,onBlur:t.onBlur,onChange:t.onChange})}})]}),Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Proveedor"}),Object(A.jsx)(C.a,{control:a,name:"proveedor",render:function(e){var t=e.field;return Object(A.jsx)(ue,{id:"solicitud-atencion-externa-filter/proveedores",selected:t.value,onBlur:t.onBlur,onChange:t.onChange})}})]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Desde"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date"},c("desde")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Hasta"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date"},c("hasta")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",children:"Aplicar"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{variant:"secondary",onClick:function(){return i()},children:"Limpiar"})})]})]})},Oe=a(598),he=function(){var e=Object(D.b)("dm11Viewer");return Object(A.jsxs)(Oe.a,{centered:!0,show:e.show,onHide:function(){e.close()},children:[Object(A.jsx)(Oe.a.Header,{children:"D.M. - 11"}),Object(A.jsx)(Oe.a.Body,{children:e.url?Object(A.jsx)(v.e,{url:e.url}):null})]})},xe=a(141),me=a(243),pe=function(e){var t=e.solicitud,a=Object(D.b)("dm11Viewer");return Object(A.jsxs)(L.a,{style:{position:"initial"},children:[Object(A.jsx)(L.a.Toggle,{as:v.j,variant:"link",id:"dropdown-solicitud-".concat(t.id)}),Object(A.jsx)(L.a.Menu,{children:Object(A.jsx)(L.a.Item,{href:"#",onClick:function(){a.open({url:t.urlDm11})},children:"Ver D.M. - 11"})})]})},ve={index:function(e){return e.canAny([M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR,M.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL])},register:function(e){return e.canAny([M.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL])},view:function(e){return e.canAny([M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])},emit:function(e){return e.canAny([M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])}},fe=function(){var e=Object(n.h)().pathname,t=Object(r.useState)(0),a=Object(d.a)(t,2),c=a[0],o=a[1],s=Object(r.useState)({current:1,size:10}),f=Object(d.a)(s,2),g=f[0],E=f[1],R=Object(xe.a)(),S=Object(r.useState)(!1),I=Object(d.a)(S,2),N=I[0],_=I[1],C=function(){var e={};return R.can(M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA)||((null===R||void 0===R?void 0:R.can(M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL))&&(e.regionalId=R.regionalId),(null===R||void 0===R?void 0:R.can(M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR))&&(e.registradoPor=R.id)),e},y=Object(r.useState)(C),L=Object(d.a)(y,2),T=L[0],w=L[1],D=Object(m.a)(["solicitudesAtencionExterna.buscar",g,T],(function(){return console.log(Object(l.a)(Object(l.a)({},T),C())),K(Object(l.a)(Object(l.a)({},T),C()),g)}),{enabled:R.canAny([M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,M.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR]),refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;o(t.total)}});return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitudes de atenci\xf3n externa"}),Object(A.jsx)("div",{className:"d-flex my-2",children:Object(A.jsxs)(u.a.Row,{className:"ml-auto flex-nowrap",children:[Object(A.jsxs)(me.a,{authorize:ve.view,children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){D.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){_((function(e){return!e}))},children:Object(A.jsx)(i.e,{})})})]}),Object(A.jsx)(me.a,{authorize:ve.register,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsxs)(O.a,{as:p.b,to:"".concat(e,"/registrar"),className:"d-flex align-items-center",children:[Object(A.jsx)(i.g,{className:"mr-1"}),Object(A.jsx)("span",{children:"Nuevo"})]})})})]})}),Object(A.jsxs)(me.a,{authorize:ve.view,children:[Object(A.jsxs)(u.a.Row,{className:"mb-2",children:[Object(A.jsx)(b.a,{xs:12,children:Object(A.jsx)(h.a,{in:N,children:Object(A.jsx)("div",{children:Object(A.jsx)(be,{onFilter:function(e){w(e),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:1})}))}})})})}),Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:g.size,onChange:function(e){var t=e.target.value;E((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})]}),Object(A.jsxs)(x.a,{responsive:!0,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"N\xba"}),Object(A.jsx)("th",{children:"Fecha y hora"}),Object(A.jsx)("th",{children:"Matr\xedcula asegurado"}),Object(A.jsx)("th",{children:"Doctor"}),Object(A.jsx)("th",{children:"Proveedor"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(D.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(D.data){var r=D.data.data.records;return 0===r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t+1}),Object(A.jsx)("td",{children:e.numero}),Object(A.jsx)("td",{children:e.fecha}),Object(A.jsx)("td",{children:e.asegurado.matricula}),Object(A.jsx)("td",{children:e.medico}),Object(A.jsx)("td",{children:e.proveedor}),Object(A.jsx)("td",{children:Object(A.jsx)(pe,{solicitud:e})})]},e.id)}))}}()})]}),"success"===D.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(c," resultados")}),Object(A.jsx)(v.f,{current:g.current,total:Math.ceil((c-g.size)/g.size)+1,onChange:function(e){return E((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null]}),Object(A.jsx)(he,{})]})},ge=a(639),Ee=a(640),Re=a(635),Se=a.n(Re),Ie=a(331),Ne=a(238);var _e={1:"Alta",2:"Baja"},Ce={1:"Alta",2:"Baja",3:"Baja temporal"},Ae=Object(r.forwardRef)((function(e,t){return console.log(e.asegurados.length),Object(A.jsxs)(Ne.a,Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(A.jsx)(Oe.a.Header,{children:e.title}),Object(A.jsx)(Oe.a.Body,{children:Object(A.jsxs)(x.a,{responsive:!0,className:"small",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Matricula"}),Object(A.jsx)("th",{children:"Nombre completo"}),Object(A.jsx)("th",{children:"Estado"}),Object(A.jsx)("th",{})]})}),Object(A.jsx)("tbody",{children:e.asegurados.length?e.asegurados.map((function(t,a){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:a+1}),Object(A.jsxs)("td",{children:[t.matricula,"-",t.matriculaComplemento]}),Object(A.jsx)("td",{children:(r=t.apellidoPaterno,n=t.apellidoMaterno,c=t.nombres,(r?r+" ":"")+"".concat(n,"  ").concat(c))}),Object(A.jsx)("td",{className:_e[t.estado]?"":"bg-ligth",children:_e[t.estado]||"Desconocido"}),Object(A.jsx)("td",{children:Object(A.jsx)(O.a,{onClick:function(){console.log(t),e.onSelect(t)},children:"Seleccionar"})})]},t.id);var r,n,c})):Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})})})]})})]}))})),ye=function(){var e,t,a,n,c,o,s,d,h,x,p,v,f,g,E,R,S,I,N,_,y,L,T,w,D,G,M,P,V,k,z,B,U=Object(C.i)(),q=U.register,X=U.formState,Q=U.trigger,H=U.setValue,K=U.clearErrors,W=U.control,$=(U.watch,Object(C.j)({control:W,name:"asegurado"})),Y=(Object(C.j)({control:W,name:"titular"}),Object(C.j)({control:W,name:"empleador"}),Object(r.useRef)(null)),ee=$.matricula,te=Object(m.a)(["asegurados.buscar",ee],(function(){return Z(ee)}),{enabled:!1,onSuccess:function(e){var t=e.data.records;if(1==t.length){var a=t[0];ae(a)}else{var r;null===(r=Y.current)||void 0===r||r.show(!0)}}}),ae=function(e){var t,a,r,n,c=e.empleador,i=e.titular,o=Object(J.a)(e,["empleador","titular"]);H("asegurado.id",o.id),H("asegurado.apellidoPaterno",o.apellidoPaterno||""),H("asegurado.apellidoMaterno",o.apellidoMaterno||""),H("asegurado.nombres",o.nombres),H("asegurado.tipo",o.tipo),H("asegurado.estado",_e[o.estado]),H("asegurado.tieneBaja",!!o.baja),H("asegurado.fechaRegBaja",null===(t=o.baja)||void 0===t?void 0:t.regDate),H("asegurado.fechaValidezSeguro",null===(a=o.baja)||void 0===a?void 0:a.fechaValidezSeguro),H("asegurado.fechaExtincion",o.fechaExtincion),H("titular.id",null===i||void 0===i?void 0:i.id),H("titular.matricula",null===i||void 0===i?void 0:i.matricula),H("titular.apellidoPaterno",null===i||void 0===i?void 0:i.apellidoPaterno),H("titular.apellidoMaterno",null===i||void 0===i?void 0:i.apellidoMaterno),H("titular.nombres",null===i||void 0===i?void 0:i.nombres),H("titular.estado",_e[null===i||void 0===i?void 0:i.estado]),H("titular.tieneBaja",!!(null===i||void 0===i?void 0:i.baja)),H("titular.fechaRegBaja",null===i||void 0===i||null===(r=i.baja)||void 0===r?void 0:r.regDate),H("titular.fechaValidezSeguro",null===i||void 0===i||null===(n=i.baja)||void 0===n?void 0:n.fechaValidezSeguro),H("empleador.id",null===c||void 0===c?void 0:c.id),H("empleador.numeroPatronal",null===c||void 0===c?void 0:c.numeroPatronal),H("empleador.nombre",null===c||void 0===c?void 0:c.nombre),H("empleador.estado",Ce[null===c||void 0===c?void 0:c.estado]),H("empleador.fechaBaja",null===c||void 0===c?void 0:c.fecha_baja),H("empleador.aportes",2==(null===c||void 0===c?void 0:c.aportes)?"S\xed":1==(null===c||void 0===c?void 0:c.aportes)?"No":"")};Object(r.useEffect)((function(){var e;$.id&&(null===(e=X.dirtyFields.asegurado)||void 0===e?void 0:e.matricula)&&(H("asegurado.id",""),H("asegurado.apellidoPaterno",""),H("asegurado.apellidoMaterno",""),H("asegurado.nombres",""),H("asegurado.tipo",-1),H("asegurado.estado",""),H("asegurado.tieneBaja",!1),H("asegurado.fechaRegBaja",""),H("asegurado.fechaValidezSeguro",null),H("asegurado.fechaExtincion",null),H("titular",{id:"",matricula:"",apellidoPaterno:"",apellidoMaterno:"",nombres:"",estado:"",tieneBaja:!1,fechaRegBaja:"",fechaValidezSeguro:null}),H("empleador.id",""),H("empleador.numeroPatronal",""),H("empleador.nombre",""),H("empleador.estado",""),H("empleador.fechaBaja",""),H("empleador.aportes",""))}),[ee]);var re=X.errors,ne=re.asegurado||re.titular||re.empleador;return Object(A.jsxs)(Ee.a,{children:[Object(A.jsx)(ge.a.Toggle,{as:Ee.a.Header,className:"text-light "+(ne?"bg-danger":"bg-primary"),eventKey:"0",children:"Asegurado"}),Object(A.jsx)(ge.a.Collapse,{eventKey:"0",children:Object(A.jsxs)(Ee.a.Body,{children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(b.a,{lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{htmlFor:"asegurado-matricula",children:"Matr\xedcula"}),Object(A.jsxs)(F.a,{hasValidation:!0,className:"mb-2",children:[Object(A.jsx)(Ie.a,Object(l.a)({id:"asegurado-matricula",isInvalid:!!(null===(e=re.asegurado)||void 0===e?void 0:e.matricula)||!!(null===(t=re.asegurado)||void 0===t?void 0:t.id),className:"text-uppercase"},q("asegurado.matricula"))),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{variant:"outline-secondary",onClick:function(){Q("asegurado.matricula").then((function(e){var t,a;if(console.log("Matricula validation",e),!(null===(t=re.asegurado)||void 0===t?void 0:t.matricula))if((null===(a=X.dirtyFields.asegurado)||void 0===a?void 0:a.matricula)&&delete X.dirtyFields.asegurado.matricula,K(["asegurado","titular","empleador"]),te.data){var r=te.data.data.records;if(1==r.length){var n=r[0];ae(n)}else{var c;null===(c=Y.current)||void 0===c||c.show(!0)}}else te.refetch()}))},children:te.isFetching?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):Object(A.jsx)(i.i,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(a=re.asegurado)||void 0===a||null===(n=a.matricula)||void 0===n?void 0:n.message})]})]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Paterno"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("asegurado.apellidoPaterno")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Materno"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("asegurado.apellidoMaterno")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("asegurado.nombres")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Estado"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!(null===(c=re.asegurado)||void 0===c?void 0:c.estado)},q("asegurado.estado"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(o=re.asegurado)||void 0===o||null===(s=o.estado)||void 0===s?void 0:s.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Validez del seguro"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,type:"date",isInvalid:!!(null===(d=re.asegurado)||void 0===d?void 0:d.fechaValidezSeguro)},q("asegurado.fechaValidezSeguro"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(h=re.asegurado)||void 0===h||null===(x=h.fechaValidezSeguro)||void 0===x?void 0:x.message})]}),2==$.tipo?Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Fecha extinsion"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,type:"date",isInvalid:!!(null===(p=re.asegurado)||void 0===p?void 0:p.fechaExtincion)},q("asegurado.fechaExtincion"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(v=re.asegurado)||void 0===v||null===(f=v.fechaExtincion)||void 0===f?void 0:f.message})]}):null]}),2==$.tipo?Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Titular"}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Matricula"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("titular.matricula")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Paterno"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("titular.apellidoPaterno")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Materno"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("titular.apellidoMaterno")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,lg:3,md:6,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("titular.nombres")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Estado"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!(null===(g=re.titular)||void 0===g?void 0:g.estado)},q("titular.estado"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(E=re.titular)||void 0===E||null===(R=E.estado)||void 0===R?void 0:R.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Fecha de baja"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,type:"date",isInvalid:!!(null===(S=re.titular)||void 0===S?void 0:S.fechaValidezSeguro)},q("titular.fechaValidezSeguro"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(I=re.titular)||void 0===I||null===(N=I.fechaValidezSeguro)||void 0===N?void 0:N.message})]})]})]}):null,Object(A.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Empleador"}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"N\xba Patronal"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!(null===(_=re.empleador)||void 0===_?void 0:_.numeroPatronal)},q("empleador.numeroPatronal"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(y=re.empleador)||void 0===y||null===(L=y.numeroPatronal)||void 0===L?void 0:L.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:8,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0},q("empleador.nombre")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Estado"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!(null===(T=re.empleador)||void 0===T?void 0:T.estado)},q("empleador.estado"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(w=re.empleador)||void 0===w||null===(D=w.estado)||void 0===D?void 0:D.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Fecha de baja"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,type:"date",isInvalid:!!(null===(G=re.empleador)||void 0===G?void 0:G.fechaBaja)},q("empleador.fechaBaja"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(M=re.empleador)||void 0===M||null===(P=M.fechaBaja)||void 0===P?void 0:P.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"En mora"}),Object(A.jsx)(u.a.Control,Object(l.a)({readOnly:!0,isInvalid:!!(null===(V=re.empleador)||void 0===V?void 0:V.aportes)},q("empleador.aportes"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(k=re.empleador)||void 0===k||null===(z=k.aportes)||void 0===z?void 0:z.message})]})]}),Object(A.jsx)(Ae,{ref:Y,title:"Resultados",asegurados:(null===(B=te.data)||void 0===B?void 0:B.data.records)||[],onSelect:function(e){ae(e),Y.current.show(!1)}})]})})]})},Le=function(e){var t,a,n,c,o,s,d,j,b,h=e.isInvalid,x=e.feedback,p=e.filterBy,v=e.onChange,f=Object(J.a)(e,["isInvalid","feedback","filterBy","onChange"]),g="prestaciones.buscar";console.log("AllowNew",f.allowNew);var E=Object(T.b)(),R=Object(m.a)(g,(function(){return de({})}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1}),I=Object(w.a)((function(e){return le(e)}),{onSuccess:function(e){var t=e.data;E.invalidateQueries("prestaciones.buscar",{inactive:!0}),E.setQueryData(g,(function(e){return Object(l.a)(Object(l.a)({},e),{},{data:Object(l.a)(Object(l.a)({},e.data),{},{records:[e.data.records,t]})})})),v&&v([t])}});Object(r.useEffect)((function(){var e;R.data&&(f.onLoad&&f.onLoad(null===(e=R.data)||void 0===e?void 0:e.data))}),[R.data]);var N=Object(r.useMemo)((function(){var e,t,a,r;return Array.isArray(null===(e=R.data)||void 0===e?void 0:e.data)?null===(a=R.data)||void 0===a?void 0:a.data:((null===(t=R.data)||void 0===t?void 0:t.data)&&console.error(null===(r=R.data)||void 0===r?void 0:r.data),[])}),[null===(t=R.data)||void 0===t?void 0:t.data]);return Object(A.jsxs)(F.a,{hasValidation:!0,children:[Object(A.jsx)($.a,Object(l.a)(Object(l.a)({clearButton:!0,allowNew:!0,emptyLabel:"No se encontraron coincidencias",align:"left"},f),{},{onChange:function(e){if(e.length){var t=e[0];if(t.customOption)return void I.mutate(t.nombre)}console.log("Prestaciones",e),v&&v(e)},newSelectionPrefix:Object(A.jsx)("i",{children:"Crear nueva: "}),className:R.isError||h?"is-invalid":"",isInvalid:R.isError||h,filterBy:function(e,t){return(!t.text||Object(S.a)(e.nombre,t))&&(!p||"function"===typeof p&&p(e,t))},disabled:!R.data||I.isLoading,isLoading:R.isFetching||I.isLoading,options:N,labelKey:"nombre"})),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{disabled:!R.data||I.isLoading,variant:R.isError?"outline-danger":"outline-secondary",onClick:function(){return R.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:(null===(a=R.error)||void 0===a||null===(n=a.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||(null===(o=R.error)||void 0===o?void 0:o.message)||(null===(s=I.error)||void 0===s||null===(d=s.response)||void 0===d||null===(j=d.data)||void 0===j?void 0:j.message)||(null===(b=I.error)||void 0===b?void 0:b.message)||x})]})},Te=function(){var e,t=Object(r.useState)(1),a=Object(d.a)(t,2),n=(a[0],a[1],Object(C.i)()),c=n.register,i=n.control,o=n.formState,s=n.watch,j=Object(C.f)({name:"proveedor",control:i}),b=Object(C.g)({control:i,name:"prestacionesSolicitadas"}),O=b.fields,h=(b.append,b.remove,o.errors),m=!!h.prestacionesSolicitadas||!!h.proveedor;return Object(A.jsxs)(Ee.a,{style:{overflow:"visible"},children:[Object(A.jsx)(ge.a.Toggle,{as:Ee.a.Header,className:"text-light "+(m?"bg-danger":"bg-primary"),eventKey:"3",children:"Prestaciones"}),Object(A.jsx)(ge.a.Collapse,{eventKey:"3",children:Object(A.jsxs)("div",{children:[Object(A.jsxs)(x.a,{className:h.prestacionesSolicitadas?"is-invalid":"",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Prestacion"}),Object(A.jsx)("th",{children:"Proveedor"}),Object(A.jsx)("th",{children:"Nota"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:O.map((function(e,t){var a,r,n,d,b,O,h;return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t+1}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"prestacionesSolicitadas.".concat(t,".prestacion"),control:i,render:function(e){var a,r=e.field,n=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Le,{id:"solicitud-atencion-externa/prestacionesSolicitadas.".concat(t,".prestacion"),allowNew:!1,className:n.error?"is-invalid":"",isInvalid:!!n.error,filterBy:function(e){var t=s("proveedor.0"),a=s("prestacionesSolicitadas");return!t||t.contrato.prestaciones.some((function(t){return t.id==e.id}))&&!a.some((function(t){var a;return(null===(a=t.prestacion)||void 0===a?void 0:a.length)&&t.prestacion[0].id==e.id}))},feedback:null===(a=n.error)||void 0===a?void 0:a.message,selected:r.value,onBlur:r.onBlur,onChange:r.onChange})})}})}),Object(A.jsx)("td",{children:Object(A.jsx)(ue,{id:"solicitud-atencion-externa/proveedor",className:(null===(a=j.fieldState)||void 0===a?void 0:a.error)?"is-invalid":"",isInvalid:!!(null===(r=j.fieldState)||void 0===r?void 0:r.error),filter:{activos:1},filterBy:function(e){return!(e.regionalId!=s("regional.0.id")||!s("prestacionesSolicitadas").every((function(t){return e.contrato.prestaciones.some((function(e){return e.id==(t.prestacion.length&&t.prestacion[0].id)}))})))},feedback:null===(n=j.fieldState)||void 0===n||null===(d=n.error)||void 0===d?void 0:d.message,onChange:j.field.onChange,onBlur:j.field.onBlur,selected:j.field.value})}),Object(A.jsxs)("td",{children:[Object(A.jsx)(u.a.Control,Object(l.a)({as:"textarea",isInvalid:!(!o.errors.prestacionesSolicitadas||!(null===(b=o.errors.prestacionesSolicitadas[t])||void 0===b?void 0:b.nota))},c("prestacionesSolicitadas.".concat(t,".nota")))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:o.errors.prestacionesSolicitadas&&(null===(O=o.errors.prestacionesSolicitadas[t])||void 0===O||null===(h=O.nota)||void 0===h?void 0:h.message)})]}),Object(A.jsx)("td",{})]},e.id)}))})]}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(e=h.prestacionesSolicitadas)||void 0===e?void 0:e.message})]})})]})},we=Se()(),De=U.j().label("estado").oneOf(Object.values(_e),"Estado desconocido").test("estado-incoherente","",(function(e,t){return e==_e[1]&&t.parent.tieneBaja?t.createError({message:"El asegurado figura como activo, pero hay un registro de su baja con fecha ${date}",params:{date:t.parent.fechaRegBaja}}):!(e==_e[2]&&!t.parent.tieneBaja)||t.createError({message:"El asegurado figura como dado de baja, aunque no se encontraron registros de la baja"})})),Ge=U.e().label("fecha de extinsion").test("min","",(function(e,t){var a=t.parent,r=a.estado,n=a.tieneBaja;return r==_e[2]&&n&&!e?t.createError({message:"Fecha sin especificar, se asume que el seguro ya no tiene validez"}):!Se()(e).isSameOrBefore(we)||t.createError({message:"El seguro ya no tiene validez"})})),Me=U.g().shape({asegurado:U.g().shape({matricula:U.j().label("matricula").trim().uppercase().required().matches(/^\d{2}-\d{4}-[a-zA-Z\xf1\xd1]{2,3}$/,"Formato incorrecto."),estado:De,fechaExtincion:U.d((function(e){return e?U.c().label("fecha de extinsion").nullable().notRequired().min(we.toDate(),"Fecha de extinsion alcanzada"):U.e()})),fechaValidezSeguro:Ge}),titular:U.d((function(e){return(null===e||void 0===e?void 0:e.id)?U.g().shape({matricula:U.j().label("matricula").required(),estado:De,fechaValidezSeguro:Ge}):U.g()})),empleador:U.g().shape({numeroPatronal:U.j().label("numero patronal").required(),estado:U.j().label("estado").oneOf(Object.values(Ce),"Estado desconocido").test("estado-incoherente","El empleador figura como activo, pero tiene fecha de baja",(function(e,t){return e!=Ce[1]||!t.parent.fechaBaja})),fechaBaja:U.e().when("estado",{is:function(e){return e==Ce[2]||e==Ce[3]},then:U.c().required("Fecha sin especificar, se asume que el seguro ya no tiene validez").min(we.subtract(2,"months").toDate())}),aportes:U.d((function(e){return e?U.j().oneOf(["No"],"El empleador esta en mora"):U.j()}))}),regional:U.b().length(1,"Debe seleccionar una regional"),medico:U.b().length(1,"Debe seleccionar un medico"),proveedor:U.b().length(1,"Debe seleccionar un proveedor"),prestacionesSolicitadas:U.b().of(U.g().shape({prestacion:U.b().length(1,"Debe seleccionar una prestacion"),nota:U.j().label("nota").nullable().notRequired().max(150)})).min(1,"Debe solicitar un servicio").max(1,"Solo puede solicitar un servicio por solicitud")}),Pe=function(){var e=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(Me),defaultValues:{regional:[],medico:[],proveedor:[],prestacionesSolicitadas:[{id:0,prestacion:[],nota:""}],asegurado:{},titular:{},empleador:{}}}),t=e.handleSubmit,a=(e.trigger,e.formState),n=e.control,c=e.reset,i=e.setValue,o=e.setError,s=e.watch,d=Object(D.b)("dm11Viewer"),h=Object(xe.a)();console.log("Errors",s(),a.errors);var x=Object(w.a)((function(e){return W(e.regional[0].id,e.asegurado.id,e.medico[0].id,e.proveedor[0].id,e.prestacionesSolicitadas.map((function(e){var t=e.prestacion,a=e.nota;return{prestacion_id:t[0].id,nota:a}})))}),{onSuccess:function(e){var t=e.data,a=t.urlDm11,r=t.regionalId;(h.canAny([M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])||h.can(M.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)&&r==h.regionalId)&&(d.open({url:a}),c())}}),m=a.errors,p=x.error;Object(r.useEffect)((function(){var e;if(422==(null===p||void 0===p||null===(e=p.response)||void 0===e?void 0:e.status)){var t,a=(null===(t=p.response)||void 0===t?void 0:t.data).errors;Object.keys(a).forEach((function(e){var t=e;"asegurado.id"==e&&(t="asegurado.matricula"),o(t,{type:"serverError",message:a[e]})}))}}),[p]);return Object(A.jsxs)(C.b,Object(l.a)(Object(l.a)({},e),{},{children:[Object(A.jsxs)(u.a,{onSubmit:t((function(e){x.mutate(e)})),children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitud de atenci\xf3n externa"}),function(){return x.isSuccess?Object(A.jsx)(z.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"}):x.isError&&422!=(null===(e=p.response)||void 0===e?void 0:e.status)?Object(A.jsx)(z.a,{variant:"danger",children:p?(null===(t=p.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||p.message:""}):null;var e,t,a}(),Object(A.jsxs)(ge.a,{className:"mt-3",defaultActiveKey:"0",children:[Object(A.jsx)(ye,{}),Object(A.jsxs)(Ee.a,{style:{overflow:"visible"},children:[Object(A.jsx)(ge.a.Toggle,{as:Ee.a.Header,className:"text-light "+(m.regional?"bg-danger":"bg-primary"),eventKey:"1",children:"Regional"}),Object(A.jsx)(ge.a.Collapse,{eventKey:"1",children:Object(A.jsx)(Ee.a.Body,{children:Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(C.a,{control:n,name:"regional",render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(v.i,{id:"solicitud-atencion-externa-form/regionales",filterBy:function(e){return!!h.can(M.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA)||e.id==h.regionalId},isInvalid:!!r.error,feedback:null===(t=r.error)||void 0===t?void 0:t.message,selected:a.value,onBlur:a.onBlur,onChange:function(e){i("medico",[]),i("proveedor",[]),a.onChange(e)}})}})]})})})})]}),Object(A.jsxs)(Ee.a,{style:{overflow:"visible"},children:[Object(A.jsx)(ge.a.Toggle,{as:Ee.a.Header,className:"text-light "+(m.medico?"bg-danger":"bg-primary"),eventKey:"2",children:"M\xe9dico"}),Object(A.jsx)(ge.a.Collapse,{eventKey:"2",children:Object(A.jsx)(Ee.a.Body,{children:Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(C.a,{control:n,name:"medico",render:function(e){var t,r=e.field,n=e.fieldState;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(je,{id:"solicitud-atencion-externa-form/medicos",filter:{estado:1},filterBy:function(e){return e.regionalId==s("regional.0.id")},className:n.error?"is-invalid":"",isInvalid:!!a.errors.medico,selected:r.value,onBlur:r.onBlur,onChange:r.onChange}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})})})})]}),Object(A.jsx)(Te,{})]}),Object(A.jsxs)(O.a,{className:"mt-3",type:"submit",children:[x.isLoading?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})]}),Object(A.jsx)(he,{})]}))},Ve=a(616),ke=a(239),ze=a(240),Fe=function(e,t){var a=se.a.CancelToken.source(),r=g.b.get("/especialidades",{params:{filter:{nombre:e||void 0},page:t}});return r.cancel=function(){a.cancel("Query was cancelled by React Query")},r},Be=function(e){return g.b.get("especialidades/".concat(e))},Ue=function(e){return g.b.post("especialidades",{nombre:e})},qe=function(e,t){return g.b.put("especialidades/".concat(e),{nombre:t})},Xe=function(e){return g.b.delete("especialidades/".concat(e))},Qe=function(e,t,a){var r=new FormData;return r.append("archivo",e,e.name),r.append("separador",t),r.append("formato",a),g.b.post("/especialidades/importar",r,{headers:{"Content-Type":"multipart/form-data"}})},He=function(e){var t=Object(C.h)(),a=t.register,r=t.handleSubmit;return Object(A.jsx)(u.a,{onSubmit:r((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(A.jsxs)(u.a.Row,{className:"flex-nowrap",children:[Object(A.jsxs)(b.a,{children:[Object(A.jsx)(u.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"search",id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{className:"ml-2",type:"submit",children:Object(A.jsx)(i.i,{})})})]})})},Ke=function(e){var t,a,n,c=e.modalRef,i=Object(r.useState)(!1),o=Object(d.a)(i,2),s=o[0],j=o[1],h=Object(C.h)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),x=h.register,m=h.formState,p=h.handleSubmit,v=Object(w.a)((function(e){return Qe(e.archivo,e.separador,e.formatoSaltoLinea)}));return Object(r.useEffect)((function(){c.current={show:j}}),[]),Object(A.jsxs)(Oe.a,{centered:!0,show:s,onHide:function(){return j(!1)},children:[Object(A.jsx)(Oe.a.Header,{children:"Importar Datos"}),Object(A.jsx)(Oe.a.Body,{children:Object(A.jsxs)(u.a,{id:"importar-especialidades-form",onSubmit:p((function(e){var t=e.archivo,a=e.separador,r=e.formatoSaltoLinea;v.mutate({archivo:t[0],separador:a,formatoSaltoLinea:r})})),children:[Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(A.jsx)(b.a,{className:"d-flex align-items-center",sm:"auto",children:Object(A.jsx)(u.a.File,Object(l.a)(Object(l.a)({isInvalid:!!m.errors.archivo},x("archivo",{})),{},{feedback:null===(t=m.errors.archivo)||void 0===t?void 0:t.message}))})]}),Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Separador"}),Object(A.jsxs)(b.a,{xs:"auto",children:[Object(A.jsx)(u.a.Control,Object(l.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!m.errors.separador},x("separador",{}))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(a=m.errors.separador)||void 0===a?void 0:a.message})]})]}),Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(A.jsxs)(b.a,{className:"d-flex",xs:"auto",children:[Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},x("formatoSaltoLinea"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},x("formatoSaltoLinea")))]})]}),Object(A.jsx)(u.a.Check,Object(l.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!m.errors.aggrement,feedback:null===(n=m.errors.aggrement)||void 0===n?void 0:n.message},x("aggrement")))]})}),Object(A.jsxs)(Oe.a.Footer,{children:[Object(A.jsx)(O.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:"Importar"}),Object(A.jsx)(O.a,{children:"Cancelar"})]})]})},We=function(){var e=Object(r.useState)(0),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({current:1,size:10}),o=Object(d.a)(c,2),s=o[0],h=o[1],v=Object(r.useState)(""),f=Object(d.a)(v,2),g=f[0],E=f[1],R=Object(r.useRef)(),S=Object(m.a)(["especialidades.buscar",s,g],(function(){return Fe(g,s)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;n(t.total)}}),I=Object(w.a)((function(e){return Xe(e)}));return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Especialidades"}),Object(A.jsx)(u.a.Row,{className:"mb-2",children:Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsx)(O.a,{as:p.b,replace:!0,to:"/clinica/especialidades/registrar",children:"Nuevo"})})}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(b.a,{className:"mb-2",children:Object(A.jsx)(He,{onSearch:function(e){E(e)}})}),Object(A.jsx)(b.a,{className:"mb-2",xs:"auto",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;h((function(e){return{current:1,size:parseInt(t)}}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})]}),Object(A.jsxs)(x.a,{responsive:!0,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Nombre"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(S.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(S.isError){var e,t,a=S.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var r=S.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t+1}),Object(A.jsx)("td",{children:e.nombre}),Object(A.jsx)("td",{children:Object(A.jsxs)(L.a,{children:[Object(A.jsx)(L.a.Toggle,{as:ze.b,variant:"link",id:"dropdown-especialidad-".concat(e.id)}),Object(A.jsxs)(L.a.Menu,{children:[Object(A.jsxs)(L.a.Item,{as:p.b,replace:!0,to:{pathname:"/clinica/especialidades/".concat(e.id,"/editar"),state:{especialidad:e}},children:[Object(A.jsx)(i.c,{}),Object(A.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(A.jsx)(L.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&I.mutate(e.id)},children:"Eliminar"})]})]})})]},e.id)}))}()})]}),"success"===S.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")}),Object(A.jsx)(ke.b,{current:s.current,total:Math.ceil((a-s.size)/s.size)+1,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null,Object(A.jsx)(Ke,{modalRef:R})]})},Je=U.g().shape({nombre:U.j().required().min(4).max(100)}),$e=function(){var e,t,a,c=Object(n.i)().id,i=Object(n.g)(),o=Object(r.useRef)(!1),s=Object(C.h)({resolver:Object(B.a)(Je)}),d=s.handleSubmit,b=s.register,h=s.reset,x=s.setValue,p=s.formState,v=Object(T.b)(),f=Object(w.a)((function(e){var t=e.nombre;return c?qe(parseInt(c),t):Ue(t)}),{onSuccess:function(){h(),v.invalidateQueries("especialidades.buscar"),o.current||i.replace("/clinica/especialidades")}}),g=Object(m.a)(["especialidades.cargar",c],(function(){return Be(parseInt(c))}),{enabled:!!c&&!(null===(e=i.location.state)||void 0===e?void 0:e.especialidad),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),E=(null===(t=g.data)||void 0===t?void 0:t.data)||(null===(a=i.location.state)||void 0===a?void 0:a.especialidad);Object(r.useEffect)((function(){E&&x("nombre",E.nombre)}),[E]);return Object(A.jsxs)(Oe.a,{show:!0,centered:!0,onHide:function(){i.replace("/clinica/especialidades")},children:[Object(A.jsx)(Oe.a.Header,{children:c?"Editar":"Registrar"}),Object(A.jsx)(Oe.a.Body,{children:function(){var e,t,a;if(g.isFetching)return Object(A.jsx)(j.a,{animation:"border",children:"Cargando"});var r,n,c=g.error;return c?Object(A.jsx)(z.a,{variant:"danger",children:(null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||c.message}):Object(A.jsxs)(u.a,{id:"especialidad-form",onSubmit:d((function(e){f.mutate(e)})),children:["error"==f.status||"success"==f.status?Object(A.jsx)(z.a,{variant:f.isError?"danger":"success",children:f.isError?(null===(e=f.error.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||f.error.message:"Guardado"}):null,Object(A.jsxs)(u.a.Group,{children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!p.errors.nombre},b("nombre"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(a=p.errors.nombre)||void 0===a?void 0:a.message})]})]})}()}),Object(A.jsxs)(Oe.a.Footer,{children:[c?null:Object(A.jsxs)(O.a,{type:"submit",form:"especialidad-form",onClick:function(){o.current=!0},children:[f.isLoading&&o.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(A.jsxs)(O.a,{type:"submit",form:"especialidad-form",onClick:function(){o.current=!1},children:[f.isLoading&&!o.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]})},Ze=Object(r.forwardRef)((function(e,t){var a,r,n,c=Object(C.h)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),i=c.register,o=c.formState,s=c.handleSubmit,d=Object(w.a)((function(t){var a=t.file,r=t.options;return e.import(a,r)}));return Object(A.jsxs)(Ne.a,Object(l.a)(Object(l.a)({ref:t},e),{},{children:[Object(A.jsx)(Oe.a.Header,{children:"Importar Datos"}),Object(A.jsx)(Oe.a.Body,{children:Object(A.jsxs)(u.a,{id:"importar-especialidades-form",onSubmit:s((function(e){var t=e.archivo,a=e.separador,r=e.formatoSaltoLinea;d.mutate({file:t[0],options:{separator:a,format:r}})})),children:[d.data?Object(A.jsx)(z.a,{variant:d.isError?"danger":"success",children:d.isError?"Error":"Importacion existosa"}):null,Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(A.jsx)(b.a,{className:"d-flex align-items-center",sm:"auto",children:Object(A.jsx)(u.a.File,Object(l.a)(Object(l.a)({isInvalid:!!o.errors.archivo},i("archivo",{})),{},{feedback:null===(a=o.errors.archivo)||void 0===a?void 0:a.message}))})]}),Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Separador"}),Object(A.jsxs)(b.a,{xs:"auto",children:[Object(A.jsx)(u.a.Control,Object(l.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!o.errors.separador},i("separador",{}))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(r=o.errors.separador)||void 0===r?void 0:r.message})]})]}),Object(A.jsxs)(u.a.Group,{as:Ve.a,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(A.jsxs)(b.a,{className:"d-flex",xs:"auto",children:[Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},i("formatoSaltoLinea"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},i("formatoSaltoLinea")))]})]}),Object(A.jsx)(u.a.Check,Object(l.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!o.errors.aggrement,feedback:null===(n=o.errors.aggrement)||void 0===n?void 0:n.message},i("aggrement",{})))]})}),Object(A.jsxs)(Oe.a.Footer,{children:[Object(A.jsxs)(O.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:[d.isLoading?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Importar"]}),Object(A.jsx)(O.a,{children:"Cancelar"})]})]}))})),Ye=function(e,t){return R.apiClient.get("/prestaciones",{params:{filter:{nombre:t||void 0},page:e}})},et=function(e){return R.apiClient.get("prestaciones/".concat(e))},tt=function(e){return R.apiClient.post("prestaciones",{nombre:e})},at=function(e,t){return R.apiClient.put("prestaciones/".concat(e),{nombre:t})},rt=function(e){return R.apiClient.delete("prestaciones/".concat(e))},nt=function(e,t,a){var r=new FormData;return r.append("archivo",e,e.name),r.append("separador",t),r.append("formato",a),R.apiClient.post("/prestaciones/importar",r,{headers:{"Content-Type":"multipart/form-data"}})},ct=function(e){var t=Object(C.h)(),a=t.register,r=t.handleSubmit;return Object(A.jsx)(u.a,{onSubmit:r((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(A.jsxs)(u.a.Row,{className:"flex-nowrap",children:[Object(A.jsxs)(b.a,{children:[Object(A.jsx)(u.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"search",id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{className:"ml-2",type:"submit",children:Object(A.jsx)(i.i,{})})})]})})},it=function(){var e=Object(r.useState)(0),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({current:1,size:10}),o=Object(d.a)(c,2),s=o[0],h=o[1],v=Object(r.useState)(""),f=Object(d.a)(v,2),g=f[0],E=f[1],R=Object(r.useRef)(null),S=Object(m.a)(["prestaciones.buscar",s,g],(function(){return Ye(s,g)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;n(t.total)}}),I=Object(w.a)((function(e){return rt(e)}));return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Prestaciones"}),Object(A.jsx)(u.a.Row,{className:"mb-2",children:Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsx)(O.a,{as:p.b,replace:!0,to:"/clinica/prestaciones/registrar",children:"Nuevo"})})}),Object(A.jsxs)(Ve.a,{children:[Object(A.jsx)(b.a,{className:"mb-2",children:Object(A.jsx)(ct,{onSearch:function(e){E(e)}})}),Object(A.jsx)(b.a,{className:"mb-2",xs:"auto",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:s.size,onChange:function(e){var t=e.target.value;h((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})]}),Object(A.jsxs)(x.a,{responsive:!0,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Nombre"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(S.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(S.isError){var e,t,a=S.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var r=S.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t+1}),Object(A.jsx)("td",{children:e.nombre}),Object(A.jsx)("td",{children:Object(A.jsxs)(L.a,{children:[Object(A.jsx)(L.a.Toggle,{as:ze.b,variant:"link",id:"dropdown-prestacion-".concat(e.id)}),Object(A.jsxs)(L.a.Menu,{children:[Object(A.jsxs)(L.a.Item,{as:p.b,replace:!0,to:{pathname:"/clinica/prestaciones/".concat(e.id,"/editar"),state:{prestacion:e}},children:[Object(A.jsx)(i.c,{}),Object(A.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(A.jsxs)(L.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&I.mutate(e.id)},children:[Object(A.jsx)(i.l,{}),Object(A.jsx)("span",{className:"ml-2 align-middle",children:"Eliminar"})]})]})]})})]},e.id)}))}()})]}),Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")}),Object(A.jsx)(ke.b,{current:s.current,total:Math.ceil((a-s.size)/s.size)+1,onChange:function(e){return h((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}),Object(A.jsx)(Ze,{ref:R,import:function(e,t){return nt(e,t.separator,t.format)}})]})},ot=U.g().shape({nombre:U.j().required().min(4).max(100)}),st=function(){var e=Object(n.i)().id,t=Object(n.g)(),a=t.location.state,c=null===a||void 0===a?void 0:a.prestacion,i=Object(r.useRef)(!1),o=Object(C.h)({resolver:Object(B.a)(ot)}),s=o.handleSubmit,d=o.reset,b=o.register,h=o.setValue,x=o.formState,p=Object(T.b)(),v=Object(w.a)((function(t){var a=t.nombre;return e?at(parseInt(e),a):tt(a)}),{onSuccess:function(){d(),p.invalidateQueries("prestaciones.buscar"),i.current||t.replace("/clinica/prestaciones")}}),f=Object(m.a)(["verPrestacion",e],(function(){return et(parseInt(e))}),{enabled:!!e&&!c,refetchOnWindowFocus:!1,refetchOnReconnect:!1});Object(r.useEffect)((function(){var e,t;((null===(e=f.data)||void 0===e?void 0:e.data)||c)&&h("nombre",((null===(t=f.data)||void 0===t?void 0:t.data)||c).nombre)}),[f.data]);return Object(A.jsxs)(Oe.a,{show:!0,centered:!0,onHide:function(){t.replace("/clinica/prestaciones")},children:[Object(A.jsx)(Oe.a.Header,{children:e?"Editar":"Registrar"}),Object(A.jsx)(Oe.a.Body,{children:function(){var e,t,a;if(f.isFetching)return Object(A.jsx)(j.a,{animation:"border",children:"Cargando"});var r,n,c=f.error;return c?Object(A.jsx)(z.a,{variant:"danger",children:(null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||c.message}):Object(A.jsxs)(u.a,{id:"prestacion-form",onSubmit:s((function(e){v.mutate(e)})),children:["error"==v.status||"success"==v.status?Object(A.jsx)(z.a,{variant:v.isError?"danger":"success",children:v.isError?(null===(e=v.error.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||v.error.message:"Guardado"}):null,Object(A.jsxs)(u.a.Group,{children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!x.errors.nombre},b("nombre"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(a=x.errors.nombre)||void 0===a?void 0:a.message})]})]})}()}),Object(A.jsxs)(Oe.a.Footer,{children:[e?null:Object(A.jsxs)(O.a,{type:"submit",form:"prestacion-form",onClick:function(){i.current=!0},children:[v.isLoading&&i.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(A.jsxs)(O.a,{type:"submit",form:"prestacion-form",onClick:function(){i.current=!1},children:[v.isLoading&&!i.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]})},lt={index:function(e){return e.canAny([f.a.VER_MEDICOS,f.a.VER_MEDICOS_REGIONAL,f.a.REGISTRAR_MEDICOS,f.a.REGISTRAR_MEDICOS_REGIONAL])},register:function(e){return e.canAny([f.a.REGISTRAR_MEDICOS,f.a.REGISTRAR_MEDICOS_REGIONAL])},edit:function(e){return e.canAny([f.a.EDITAR_MEDICOS,f.a.EDITAR_MEDICOS_REGIONAL])},view:function(e){return e.canAny([f.a.VER_MEDICOS,f.a.VER_MEDICOS_REGIONAL])},baja:function(e){return e.canAny([f.a.BAJA_MEDICOS,f.a.BAJA_MEDICOS_REGIONAL])}},dt=function(e){var t,a,n,c,o,s,d,j,b,h=e.isInvalid,x=e.feedback,p=e.filterBy,v=e.onChange,f=Object(J.a)(e,["isInvalid","feedback","filterBy","onChange"]),g="especialidades.buscar",E=Object(T.b)(),R=Object(m.a)(g,(function(){return Fe("")}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1}),I=Object(w.a)((function(e){return Ue(e)}),{onSuccess:function(e){var t=e.data;E.invalidateQueries("especialidades.buscar",{inactive:!0}),E.setQueryData(g,(function(e){return Object(l.a)(Object(l.a)({},e),{},{data:Object(l.a)(Object(l.a)({},e.data),{},{records:[e.data.records,t]})})})),v&&v([t])}});Object(r.useEffect)((function(){var e;R.data&&(f.onLoad&&f.onLoad(null===(e=R.data)||void 0===e?void 0:e.data))}),[R.data]);var N=Object(r.useMemo)((function(){var e,t,a,r;return Array.isArray(null===(e=R.data)||void 0===e?void 0:e.data)?null===(a=R.data)||void 0===a?void 0:a.data:((null===(t=R.data)||void 0===t?void 0:t.data)&&console.error(null===(r=R.data)||void 0===r?void 0:r.data),[])}),[null===(t=R.data)||void 0===t?void 0:t.data]);return Object(A.jsxs)(F.a,{hasValidation:!0,children:[Object(A.jsx)($.a,Object(l.a)(Object(l.a)({clearButton:!0,allowNew:!0,emptyLabel:"No se encontraron resultados",align:"left"},f),{},{onChange:function(e){if(e.length){var t=e[0];if(t.customOption)return void I.mutate(t.nombre)}v&&v(e)},newSelectionPrefix:Object(A.jsx)("i",{children:"Crear nueva: "}),className:R.isError||h?"is-invalid":"",isInvalid:R.isError||h,filterBy:function(e,t){return(!t.text||Object(S.a)(e.nombre,t))&&(!p||"function"===typeof p&&p(e,t))},disabled:!R.data||I.isLoading,isLoading:R.isFetching||I.isLoading,options:N,labelKey:"nombre"})),Object(A.jsx)(F.a.Append,{children:Object(A.jsx)(O.a,{variant:R.isError?"outline-danger":"outline-secondary",onClick:function(){return R.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:(null===(a=R.error)||void 0===a||null===(n=a.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||(null===(o=R.error)||void 0===o?void 0:o.message)||(null===(s=I.error)||void 0===s||null===(d=s.response)||void 0===d||null===(j=d.data)||void 0===j?void 0:j.message)||(null===(b=I.error)||void 0===b?void 0:b.message)||x})]})},jt=function(e){var t=Object(C.h)({defaultValues:{tipo:"",especialidad:[]}}),a=t.control,r=t.handleSubmit,n=t.register,c=t.reset;return Object(A.jsxs)(u.a,{onSubmit:r((function(t){var a={};t.numCi&&(a.ci=t.numCi),t.compCi&&(a.ciComplemento=t.compCi),t.nombre&&(a.nombre=t.nombre),t.especialidad&&(a.especialidadId=t.especialidad.length&&t.especialidad[0].id),t.tipo&&(a.tipo=parseInt(t.tipo)),e.onFilter(a)})),children:[Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Tipo"}),Object(A.jsxs)("div",{children:[Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",value:"",label:"Todos"},n("tipo"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",value:"1",label:"Empleados"},n("tipo"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",value:"2",label:"Proveedores"},n("tipo")))]})]})}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,lg:3,children:[Object(A.jsx)(u.a.Label,{children:"N\xba Carnet"}),Object(A.jsx)(u.a.Control,Object(l.a)({},n("numCi")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:2,lg:1,children:[Object(A.jsx)(u.a.Label,{children:"Comp. Carnet"}),Object(A.jsx)(u.a.Control,Object(l.a)({},n("compCi")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:6,lg:8,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({},n("nombre")))]})]}),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Especialidad"}),Object(A.jsx)(C.a,{control:a,name:"especialidad",render:function(e){var t=e.field,a=(t.ref,t.value),r=Object(J.a)(t,["ref","value"]);return Object(A.jsx)(dt,Object(l.a)({id:"medicos-filter/especialidades",selected:a},r))}})]})}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",children:"Aplicar"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{variant:"secondary",onClick:function(){return c()},children:"Limpiar"})})]})]})},ut=function(e){var t=e.medico,a=e.queryKey,n=Object(D.b)("queryLoader"),c=Object(T.b)(),i=Object(w.a)((function(){return re(t.id,1==t.estado?2:1)}),{onSuccess:function(){n.close(),c.invalidateQueries("medicos.buscar",{inactive:!0}),c.setQueryData(a,(function(e){return console.log(e),Object(l.a)(Object(l.a)({},e),{},{data:Object(l.a)(Object(l.a)({},e.data),{},{records:e.data.records.map((function(e){return e==t?Object(l.a)(Object(l.a)({},e),{},{estado:1==t.estado?2:1,estadoText:1==t.estado?"Baja":"Alta"}):e}))})})}))}});return Object(r.useEffect)((function(){"loading"==i.status?n.open({state:"loading"}):"error"==i.status&&n.open({state:"error",error:i.error})}),[i.status]),Object(A.jsxs)(L.a,{style:{position:"initial"},children:[Object(A.jsx)(L.a.Toggle,{as:v.j,variant:"link",id:"dropdown-medicos-".concat(t.id)}),Object(A.jsxs)(L.a.Menu,{children:[Object(A.jsx)(G.b,{authorize:lt.edit,children:Object(A.jsx)(L.a.Item,{as:p.b,to:{pathname:"/clinica/medicos/".concat(t.id,"/editar"),state:{medico:t}},children:Object(A.jsx)("span",{className:"align-middle",children:"Editar"})})}),Object(A.jsx)(G.b,{authorize:lt.baja,children:Object(A.jsx)(L.a.Item,{className:"text-danger",href:"#",onClick:function(){i.mutate()},children:1==t.estado?"Baja":"Alta"})})]})]})},bt=function(){var e,t,a,c=Object(n.h)().pathname,o=Object(r.useState)({current:1,size:10}),s=Object(d.a)(o,2),g=s[0],E=s[1],R=Object(f.d)(),S=function(){var e={};return R.can(f.a.VER_MEDICOS)||R.can(f.a.VER_MEDICOS_REGIONAL)&&(e.regionalId=R.regionalId),e},I=Object(r.useState)(S),N=Object(d.a)(I,2),_=N[0],C=N[1],y=Object(r.useState)(!1),L=Object(d.a)(y,2),T=L[0],w=L[1],D=["medicos.buscar",_,g],G=Object(m.a)(D,(function(){return Y(_,g)}),{enabled:lt.view(R),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),M=(null===(e=G.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0;return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Medicos"}),Object(A.jsx)("div",{className:"d-flex my-2",children:Object(A.jsxs)(u.a.Row,{className:"ml-auto flex-nowrap",children:[Object(A.jsxs)(f.b,{authorize:lt.view,children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){G.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){w((function(e){return!e}))},children:Object(A.jsx)(i.e,{})})})]}),Object(A.jsx)(f.b,{authorize:lt.register,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsxs)(O.a,{as:p.b,to:"".concat(c,"/registrar"),className:"d-flex align-items-center",children:[Object(A.jsx)(i.g,{className:"mr-1"}),Object(A.jsx)("span",{children:"Nuevo"})]})})})]})}),Object(A.jsxs)(f.b,{authorize:lt.view,children:[Object(A.jsx)(h.a,{in:T,children:Object(A.jsx)("div",{children:Object(A.jsx)(jt,{onFilter:function(e){C(Object(l.a)(Object(l.a)({},e),S())),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:1})}))}})})}),Object(A.jsx)("div",{className:"d-flex",children:Object(A.jsx)("div",{className:"ml-auto mb-2",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:g.size,onChange:function(e){var t=e.target.value;E((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})}),Object(A.jsxs)(x.a,{responsive:!0,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"C.I."}),Object(A.jsx)("th",{children:"Nombre"}),Object(A.jsx)("th",{children:"Especialidad"}),Object(A.jsx)("th",{children:"Estado"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(G.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(G.isError){var e,t,a=G.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(G.data){var r=G.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:t+1}),Object(A.jsx)("td",{children:e.ciText}),Object(A.jsx)("td",{children:e.nombreCompleto}),Object(A.jsx)("td",{children:e.especialidad}),Object(A.jsx)("td",{children:e.estadoText}),Object(A.jsx)("td",{children:Object(A.jsx)(ut,{queryKey:D,medico:e})})]},e.id)}))}}()})]}),"success"===G.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(M," resultados")}),Object(A.jsx)(v.f,{current:g.current,total:Math.ceil((M-g.size)/g.size)+1,onChange:function(e){return E((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null]})]})},Ot=U.g().shape({tipo:U.f().label("tipo").oneOf([1,2]),ci:U.f().label("n\xfamero de carnet").typeError("El ${path} no es un numero valido"),ciComplemento:U.j().label("n\xfamero complemento").transform((function(e){return""===e?null:e})).trim().uppercase().nullable().notRequired().length(2).matches(/(?=.*[A-Z])(?=.*[0-9])/,"El complemento del carnet esta conformado por un numero y una letra. (No confundir con el expedido)"),apellidoPaterno:U.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:U.j().required("Debe proporcionar al menos un apellido"),otherwise:U.j().nullable().notRequired()}),apellidoMaterno:U.j().label("apellido materno").trim().emptyStringToNull().when("apellidoPaterno",{is:function(e){return!e},then:U.j().required("Debe proporcionar al menos un apellido"),otherwise:U.j().emptyStringToNull().notRequired()}),nombres:U.j().label("nombres").trim().required(),especialidad:U.b().length(1,"Debe indicar una especialidad"),regional:U.b().length(1,"Debe indicar una regional")},[["apellidoMaterno","apellidoPaterno"]]),ht=function(){var e,t,a,c,i,o,s,h,x,p,g=Object(n.i)().id,E=Object(n.g)(),R=Object(D.b)("queryLoader"),S=Object(f.d)(),I=Object(r.useState)([]),N=Object(d.a)(I,2),_=N[0],y=N[1],L=Object(r.useState)([]),G=Object(d.a)(L,2),M=G[0],P=G[1],V=Object(r.useRef)(!1),k=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(Ot),defaultValues:{especialidad:[],regional:[]}}),F=k.handleSubmit,U=k.register,q=k.clearErrors,X=k.setError,Q=k.setValue,H=k.watch,K=k.control,W=k.formState;console.log("Errors",H());var J=Object(T.b)(),$=Object(w.a)((function(e){return console.log(e),g?ae(parseInt(g),parseInt(e.tipo),{raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id):te(parseInt(e.tipo),{raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id)}),{onSuccess:function(){J.invalidateQueries("medicos.buscar"),V.current||E.replace("/clinica/medicos",{ignoreAuthorization:!0})},onError:function(e){var t;if(422==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var a,r=(null===(a=e.response)||void 0===a?void 0:a.data).errors;Object.keys(r).forEach((function(e){X(e,{type:"serverError",message:r[e]})}))}}}),Z=Object(m.a)(["medicos.cargar",g],(function(){return ee(parseInt(g))}),{enabled:!!g&&!(null===(e=E.location.state)||void 0===e?void 0:e.medico),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){R.close()},onError:function(e){R.open({state:"error",error:e})}}),Y=(null===(t=Z.data)||void 0===t?void 0:t.data)||(null===(a=E.location.state)||void 0===a?void 0:a.medico);return Object(r.useEffect)((function(){Y&&(Q("tipo",String(Y.tipo)),Q("ci",String(Y.ci.raiz)),Q("ciComplemento",Y.ci.complemento),Q("apellidoPaterno",Y.apellidoPaterno),Q("apellidoMaterno",Y.apellidoMaterno),Q("nombres",Y.nombres))}),[Y]),Object(r.useEffect)((function(){Z.isFetching&&R.open({state:"loading"})}),[Z.isFetching]),Object(r.useEffect)((function(){Y&&_.length&&Q("regional",_.filter((function(e){return e.id==Y.regionalId})))}),[Y,_]),Object(r.useEffect)((function(){Y&&M.length&&Q("especialidad",M.filter((function(e){return e.id==Y.especialidadId})))}),[Y,M]),Object(A.jsxs)(u.a,{id:"medico-form",onSubmit:F((function(e){$.mutate(e)})),children:[Object(A.jsx)("h1",{style:{fontSize:"2rem"},children:g?"Actualizar":"Registrar Medico"}),"error"==$.status||"success"==$.status?Object(A.jsx)(z.a,{variant:$.isError?"danger":"success",children:$.isError?(null===(c=$.error.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||$.error.message:"Guardado"}):null,Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Tipo"}),Object(A.jsxs)("div",{children:[Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",value:"1",label:"Empleado"},U("tipo"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"radio",value:"2",label:"Proveedor"},U("tipo")))]})]})}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:4,xs:8,children:[Object(A.jsx)(u.a.Label,{children:"Carnet de identidad"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!W.errors.ci},U("ci"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(o=W.errors.ci)||void 0===o?void 0:o.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:2,xs:4,children:[Object(A.jsx)(u.a.Label,{children:"Complemento"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!W.errors.ciComplemento},U("ciComplemento"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(s=W.errors.ciComplemento)||void 0===s?void 0:s.message})]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Paterno"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!W.errors.apellidoPaterno},U("apellidoPaterno"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(h=W.errors.apellidoPaterno)||void 0===h?void 0:h.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Materno"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!W.errors.apellidoMaterno},U("apellidoMaterno"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(x=W.errors.apellidoMaterno)||void 0===x?void 0:x.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Nombres"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!W.errors.nombres},U("nombres"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(p=W.errors.nombres)||void 0===p?void 0:p.message})]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:8,children:[Object(A.jsx)(u.a.Label,{children:"Especialidad"}),Object(A.jsx)(C.a,{name:"especialidad",control:K,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(dt,{id:"medicos-form/especialidades-typeahead",onLoad:function(e){return P(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Regional"}),Object(A.jsx)(C.a,{name:"regional",control:K,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(v.i,{id:"medicos-form/regionales-typeahead",onLoad:function(e){return y(e)},filterBy:function(e){return S.can(f.a.REGISTRAR_MEDICOS)||S.regionalId==e.id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,className:r.error?"is-invalid":"",isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),Object(A.jsxs)("div",{className:"m-n1",children:[g?null:Object(A.jsxs)(O.a,{className:"m-1",type:"submit",onClick:function(){V.current=!0},children:[$.isLoading&&V.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(A.jsxs)(O.a,{className:"m-1",type:"submit",onClick:function(){V.current=!1},children:[$.isLoading&&!V.current?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]}),Object(A.jsx)(O.a,{className:"m-1",variant:"secondary",type:"reset",onClick:function(){Q("regional",[]),Q("especialidad",[]),q()},children:"Limpiar"})]})]})},xt={index:function(e){return e.canAny([f.a.VER_PROVEEDORES,f.a.VER_PROVEEDORES_REGIONAL,f.a.REGISTRAR_PROVEEDORES,f.a.REGISTRAR_PROVEEDORES_REGIONAL])},register:function(e){return e.canAny([f.a.REGISTRAR_PROVEEDORES,f.a.REGISTRAR_PROVEEDORES_REGIONAL])},edit:function(e){return e.canAny([f.a.EDITAR_PROVEEDORES,f.a.EDITAR_PROVEEDORES_REGIONAL])},view:function(e){return e.canAny([f.a.VER_PROVEEDORES,f.a.VER_PROVEEDORES_REGIONAL])},baja:function(e){return e.canAny([])}},mt=function(e){var t=Object(C.h)({defaultValues:{prestaciones:[]}}),a=t.control,r=t.handleSubmit,n=t.register,c=t.reset;return Object(A.jsxs)(u.a,{onSubmit:r((function(t){var a={tipos:[]};t.tipos.medicos&&a.tipos.push(1),t.tipos.empresas&&a.tipos.push(2),a.tipos.length||delete a.tipos,t.nombre&&(a.nombre=t.nombre),t.prestaciones.length&&(a.prestacionesId=t.prestaciones.map((function(e){return e.id}))),console.log(a),e.onFilter(a)})),children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,xs:"auto",children:[Object(A.jsx)(u.a.Label,{children:"Tipo"}),Object(A.jsxs)("div",{children:[Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"checkbox",label:"M\xe9dicos"},n("tipos.medicos"))),Object(A.jsx)(u.a.Check,Object(l.a)({inline:!0,type:"checkbox",label:"Empresas"},n("tipos.empresas")))]})]}),Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({},n("nombre")))]})]}),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Prestaciones contratadas"}),Object(A.jsx)(C.a,{control:a,name:"prestaciones",render:function(e){var t=e.field,a=(t.ref,t.value),r=Object(J.a)(t,["ref","value"]);return Object(A.jsx)(Le,Object(l.a)({id:"proveedores-filter/prestaciones",multiple:!0,selected:a},r))}})]})}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",children:"Aplicar"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{variant:"secondary",onClick:function(){return c()},children:"Limpiar"})})]})]})},pt=function(e){var t=e.proveedor;return Object(A.jsxs)(L.a,{style:{position:"initial"},children:[Object(A.jsx)(L.a.Toggle,{as:v.j,variant:"link",id:"dropdown-proveedores-".concat(t.id)}),Object(A.jsxs)(L.a.Menu,{children:[Object(A.jsx)(G.b,{authorize:xt.view,children:Object(A.jsx)(L.a.Item,{as:p.b,to:{pathname:"/clinica/proveedores/".concat(t.id),state:{proveedor:t}},children:Object(A.jsx)("span",{className:"align-middle",children:"Ver"})})}),Object(A.jsx)(G.b,{authorize:xt.edit,children:Object(A.jsx)(L.a.Item,{as:p.b,to:{pathname:"/clinica/proveedores/".concat(t.id,"/editar"),state:{proveedor:t}},children:Object(A.jsx)("span",{className:"align-middle",children:"Editar"})})})]})]})},vt=function(){var e,t,a,c=Object(n.h)().pathname,o=Object(r.useState)({current:1,size:10}),s=Object(d.a)(o,2),g=s[0],E=s[1],R=Object(f.d)(),S=function(){var e={};return R.can(f.a.VER_PROVEEDORES)||R.can(f.a.VER_PROVEEDORES_REGIONAL)&&(e.regionalId=R.regionalId),e},I=Object(r.useState)(S),N=Object(d.a)(I,2),_=N[0],C=N[1],y=Object(r.useState)(!1),L=Object(d.a)(y,2),T=L[0],w=L[1],D=["proveedores.buscar",_,g],G=Object(m.a)(D,(function(){return ie.buscar(_,g)}),{enabled:xt.view(R),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),M=(null===(e=G.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0;return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Proveedores"}),Object(A.jsx)("div",{className:"d-flex my-2",children:Object(A.jsxs)(u.a.Row,{className:"ml-auto flex-nowrap",children:[Object(A.jsxs)(f.b,{authorize:xt.view,children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){G.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){w((function(e){return!e}))},children:Object(A.jsx)(i.e,{})})})]}),Object(A.jsx)(f.b,{authorize:xt.register,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsxs)(O.a,{as:p.b,to:"".concat(c,"/registrar"),className:"d-flex align-items-center",children:[Object(A.jsx)(i.g,{className:"mr-1"}),Object(A.jsx)("span",{children:"Nuevo"})]})})})]})}),Object(A.jsxs)(f.b,{authorize:xt.view,children:[Object(A.jsx)("div",{className:"mb-2",children:Object(A.jsx)(h.a,{in:T,children:Object(A.jsx)("div",{children:Object(A.jsx)(mt,{onFilter:function(e){C(Object(l.a)(Object(l.a)({},S()),e)),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:1})}))}})})})}),Object(A.jsx)("div",{className:"d-flex",children:Object(A.jsx)("div",{className:"ml-auto mb-2",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:g.size,onChange:function(e){var t=e.target.value;E((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})}),Object(A.jsxs)(x.a,{responsive:!0,children:[Object(A.jsx)("thead",{className:"text-center",children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Nombre"}),Object(A.jsx)("th",{style:{width:1},children:"Tipo"}),Object(A.jsx)("th",{style:{width:1}})]})}),Object(A.jsx)("tbody",{children:function(){if(G.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(G.isError){var e,t,a=G.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(G.data){var r=G.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1,lineHeight:"26px"},children:t+1}),Object(A.jsx)("td",{style:{lineHeight:"26px"},children:e.nombre||e.nombreCompleto}),Object(A.jsx)("td",{style:{lineHeight:"26px"},children:e.tipo}),Object(A.jsx)("td",{children:Object(A.jsx)(pt,{proveedor:e,queryKey:D})})]},e.id)}))}}()})]}),"success"===G.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(M," resultados")}),Object(A.jsx)(v.f,{current:g.current,total:Math.ceil((M-g.size)/g.size)+1,onChange:function(e){return E((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null]})]})},ft=a(645),gt=a(641),Et=a(612),Rt=a(625),St=a(610),It=a(611),Nt=a(57),_t=a.n(Nt),Ct={index:function(e){return e.canAny([f.a.VER_CONTRATOS_PROVEEDOR,f.a.VER_CONTRATOS_PROVEEDOR_REGIONAL,f.a.REGISTRAR_CONTRATOS_PROVEEDOR,f.a.REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL])},register:function(e){return e.canAny([f.a.REGISTRAR_CONTRATOS_PROVEEDOR,f.a.REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL])},consumir:function(e){return e.canAny([f.a.CONSUMIR_CONTRATOS_PROVEEDOR,f.a.CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL])},extender:function(e){return e.canAny([f.a.EXTENDER_CONTRATOS_PROVEEDOR,f.a.EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL])},view:function(e){return e.canAny([f.a.VER_CONTRATOS_PROVEEDOR,f.a.VER_CONTRATOS_PROVEEDOR_REGIONAL])},anular:function(e){return e.canAny([f.a.ANULAR_CONTRATOS_PROVEEDOR,f.a.ANULAR_CONTRATOS_PROVEEDOR_REGIONAL])}},At=new(function(){function e(){Object(ne.a)(this,e)}return Object(ce.a)(e,[{key:"buscar",value:function(e,t,a){return R.apiClient.get("proveedores/".concat(e,"/contratos"),{params:Object(S.c)({filter:t,page:a})})}},{key:"cargar",value:function(e,t){return R.apiClient.get("proveedores/".concat(e,"/contratos/").concat(t))}},{key:"registrar",value:function(e,t){return R.apiClient.post("proveedores/".concat(e,"/contratos"),Object(S.c)(t))}},{key:"consumir",value:function(e,t){return R.apiClient.put("proveedores/".concat(e,"/contratos/").concat(t,"/consumir"))}},{key:"extender",value:function(e,t){return R.apiClient.put("proveedores/".concat(e,"/contratos/").concat(t,"/extender"))}},{key:"anular",value:function(e,t){return R.apiClient.put("proveedores/".concat(e,"/contratos/").concat(t,"/anular"))}}]),e}()),yt=function(e){var t=Object(C.h)(),a=t.handleSubmit,r=t.register,n=t.reset;return Object(A.jsxs)(u.a,{onSubmit:a((function(t){var a={};t.desde&&(a.desde=t.desde),t.hasta&&(a.hasta=t.hasta),e.onApply(a)})),children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Desde"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date"},r("desde")))]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Hasta"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date"},r("hasta")))]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",children:"Aplicar"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{variant:"secondary",onClick:function(){return n()},children:"Limpiar"})})]})]})},Lt=function(e){var t=e.contrato,a=e.queryKey,r=Object(n.i)().id,c=Object(D.b)("queryLoader"),i=Object(T.b)(),o=Object(w.a)("contratos.extender",(function(){return At.extender(parseInt(r),t.id)}),{onSuccess:function(){i.invalidateQueries(a),c.close()},onError:function(e){c.open({state:"error",error:e})}}),s=Object(w.a)("contratos.consumir",(function(){return At.consumir(parseInt(r),t.id)}),{onSuccess:function(){i.invalidateQueries(a),c.close()},onError:function(e){c.open({state:"error",error:e})}}),l=Object(w.a)("contratos.anular",(function(){return At.anular(parseInt(r),t.id)}),{onSuccess:function(){i.invalidateQueries(a),c.close()},onError:function(e){c.open({state:"error",error:e})}});return Object(A.jsxs)(L.a,{style:{position:"initial"},children:[Object(A.jsx)(L.a.Toggle,{as:v.j,variant:"link",id:"dropdown-contratos-proveedor-".concat(t.id)}),Object(A.jsxs)(L.a.Menu,{children:[Object(A.jsx)(G.b,{authorize:Ct.view,children:Object(A.jsx)(L.a.Item,{as:p.b,to:{pathname:"/clinica/proveedores/".concat(r,"/contratos/").concat(t.id),state:{contrato:t}},children:Object(A.jsx)("span",{className:"align-middle",children:"Ver"})})}),Object(A.jsx)(G.b,{authorize:Ct.extender,children:Object(A.jsx)(L.a.Item,{onClick:function(){c.open({state:"loading"}),o.mutate()},children:Object(A.jsx)("span",{className:"align-middle",children:"Extender"})})}),Object(A.jsx)(G.b,{authorize:Ct.consumir,children:Object(A.jsx)(L.a.Item,{onClick:function(){c.open({state:"loading"}),s.mutate()},children:Object(A.jsx)("span",{className:"align-middle",children:"Consumir"})})}),Object(A.jsx)(G.b,{authorize:Ct.anular,children:Object(A.jsx)(L.a.Item,{onClick:function(){c.open({state:"loading"}),l.mutate()},children:Object(A.jsx)("span",{className:"align-middle",children:"Anular"})})})]})]})},Tt=function(){var e,t,a,c=Object(n.i)().id,o=(Object(n.h)().pathname,Object(r.useState)({current:1,size:10})),s=Object(d.a)(o,2),g=s[0],E=s[1],R=Object(f.d)(),S=Object(r.useState)((function(){return{}})),I=Object(d.a)(S,2),N=I[0],_=I[1],C=Object(r.useState)(!1),y=Object(d.a)(C,2),L=y[0],T=y[1],w=["contratos.buscar",c,N,g],D=Object(m.a)(w,(function(){return At.buscar(parseInt(c),N,g)}),{enabled:Ct.view(R),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),G=(null===(e=D.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0;return Object(A.jsxs)("div",{className:"px-1",children:[Object(A.jsx)("div",{className:"d-flex my-2",children:Object(A.jsxs)(u.a.Row,{className:"ml-auto flex-nowrap",children:[Object(A.jsxs)(f.b,{authorize:Ct.view,children:[Object(A.jsx)(b.a,{className:"pr-0",xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){D.refetch()},children:Object(A.jsx)(i.j,{})})}),Object(A.jsx)(b.a,{className:"pr-0",xs:"auto",children:Object(A.jsx)(O.a,{onClick:function(){T((function(e){return!e}))},children:Object(A.jsx)(i.e,{})})})]}),Object(A.jsx)(f.b,{authorize:Ct.register,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsxs)(O.a,{as:p.b,to:"/clinica/proveedores/".concat(c,"/contratos/registrar"),className:"d-flex align-items-center",children:[Object(A.jsx)(i.g,{className:"mr-2"}),Object(A.jsx)("span",{children:"Nuevo"})]})})})]})}),Object(A.jsxs)(f.b,{authorize:Ct.view,children:[Object(A.jsx)(h.a,{in:L,children:Object(A.jsx)("div",{children:Object(A.jsx)(yt,{onApply:function(e){_(e),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:1})}))}})})}),Object(A.jsx)("div",{className:"d-flex",children:Object(A.jsx)("div",{className:"ml-auto mb-2",children:Object(A.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(A.jsx)("span",{children:"Mostrar"}),Object(A.jsxs)(u.a.Control,{className:"mx-2",as:"select",value:g.size,onChange:function(e){var t=e.target.value;E((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:parseInt(t)})}))},children:[Object(A.jsx)("option",{value:10,children:"10"}),Object(A.jsx)("option",{value:20,children:"20"}),Object(A.jsx)("option",{value:30,children:"30"}),Object(A.jsx)("option",{value:50,children:"50"}),Object(A.jsx)("option",{value:100,children:"100"})]}),Object(A.jsx)("span",{children:"filas"})]})})}),Object(A.jsxs)(x.a,{children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{style:{width:1},children:"#"}),Object(A.jsx)("th",{children:"Inicio"}),Object(A.jsx)("th",{children:"Fin"}),Object(A.jsx)("th",{children:"Extensi\xf3n"}),Object(A.jsx)("th",{children:"Estado"}),Object(A.jsx)("th",{})]})}),Object(A.jsx)("tbody",{children:function(){if(D.isFetching)return Object(A.jsx)("tr",{children:Object(A.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(A.jsx)(j.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(D.data){var r=D.data.data.records;return 0==r.length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:t+1}),Object(A.jsx)("td",{children:e.inicio}),Object(A.jsx)("td",{children:e.fin||"Indefinido"}),Object(A.jsx)("td",{children:e.extension}),Object(A.jsx)("td",{children:e.estadoText}),Object(A.jsx)("td",{children:Object(A.jsx)(Lt,{contrato:e,queryKey:w})})]},e.id)}))}}()})]}),"success"===D.status?Object(A.jsxs)("div",{className:"d-flex flex-row",children:[Object(A.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(G," resultados")}),Object(A.jsx)(v.f,{current:g.current,total:Math.ceil((G-g.size)/g.size)+1,onChange:function(e){return E((function(t){return Object(l.a)(Object(l.a)({},t),{},{current:e})}))}})]}):null]})]})},wt=function(){var e,t,a=Object(n.i)(),c=a.idProveedor,i=a.id,o=Object(D.b)("queryLoader"),s=Object(m.a)(["contratos.cargar",c,i],(function(){return At.cargar(parseInt(c),parseInt(i))}),{refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){o.close()},onError:function(e){o.open({state:"error",error:e})}}),l=null===(e=s.data)||void 0===e?void 0:e.data;return Object(r.useEffect)((function(){s.isFetching&&o.open({state:"loading"})}),[s.isFetching]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Contrato"}),Object(A.jsx)(x.a,{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Inicio"}),Object(A.jsx)("td",{children:null===l||void 0===l?void 0:l.inicio})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Fin"}),Object(A.jsx)("td",{children:l&&(l.fin||"Indefinido")})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Extensi\xf3n"}),Object(A.jsx)("td",{children:l&&(l.extension||"Sin extension")})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Estado"}),Object(A.jsx)("td",{children:null===l||void 0===l?void 0:l.estadoText})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Prestaciones"}),Object(A.jsx)("td",{children:Object(A.jsx)("ul",{children:null===l||void 0===l||null===(t=l.prestaciones)||void 0===t?void 0:t.map((function(e){return Object(A.jsx)("li",{children:e.nombre})}))})})]})]})})]})},Dt=a(343),Gt=function(){var e,t=Object(C.i)(),a=(t.register,t.control),r=(t.trigger,t.formState.errors),n=t.watch,c=Object(C.g)({name:"prestaciones",control:a}),o=c.fields,s=c.append,l=c.remove;return Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Prestaciones contratadas"}),Object(A.jsx)(u.a.Row,{children:Object(A.jsx)(u.a.Group,{as:b.a,xs:12,children:Object(A.jsx)(Le,{id:"proveedor-contrato/prestaciones",filterBy:function(e){return!n("prestaciones").some((function(t){var a;return(null===(a=t.prestacion)||void 0===a?void 0:a.id)==e.id}))},selected:[],onChange:function(e){e.length&&s({prestacion:e[0]})}})})}),Object(A.jsxs)("div",{className:"mb-3",style:{maxHeight:240,overflowY:"auto"},children:[Object(A.jsx)(Dt.a,{className:r.prestaciones?"is-invalid":"",children:o.map((function(e,t){return Object(A.jsx)(Dt.a.Item,{className:"py-1 px-2",children:Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{className:"d-flex align-items-center",children:e.prestacion.nombre}),Object(A.jsx)(b.a,{className:"d-flex align-items-center",xs:"auto",children:Object(A.jsx)(O.a,{variant:"danger",onClick:function(){return l(t)},children:Object(A.jsx)(i.l,{})})})]})},e.id)}))}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(e=r.prestaciones)||void 0===e?void 0:e.message})]})]})},Mt=U.g().shape({inicio:U.c().label("fecha de inicio").emptyStringTo().typeError("No es una fecha valida").required(),fin:U.c().label("fecha de finalizacion").emptyStringTo(null).typeError("No es una fecha valida").min(U.h("inicio"),"La fecha de finalizacion debe ser mayor a la fecha de inicio").nullable().notRequired(),prestaciones:U.b().of(U.g().shape({prestacion:U.g().required()})).min(1,"Debe seleccionar al menos una prestaci\xf3n")}),Pt=function(e){var t,a,r,c,i=e.onSubmit,o=Object(n.i)().idProveedor,s=Object(n.g)(),d=(Object(f.d)(),Object(C.h)({mode:"onBlur",resolver:Object(B.a)(Mt),defaultValues:{prestaciones:[]}})),h=d.handleSubmit,x=d.register,m=d.formState,p=(d.control,d.watch,m.errors);console.log("Errors",p);var v=Object(T.b)(),g=Object(w.a)((function(e){var t;return At.registrar(parseInt(o),{inicio:e.inicio.toISOString().split("T")[0],fin:null===(t=e.fin)||void 0===t?void 0:t.toISOString().split("T")[0],prestacionIds:e.prestaciones.map((function(e){return e.prestacion.id}))})}),{onSuccess:function(e){e.data;v.invalidateQueries("contratos.buscar"),s.replace("/clinica/proveedores/".concat(parseInt(o)),{tab:"contratos"})}});return Object(A.jsx)(C.b,Object(l.a)(Object(l.a)({},d),{},{children:Object(A.jsxs)(u.a,{id:"proveedor-contrato-form",onSubmit:h(i||function(e){console.log("Values",e),g.mutate(e)}),children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Contrato"}),"error"==g.status||"success"==g.status?Object(A.jsx)(z.a,{variant:g.isError?"danger":"success",children:g.isError?(null===(t=g.error.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||g.error.message:"Guardado"}):null,Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:6,children:[Object(A.jsx)(u.a.Label,{children:"Inicio"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date",isInvalid:!!m.errors.inicio},x("inicio"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(r=m.errors.inicio)||void 0===r?void 0:r.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:6,children:[Object(A.jsx)(u.a.Label,{children:"Fin"}),Object(A.jsx)(u.a.Control,Object(l.a)({type:"date",isInvalid:!!m.errors.fin},x("fin"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(c=m.errors.fin)||void 0===c?void 0:c.message})]})]}),Object(A.jsx)(u.a.Row,{children:Object(A.jsx)(b.a,{children:Object(A.jsx)(Gt,{})})}),i?null:Object(A.jsxs)(O.a,{type:"submit",children:[g.isLoading?Object(A.jsx)(j.a,{className:"mr-1",animation:"border",size:"sm"}):null,Object(A.jsx)("span",{className:"align-middle",children:"Guardar"})]})]})}))},Vt=a(285),kt=a(286),zt=_t.a.icon({iconUrl:Vt.a,shadowUrl:kt.a,iconSize:[25,41],iconAnchor:[12,41]});_t.a.Marker.prototype.options.icon=zt;var Ft=function(){var e,t=Object(n.h)(),a=(t.pathname,t.state),c=Object(n.i)().id,i=(Object(f.d)(),Object(D.b)("queryLoader")),o=Object(m.a)(["cargar",c],(function(){return ie.cargar(parseInt(c))}),{enabled:!(null===a||void 0===a?void 0:a.proveedor),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){i.close()},onError:function(e){i.open({state:"error",error:e})}}),s=(null===(e=o.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.proveedor);Object(r.useEffect)((function(){o.isFetching&&i.open({state:"loading"})}),[o.isFetching]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Proveedor"}),Object(A.jsxs)("div",{id:"general-info",children:[Object(A.jsx)(x.a,{children:function(){var e,t;return Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Tipo"}),Object(A.jsx)("td",{children:1==(null===s||void 0===s?void 0:s.tipoId)?"M\xe9dico":2==(null===s||void 0===s?void 0:s.tipoId)?"Empresa":null})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:"1px"},children:"NIT"}),Object(A.jsx)("td",{children:null===s||void 0===s?void 0:s.nit})]}),1==(null===s||void 0===s?void 0:s.tipoId)?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Carnet de identidad"}),Object(A.jsx)("td",{children:null===s||void 0===s?void 0:s.ciText})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Nombre"}),Object(A.jsx)("td",{children:null===s||void 0===s?void 0:s.nombreCompleto})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Especialidad"}),Object(A.jsx)("td",{children:null===s||void 0===s||null===(e=s.especialidad)||void 0===e?void 0:e.nombre})]})]}):2==(null===s||void 0===s?void 0:s.tipoId)?Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Nombre"}),Object(A.jsx)("td",{children:null===s||void 0===s?void 0:s.nombre})]}):null,Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Regional"}),Object(A.jsx)("td",{children:null===s||void 0===s||null===(t=s.regional)||void 0===t?void 0:t.nombre})]})]})}()}),s?Object(A.jsx)(u.a.Row,{children:Object(A.jsx)(f.b,{authorize:xt.edit,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{as:p.b,to:{pathname:"/clinica/proveedores/".concat(s.id,"/editar"),state:{proveedor:s}},children:"Editar"})})})}):null]}),Object(A.jsxs)(ft.a,{className:"my-2",defaultActiveKey:null===a||void 0===a?void 0:a.tab,children:[Object(A.jsxs)(gt.a,{eventKey:"informacion-contacto",title:"Informacion de Contacto",children:[function(){var e,t,a,r,n,c;if(!s)return null;var i=s.ubicacion&&[s.ubicacion.latitud,s.ubicacion.longitud];return Object(A.jsxs)(Ve.a,{className:"py-3",children:[Object(A.jsx)(b.a,{children:Object(A.jsx)(x.a,{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Departamento"}),Object(A.jsx)("td",{children:null===(e=s.municipio)||void 0===e||null===(t=e.provincia)||void 0===t||null===(a=t.departamento)||void 0===a?void 0:a.nombre})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Provincia"}),Object(A.jsx)("td",{children:null===(r=s.municipio)||void 0===r||null===(n=r.provincia)||void 0===n?void 0:n.nombre})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Municipio"}),Object(A.jsx)("td",{children:null===(c=s.municipio)||void 0===c?void 0:c.nombre})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Direcci\xf3n"}),Object(A.jsx)("td",{children:s.direccion})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Tel\xe9fono 1"}),Object(A.jsx)("td",{children:s.telefono1})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Tel\xe9fono 2"}),Object(A.jsx)("td",{children:s.telefono2})]})]})})}),Object(A.jsx)(b.a,{children:Object(A.jsxs)(Et.a,{center:i,zoom:14,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,style:{height:"100%"},children:[Object(A.jsx)(Rt.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i?Object(A.jsx)(St.a,{position:i,children:Object(A.jsx)(It.a,{children:Object(A.jsx)("a",{href:"geo:".concat(i.join(",")),children:"Abrir con"})})}):null]})})]})}(),s?Object(A.jsx)(u.a.Row,{children:Object(A.jsx)(f.b,{authorize:xt.edit,children:Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{as:p.b,to:{pathname:"/clinica/proveedores/".concat(s.id,"/editar-contacto"),state:{proveedor:s}},children:"Editar"})})})}):null]}),Object(A.jsx)(gt.a,{eventKey:"contratos",title:"Contratos",children:Object(A.jsx)(Tt,{})})]})]})},Bt=a(636),Ut=a.n(Bt),qt=U.g().shape({nit:U.f().label("NIT").emptyStringTo().typeError("El ${path} no es un numero valido").required(),nombre:U.j().required().max(150),regional:U.b().length(1,"Debe indicar una regional")}),Xt=function(e){var t,a,c=e.proveedor,i=e.onSubmit,o=Object(n.i)().id,s=Object(n.g)(),h=Object(f.d)(),x=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(qt),defaultValues:{tipo:2,nit:null===c||void 0===c?void 0:c.nit,nombre:null===c||void 0===c?void 0:c.nombre,regional:[]}}),m=x.control,p=x.formState,g=x.handleSubmit,E=x.setValue,R=x.register,S=p.errors,I=Object(r.useState)([]),N=Object(d.a)(I,2),_=N[0],y=N[1],L=Object(T.b)(),D=Object(w.a)((function(e){return ie.actualizar(parseInt(o),{tipoId:e.tipo,nit:e.nit,nombre:e.nombre,regionalId:e.regional[0].id})}),{onSuccess:function(e){var t=e.data;L.invalidateQueries("proveedor.buscar"),s.replace("/clinica/proveedores/".concat(t.id))}});return Object(r.useEffect)((function(){c&&_.length&&E("regional",_.filter((function(e){return e.id==c.regionalId})))}),[c,_]),Object(A.jsxs)(u.a,{id:"proveedor-form",onSubmit:g(i||function(e){D.mutate(e)}),children:[Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"NIT"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!S.nit},R("nit"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(t=S.nit)||void 0===t?void 0:t.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:8,children:[Object(A.jsx)(u.a.Label,{children:"Nombre"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!S.nombre},R("nombre"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(a=S.nombre)||void 0===a?void 0:a.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Regional"}),Object(A.jsx)(C.a,{name:"regional",control:m,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(v.i,{id:"proveedor-form/regionales-typeahead",onLoad:function(e){return y(e)},filterBy:function(e){return!!h.can(f.a.REGISTRAR_PROVEEDORES)||(!(!h.can(f.a.REGISTRAR_PROVEEDORES_REGIONAL)||h.regionalId!=e.id)||(!(!o||!h.can(f.a.EDITAR_PROVEEDORES))||!(!o||!h.can(f.a.EDITAR_PROVEEDORES_REGIONAL)||h.regionalId!=e.id)))},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),i?null:Object(A.jsxs)(O.a,{type:"submit",children:[D.isLoading?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},Qt=U.g().shape({nit:U.f().label("NIT").emptyStringToNull().typeError("El ${path} no es un numero valido").nullable().notRequired(),ci:U.f().label("n\xfamero de carnet").emptyStringToNull().typeError("El ${path} no es un numero valido").nullable().required(),ciComplemento:U.j().transform((function(e){return""===e?null:e})).trim().uppercase().nullable().notRequired().length(2).matches(/[0-1A-Z]/),apellidoPaterno:U.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:U.j().required("Debe proporcionar al menos un apellido").max(50)}),apellidoMaterno:U.j().label("apellido materno").trim().when("apellidoPaterno",{is:function(e){return!e},then:U.j().required("Debe proporcionar al menos un apellido").max(50)}),nombres:U.j().label("nombres").trim().required().label("'Nombres'").max(50),especialidad:U.b().length(1,"Debe indicar una especialidad"),regional:U.b().length(1,"Debe indicar una regional")},[["apellidoMaterno","apellidoPaterno"]]),Ht=function(e){var t,a,c,i,o,s,h,x,m=e.proveedor,p=e.onSubmit,g=Object(n.i)().id,E=Object(n.g)(),R=Object(f.d)(),S=Object(r.useState)([]),I=Object(d.a)(S,2),N=I[0],_=I[1],y=Object(r.useState)([]),L=Object(d.a)(y,2),D=L[0],G=L[1],M=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(Qt),defaultValues:{tipo:1,nit:null===m||void 0===m?void 0:m.nit,ci:null===m||void 0===m?void 0:m.ci,ciComplemento:null===m||void 0===m?void 0:m.ciComplemento,apellidoPaterno:(null===m||void 0===m?void 0:m.apellidoPaterno)||"",apellidoMaterno:(null===m||void 0===m?void 0:m.apellidoMaterno)||"",nombres:(null===m||void 0===m?void 0:m.nombres)||"",especialidad:[],regional:[]}}),P=M.handleSubmit,V=M.register,k=M.setValue,F=M.control,U=M.formState,q=M.watch,X=U.errors,Q=Object(T.b)(),H=Object(w.a)((function(e){return ie.actualizar(parseInt(g),{tipoId:1,nit:e.nit,ci:e.ci,ciComplemento:e.ciComplemento,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombres:e.nombres,especialidadId:e.especialidad[0].id,regionalId:e.regional[0].id})}),{onSuccess:function(e){var t=e.data;Q.invalidateQueries("proveedor.buscar"),E.replace("/clinica/proveedores/".concat(t.id))}});return Object(r.useEffect)((function(){m&&N.length&&k("especialidad",N.filter((function(e){return e.id==m.especialidadId})))}),[m,N]),Object(r.useEffect)((function(){m&&D.length&&k("regional",D.filter((function(e){return e.id==m.regionalId})))}),[m,D]),console.log("Errors",X,q()),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(u.a,{id:"proveedor-form",onSubmit:P(p||function(e){H.mutate(e)}),children:["error"==H.status||"success"==H.status?Object(A.jsx)(z.a,{variant:H.isError?"danger":"success",children:H.isError?(null===(t=H.error.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||H.error.message:"Guardado"}):null,Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:4,xs:8,children:[Object(A.jsx)(u.a.Label,{children:"NIT"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.nit},V("nit"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(c=X.nit)||void 0===c?void 0:c.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,xs:8,children:[Object(A.jsx)(u.a.Label,{children:"Carnet de identidad"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.ci},V("ci"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(i=X.ci)||void 0===i?void 0:i.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:2,xs:4,children:[Object(A.jsx)(u.a.Label,{children:"Complemento"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.ciComplemento},V("ciComplemento"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(o=X.ciComplemento)||void 0===o?void 0:o.message})]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Paterno"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.apellidoPaterno},V("apellidoPaterno"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(s=X.apellidoPaterno)||void 0===s?void 0:s.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Apellido Materno"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.apellidoMaterno},V("apellidoMaterno"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(h=X.apellidoMaterno)||void 0===h?void 0:h.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Nombres"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.nombres},V("nombres"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(x=X.nombres)||void 0===x?void 0:x.message})]})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,md:8,children:[Object(A.jsx)(u.a.Label,{children:"Especialidad"}),Object(A.jsx)(C.a,{name:"especialidad",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(dt,{id:"medicos-form/especialidades-typeahead",align:"left",onLoad:function(e){return _(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,className:U.errors.especialidad?"is-invalid":"",isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]}),Object(A.jsxs)(u.a.Group,{as:b.a,md:4,children:[Object(A.jsx)(u.a.Label,{children:"Regional"}),Object(A.jsx)(C.a,{name:"regional",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(v.i,{id:"proveedor-form/regionales-typeahead",onLoad:function(e){return G(e)},filterBy:function(e){return!!R.can(f.a.REGISTRAR_PROVEEDORES)||(!(!R.can(f.a.REGISTRAR_PROVEEDORES_REGIONAL)||R.regionalId!=e.id)||(!(!g||!R.can(f.a.EDITAR_PROVEEDORES))||!(!g||!R.can(f.a.EDITAR_PROVEEDORES_REGIONAL)||R.regionalId!=e.id)))},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),p?null:Object(A.jsxs)(O.a,{type:"submit",children:[H.isLoading?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})})},Kt=function(e){var t,a,c,i=Object(r.useState)(0),o=Object(d.a)(i,2),s=o[0],l=o[1],j=Object(n.i)().id,O=Object(n.g)(),h=Object(D.b)("queryLoader"),x=Object(m.a)(["proveedor.cargar",j],(function(){return ie.cargar(parseInt(j))}),{enabled:!!j&&!(null===(t=O.location.state)||void 0===t?void 0:t.proveedor),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(){h.close()},onError:function(e){h.open({state:"error",error:e})}}),p=(null===(a=x.data)||void 0===a?void 0:a.data)||(null===(c=O.location.state)||void 0===c?void 0:c.proveedor);Object(r.useEffect)((function(){p&&l(p.tipoId)}),[p]),Object(r.useEffect)((function(){x.isLoading&&h.open({state:"loading"})}),[x.isLoading]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:j?"Actualizacion de Proveedor":"Registro de Proveedor"}),Object(A.jsxs)(u.a.Group,{as:u.a.Row,children:[Object(A.jsx)(u.a.Label,{column:!0,sm:"auto",children:"Tipo de proveedor"}),Object(A.jsxs)(b.a,{className:"d-flex",xs:"auto",children:[Object(A.jsx)(u.a.Check,{disabled:!!j,inline:!0,type:"radio",label:"M\xe9dico",value:1,checked:1==s,onChange:function(e){e.target.checked&&!j&&l(1)}}),Object(A.jsx)(u.a.Check,{disabled:!!j,inline:!0,type:"radio",label:"Empresa",value:2,checked:2==s,onChange:function(e){e.target.checked&&!j&&l(2)}})]})]}),1==s?Object(A.jsx)(Ht,{proveedor:p,onSubmit:e.onSubmit}):2==s?Object(A.jsx)(Xt,{proveedor:p,onSubmit:e.onSubmit}):null]})},Wt=U.g().shape({municipio:U.b().label("municipio").length(1,"Debe indicar un municipio"),direccion:U.j().label("direcci\xf3n").trim().required(),ubicacion:U.e().label("ubicaci\xf3n").required(),telefono1:U.f().label("telefono 1").typeError("No es un numero v\xe1lido").emptyStringTo().required(),telefono2:U.f().label("telefono 2").emptyStringToNull().typeError("No es un numero v\xe1lido").nullable().notRequired()}),Jt=function(e){var t,a,c,i,o,s,h=Object(n.i)().idProveedor;console.log("Proveedores",h);var x=Object(n.g)(),p=Object(D.b)("queryLoader"),f=Object(r.useState)([]),g=Object(d.a)(f,2),E=g[0],R=g[1],S=Object(r.useState)([]),I=Object(d.a)(S,2),N=I[0],_=I[1],y=Object(r.useState)([]),L=Object(d.a)(y,2),T=L[0],G=L[1],M=Object(C.h)({mode:"onBlur",resolver:Object(B.a)(Wt),defaultValues:{departamento:[],provincia:[],municipio:[],ubicacion:[-17.78629,-63.18117]}}),P=M.handleSubmit,V=M.register,k=M.control,F=M.watch,U=M.setError,q=M.setValue,X=M.formState.errors,Q=Object(m.a)(["proveedor.cargar",h],(function(){return ie.cargar(parseInt(h))}),{enabled:!!h&&!(null===(t=x.location.state)||void 0===t?void 0:t.proveedor),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(){p.close()},onError:function(e){p.open({state:"error",error:e})}}),H=Object(w.a)((function(e){var t,a;if(Array.isArray(e.ubicacion)){var r=e.ubicacion,n=Object(d.a)(r,2);t=n[0],a=n[1]}else{var c=e.ubicacion;t=c.lat,a=c.lng}return ie.actualizarInformacionDeContacto(parseInt(h),{municipioId:e.municipio[0].id,direccion:e.direccion,ubicacion:{latitud:t,longitud:a},telefono1:e.telefono1,telefono2:e.telefono2})}),{onSuccess:function(e){var t=e.data;x.replace("/clinica/proveedores/".concat(t.id))},onError:function(e){var t;if(422==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var a,r=(null===(a=e.response)||void 0===a?void 0:a.data).errors;Object.keys(r).forEach((function(e){U(e,{type:"serverError",message:r[e]})}))}}}),K=(null===(a=x.location.state)||void 0===a?void 0:a.proveedor)||(null===(c=Q.data)||void 0===c?void 0:c.data);Object(r.useEffect)((function(){q("direccion",(null===K||void 0===K?void 0:K.direccion)||"");var e=(null===K||void 0===K?void 0:K.ubicacion)||{latitud:-17.78629,longitud:-63.18117},t=e.latitud,a=e.longitud;q("ubicacion",[t,a]),q("telefono1",null===K||void 0===K?void 0:K.telefono1),q("telefono2",null===K||void 0===K?void 0:K.telefono2)}),[K]),Object(r.useEffect)((function(){if(K&&T.length&&N.length&&E.length){var e=T.find((function(e){return e.id==(null===K||void 0===K?void 0:K.municipioId)})),t=N.find((function(t){return(null===e||void 0===e?void 0:e.id)==t.id})),a=E.find((function(e){return(null===t||void 0===t?void 0:t.id)==e.id}));q("municipio",e?[e]:[]),q("provincia",t?[t]:[]),q("departamento",a?[a]:[])}}),[K,E,N,T]),Object(r.useEffect)((function(){Q.isLoading&&p.open({state:"loading"})}),[Q.isLoading]);return Object(A.jsxs)(u.a,{id:"proveedor-contacto-form",onSubmit:P(e.onSubmit||function(e){H.mutate(e)}),children:[Object(A.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Informaci\xf3n de contacto"}),function(){if(H.isSuccess)return Object(A.jsx)(z.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"});if(H.isError){var e,t,a=H.error;return Object(A.jsx)(z.a,{variant:"danger",children:a?(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message:""})}return null}(),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Departamento"}),Object(A.jsx)(C.a,{name:"departamento",control:k,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(v.a,{id:"contacto-form/departamentos",onLoad:function(e){R(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:function(e){a.onChange(e),q("provincia",[]),q("municipio",[])},onBlur:a.onBlur})}})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Provincia"}),Object(A.jsx)(C.a,{name:"provincia",control:k,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(v.g,{id:"contacto-form/provincias",onLoad:function(e){_(e)},filterBy:function(e){var t=F("departamento");return!!t.length&&e.departamentoId==t[0].id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:function(e){a.onChange(e),q("municipio",[])},onBlur:a.onBlur})}})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Municipio"}),Object(A.jsx)(C.a,{name:"municipio",control:k,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsx)(v.d,{id:"contacto-form/municipios",onLoad:function(e){G(e)},filterBy:function(e){var t=F("provincia");return!!t.length&&e.provinciaId==t[0].id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})}})]})]}),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Direccion"}),Object(A.jsx)(u.a.Control,Object(l.a)({as:"textarea",isInvalid:!!X.direccion},V("direccion"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(i=X.direccion)||void 0===i?void 0:i.message})]})}),Object(A.jsx)(u.a.Row,{children:Object(A.jsxs)(u.a.Group,{as:b.a,children:[Object(A.jsx)(u.a.Label,{children:"Ubicaci\xf3n"}),Object(A.jsx)(C.a,{name:"ubicacion",control:k,render:function(e){var t,a=e.field,r=e.fieldState;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(v.c,{isInvalid:!!r.error,center:a.value||[-17.78629,-63.18117],value:a.value,onChange:a.onChange}),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]})}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Tel\xe9fono 1"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.telefono1},V("telefono1"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(o=X.telefono1)||void 0===o?void 0:o.message})]}),Object(A.jsxs)(u.a.Group,{as:b.a,sm:4,children:[Object(A.jsx)(u.a.Label,{children:"Tel\xe9fono 2"}),Object(A.jsx)(u.a.Control,Object(l.a)({isInvalid:!!X.telefono2},V("telefono2"))),Object(A.jsx)(u.a.Control.Feedback,{type:"invalid",children:null===(s=X.telefono2)||void 0===s?void 0:s.message})]})]}),e.onSubmit?null:Object(A.jsxs)(O.a,{type:"submit",children:[H.isLoading?Object(A.jsx)(j.a,{className:"mr-2",animation:"border",size:"sm"}):null,Object(A.jsx)("span",{className:"align-middle",children:"Guardar"})]})]})},$t=function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Kt,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(A.jsx)(u.a.Row,{children:Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",form:"proveedor-form",children:"Siguiente"})})})]})},Zt=function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Jt,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:e.previousStep,children:"Anterior"})}),Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsx)(O.a,{variant:"link",onClick:e.nextStep,children:"Omitir"})}),Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",form:"proveedor-contacto-form",children:"Siguiente"})})]})]})},Yt=function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Pt,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:e.previousStep,children:"Anterior"})}),Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsx)(O.a,{type:"submit",form:"proveedor-contrato-form",children:"Siguiente"})})]})]})},ea=function(e){var t,a=e.generalInfo,r=e.contactInfo,c=e.contractInfo,i=Object(J.a)(e,["generalInfo","contactInfo","contractInfo"]),o=Object(n.g)(),s=Object(T.b)();var l=Object(w.a)((function(){var e,t,n,i=1==a.tipo?{tipoId:a.tipo,nit:a.nit,ci:a.ci,ciComplemento:a.ciComplemento,apellidoPaterno:a.apellidoPaterno,apellidoMaterno:a.apellidoMaterno,nombres:a.nombres,especialidadId:a.especialidad[0].id,regionalId:a.regional[0].id}:{tipoId:a.tipo,nit:a.nit,nombre:a.nombre,regionalId:a.regional[0].id};if(r){var o,s;if(Array.isArray(r.ubicacion)){var l=r.ubicacion,j=Object(d.a)(l,2);o=j[0],s=j[1]}else{var u=r.ubicacion;o=u.lat,s=u.lng}n={municipioId:r.municipio[0].id,direccion:r.direccion,ubicacion:{latitud:o,longitud:s},telefono1:r.telefono1,telefono2:r.telefono2}}var b={inicio:c.inicio.toISOString().split("T")[0],fin:null===(e=c.fin)||void 0===e||null===(t=e.toISOString())||void 0===t?void 0:t.split("T")[0],prestacionIds:c.prestaciones.map((function(e){return e.prestacion.id}))};return ie.registrar({general:i,contacto:n,contrato:b})}),{onSuccess:function(e){var t=e.data;s.invalidateQueries("proveedores.buscar"),o.push("/clinica/proveedores/".concat(t.id))}});return a&&c?Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:"Informacion general"}),Object(A.jsx)(x.a,{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Tipo de proveedor"}),Object(A.jsx)("td",{children:1==a.tipo?"M\xe9dico":2==a.tipo?"Empresa":null})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:"1px"},children:"NIT"}),Object(A.jsx)("td",{children:a.nit})]}),1==a.tipo?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Carnet de identidad"}),Object(A.jsx)("td",{children:a.ci+(a.ciComplemento?"-".concat(a.ciComplemento):"")})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Nombre"}),Object(A.jsx)("td",{children:(a.apellidoPaterno?a.apellidoPaterno+" ":"")+(a.apellidoMaterno?a.apellidoMaterno+" ":"")+a.nombres})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Especialidad"}),Object(A.jsx)("td",{children:null===a||void 0===a?void 0:a.especialidad[0].nombre})]})]}):2==(null===a||void 0===a?void 0:a.tipo)?Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",style:{width:1},children:"Nombre"}),Object(A.jsx)("td",{children:null===a||void 0===a?void 0:a.nombre})]}):null,Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Regional"}),Object(A.jsx)("td",{children:a.regional[0].nombre})]})]})}),Object(A.jsx)("h2",{children:"Informacion de contacto"}),r?Object(A.jsx)(x.a,{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Municipio"}),Object(A.jsx)("td",{children:r.municipio[0].nombre})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Direccion"}),Object(A.jsx)("td",{children:r.direccion})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Ubicaci\xf3n"}),Object(A.jsx)("td",{children:Array.isArray(r.ubicacion)?"".concat(r.ubicacion[0],", ").concat(r.ubicacion[1]):"".concat(r.ubicacion.lat,", ").concat(r.ubicacion.lng)})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Tel\xe9fono 1"}),Object(A.jsx)("td",{children:r.telefono1})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Telefono 2"}),Object(A.jsx)("td",{children:r.telefono2})]})]})}):"Omitida",Object(A.jsx)("h2",{children:"Contrato"}),Object(A.jsx)(x.a,{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Inicio"}),Object(A.jsx)("td",{children:c.inicio.toISOString().split("T")[0]})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Fin"}),Object(A.jsx)("td",{children:null===(t=c.fin)||void 0===t?void 0:t.toISOString().split("T")[0]})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:"Prestaciones"}),Object(A.jsx)("td",{children:Object(A.jsx)("ul",{children:c.prestaciones.map((function(e){return Object(A.jsx)("li",{children:e.prestacion.nombre})}))})})]})]})})]}),Object(A.jsxs)(u.a.Row,{children:[Object(A.jsx)(b.a,{xs:"auto",children:Object(A.jsx)(O.a,{onClick:i.previousStep,children:"Anterior"})}),Object(A.jsx)(b.a,{className:"ml-auto",xs:"auto",children:Object(A.jsxs)(O.a,{onClick:function(){l.mutate()},children:[l.isLoading?Object(A.jsx)(j.a,{animation:"border",size:"sm"}):null,"Guardar"]})})]})]}):null},ta=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),i=Object(d.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)(),j=Object(d.a)(l,2),u=j[0],b=j[1];return Object(A.jsxs)(Ut.a,{children:[Object(A.jsx)($t,{onSubmit:function(e){n(e)}}),Object(A.jsx)(Zt,{onSubmit:function(e){s(e)}}),Object(A.jsx)(Yt,{onSubmit:function(e){b(e)}}),Object(A.jsx)(ea,{generalInfo:a,contactInfo:o,contractInfo:u})]})},aa=a(615),ra=function(){var e=Object(n.j)().url,t=Object(f.d)(),a=Object(r.useMemo)((function(){var a=[];return P.index(t)&&a.push({id:"lista-mora",path:"".concat(e,"/lista-mora"),title:"Lista de mora",icon:Object(A.jsx)(H,{})}),ve.index(t)&&a.push({id:"atencion-externa",path:"".concat(e,"/atencion-externa"),title:"Atenci\xf3n externa",icon:Object(A.jsx)(s.a,{})}),lt.index(t)&&a.push({id:"medicos",path:"".concat(e,"/medicos"),title:"Medicos",icon:Object(A.jsx)(i.n,{})}),xt.index(t)&&a.push({id:"proveedores",path:"".concat(e,"/proveedores"),title:"Proveedores",icon:Object(A.jsx)(i.f,{})}),a.push({id:"especialidades",path:"".concat(e,"/especialidades"),title:"Especialidades",icon:Object(A.jsx)(o.a,{})},{id:"prestaciones",path:"".concat(e,"/prestaciones"),title:"Prestaciones",icon:Object(A.jsx)(i.h,{})}),a}),[t]);return Object(A.jsxs)(c.a,{sidebar:{header:Object(A.jsx)("div",{className:"d-flex justify-content-center",children:Object(A.jsx)(aa.a,{src:"/logo-lg.png"})}),items:a},children:[Object(A.jsxs)(n.d,{children:[Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/lista-mora/agregar"),authorize:P.index,children:Object(A.jsx)(X,{})}),Object(A.jsx)(n.b,{path:"".concat(e,"/lista-mora"),children:Object(A.jsx)(k,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/atencion-externa"),authorize:ve.index,children:Object(A.jsx)(fe,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/atencion-externa/registrar"),authorize:ve.register,children:Object(A.jsx)(Pe,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/medicos"),authorize:lt.index,children:Object(A.jsx)(bt,{})}),Object(A.jsx)(f.c,{exact:!0,path:["".concat(e,"/medicos/registrar"),"".concat(e,"/medicos/:id/editar")],authorize:function(t,a){return a=="".concat(e,"/medicos/registrar")?lt.register(t):lt.edit(t)},children:Object(A.jsx)(ht,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores"),authorize:xt.index,children:Object(A.jsx)(vt,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/registrar"),authorize:xt.register,children:Object(A.jsx)(ta,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/:id"),authorize:xt.view,children:Object(A.jsx)(Ft,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/:id/editar"),authorize:xt.edit,children:Object(A.jsx)(Kt,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/:idProveedor/editar-contacto"),authorize:function(e){return xt.register(e)||xt.edit(e)},children:Object(A.jsx)(Jt,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/:idProveedor/contratos/registrar"),authorize:Ct.register,children:Object(A.jsx)(Pt,{})}),Object(A.jsx)(f.c,{exact:!0,path:"".concat(e,"/proveedores/:idProveedor/contratos/:id"),authorize:xt.view,children:Object(A.jsx)(wt,{})}),Object(A.jsx)(n.b,{path:"".concat(e,"/especialidades"),children:Object(A.jsx)(We,{})}),Object(A.jsx)(n.b,{path:"".concat(e,"/prestaciones"),children:Object(A.jsx)(it,{})})]}),Object(A.jsx)(n.b,{exact:!0,path:["".concat(e,"/prestaciones/registrar"),"".concat(e,"/prestaciones/:id/editar")],children:Object(A.jsx)(st,{})}),Object(A.jsx)(n.b,{exact:!0,path:["".concat(e,"/especialidades/registrar"),"".concat(e,"/especialidades/:id/editar")],children:Object(A.jsx)($e,{})})]})};t.default=ra}}]);
//# sourceMappingURL=5.56732009.chunk.js.map