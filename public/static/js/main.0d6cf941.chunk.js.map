{"version":3,"sources":["commons/services/authClient.ts","commons/services/UnidadesTerritorialesService.ts","commons/services/index.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/PDFViewer.tsx","commons/components/LocationInput.tsx","commons/components/DepartamentosTypeahead.tsx","commons/components/ProvinciasTypeahead.tsx","commons/components/MunicipiosTypeahead.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","commons/components/ImportModal.tsx","apps/clinica/prestaciones/services/PrestacionesService.ts","apps/clinica/prestaciones/componentes/PrestacionesFilterForm.tsx","apps/clinica/prestaciones/componentes/PrestacionesIndex.tsx","apps/clinica/prestaciones/componentes/PrestacionForm.tsx","apps/clinica/medicos/services/MedicosService.ts","apps/clinica/medicos/components/MedicosFilterForm.tsx","apps/clinica/medicos/components/MedicosIndex.tsx","apps/clinica/medicos/components/EspecialidadesTypeahead.tsx","apps/clinica/medicos/components/MedicosForm.tsx","apps/clinica/proveedores/services/ProveedoresService.ts","apps/clinica/proveedores/services/ContratosService.ts","apps/clinica/proveedores/components/ProveedoresFilterForm.tsx","apps/clinica/proveedores/components/ProveedoresIndex.tsx","apps/clinica/proveedores/components/ProveedorEmpresaForm.tsx","apps/clinica/proveedores/components/ProveedorMedicoForm.tsx","apps/clinica/proveedores/components/ContactoForm.tsx","apps/clinica/proveedores/components/PrestacionesContratadasControl.tsx","apps/clinica/proveedores/components/ContratoForm.tsx","apps/clinica/proveedores/components/ProveedorForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/apiClient.ts","commons/utils/latLngExpressionToString.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","defaults","data","result","keysToCamel","console","log","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","UnidadesTerritorialesService","getDepartamentos","apiClient","get","getProvincias","getMunicipios","SidebarItem","item","path","to","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","current","total","onChange","ld","Math","min","rd","minimum","maximum","pageItems","i","push","Pagination","Item","active","onClick","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","numero_patronal","ListaMoraService","page","filter","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","e","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","error","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","ceil","required","validation","maxLength","length","format","pattern","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","PDFViewer","height","PDFObject","embed","fallbackLink","DefaultIcon","L","iconUrl","shadowUrl","iconShadow","iconSize","iconAnchor","Marker","prototype","options","CustomMarker","markerRef","useRef","eventHandlers","useMemo","onclick","marker","remove","dragend","getLatLng","useMapEvents","click","latlng","flyTo","getZoom","position","Array","isArray","lat","lng","latitude","longitude","draggable","Popup","LocationInput","latLngExpressionToString","search","setSearch","mapRef","MapContainer","whenCreated","mapInstance","center","zoom","zoomControl","cursor","TileLayer","attribution","zIndex","InputGroup","instance","stopPropagation","onmousemove","ondblclick","FormControl","preventDefault","Append","coords","split","rawLat","rawLng","parseFloat","abs","setView","ZoomControl","DepartamentosTypeahead","feedback","buscar","refetchOnMount","onLoad","hasValidation","labelKey","minLength","renderMenuItemChildren","prestacion","ProvinciasTypeahead","MunicipiosTypeahead","RegionalesService","RegionalesTypeahead","setOptions","useCache","onSearch","newQuery","ImperativeModal","show","useImperativeHandle","Modal","centered","onHide","Dm11Viewer","setUrl","imperativeModalRef","Header","Body","Footer","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","useLocation","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","solicitud","numero","fecha","asegurado","matricula","medico","proveedor","urlDm11","FcDebt","GenIcon","nombreCompleto","apellidoPaterno","apellidoMaterno","nombres","AseguradoChooser","asegurados","scope","estado","onSelect","AseguradosService","include","AseguradoCard","useFormContext","trigger","control","getValues","useWatch","name","titular","empleador","aseguradoChooserRef","dirtyFields","Card","Accordion","eventKey","Collapse","lg","md","htmlFor","fechaValidezSeguro","validate","afterDate","now","moment","isSameOrBefore","fechaExtinsion","fechaBaja","add","aportes","mora","MedicosService","source","CancelToken","promise","nombre_completo","undefined","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryKey","queryClient","useQueryClient","isIdle","isStale","Date","flip","filterBy","trim","maxResults","cancelQueries","especialidad","PrestacionesService","PrestacionesTypeahead","paginate","onPaginate","ProveedorService","ProveedoresTypeahead","subtitle","PrestacionesSolicitadasCard","count","setCount","proveedoresTypeaheadController","useController","useFieldArray","keyName","fields","append","overflow","prestacionSolicitada","render","field","fieldState","prestacionesSolicitadas","contrato","prestaciones","some","pc","ps","prestacionId","onBlur","activos","every","selected","SolicitudAtencionExternaForm","formMethods","nota","registrar","prestacion_id","defaultActiveKey","searchText","promptText","regional","EspecialidadesService","archivo","separador","formato","formData","FormData","EspecialidadesFilter","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","column","File","Check","inline","label","form","EspecialidadesIndex","importModalRef","buscarEspecialidades","ButtonGroup","ImportModal","importar","file","import","separator","delete","PrestacionesFilterForm","PrestacionesIndex","buscarPrestaciones","eliminar","replace","PrestacionForm","useParams","history","useHistory","location","continueRef","guardar","verPrestacion","inputs","status","renderBody","ci","apellido_paterno","apellido_materno","especialidad_id","raiz","ci_complemento","complemento","MedicosFilterForm","EspecialidadesTypeahead","positionFixed","align","regionales","setRegionales","especialidades","setEspecialidades","ciComplemento","goBack","load","String","r","especialidadId","ProveedoresService","cargar","keysToUnderscore","actualizar","actualizarInformacionDeContacto","infoContacto","ContratosService","proveedorId","ProveedoresFilterForm","ProveedoresIndex","tipo","ProveedorEmpresaForm","noRedirect","next","tipoId","ProveedorMedicoForm","toString","ContactoForm","setDepartamentos","setProvincias","setMunicipios","showLoader","setShowLoader","departamento","provincia","municipio","ubicacion","guardarInformacionDeContacto","municipioId","direccion","latitud","longitud","telefono1","telefono2","renderLoader","departamentos","provincias","departamentoId","municipios","provinciaId","PrestacionesContratadasControl","p","ContratoForm","idProveedor","methods","inicio","fin","prestacion_ids","ProveedorForm","setTipo","step","setStep","checked","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","MedicosIndex","MedicosForm","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","useDispatch","parse","substr","onClickItem","onClickFirst","onClickPrev","onClickNext","onClickLast","setFields","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","UsersPagination","max","trunc","RolesList","roles","ListGroup","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","hash","fetchRoles","Tab","transition","Content","Pane","fetchPermissions","d","defaultChecked","saveRole","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","matchPassword","RolesCheckList","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","JSON","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","replaceAll","str","arguments","newStr","Object","call","toLowerCase","this","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","toFixed","isObject","o","n","keys","forEach","k","s","$1","toUpperCase","key"],"mappings":"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","file":"static/js/main.0d6cf941.chunk.js","sourcesContent":["import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import apiClient from \"./apiClient\"\r\n\r\nexport type Departamento = {\r\n  id: number,\r\n  nombre: string,\r\n  abreviatura: string\r\n}\r\n\r\nexport type Provincia = {\r\n  id: number,\r\n  nombre: string\r\n  departamentoId: number\r\n}\r\n\r\nexport type Municipio = {\r\n  id: number,\r\n  nombre: string\r\n  provinciaId: number\r\n}\r\n\r\nexport const UnidadesTerritorialesService = {\r\n  getDepartamentos: ()=>{\r\n    return apiClient.get<Departamento[]>(\"departamentos\")\r\n  },\r\n  getProvincias: () => {\r\n    return apiClient.get<Provincia[]>(\"provincias\")\r\n  },\r\n  getMunicipios: () => {\r\n    return apiClient.get<Municipio[]>(\"municipios\")\r\n  }\r\n}","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"\r\n\r\nexport * from \"./UnidadesTerritorialesService\"","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    {item.path ? \r\n      <Link to={item.path} \r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </Link> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport default ({current, total, onChange}: Props)=>{\r\n  current = Math.min(current, total+1);\r\n  let ld = current - 1\r\n  let rd = total - current//Math.min(current, total)\r\n  ld= Math.min(2+2-Math.min(2,rd), ld)\r\n  rd = Math.min(2+2-Math.min(2,ld), rd)\r\n  const minimum = current - ld\r\n  const maximum=current + rd\r\n  console.log(\"pag.\", current, total, minimum,maximum)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>onChange(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"Est seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>N Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule, ValidationValueMessage } from \"react-hook-form\"\r\nimport { isObjectBindingPattern } from \"typescript\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): ValidationValueMessage<boolean> => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(pattern)\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          N Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aqu</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { useMemo, useState, useRef } from \"react\"\r\nimport { Button, FormControl, InputGroup } from \"react-bootstrap\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport L, { LatLngExpression, Marker as LeafletMarker, Map } from \"leaflet\"\r\nimport { MapContainer, Marker, MarkerProps, Popup, TileLayer, useMapEvents, ZoomControl } from \"react-leaflet\"\r\nimport { latLngExpressionToString } from \"../utils\"\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25,41],\r\n    iconAnchor: [12,41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\ntype Props = {\r\n  value: LatLngExpression|null,\r\n  center: LatLngExpression\r\n  onChange: (value?: LatLngExpression|null) => void\r\n}\r\n\r\nconst CustomMarker = (props: Omit<MarkerProps, \"position\"> & {position: LatLngExpression|null, onChange(position: LatLngExpression|null): void})=>{\r\n  const markerRef =  useRef<LeafletMarker<any>>(null)\r\n  const eventHandlers = useMemo(\r\n    () => ({\r\n      onclick() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          marker.remove()\r\n          props.onChange(null)\r\n        }\r\n      },\r\n      dragend() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          props.onChange(marker.getLatLng())\r\n        }\r\n      },\r\n    }),\r\n    [],\r\n  )\r\n  \r\n  const map = useMapEvents({\r\n    click(e) {\r\n      props.onChange(e.latlng)\r\n      map.flyTo(e.latlng, map.getZoom())\r\n      // map.locate()\r\n    }\r\n  })\r\n\r\n\r\n  if(!props.position) return null\r\n  const [latitude, longitude] = Array.isArray(props.position) ? props.position : [props.position.lat, props.position.lng]\r\n  return <Marker \r\n    draggable\r\n    ref={markerRef}\r\n    position={props.position}\r\n    eventHandlers={eventHandlers}\r\n  >\r\n    <Popup>\r\n      A pretty CSS3 popup. <br /> Easily customizable.\r\n      <a href={`maps:${latitude},${longitude}`}>Open with...</a>\r\n    </Popup>\r\n  </Marker>\r\n}\r\n\r\nexport const LocationInput = (props: Props) => {\r\n\r\n  const [search, setSearch] = useState(()=>{\r\n    return latLngExpressionToString(props.value)\r\n  })\r\n  const mapRef = useRef<Map>(null)\r\n\r\n  return <>\r\n    <MapContainer\r\n      //@ts-ignore\r\n      whenCreated={ mapInstance => { mapRef.current = mapInstance } }\r\n      center={props.center}\r\n      zoom={13}\r\n      zoomControl={false}\r\n      style={{height: 240, cursor: \"crosshair\"}}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <div className=\"leaflet-control-container\"\r\n      >\r\n        <div className=\"leaflet-top leaflet-left\" style={{zIndex: 999}}>\r\n        <InputGroup className=\"leaflet-control bg-white\"\r\n          ref={(instance: HTMLDivElement)=>{\r\n            if(instance){\r\n              instance.onclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n              instance.onmousemove = (e:any)=>{\r\n                console.log(\"OnMove\")\r\n                e.stopPropagation()\r\n              }\r\n              instance.ondblclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <FormControl\r\n            value={search}\r\n            onClick={(e: any)=>{\r\n              console.log(\"ASFA\")\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n            }}\r\n            onChange={(e)=>{\r\n              const value = e.target.value\r\n              setSearch(value)\r\n            }}\r\n          />\r\n          <InputGroup.Append>\r\n            <Button variant=\"outline-secondary\"\r\n              ref={(instance: any) => {\r\n                if(instance){\r\n                  instance.onclick = ()=>{\r\n                    const coords = search.split(\",\")\r\n                    if(coords.length == 2){\r\n                      const [rawLat, rawLng] = coords\r\n                      const [lat, lng] = [parseFloat(rawLat), parseFloat(rawLng)]\r\n                      if(Math.abs(lat) <= 90 && Math.abs(lng) <= 180){\r\n                        mapRef.current!.setView([lat, lng], 13)\r\n                        props.onChange([lat, lng])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              onClick={()=>{\r\n              }}\r\n            ><FaSearch/></Button>\r\n          </InputGroup.Append>\r\n        </InputGroup>\r\n        </div>\r\n      </div>\r\n      <CustomMarker position={props.value} onChange={(position)=>{\r\n        props.onChange(position)\r\n        setSearch(latLngExpressionToString(position))\r\n      }} />\r\n      <ZoomControl position=\"bottomright\" />\r\n    </MapContainer>\r\n  </>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Departamento, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const DepartamentosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Departamento[])=>void} & Omit<TypeaheadProps<Departamento>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getDepartamentos\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getDepartamentos()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Provincia, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProvinciasTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Provincia[])=>void} & Omit<TypeaheadProps<Provincia>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getProvinciass\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getProvincias()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Municipio, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MunicipiosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Municipio[])=>void} & Omit<TypeaheadProps<Municipio>, \"isLoading\" | \"options\">) => {\r\n\r\n\r\n  const queryKey = \"getMunicipios\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getMunicipios()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: {onLoad?: (options: Regional[])=>void} & Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      setOptions(buscar.data?.data)\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.asegurado.matricula}</td>\r\n        <td>{solicitud.medico}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n                !!solicitud.urlDm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.urlDm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atencin externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscarSolicitudesAtencionExterna.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>N</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrcula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n  console.log(props.asegurados.length)\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado ? \"Alta\" : \"Baja\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","import { AxiosTransformer } from \"axios\"\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\n// export type Asegurado = Titular | Beneficiario\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  tipo_id: number,\r\n  estado: string,\r\n  fechaBaja?: string,\r\n  fechaExtinsion?: string,\r\n  empleadorId: string\r\n  titularId: string\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    fechaBaja: string,\r\n    aportes: string\r\n  }\r\n  titular?: {\r\n    id: string,\r\n    matricula: string,\r\n    apellidoPaterno: string | null,\r\n    apellidoMaterno: string,\r\n    nombres: string,\r\n    estado: string,\r\n    fechaBaja?: string,\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useWatch, ValidationRule } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number,\r\n  asegurado: {\r\n    id: string\r\n    matricula: string\r\n    apellidoPaterno: string | null\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    fechaExtinsion: string | null\r\n    tipo: number\r\n    estado: string\r\n    fechaValidezSeguro: string | null\r\n  },\r\n  titular: {\r\n    id: string\r\n    matricula: string\r\n    apellidoPaterno: string | null\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    estado: string\r\n    fechaValidezSeguro: string | null\r\n  },\r\n  empleador: {\r\n    id: string, \r\n    numeroPatronal: string, \r\n    nombre: string,\r\n    estado: string,\r\n    aportes: string,\r\n    fechaBaja: string | null\r\n  }\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    trigger,\r\n    setValue,\r\n    getValues,\r\n    control,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  const asegurado = useWatch({\r\n    control,\r\n    name: 'asegurado', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n  const titular = useWatch({\r\n    control,\r\n    name: 'titular', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n  const empleador = useWatch({\r\n    control,\r\n    name: 'empleador', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = asegurado.matricula//watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: {records}}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        onChange(asegurado)\r\n      }\r\n      else {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const onChange = ({empleador, titular, ...asegurado}: any) => {\r\n    setValue(\"asegurado\", asegurado)\r\n    setValue(\"titular\", titular||{})\r\n    setValue(\"empleador\", empleador || {})\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(asegurado.id && formState.dirtyFields.asegurado?.matricula){\r\n      setValue(\"asegurado.id\", \"\")\r\n      setValue(\"asegurado.apellidoPaterno\", \"\")\r\n      setValue(\"asegurado.apellidoMaterno\", \"\")\r\n      setValue(\"asegurado.nombres\", \"\")\r\n      setValue(\"asegurado.estado\", \"\")\r\n      setValue(\"asegurado.fechaValidezSeguro\", \"\")\r\n      setValue(\"asegurado.fechaExtinsion\", \"\")\r\n      setValue(\"titular.id\", \"\")\r\n      setValue(\"titular.apellidoPaterno\", \"\")\r\n      setValue(\"titular.apellidoMaterno\", \"\")\r\n      setValue(\"titular.nombres\", \"\")\r\n      setValue(\"titular.estado\", \"\")\r\n      setValue(\"titular.fechaValidezSeguro\", \"\")\r\n      setValue(\"empleador.numeroPatronal\", \"\")\r\n      setValue(\"empleador.nombre\", \"\")\r\n      setValue(\"empleador.estado\", \"\")\r\n      setValue(\"empleador.fechaBaja\", \"\")\r\n      setValue(\"empleador.aportes\", \"\")\r\n    }\r\n  }, [matricula])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change \", asegurado)\r\n  }, [asegurado])\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrcula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formState.errors.asegurado?.matricula || !!formState.errors.asegurado?.id}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\", {\r\n                required: rules.required(),\r\n                pattern: rules.pattern(/^\\d{2}-\\d{4}-[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ]{2,3}$/)\r\n              })} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  trigger(\"asegurado.matricula\")\r\n                  if(!formState.errors.asegurado?.matricula){\r\n                    // setValue(\"asegurado.matricula\", watch(\"asegurado.matricula\"))\r\n                    if(formState.dirtyFields.asegurado?.matricula)\r\n                      delete formState.dirtyFields.asegurado.matricula\r\n                    buscar.refetch()\r\n                  }\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.nombres\", {required: rules.required()})}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\")}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"1\">Alta</option>\r\n              <option value=\"2\">Baja</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Validez del seguro</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaValidezSeguro}\r\n              {...register(\"asegurado.fechaValidezSeguro\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    console.log(\"CHECK\", watch(\"asegurado\"))\r\n                    if(asegurado.estado != \"1\" && (!value || moment(value, \"DD/MM/YYYY\").isSameOrBefore(now))){\r\n                      return \"El seguro ya no tiene validez\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          {watch(\"asegurado.tipo\") == 2 ? <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha extinsion</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)){\r\n                      return \"Se ha cumplido la fecha de extinsion\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaExtinsion?.message}</Form.Control.Feedback>\r\n          </Form.Group> : null}\r\n        </Form.Row>\r\n        <div className={titular?.id ? \"\" : \"d-none\"}>\r\n          {/* {watch(\"titular.id\") ? <> */}\r\n          <h2 style={{fontSize: \"1.25rem\"}}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control \r\n                as=\"select\"\r\n                disabled\r\n                {...register(\"titular.estado\")}\r\n              >\r\n                <option value=\"\"></option>\r\n                <option value=\"1\">Alta</option>\r\n                <option value=\"2\">Baja</option>\r\n              </Form.Control>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.titular?.fechaValidezSeguro}\r\n                {...register(\"titular.fechaValidezSeguro\", {\r\n                  validate: {\r\n                    afterDate: (value) => {\r\n                      const now = moment()\r\n                      if(titular.id && titular.estado != \"1\" && (!value || moment(value, \"DD/MM/YYYY\").isSameOrBefore(now))){\r\n                        return \"El seguro del titular ya no tiene validez\"\r\n                      } \r\n                    }\r\n                  }\r\n                })}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.titular?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n          {/* </> : null} */}\r\n        </div>\r\n\r\n        <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>N Patronal</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.empleador?.numeroPatronal}\r\n              {...register(\"empleador.numeroPatronal\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.numeroPatronal?.message}</Form.Control.Feedback>\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              {...register(\"empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              {...register(\"empleador.estado\")}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"2\">Baja</option>\r\n              <option value=\"1\">Alta</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.empleador?.fechaBaja}\r\n              {...register(\"empleador.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(empleador.estado != \"1\" && (!value || moment(value, \"DD/MM/YYYY\").add(2, \"months\").isSameOrBefore(now))){\r\n                      return \"El empleador ha sido dado de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.empleador?.aportes}\r\n              {...register(\"empleador.aportes\", {\r\n                validate: {\r\n                  mora: (value) => {\r\n                    if(value == \"2\"){\r\n                      return \"El empleador esta en mora\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            >\r\n              <option></option>\r\n              <option value=\"2\">En mora</option>\r\n              <option value=\"1\">Al da</option>\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.aportes?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          title=\"Resultados\"\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado)=>{\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            onChange(asegurado)\r\n            aseguradoChooserRef.current!.show(false)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string,\r\n  regionalId: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n\r\n  const queryKey = [\"buscarMedico\", query];\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/prestaciones/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  buscar: (filter: {nombre?: string}, page: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Prestacion>>(\"prestaciones\", {\r\n      params: {\r\n        filter, page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [page, setPage] = useState(1)\r\n  const queryKey = [\"buscarPrestaciones\", query, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscar({\r\n      nombre: query||undefined\r\n    }, {\r\n      size: 50,\r\n      current: page\r\n    })\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(!buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data?.records || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    paginate\r\n    onPaginate={(e, size)=>{\r\n      setPage((page => page + 1))\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  regionalId: number\r\n  contrato: {\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId?: number,\r\n  activos?: number\r\n}\r\n\r\nexport const ProveedorService = {\r\n  buscar: (filter?: Filter, page?: Page) => {\r\n    return apiClient.get<Proveedor[]>(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Proveedor[]>(\"proveedores/buscar-nombre\", {\r\n      params: {nombre},\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Filter, Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: {filter:Filter} & Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  // const [query, setQuery] = useState(\"\")\r\n  // const [options, setOptions] = useState<Proveedor[]>([])\r\n\r\n  \r\n  const queryKey = [\"buscarProveedor\", props.filter]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    // return ProveedorService.buscarPorNombre(query)\r\n    return ProveedorService.buscar(props.filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnMount: false,\r\n    // enabled: false,\r\n    // onSuccess: ({data})=>{\r\n    //   setOptions(data)\r\n    // }\r\n  })\r\n\r\n  return <AsyncTypeahead flip \r\n    // filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    // options={options}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        const nombre_completo = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{}}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        title = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = proveedor.nombre\r\n        subtitle = \"Empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor } from \"../services/ProveedoresService\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regionalId: number | null,\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number | null,\r\n    nota: string,\r\n  }[],\r\n  proveedor?: Proveedor[]\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const proveedoresTypeaheadController = useController({\r\n    name:\"proveedor\",\r\n    control,\r\n    rules: {\r\n      required: rules.required()\r\n    }\r\n  })\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\",\r\n    keyName: \"prestacionId\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Prestacion</th>\r\n            <th>Proveedor</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    return <>\r\n                      <PrestacionesTypeahead\r\n                        id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                        className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        filterBy={(prestacion) => {\r\n                          const proveedor = watch(\"proveedor.0\")\r\n                          const prestacionesSolicitadas = watch(\"prestacionesSolicitadas\")\r\n                          return !proveedor ||\r\n                            proveedor.contrato.prestaciones.some(pc => pc.id == prestacion.id) && \r\n                            !prestacionesSolicitadas.some(ps=>ps.prestacionId == prestacion.id)\r\n                        }}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(prestacion) => {\r\n                          field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                    </>\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <ProveedoresTypeahead\r\n                  id={`solicitud-atencion-externa/proveedor`}\r\n                  filter={{\r\n                    activos: 1,\r\n                  }}\r\n                  filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                  onChange={proveedoresTypeaheadController.field.onChange}\r\n                  onBlur={proveedoresTypeaheadController.field.onBlur}\r\n                  selected={proveedoresTypeaheadController.field.value}\r\n                />\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const)} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import React, { ComponentProps, useRef, useEffect } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport { Medico } from \"../services/MedicosService\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medico?: Medico[]\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacionId: null,\r\n        nota: \"\"\r\n      }],\r\n      asegurado: {\r\n        apellidoPaterno: \"\",\r\n        apellidoMaterno: \"\",\r\n        nombres: \"\",\r\n        estado: \"\",\r\n        fechaExtinsion: \"\",\r\n        fechaValidezSeguro: \"\"\r\n      }\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    trigger,\r\n    formState,\r\n    control,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  console.log(\"Errors\", formState.errors)\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id: prestacion_id as number,\r\n        nota\r\n      }))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11}}) => {\r\n      dm11ViewerRef.current?.setUrl(urlDm11)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    setValue(\"asegurado.estado\", \"-2\")\r\n  }, [])\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(\"onSubmit\", values)\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atencin externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", undefined)\r\n                          setValue(\"proveedor\", undefined)\r\n                          trigger(\"medico\")\r\n                          trigger(\"proveedor\")\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n            Mdico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medico\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        filterBy={(medico)=>medico.regionalId == watch(\"regionalId\")}\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!formState.errors.medico}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n        {/* <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"4\">\r\n            Proveedor\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"4\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller\r\n                    control={control}\r\n                    name=\"proveedor\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <>\r\n                        <ProveedoresTypeahead\r\n                          id=\"solicitud-atencion-externa-form/proveedores\"\r\n                          searchText=\"Buscando...\"\r\n                          promptText=\"Introduce un texto\"\r\n                          filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                          className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                          isInvalid={!!formState.errors.proveedor}\r\n                          onBlur={field.onBlur}\r\n                          onChange={field.onChange}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                      </>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n       */}\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </FormProvider>\r\n}","import axios, { AxiosPromise } from \"axios\"\r\nimport { PaginatedResponse } from \"../../../../commons/services\"\r\nimport apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\ninterface EspecialidadesService {\r\n  buscar(filter: string): AxiosPromise<Especialidad[]>\r\n  buscar(filter: string, page: Page): AxiosPromise<PaginatedResponse<Especialidad>>\r\n  // buscar(filter: string, page?: Page): AxiosPromise<PaginatedResponse<Especialidad>|Especialidad[]>\r\n  importar(archivo: File, separador: string, formato: string): AxiosPromise\r\n}\r\n\r\nexport const EspecialidadesService: EspecialidadesService = {\r\n  buscar: (filter: string, page?: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(filter, page)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"Est seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                current: 1,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"row\">\r\n      <Col>\r\n        <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import { AxiosResponse } from \"axios\"\r\nimport { forwardRef, useImperativeHandle, useRef } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, ModalProps, Row, Spinner } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"./ImperativeModal\"\r\nimport * as rules from \"./rules\"\r\n\r\ntype ImportOptions= {\r\n  separator: string,\r\n  format: string \r\n}\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\n\r\ntype Props = {\r\n  // import: (file: File, options: ImportOptions) => void\r\n  import: (\r\n    file: File,\r\n    options: ImportOptions\r\n  )=>Promise<any>\r\n} & ModalProps\r\n\r\nexport const ImportModal = forwardRef<ImperativeModalRef, Props>((props, ref)=>{\r\n  \r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importar = useMutation(({file, options}: {file: File, options: ImportOptions})=>{\r\n    return props.import(file, options)\r\n  })\r\n\r\n  // const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  // useImperativeHandle(ref, () => ({\r\n  //   show: (show: boolean)=>{\r\n  //     imperativeModalRef.current?.show(show)\r\n  //   }\r\n  // }),[])\r\n  \r\n  return <ImperativeModal ref={ref} {...props}>\r\n  <Modal.Header>\r\n    Importar Datos\r\n  </Modal.Header>\r\n  <Modal.Body>\r\n    <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador: separator, formatoSaltoLinea: format})=>{\r\n      importar.mutate({\r\n        file: archivo![0],\r\n        options: {\r\n          separator,\r\n          format\r\n        }\r\n      })\r\n    })}>\r\n      {importar.data ? <Alert variant={importar.isError ? \"danger\" : \"success\"}>\r\n        {importar.isError ? \"Error\" : \"Importacion existosa\"}\r\n      </Alert> :  null}\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Archivo</Form.Label>\r\n        <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n          <Form.File\r\n            isInvalid={!!formState.errors.archivo}\r\n            {...register(\"archivo\", {\r\n              required: rules.required(),\r\n            })}\r\n            feedback={formState.errors.archivo?.message}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Separador</Form.Label>\r\n        <Col xs={\"auto\"}>\r\n          <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n            isInvalid={!!formState.errors.separador}\r\n            {...register(\"separador\", {\r\n              required: rules.required()\r\n            })}\r\n          ></Form.Control>\r\n          <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n        isInvalid={!!formState.errors.aggrement}\r\n        feedback={formState.errors.aggrement?.message}\r\n        {...register(\"aggrement\", {\r\n          required: rules.required()\r\n        })}\r\n      ></Form.Check>\r\n    </Form>\r\n  </Modal.Body>\r\n  <Modal.Footer>\r\n      <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">\r\n        {importar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Importar\r\n      </Button>\r\n      <Button>Cancelar</Button>\r\n  </Modal.Footer>\r\n</ImperativeModal>\r\n\r\n})","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<PaginatedResponse<Prestacion>>(\"/prestaciones\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  ver: (id: number) => {\r\n    return apiClient.get<Prestacion>(`prestaciones/${id}`)\r\n  },\r\n  registrar: (nombre: string) => {\r\n    return apiClient.post<Prestacion>(\"prestaciones\", {\r\n      nombre\r\n    })\r\n  },\r\n  actualizar: (id: number, nombre: string) => {\r\n    return apiClient.put<Prestacion>(`prestaciones/${id}`, {\r\n      nombre\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`prestaciones/${id}`)\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/prestaciones/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const PrestacionesFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { FaSync, FaEdit, FaTrash } from \"react-icons/fa\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { ImportModal } from \"../../../../commons/components/ImportModal\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { PrestacionesService } from \"../services\"\r\nimport { PrestacionesFilterForm } from \"./PrestacionesFilterForm\"\r\n// import { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\n// import { ImportarPrestaciones } from \"./ImportarPrestaciones\"\r\n\r\nexport const PrestacionesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscarPrestaciones = useQuery([\"buscarPrestaciones\", page, filter], ()=>{\r\n    return PrestacionesService.buscar(page, filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return PrestacionesService.eliminar(id)\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarPrestaciones.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarPrestaciones.isError) {\r\n      const { error } = buscarPrestaciones\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarPrestaciones.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((prestacion, index)=>{\r\n      return <tr key={prestacion.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{prestacion.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-prestacion-${prestacion.id}`}\r\n            />\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} replace to={{\r\n                pathname: `/clinica/configuracion/prestaciones/${prestacion.id}/editar`,\r\n                state: {\r\n                  prestacion\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"Est seguro?\")) {\r\n                  eliminar.mutate(prestacion.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\">Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Servicios subrogados</h2>\r\n    <Row className=\"mb-2\">\r\n      <Col className=\"ml-auto pr-0\" xs=\"auto\" >\r\n        <Button onClick={()=>buscarPrestaciones.refetch()}><FaSync /></Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Dropdown as={ButtonGroup}>\r\n          <Button as={Link} replace to={\"/clinica/configuracion/prestaciones/registrar\"}>Nuevo</Button>\r\n          <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={()=>{\r\n              console.log(importModalRef)\r\n              importModalRef.current && importModalRef.current.show(true)\r\n            }}\r\n            >Importar</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </Col>\r\n    </Row>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <PrestacionesFilterForm onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportModal ref={importModalRef}\r\n      import={(file, options)=>{\r\n        return PrestacionesService.importar(file, options.separator, options.format)\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Alert, Button, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery} from \"react-query\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Prestacion, PrestacionesService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\n\r\nexport type Inputs = {\r\n  nombre: string\r\n}\r\n\r\nexport const PrestacionForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    prestacion: Prestacion\r\n  }>()\r\n  \r\n  const { state} = history.location\r\n  \r\n  const prestacion = state?.prestacion\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation(({nombre}: Inputs)=>{\r\n    return id ? PrestacionesService.actualizar(parseInt(id), nombre) : PrestacionesService.registrar(nombre)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }\r\n  })\r\n\r\n  const verPrestacion = useQuery([\"verPrestacion\", id], ()=>{\r\n    return PrestacionesService.ver(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !prestacion,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(verPrestacion.data?.data || prestacion){\r\n      setValue(\"nombre\", (verPrestacion.data?.data || prestacion).nombre)\r\n    }\r\n  }, [verPrestacion.data])\r\n\r\n  const renderBody = ()=>{\r\n    if(verPrestacion.isFetching){\r\n      return <Spinner animation=\"border\">Cargando</Spinner>\r\n    }\r\n    const error = verPrestacion.error as AxiosError\r\n    if(error){\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? guardar.error.response?.data?.message || guardar.error.message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Group>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.nombre}\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form>\r\n  }\r\n\r\n\r\n  return <Modal\r\n    show\r\n    centered\r\n    onHide={()=>{\r\n      history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }}\r\n  >\r\n    <Modal.Header>\r\n      {id ? \"Editar\" : \"Registrar\" }\r\n    </Modal.Header> \r\n    <Modal.Body>\r\n      {renderBody()}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      {!id ? <Button \r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = true\r\n        }}\r\n      >\r\n        {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar y continuar\r\n      </Button> : null}\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = false\r\n        }}\r\n      >\r\n        {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  },\r\n  apellidoPaterno: string,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  sexo: string,\r\n  especialidadId: number\r\n  especialidad: string\r\n  regionalId: number\r\n}\r\n\r\nexport type Filter = {\r\n  ci?: string,\r\n  nombre?: string,\r\n  especialidadId?: number\r\n  regionalId?: number\r\n  incluirProveedores?: boolean\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscar: (filter: Filter, page: Page) => {\r\n    return apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params:{\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  load: (id: number) => {\r\n    return apiClient.get<Medico>(`medicos/${id!}`);\r\n  },\r\n  registrar: (ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.post<Medico>(\"medicos\", {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  actualizar: (id: number, ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.put<Medico>(`medicos/${id}`, {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`medicos/${id!}`)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const MedicosFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { MedicosService, Filter } from \"../services\"\r\nimport { MedicosFilterForm } from \"./MedicosFilterForm\"\r\n\r\nexport default () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarMedicos\", page.current, page.size], () => {\r\n    return MedicosService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return MedicosService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {/* {item.ci.raiz}-{item.ci.complemento} */}\r\n          {item.ci.raiz}{item.ci.complemento ? `-${item.ci.complemento}` : \"\"}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {nombreCompleto(item.apellidoPaterno, item.apellidoMaterno, item.nombres)}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.especialidad}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `/clinica/medicos/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"Est seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Medicos</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <MedicosFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>C.I.</th>\r\n          <th>Nombre</th>\r\n          <th>Especialidad</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Especialidad, EspecialidadesService } from \"../../especialidades/services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const EspecialidadesTypeahead = (props: {onLoad?: (options: Especialidad[])=>void} & Omit<AsyncTypeaheadProps<Especialidad>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"obtenerEspecialidades\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return EspecialidadesService.buscar(\"\")\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    // onSuccess: ({data})=>{\r\n    //   props.onLoad && props.onLoad(data)\r\n    // }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    positionFixed\r\n    align=\"left\"\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Medico, MedicosService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { Redirect, useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components/RegionalesTypeahead'\r\nimport { EspecialidadesTypeahead } from './EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\nexport default ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    medico: Medico\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? MedicosService.actualizar(parseInt(id), {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    ) : MedicosService.registrar({\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    )\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.goBack()\r\n    }\r\n  })\r\n\r\n  const load = useQuery([\"loadMedico\", id], ()=>{\r\n    return MedicosService.load(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.medico,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const medico = load.data?.data || history.location.state?.medico\r\n\r\n  useEffect(()=>{\r\n    if(medico){\r\n      setValue(\"ci\", String(medico.ci.raiz))\r\n      setValue(\"ciComplemento\", medico.ci.complemento)\r\n      setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      setValue(\"nombres\", medico.nombres)\r\n      // setValue(\"especialidad\",[{id: medico.especialidadId, nombre: medico.especialidad}])\r\n      // setValue(\"regional\", [{id: medico.regionalId}])\r\n    }\r\n  }, [medico])\r\n\r\n  useEffect(()=>{\r\n    if(medico && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == medico.regionalId))\r\n    }\r\n  }, [medico, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(medico && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == medico.especialidadId))\r\n    }\r\n  }, [medico, especialidades])\r\n\r\n  if(guardar.status == \"success\" && !continueRef.current){\r\n    <Redirect to=\"/clinica/medicos\"/>\r\n  }\r\n\r\n  // if(load.isFetching){\r\n  //   return <Spinner animation=\"border\">Cargando</Spinner>\r\n  // }\r\n  // const error = load.error as AxiosError\r\n  // if(error){\r\n  //   return <Alert variant=\"danger\">\r\n  //     {error.response?.data?.message || error.message}\r\n  //   </Alert>\r\n  // }\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizar\" : \"Registrar Medico\"}</h1>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"nombres\", {\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <div className=\"m-n1\">\r\n        {!id ? <Button \r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = true\r\n          }}\r\n        >\r\n          {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar y continuar\r\n        </Button> : null}\r\n        <Button\r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = false\r\n          }}\r\n        >\r\n          {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n    <Modal show={load.isFetching || load.isError} centered >\r\n      <Modal.Body>\r\n        {load.isFetching ? \r\n          <><Spinner animation=\"border\"/>Cargando</> : \r\n          load.isError ? <Alert variant=\"danger\">\r\n               {(load.error as AxiosError).response?.data?.message || (load.error as AxiosError).message}\r\n          </Alert> : null}\r\n      </Modal.Body>\r\n    </Modal>\r\n  </>\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios, { AxiosPromise } from 'axios'\r\nimport { Medico } from \"../../medicos/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nit: number|null\r\n  nombre: string|null\r\n  medico?: Medico\r\n  tipoId: number\r\n  tipo: string\r\n  regionalId: number\r\n  contrato: {\r\n    inicio: string\r\n    fin: string\r\n    tipoId: number\r\n    tipo: string\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId?: number\r\n}\r\n\r\n\r\ninterface IProveedorService {\r\n  buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  cargar(id: number): AxiosPromise<Proveedor>\r\n  registrar(fields: {\r\n    tipoId: 1,\r\n    nit?: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit?: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  actualizar(id: number, fields: {\r\n    tipoId: 1,\r\n    nit?: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit?: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  eliminar(id: number): AxiosPromise\r\n\r\n  [key: string]: any\r\n}\r\n\r\nexport const ProveedoresService: IProveedorService = {\r\n  // buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  // buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  buscar: (filter: Filter, page?: Page) => {\r\n    return apiClient.get(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  cargar: (id) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  registrar: (fields) => {\r\n    return apiClient.post(\"proveedores\", keysToUnderscore(fields))\r\n  },\r\n  actualizar: (id, fields) =>{\r\n    return apiClient.put(`proveedores/${id}`, keysToUnderscore(fields))\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  actualizarInformacionDeContacto(id: number, infoContacto: {\r\n    municipioId: number,\r\n    direccion: string,\r\n    ubicacion: {\r\n      latitud: number,\r\n      longitud: number\r\n    },\r\n    telefono1: number,\r\n    telefono2?: number\r\n  }){\r\n    return apiClient.put(`proveedores/${id}/contacto`, keysToUnderscore(infoContacto))\r\n  }\r\n\r\n}","import { apiClient } from \"../../../../commons/services\"\r\n\r\nexport const ContratosService = {\r\n  registrar: (proveedorId: number, data: {\r\n    inicio: string,\r\n    fin: string,\r\n    prestacion_ids: number[] \r\n  }) =>{\r\n    return apiClient.post(`proveedores/${proveedorId}/contratos`,  data)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const ProveedoresFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { ProveedoresService, Filter } from \"../services\"\r\nimport { ProveedoresFilterForm } from \"./ProveedoresFilterForm\"\r\n\r\nexport const ProveedoresIndex = () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarProveedoress\", filter, page], () => {\r\n    return ProveedoresService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return ProveedoresService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const proveedores = data!.data.records\r\n    return proveedores.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.medico && nombreCompleto(item.medico.apellidoPaterno, item.medico.apellidoMaterno, item.medico.nombres) || item.nombre }\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.tipo}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `${path}/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"Est seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Proveedores</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <ProveedoresFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead className=\"text-center\">\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}>Tipo</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import { useEffect, useState } from \"react\"\r\nimport { Button, Form, Col, Spinner } from \"react-bootstrap\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Redirect, useParams, useHistory } from \"react-router\"\r\nimport { useMutation } from \"react-query\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Regional } from \"../../../../commons/services/RegionalesService\"\r\nimport { Proveedor, ProveedoresService } from '../services'\r\n\r\ntype Inputs = {\r\n  nit: string,\r\n  nombre: string,\r\n  regional: Regional\r\n}\r\n\r\ntype Props = {\r\n  proveedor?: Proveedor,\r\n  noRedirect?: boolean,\r\n  next?: () => void\r\n}\r\n\r\nexport const ProveedorEmpresaForm = ({proveedor, noRedirect=false, next}: Props)=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    proveedor?: Proveedor,\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation((values: Inputs)=>{\r\n    return id ? ProveedoresService.actualizar(parseInt(id), {\r\n      tipoId: 2,\r\n      nit: parseInt(values.nit) || undefined,\r\n      nombre: values.nombre,\r\n      regionalId: values.regional!.id\r\n    }) : ProveedoresService.registrar({\r\n      tipoId: 2,\r\n      nit: parseInt(values.nit) || undefined,\r\n      nombre: values.nombre,\r\n      regionalId: values.regional!.id\r\n    })\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(next){\r\n        history.replace(history.location.pathname, {\r\n          proveedor: guardar.data.data\r\n        })\r\n        next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${guardar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <Form onSubmit={handleSubmit((values)=>{\r\n    guardar.mutate(values)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>NIT</Form.Label>\r\n        <Form.Control\r\n          // isInvalid={formState}\r\n          {...register(\"nit\", {\r\n            pattern: rules.pattern(/\\d*/)\r\n          })}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          name=\"regional\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <>\r\n              <RegionalesTypeahead\r\n                id=\"medicos-form/regionales-typeahead\"\r\n                onLoad={(regionales)=>setRegionales(regionales)}\r\n                className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                isInvalid={!!fieldState.error}\r\n                selected={field.value ? [field.value] : []}\r\n                onChange={(regionales)=>field.onChange(regionales.length && regionales[0])}\r\n                onBlur={field.onBlur}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n            </>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button\r\n      type=\"submit\"\r\n    >\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n      Guardar\r\n    </Button>\r\n  </Form>\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, InputGroup, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Proveedor, ProveedoresService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components'\r\nimport { EspecialidadesTypeahead } from '../../medicos/components/EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  nit: string\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\n\r\ntype Props = {\r\n  proveedor?: Proveedor,\r\n  noRedirect?: boolean,\r\n  next?: () => void\r\n}\r\n\r\nexport const ProveedorMedicoForm = ({proveedor, noRedirect=false, next}: Props)=>{\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n  const history = useHistory()\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nit: proveedor?.nit?.toString() || \"\",\r\n      ci: proveedor?.medico?.ci?.raiz.toString() || \"\",\r\n      ciComplemento: proveedor?.medico?.ci.complemento || \"\",\r\n      apellidoPaterno: proveedor?.medico?.apellidoPaterno || \"\",\r\n      apellidoMaterno: proveedor?.medico?.apellidoMaterno || \"\",\r\n      nombres: proveedor?.medico?.nombres,\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? ProveedoresService.actualizar(parseInt(id), {\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    }) : ProveedoresService.registrar({\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    })\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == proveedor.regionalId))\r\n    }\r\n  }, [proveedor, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == proveedor.medico?.especialidadId))\r\n    }\r\n  }, [proveedor, especialidades])\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(next){\r\n        history.replace(history.location.pathname, {\r\n          proveedor: guardar.data.data\r\n        })\r\n        next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${guardar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>NIT</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nit}\r\n            {...register(\"nit\", {\r\n              pattern: rules.pattern(/\\d*/)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ciComplemento}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoPaterno}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoMaterno}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nombres}\r\n            {...register(\"nombres\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n      >\r\n        {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n  </>\r\n}","import { useState, useEffect } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { LatLngExpression } from \"leaflet\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Departamento, Provincia, Municipio } from \"../../../../commons/services\"\r\nimport { DepartamentosTypeahead, ProvinciasTypeahead, MunicipiosTypeahead, LocationInput } from \"../../../../commons/components\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { FaLessThanEqual } from \"react-icons/fa\"\r\n\r\n\r\ntype Inputs = {\r\n  departamento: Departamento[]\r\n  provincia: Provincia[]\r\n  municipio: Municipio[]\r\n  direccion: string,\r\n  ubicacion: LatLngExpression\r\n  telefono1: number,\r\n  telefono2: number\r\n}\r\n\r\ntype Props = {\r\n  next?: ()=>void\r\n}\r\n\r\nexport const ContactoForm = (props: Props)=>{\r\n  const {id} = useParams<{id: string}>()\r\n  const history = useHistory<{\r\n    proveedor?: Proveedor,\r\n  }>()\r\n  const [departamentos, setDepartamentos] = useState<Departamento[]>([])\r\n  const [provincias, setProvincias] = useState<Provincia[]>([])\r\n  const [municipios, setMunicipios] = useState<Municipio[]>([])\r\n  const [showLoader, setShowLoader] = useState(false)\r\n  const {\r\n    register,\r\n    control,\r\n    watch,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      departamento: [],\r\n      provincia: [],\r\n      municipio: [],\r\n      ubicacion: [-17.78629, -63.18117]\r\n    }\r\n  })\r\n\r\n  const cargar = useQuery([\"cargarProveedor\", id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !history.location.state?.proveedor,\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const guardar = useMutation((values: Inputs) =>{\r\n    let lat, lng\r\n    if(Array.isArray(values.ubicacion)){\r\n      [lat, lng] = values.ubicacion\r\n    }\r\n    else{\r\n      ({lat, lng} = values.ubicacion)\r\n    }\r\n    return ProveedoresService.guardarInformacionDeContacto({\r\n      municipioId: values.municipio[0].id,\r\n      direccion: values.direccion,\r\n      ubicacion: {\r\n        latitud: lat,\r\n        longitud: lng\r\n      },\r\n      telefono1: values.telefono1,\r\n      telefono2: values.telefono2 || undefined\r\n    })\r\n  })\r\n\r\n  const proveedor = history.location.state?.proveedor || cargar.data?.data\r\n\r\n  useEffect(()=>{\r\n    if(cargar.data){\r\n      if(props.next){\r\n        props.next()\r\n      }\r\n      else {\r\n        history.replace(`/clinica/proveedores/${id || cargar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [cargar.data])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isLoading){\r\n      setShowLoader(true)\r\n    }\r\n  }, [cargar.isLoading])\r\n\r\n  const renderLoader = () =>{\r\n    return <Modal centered show={showLoader} onHide={()=>{\r\n      if(cargar.isError){\r\n        setShowLoader(false)\r\n      }\r\n    }}>\r\n      <Modal.Header>\r\n        Cargando\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {cargar.isLoading ? <Spinner animation=\"border\"></Spinner> : <Alert variant=\"danger\">\r\n          {cargar.error?.response?.message || cargar.error?.message}\r\n        </Alert>}\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  return <Form>\r\n    {renderLoader()}\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Informacin de contacto</h1>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Departamento</Form.Label>\r\n        <Controller\r\n          name=\"departamento\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <DepartamentosTypeahead \r\n              id=\"contacto-form/departamentos\"\r\n              onLoad={(departamentos)=>{\r\n                setDepartamentos(departamentos)\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Provincia</Form.Label>\r\n        <Controller\r\n          name=\"provincia\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <ProvinciasTypeahead\r\n              id=\"contacto-form/provincias\"\r\n              onLoad={(provincias)=>{\r\n                setProvincias(provincias)\r\n              }}\r\n              filterBy={(provincia) => {\r\n                const departamento = watch(\"departamento\")\r\n                return !!departamento.length && provincia.departamentoId == departamento[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Municipio</Form.Label>\r\n        <Controller\r\n          name=\"municipio\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            return <MunicipiosTypeahead\r\n              id=\"contacto-form/municipios\"\r\n              onLoad={(municipios)=>{\r\n                setMunicipios(municipios)\r\n              }}\r\n              filterBy={(municipio) => {\r\n                const provincia = watch(\"provincia\")\r\n                return !!provincia.length && municipio.provinciaId == provincia[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Direccion</Form.Label>\r\n        <Form.Control as=\"textarea\" />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Ubicacin</Form.Label>\r\n        <Controller\r\n          name=\"ubicacion\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            console.log(\"Location\", field)\r\n            return <LocationInput\r\n              center={field.value || [-17.78629, -63.18117]}\r\n              value={field.value}\r\n              onChange={field.onChange}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Telfono 1</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            required: rules.required(),\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Telfono 2</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button>\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      <span className=\"ml-2 align-middle\">Guardar</span>\r\n    </Button>\r\n    {props.next ? <Button variant=\"link\" onClick={()=>{\r\n      props.next && props.next()\r\n    }}\r\n    >\r\n      Omitir\r\n    </Button> : null}\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Button, Col, Form } from \"react-bootstrap\"\r\nimport { Controller, useFieldArray, useFormContext } from \"react-hook-form\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"../../solicitud_atencion_externa/components/PrestacionesTypeahead\"\r\nimport { Prestacion } from \"../../prestaciones/services\"\r\nimport { ArancelesControl } from \"./ArancelesControl\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\n\r\nexport type Inputs = {\r\n  prestaciones: {\r\n    id: string\r\n    prestacion: Prestacion,\r\n    // aranceles: {\r\n    //   nombre: string,\r\n    //   precio: string,\r\n    //   etiqueta: string\r\n    // }[]\r\n  }[]\r\n}\r\n\r\nexport const PrestacionesContratadasControl = ()=>{\r\n  const {\r\n    register,\r\n    control,\r\n    trigger,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n  const {\r\n    fields,\r\n    append,\r\n    remove\r\n  } = useFieldArray({\r\n    name: \"prestaciones\",\r\n    control\r\n  })\r\n\r\n  return <div>\r\n    <h2 style={{fontSize: \"1.25rem\"}}>Servicios subrogados</h2>\r\n    {fields.map((field,index)=>{\r\n      return <Form.Row key={field.id} className=\"py-2 border-bottom\">\r\n        <Form.Group as={Col} xs={12}>\r\n          {/* <Form.Label>\r\n            Prestaciones\r\n          </Form.Label> */}\r\n            <Controller\r\n              name={`prestaciones.${index}.prestacion` as const}\r\n              control={control}\r\n              rules={{\r\n                required: rules.required(),\r\n              }}\r\n              render={({ field, fieldState }) => {\r\n                return <>\r\n                <Form.Row>\r\n                  <Col>\r\n                    <PrestacionesTypeahead\r\n                      id={`proveedor-contrato/prestaciones.${index}`}\r\n                      className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                      isInvalid={!!fieldState.error}\r\n                      filterBy={(prestacion) => {\r\n                        const prestaciones = watch(\"prestaciones\")\r\n                        return !prestaciones.some(p=>p.prestacion?.id == prestacion.id)\r\n                      }}\r\n                      selected={field.value ? [field.value]:[]}\r\n                      onChange={(prestacion) => {\r\n                        field.onChange(prestacion.length ? prestacion[0] : 0)\r\n                      }}\r\n                      onBlur={field.onBlur}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                  </Col>\r\n                  <Col xs=\"auto\">\r\n                      <Button variant=\"danger\" onClick={()=>{\r\n                        remove(index)\r\n                      }}>\r\n                        Quitar\r\n                      </Button>\r\n                  </Col>\r\n                </Form.Row>\r\n                </>\r\n              }}\r\n            />\r\n        </Form.Group>\r\n        {/* <Col className=\"px-3\" xs={12}>\r\n          <ArancelesControl index={index} />\r\n        </Col> */}\r\n      </Form.Row>\r\n    })}\r\n    <Form.Row className=\"py-2\">\r\n      <Col className=\"ml-auto\" xs={\"auto\"}>\r\n        <Button\r\n          onClick={()=>{\r\n            append({\r\n              // aranceles: [{\r\n              //   nombre: \"\",\r\n              //   precio: \"\",\r\n              //   etiqueta: \"\"\r\n              // }]\r\n            })\r\n          }}\r\n        >Agregar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </div>\r\n}","import { useEffect } from \"react\"\r\nimport { Alert, Button, Col, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useParams, useHistory } from \"react-router\"\r\nimport { useMutation } from \"react-query\"\r\nimport { PrestacionesContratadasControl, Inputs as PCInputs } from \"./PrestacionesContratadasControl\"\r\nimport { ContratosService } from \"../services\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\n\r\ntype Inputs = {\r\n  inicio: string,\r\n  fin: string,\r\n  tipoContratoId: string,\r\n  modalidadPagoId: string,\r\n  contrato: FileList\r\n} & PCInputs\r\n\r\nexport const ContratoForm = (props: {next?: ()=>void})=>{\r\n  const {idProveedor} = useParams<{\r\n    idProveedor: string\r\n  }>()\r\n  const history = useHistory<{\r\n    proveedor: {id: number}\r\n  }>()\r\n  const methods = useForm<Inputs>({\r\n    defaultValues: {\r\n      prestaciones: [{\r\n        // aranceles: [{}]\r\n      }]\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((values: Inputs)=>{\r\n    return ContratosService.registrar(parseInt(idProveedor) || history.location.state!.proveedor!.id, {\r\n      inicio: values.inicio,\r\n      fin: values.fin,\r\n      prestacion_ids: values.prestaciones.map(p=>p.prestacion.id)\r\n    })\r\n  })\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    formState,\r\n    control\r\n  } = methods\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(props.next){\r\n        props.next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${parseInt(idProveedor) || history.location.state!.proveedor!.id}#contratos`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <FormProvider {...methods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(values)\r\n      guardar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Contrato</h1>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Inicio</Form.Label>\r\n          <Form.Control type=\"date\"\r\n            isInvalid={!!formState.errors.inicio}\r\n            {...register(\"inicio\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.inicio?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Fin</Form.Label>\r\n          <Form.Control type=\"date\"\r\n            isInvalid={!!formState.errors.fin}\r\n            {...register(\"fin\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.fin?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      {/* <Form.Row>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Tipo de contrato</Form.Label>\r\n          <Form.Row className=\"is-invalid\">\r\n            <Col><Form.Check inline type=\"radio\" label=\"Contrato\" value=\"1\"\r\n              {...register(\"tipoContratoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n            <Col><Form.Check inline type=\"radio\" label=\"Convenio\" value=\"2\"\r\n              {...register(\"tipoContratoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n          </Form.Row>\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors?.tipoContratoId?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Modalidad de pago</Form.Label>\r\n          <Form.Row className=\"is-invalid text-nowrap\">\r\n            <Col><Form.Check inline type=\"radio\" label=\"Mensualizado\" value=\"1\"\r\n              {...register(\"modalidadPagoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n            <Col><Form.Check inline type=\"radio\" label=\"Por trabajo realizado\" value=\"2\"\r\n              {...register(\"modalidadPagoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n          </Form.Row>\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors?.modalidadPagoId?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row> */}\r\n      {/* <Form.Row>\r\n        <Form.Group as={Col} xs=\"auto\">\r\n          <Form.Row>\r\n            <Form.Label column xs=\"auto\">Contrato</Form.Label>\r\n            <Form.File\r\n              as={Col}\r\n              className=\"my-auto\"\r\n              isInvalid={!!formState.errors.contrato}\r\n              {...register(\"contrato\")}\r\n              feedback={formState.errors.contrato?.message}\r\n            />\r\n          </Form.Row>\r\n        </Form.Group>\r\n      </Form.Row> */}\r\n      <Form.Row>\r\n        <Col>\r\n          <PrestacionesContratadasControl />\r\n        </Col>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n            <span className=\"ml-1 align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </FormProvider>\r\n}","\r\nimport { useState, useEffect } from \"react\"\r\nimport { Alert, Form, Col, Modal, Row, Spinner } from \"react-bootstrap\"\r\nimport { useHistory, useParams } from \"react-router\"\r\nimport { useQuery } from \"react-query\"\r\nimport { ProveedorEmpresaForm } from \"./ProveedorEmpresaForm\"\r\nimport { ProveedorMedicoForm } from \"./ProveedorMedicoForm\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { ContactoForm } from \"./ContactoForm\"\r\nimport { ContratoForm } from \"./ContratoForm\"\r\n\r\nexport const ProveedorForm = ()=>{\r\n  const [tipo, setTipo] = useState(0)\r\n  const [step, setStep] = useState(1)\r\n  const [showLoader, setShowLoader] = useState(false)\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n  const history = useHistory<{\r\n    proveedor: Proveedor,\r\n    // step: number\r\n  }>()\r\n\r\n  const cargar = useQuery([\"cargarProveedor\",id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id!))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.proveedor,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const proveedor = cargar.data?.data || history.location.state?.proveedor\r\n\r\n  useEffect(()=>{\r\n    if(proveedor){\r\n      setTipo(proveedor.tipoId)\r\n    }\r\n  }, [proveedor])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isLoading){\r\n      setShowLoader(true)\r\n    }\r\n  }, [cargar.isLoading])\r\n\r\n  const renderLoader = () => {\r\n    return <Modal centered show={showLoader} onHide={()=>{\r\n      if(cargar.isError){\r\n        setShowLoader(false)\r\n      }\r\n    }}>\r\n      <Modal.Header>\r\n        Cargando\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {cargar.isLoading ? <Spinner animation=\"border\"></Spinner> : <Alert variant=\"danger\">\r\n          {cargar.error?.response?.message || cargar.error?.message}\r\n        </Alert>}\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  console.log(tipo, step)\r\n\r\n  const renderForm = () => {\r\n    if(tipo == 1) {\r\n      return <ProveedorMedicoForm proveedor={proveedor}  \r\n        next={()=>{\r\n          if(!id){\r\n            setStep(2)\r\n          }\r\n        }}\r\n      />\r\n    } \r\n    if(tipo == 2){\r\n      return <ProveedorEmpresaForm proveedor={proveedor} \r\n        next={()=>{\r\n          if(!id){\r\n            setStep(2)\r\n          }\r\n        }}\r\n      />\r\n    }\r\n    return null\r\n  }\r\n\r\n  if(step == 1){\r\n    return <>\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizacion de Proveedor\" : \"Registro de Proveedor\"}</h1>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={\"auto\"}>Tipo de proveedor</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check disabled={!!id} inline type=\"radio\" label=\"Mdico\" value={1} checked={tipo == 1} onChange={(e)=>{\r\n            if(e.target.checked && !id)\r\n              setTipo(1) \r\n          }} ></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"Empresa\" value={2} checked={tipo == 2} onChange={(e)=>{\r\n            if(e.target.checked && !id)\r\n              setTipo(2) \r\n          }} ></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      {renderLoader()}\r\n      {renderForm()}\r\n    </>\r\n  }\r\n  if(step == 2){\r\n    return <ContactoForm next={()=>{\r\n      setStep(3)\r\n    }}/>\r\n  }\r\n  if(step == 3){\r\n    return <ContratoForm next={()=>{\r\n      history.replace(`/clinica/proveedores/${history.location.state!.proveedor.id}`)\r\n    }} />\r\n  }\r\n  return null\r\n\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, /*FaCoins,*/ FaHandshake, FaUserMd } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { EspecialidadesIndex } from './especialidades/components/EspecialidadesIndex';\r\nimport { PrestacionesIndex, PrestacionForm } from './prestaciones/componentes';\r\nimport MedicosIndex from './medicos/components/MedicosIndex';\r\nimport MedicosForm from './medicos/components/MedicosForm';\r\nimport { ProveedoresIndex, ProveedorForm, ContactoForm, ContratoForm } from './proveedores/components';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atencin exterana\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion/medicos\",\r\n        path: `${url}/medicos`,\r\n        title: \"Medicos\",\r\n        icon: <FaUserMd />,\r\n      },\r\n      {\r\n        id: \"configuracion/proveedores\",\r\n        path: `${url}/proveedores`,\r\n        title: \"Proveedores\",\r\n        icon: <FaHandshake />,\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        // path: `${url}/configuracion`,\r\n        title: \"Configuracin\",\r\n        icon: <FaCog />,\r\n        items: [\r\n          {\r\n            id: \"configuracion/especialidades\",\r\n            path: `${url}/configuracion/especialidades`,\r\n            title: \"Especialidades\",\r\n            icon: <FaCog />,\r\n          },\r\n          {\r\n            id: \"configuracion/prestaciones\",\r\n            path: `${url}/configuracion/prestaciones`,\r\n            title: \"Servicios subrogados\",\r\n            icon: <FaCog />,\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/medicos`}>\r\n        <MedicosIndex />\r\n      </Route>\r\n      <Route exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}>\r\n        <MedicosForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores`}>\r\n        <ProveedoresIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/registrar`}>\r\n        <ProveedorForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/:id/contacto`}>\r\n        <ContactoForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/:idProveedor/contratos/registrar`}>\r\n        <ContratoForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/configuracion/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route>\r\n      {/* <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    <Route exact path={[`${url}/configuracion/prestaciones/registrar`, `${url}/configuracion/prestaciones/:id/editar`]}>\r\n        <PrestacionForm />\r\n      </Route>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"Est seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripcin</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripcin\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creacin</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualizacin</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripcin</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potos</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contrasea</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contrasea</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarn</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Informacin personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Informacin de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesin en Hipcrates</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contrasea</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesin\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesin</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        Olvid su <a href=\"#\">contrasea?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Hipcrates</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clnica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesin</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesin</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  \"headers\": {\r\n    \"Accept\": \"application/json\"\r\n  },\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","import {LatLngExpression} from \"leaflet\"\r\n\r\nexport const latLngExpressionToString = (value?: LatLngExpression|null) => {\r\n  let lat, lng\r\n  if(value){\r\n    if(Array.isArray(value)){\r\n      [lat, lng] = value\r\n    }\r\n    else{\r\n      ({lat, lng} = value)\r\n    }\r\n    return `${lat.toFixed(8)}, ${lng.toFixed(8)}`\r\n  }\r\n  return \"\"\r\n}","export * from \"./latLngExpressionToString\"\r\n\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}