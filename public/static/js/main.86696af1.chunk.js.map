{"version":3,"sources":["commons/services/authClient.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/PDFViewer.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","commons/components/ImportModal.tsx","apps/clinica/prestaciones/services/PrestacionesService.ts","apps/clinica/prestaciones/componentes/PrestacionesFilterForm.tsx","apps/clinica/prestaciones/componentes/PrestacionesIndex.tsx","apps/clinica/prestaciones/componentes/PrestacionForm.tsx","apps/clinica/medicos/services/MedicosService.ts","apps/clinica/medicos/components/MedicosFilterForm.tsx","apps/clinica/medicos/components/MedicosIndex.tsx","apps/clinica/medicos/components/EspecialidadesTypeahead.tsx","apps/clinica/medicos/components/MedicosForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/index.ts","commons/services/apiClient.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","defaults","data","result","keysToCamel","console","log","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","SidebarItem","item","path","to","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","current","total","onChange","minimum","Math","max","maximum","min","pageItems","i","push","Pagination","Item","active","onClick","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","apiClient","get","numero_patronal","ListaMoraService","page","filter","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","e","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","error","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","ceil","required","validation","maxLength","length","format","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","PDFViewer","height","PDFObject","embed","fallbackLink","ImperativeModal","show","useImperativeHandle","Modal","centered","onHide","Dm11Viewer","setUrl","imperativeModalRef","useRef","Header","Body","Footer","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","useLocation","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","solicitud","numero","fecha","asegurado","matricula","medico","proveedor","urlDm11","FcDebt","GenIcon","nombreCompleto","apellidoPaterno","apellidoMaterno","nombres","AseguradoChooser","asegurados","scope","estado","onSelect","AseguradosService","include","AseguradoCard","useFormContext","trigger","pattern","aseguradoChooserRef","buscar","dirtyFields","Card","Accordion","eventKey","Collapse","lg","md","htmlFor","InputGroup","hasValidation","FormControl","Append","fechaBaja","validate","afterDate","now","moment","add","isSameOrBefore","fechaExtinsion","titularId","titular","empleador","aportes","mora","MedicosService","source","CancelToken","promise","nombre_completo","undefined","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryKey","queryClient","useQueryClient","isIdle","isStale","Date","flip","filterBy","options","labelKey","trim","useCache","maxResults","minLength","onSearch","newQuery","cancelQueries","renderMenuItemChildren","especialidad","PrestacionesService","PrestacionesTypeahead","paginate","onPaginate","prestacion","ProveedorService","ProveedoresTypeahead","refetchOnMount","subtitle","PrestacionesSolicitadasCard","count","setCount","control","proveedoresTypeaheadController","useController","name","useFieldArray","keyName","fields","append","remove","overflow","prestacionSolicitada","render","field","fieldState","prestacionesSolicitadas","contrato","prestaciones","some","pc","ps","prestacionId","onBlur","every","selected","RegionalesService","RegionalesTypeahead","setOptions","onLoad","SolicitudAtencionExternaForm","formMethods","nota","registrar","prestacion_id","defaultActiveKey","searchText","promptText","regional","EspecialidadesService","archivo","separador","formato","formData","FormData","EspecialidadesFilter","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","column","File","feedback","Check","inline","label","form","EspecialidadesIndex","importModalRef","buscarEspecialidades","ButtonGroup","split","ImportModal","importar","file","import","separator","delete","PrestacionesFilterForm","PrestacionesIndex","buscarPrestaciones","eliminar","replace","PrestacionForm","useParams","history","useHistory","location","continueRef","guardar","verPrestacion","inputs","status","renderBody","ci","apellido_paterno","apellido_materno","especialidad_id","raiz","ci_complemento","complemento","MedicosFilterForm","EspecialidadesTypeahead","positionFixed","align","regionales","setRegionales","especialidades","setEspecialidades","ciComplemento","goBack","load","String","r","especialidadId","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","MedicosIndex","MedicosForm","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","search","useDispatch","useMemo","parse","substr","onClickItem","onClickFirst","onClickPrev","onClickNext","onClickLast","setFields","preventDefault","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","UsersPagination","trunc","RolesList","roles","ListGroup","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","p","hash","fetchRoles","Tab","transition","Content","Pane","fetchPermissions","d","checked","defaultChecked","getValues","saveRole","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","matchPassword","RolesCheckList","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","JSON","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","zIndex","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","prototype","replaceAll","str","arguments","newStr","Object","toString","call","toLowerCase","this","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","isArray","Array","isObject","o","n","keys","forEach","k","s","$1","toUpperCase"],"mappings":"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","file":"static/js/main.86696af1.chunk.js","sourcesContent":["import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    {item.path ? \r\n      <Link to={item.path} \r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </Link> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport default ({current, total, onChange}: Props)=>{\r\n  const minimum=Math.max(1, current - 4)\r\n  const maximum=Math.min(total, current + 4)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>onChange(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>Nº Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule, ValidationValueMessage } from \"react-hook-form\"\r\nimport { isObjectBindingPattern } from \"typescript\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): ValidationValueMessage<boolean> => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(pattern)\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.asegurado.matricula}</td>\r\n        <td>{solicitud.medico}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n                !!solicitud.urlDm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.urlDm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscarSolicitudesAtencionExterna.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrícula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n  console.log(props.asegurados.length)\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado ? \"Alta\" : \"Baja\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","import { AxiosTransformer } from \"axios\"\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\n// export type Asegurado = Titular | Beneficiario\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  tipo_id: number,\r\n  estado: string,\r\n  fechaBaja?: string,\r\n  fechaExtinsion?: string,\r\n  empleadorId: string\r\n  titularId: string\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    fechaBaja: string,\r\n    aportes: string\r\n  }\r\n  titular?: {\r\n    id: string,\r\n    matricula: string,\r\n    apellidoPaterno: string | null,\r\n    apellidoMaterno: string,\r\n    nombres: string,\r\n    estado: string,\r\n    fechaBaja?: string,\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useController, ValidationRule } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number,\r\n  asegurado: Asegurado,\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    reset,\r\n    trigger,\r\n    setValue,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  console.log(\"FormState\", watch(), formState.errors)\r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: {records}}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        onChange(asegurado)\r\n      }\r\n      else {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const onChange = (asegurado: Asegurado) => {\r\n    setValue(\"asegurado\", asegurado)\r\n    trigger(\"asegurado.fechaExtinsion\")\r\n    trigger(\"asegurado.fechaBaja\")\r\n    trigger(\"asegurado.titular.fechaBaja\")\r\n    trigger(\"asegurado.empleador.fechaBaja\")\r\n    trigger(\"asegurado.empleador.aportes\")\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(watch(\"asegurado.id\") && formState.dirtyFields.asegurado?.matricula){\r\n      setValue(\"asegurado.id\", \"\")\r\n      setValue(\"asegurado.apellidoPaterno\", \"\")\r\n      setValue(\"asegurado.apellidoMaterno\", \"\")\r\n      setValue(\"asegurado.nombres\", \"\")\r\n      setValue(\"asegurado.estado\", \"\")\r\n      setValue(\"asegurado.fechaBaja\", \"\")\r\n      setValue(\"asegurado.fechaExtinsion\", \"\")\r\n      setValue(\"asegurado.empleador.numeroPatronal\", \"\")\r\n      setValue(\"asegurado.empleador.nombre\", \"\")\r\n      setValue(\"asegurado.empleador.estado\", \"\")\r\n      setValue(\"asegurado.empleador.aportes\", \"\")\r\n    }\r\n  }, [matricula])\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formState.errors.asegurado?.matricula || !!formState.errors.asegurado?.id}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\", {\r\n                required: rules.required(),\r\n                pattern: rules.pattern(/^\\d{2}-\\d{4}-[a-zA-Z]{3}(-\\d)?$/)\r\n              })} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  trigger(\"asegurado.matricula\")\r\n                  if(!formState.errors.asegurado?.matricula){\r\n                    // setValue(\"asegurado.matricula\", watch(\"asegurado.matricula\"))\r\n                    if(formState.dirtyFields.asegurado?.matricula)\r\n                      delete formState.dirtyFields.asegurado.matricula\r\n                    buscar.refetch()\r\n                  }\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.nombres\", {required: rules.required()})}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\", {\r\n                required: rules.required()\r\n              })}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"1\">Alta</option>\r\n              <option value=\"0\">Baja</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaBaja}\r\n              {...register(\"asegurado.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha ext.</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)){\r\n                      return \"Se ha cumplido la fecha de extinsion\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaExtinsion?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <div className={watch(\"asegurado\")?.titularId ? \"\" : \"d-none\"}>\r\n          <h2 style={{fontSize: \"1.25rem\"}}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control \r\n                as=\"select\"\r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.estado}\r\n                {...register(\"asegurado.titular.estado\", {  \r\n                  validate: {\r\n                    required: (value) => {\r\n                      return watch(\"asegurado.titularId\") && rules.required().message\r\n                    }\r\n                  }\r\n                })}\r\n              >\r\n                <option value=\"\"></option>\r\n                <option value=\"1\">Alta</option>\r\n                <option value=\"0\">Baja</option>\r\n              </Form.Control>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.fechaBaja}\r\n                {...register(\"asegurado.titular.fechaBaja\", {\r\n                  validate: {\r\n                    afterDate: (value) => {\r\n                      const now = moment()\r\n                      if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                        return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                      } \r\n                    }\r\n                  }\r\n                })}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.titular?.fechaBaja?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n        </div>\r\n\r\n        <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.numeroPatronal}\r\n              {...register(\"asegurado.empleador.numeroPatronal\")}\r\n            />\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.nombre}\r\n              {...register(\"asegurado.empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.estado}\r\n              {...register(\"asegurado.empleador.estado\")}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"0\">Baja</option>\r\n              <option value=\"1\">Alta</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.fechaBaja}\r\n              {...register(\"asegurado.empleador.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.aportes}\r\n              {...register(\"asegurado.empleador.aportes\", {\r\n                validate: {\r\n                  mora: (value) => {\r\n                    if(value == \"0\"){\r\n                      return \"El empleador esta en mora\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            >\r\n              <option></option>\r\n              <option value=\"0\">En mora</option>\r\n              <option value=\"1\">Al día</option>\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.aportes?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          title=\"Resultados\"\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado)=>{\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            onChange(asegurado)\r\n            aseguradoChooserRef.current!.show(false)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string,\r\n  regionalId: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n\r\n  const queryKey = [\"buscarMedico\", query];\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/prestaciones/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  buscar: (filter: {nombre?: string}, page: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Prestacion>>(\"prestaciones\", {\r\n      params: {\r\n        filter, page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [page, setPage] = useState(1)\r\n  const queryKey = [\"buscarPrestaciones\", query, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscar({\r\n      nombre: query||undefined\r\n    }, {\r\n      size: 50,\r\n      current: page\r\n    })\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(!buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data?.records || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    paginate\r\n    onPaginate={(e, size)=>{\r\n      setPage((page => page + 1))\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  regionalId: number\r\n  contrato: {\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId: number\r\n}\r\n\r\nexport const ProveedorService = {\r\n  buscar: (filter?: Filter, page?: Page) => {\r\n    return apiClient.get<Proveedor[]>(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Proveedor[]>(\"proveedores/buscar-nombre\", {\r\n      params: {nombre},\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  // const [query, setQuery] = useState(\"\")\r\n  // const [options, setOptions] = useState<Proveedor[]>([])\r\n\r\n  \r\n  const queryKey = \"buscarProveedor\"\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    // return ProveedorService.buscarPorNombre(query)\r\n    return ProveedorService.buscar()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnMount: false,\r\n    // enabled: false,\r\n    // onSuccess: ({data})=>{\r\n    //   setOptions(data)\r\n    // }\r\n  })\r\n\r\n  return <AsyncTypeahead flip \r\n    // filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    // options={options}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        const nombre_completo = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{}}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        title = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = proveedor.nombre\r\n        subtitle = \"Empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor } from \"../services/ProveedoresService\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regionalId: number | null,\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number | null,\r\n    nota: string,\r\n  }[],\r\n  proveedor?: Proveedor[]\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const proveedoresTypeaheadController = useController({\r\n    name:\"proveedor\",\r\n    control,\r\n    rules: {\r\n      required: rules.required()\r\n    }\r\n  })\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\",\r\n    keyName: \"prestacionId\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Prestacion</th>\r\n            <th>Proveedor</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    return <>\r\n                      <PrestacionesTypeahead\r\n                        id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                        className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        filterBy={(prestacion) => {\r\n                          const proveedor = watch(\"proveedor.0\")\r\n                          const prestacionesSolicitadas = watch(\"prestacionesSolicitadas\")\r\n                          return !proveedor ||\r\n                            proveedor.contrato.prestaciones.some(pc => pc.id == prestacion.id) && \r\n                            !prestacionesSolicitadas.some(ps=>ps.prestacionId == prestacion.id)\r\n                        }}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(prestacion) => {\r\n                          field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                    </>\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <ProveedoresTypeahead\r\n                  filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                  onChange={proveedoresTypeaheadController.field.onChange}\r\n                  onBlur={proveedoresTypeaheadController.field.onBlur}\r\n                  selected={proveedoresTypeaheadController.field.value}\r\n                />\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const)} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: {onLoad?: (options: Regional[])=>void} & Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      setOptions(buscar.data?.data)\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import React, { ComponentProps, useRef } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport { Medico } from \"../services/MedicosService\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medico?: Medico[]\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacionId: null,\r\n        nota: \"\"\r\n      }],\r\n      asegurado: {\r\n        titular: undefined\r\n      }\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    trigger,\r\n    formState,\r\n    control,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id: prestacion_id as number,\r\n        nota\r\n      }))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11}}) => {\r\n      dm11ViewerRef.current?.setUrl(urlDm11)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(\"onSubmit\", values)\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", undefined)\r\n                          setValue(\"proveedor\", undefined)\r\n                          trigger(\"medico\")\r\n                          trigger(\"proveedor\")\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medico\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        filterBy={(medico)=>medico.regionalId == watch(\"regionalId\")}\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!formState.errors.medico}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n        {/* <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"4\">\r\n            Proveedor\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"4\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller\r\n                    control={control}\r\n                    name=\"proveedor\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <>\r\n                        <ProveedoresTypeahead\r\n                          id=\"solicitud-atencion-externa-form/proveedores\"\r\n                          searchText=\"Buscando...\"\r\n                          promptText=\"Introduce un texto\"\r\n                          filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                          className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                          isInvalid={!!formState.errors.proveedor}\r\n                          onBlur={field.onBlur}\r\n                          onChange={field.onChange}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                      </>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n       */}\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </FormProvider>\r\n}","import axios, { AxiosPromise } from \"axios\"\r\nimport { PaginatedResponse } from \"../../../../commons/services\"\r\nimport apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\ninterface EspecialidadesService {\r\n  buscar(filter: string): AxiosPromise<Especialidad[]>\r\n  buscar(filter: string, page: Page): AxiosPromise<PaginatedResponse<Especialidad>>\r\n  // buscar(filter: string, page?: Page): AxiosPromise<PaginatedResponse<Especialidad>|Especialidad[]>\r\n  importar(archivo: File, separador: string, formato: string): AxiosPromise\r\n}\r\n\r\nexport const EspecialidadesService: EspecialidadesService = {\r\n  buscar: (filter: string, page?: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import { AxiosResponse } from \"axios\"\r\nimport { forwardRef, useImperativeHandle, useRef } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, ModalProps, Row, Spinner } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"./ImperativeModal\"\r\nimport * as rules from \"./rules\"\r\n\r\ntype ImportOptions= {\r\n  separator: string,\r\n  format: string \r\n}\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\n\r\ntype Props = {\r\n  // import: (file: File, options: ImportOptions) => void\r\n  import: (\r\n    file: File,\r\n    options: ImportOptions\r\n  )=>Promise<any>\r\n} & ModalProps\r\n\r\nexport const ImportModal = forwardRef<ImperativeModalRef, Props>((props, ref)=>{\r\n  \r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importar = useMutation(({file, options}: {file: File, options: ImportOptions})=>{\r\n    return props.import(file, options)\r\n  })\r\n\r\n  // const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  // useImperativeHandle(ref, () => ({\r\n  //   show: (show: boolean)=>{\r\n  //     imperativeModalRef.current?.show(show)\r\n  //   }\r\n  // }),[])\r\n  \r\n  return <ImperativeModal ref={ref} {...props}>\r\n  <Modal.Header>\r\n    Importar Datos\r\n  </Modal.Header>\r\n  <Modal.Body>\r\n    <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador: separator, formatoSaltoLinea: format})=>{\r\n      importar.mutate({\r\n        file: archivo![0],\r\n        options: {\r\n          separator,\r\n          format\r\n        }\r\n      })\r\n    })}>\r\n      {importar.data ? <Alert variant={importar.isError ? \"danger\" : \"success\"}>\r\n        {importar.isError ? \"Error\" : \"Importacion existosa\"}\r\n      </Alert> :  null}\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Archivo</Form.Label>\r\n        <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n          <Form.File\r\n            isInvalid={!!formState.errors.archivo}\r\n            {...register(\"archivo\", {\r\n              required: rules.required(),\r\n            })}\r\n            feedback={formState.errors.archivo?.message}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Separador</Form.Label>\r\n        <Col xs={\"auto\"}>\r\n          <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n            isInvalid={!!formState.errors.separador}\r\n            {...register(\"separador\", {\r\n              required: rules.required()\r\n            })}\r\n          ></Form.Control>\r\n          <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n        isInvalid={!!formState.errors.aggrement}\r\n        feedback={formState.errors.aggrement?.message}\r\n        {...register(\"aggrement\", {\r\n          required: rules.required()\r\n        })}\r\n      ></Form.Check>\r\n    </Form>\r\n  </Modal.Body>\r\n  <Modal.Footer>\r\n      <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">\r\n        {importar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Importar\r\n      </Button>\r\n      <Button>Cancelar</Button>\r\n  </Modal.Footer>\r\n</ImperativeModal>\r\n\r\n})","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<PaginatedResponse<Prestacion>>(\"/prestaciones\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  ver: (id: number) => {\r\n    return apiClient.get<Prestacion>(`prestaciones/${id}`)\r\n  },\r\n  registrar: (nombre: string) => {\r\n    return apiClient.post<Prestacion>(\"prestaciones\", {\r\n      nombre\r\n    })\r\n  },\r\n  actualizar: (id: number, nombre: string) => {\r\n    return apiClient.put<Prestacion>(`prestaciones/${id}`, {\r\n      nombre\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`prestaciones/${id}`)\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/prestaciones/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const PrestacionesFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { FaSync, FaEdit, FaTrash } from \"react-icons/fa\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { ImportModal } from \"../../../../commons/components/ImportModal\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { PrestacionesService } from \"../services\"\r\nimport { PrestacionesFilterForm } from \"./PrestacionesFilterForm\"\r\n// import { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\n// import { ImportarPrestaciones } from \"./ImportarPrestaciones\"\r\n\r\nexport const PrestacionesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscarPrestaciones = useQuery([\"buscarPrestaciones\", page, filter], ()=>{\r\n    return PrestacionesService.buscar(page, filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return PrestacionesService.eliminar(id)\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarPrestaciones.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarPrestaciones.isError) {\r\n      const { error } = buscarPrestaciones\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarPrestaciones.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((prestacion, index)=>{\r\n      return <tr key={prestacion.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{prestacion.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-prestacion-${prestacion.id}`}\r\n            />\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} replace to={{\r\n                pathname: `/clinica/configuracion/prestaciones/${prestacion.id}/editar`,\r\n                state: {\r\n                  prestacion\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(prestacion.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\">Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Servicios subrogados</h2>\r\n    <Row className=\"mb-2\">\r\n      <Col className=\"ml-auto pr-0\" xs=\"auto\" >\r\n        <Button onClick={()=>buscarPrestaciones.refetch()}><FaSync /></Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Dropdown as={ButtonGroup}>\r\n          <Button as={Link} replace to={\"/clinica/configuracion/prestaciones/registrar\"}>Nuevo</Button>\r\n          <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={()=>{\r\n              console.log(importModalRef)\r\n              importModalRef.current && importModalRef.current.show(true)\r\n            }}\r\n            >Importar</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </Col>\r\n    </Row>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <PrestacionesFilterForm onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportModal ref={importModalRef}\r\n      import={(file, options)=>{\r\n        return PrestacionesService.importar(file, options.separator, options.format)\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Alert, Button, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery} from \"react-query\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Prestacion, PrestacionesService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\n\r\nexport type Inputs = {\r\n  nombre: string\r\n}\r\n\r\nexport const PrestacionForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    prestacion: Prestacion\r\n  }>()\r\n  \r\n  const { state} = history.location\r\n  \r\n  const prestacion = state?.prestacion\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation(({nombre}: Inputs)=>{\r\n    return id ? PrestacionesService.actualizar(parseInt(id), nombre) : PrestacionesService.registrar(nombre)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }\r\n  })\r\n\r\n  const verPrestacion = useQuery([\"verPrestacion\", id], ()=>{\r\n    return PrestacionesService.ver(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !prestacion,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(verPrestacion.data?.data || prestacion){\r\n      setValue(\"nombre\", (verPrestacion.data?.data || prestacion).nombre)\r\n    }\r\n  }, [verPrestacion.data])\r\n\r\n  const renderBody = ()=>{\r\n    if(verPrestacion.isFetching){\r\n      return <Spinner animation=\"border\">Cargando</Spinner>\r\n    }\r\n    const error = verPrestacion.error as AxiosError\r\n    if(error){\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? guardar.error.response?.data?.message || guardar.error.message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Group>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.nombre}\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form>\r\n  }\r\n\r\n\r\n  return <Modal\r\n    show\r\n    centered\r\n    onHide={()=>{\r\n      history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }}\r\n  >\r\n    <Modal.Header>\r\n      {id ? \"Editar\" : \"Registrar\" }\r\n    </Modal.Header> \r\n    <Modal.Body>\r\n      {renderBody()}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      {!id ? <Button \r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = true\r\n        }}\r\n      >\r\n        {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar y continuar\r\n      </Button> : null}\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = false\r\n        }}\r\n      >\r\n        {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  },\r\n  apellidoPaterno: string,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidadId: number\r\n  especialidad: string\r\n  regionalId: number\r\n}\r\n\r\nexport type Filter = {\r\n  ci?: string,\r\n  nombre?: string,\r\n  especialidadId?: number\r\n  regionalId?: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscar: (filter: Filter, page: Page) => {\r\n    return apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params:{\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  load: (id: number) => {\r\n    return apiClient.get<Medico>(`medicos/${id!}`);\r\n  },\r\n  registrar: (ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.post<Medico>(\"medicos\", {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  actualizar: (id: number, ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.put<Medico>(`medicos/${id}`, {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`medicos/${id!}`)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const MedicosFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { MedicosService, Filter } from \"../services\"\r\nimport { MedicosFilterForm } from \"./MedicosFilterForm\"\r\n\r\nexport default () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarMedicos\", page.current, page.size], () => {\r\n    return MedicosService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return MedicosService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {/* {item.ci.raiz}-{item.ci.complemento} */}\r\n          {item.ci.raiz}{item.ci.complemento ? `-${item.ci.complemento}` : \"\"}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {nombreCompleto(item.apellidoPaterno, item.apellidoMaterno, item.nombres)}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.especialidad}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `/clinica/medicos/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Medicos</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <MedicosFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>C.I.</th>\r\n          <th>Nombre</th>\r\n          <th>Especialidad</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Especialidad, EspecialidadesService } from \"../../especialidades/services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const EspecialidadesTypeahead = (props: {onLoad?: (options: Especialidad[])=>void} & Omit<AsyncTypeaheadProps<Especialidad>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"obtenerEspecialidades\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return EspecialidadesService.buscar(\"\")\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    // onSuccess: ({data})=>{\r\n    //   props.onLoad && props.onLoad(data)\r\n    // }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    positionFixed\r\n    align=\"left\"\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Medico, MedicosService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { Redirect, useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components/RegionalesTypeahead'\r\nimport { EspecialidadesTypeahead } from './EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\nexport default ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    medico: Medico\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? MedicosService.actualizar(parseInt(id), {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    ) : MedicosService.registrar({\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    )\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.goBack()\r\n    }\r\n  })\r\n\r\n  const load = useQuery([\"loadMedico\", id], ()=>{\r\n    return MedicosService.load(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.medico,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const medico = load.data?.data || history.location.state?.medico\r\n\r\n  useEffect(()=>{\r\n    if(medico){\r\n      setValue(\"ci\", String(medico.ci.raiz))\r\n      setValue(\"ciComplemento\", medico.ci.complemento)\r\n      setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      setValue(\"nombres\", medico.nombres)\r\n      // setValue(\"especialidad\",[{id: medico.especialidadId, nombre: medico.especialidad}])\r\n      // setValue(\"regional\", [{id: medico.regionalId}])\r\n    }\r\n  }, [medico])\r\n\r\n  useEffect(()=>{\r\n    if(medico && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == medico.regionalId))\r\n    }\r\n  }, [medico, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(medico && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == medico.especialidadId))\r\n    }\r\n  }, [medico, especialidades])\r\n\r\n  if(guardar.status == \"success\" && !continueRef.current){\r\n    <Redirect to=\"/clinica/medicos\"/>\r\n  }\r\n\r\n  // if(load.isFetching){\r\n  //   return <Spinner animation=\"border\">Cargando</Spinner>\r\n  // }\r\n  // const error = load.error as AxiosError\r\n  // if(error){\r\n  //   return <Alert variant=\"danger\">\r\n  //     {error.response?.data?.message || error.message}\r\n  //   </Alert>\r\n  // }\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizar\" : \"Registrar Medico\"}</h1>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"nombres\", {\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <div className=\"m-n1\">\r\n        {!id ? <Button \r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = true\r\n          }}\r\n        >\r\n          {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar y continuar\r\n        </Button> : null}\r\n        <Button\r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = false\r\n          }}\r\n        >\r\n          {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n    <Modal show={load.isFetching || load.isError} centered >\r\n      <Modal.Body>\r\n        {load.isFetching ? \r\n          <><Spinner animation=\"border\"/>Cargando</> : \r\n          load.isError ? <Alert variant=\"danger\">\r\n               {(load.error as AxiosError).response?.data?.message || (load.error as AxiosError).message}\r\n          </Alert> : null}\r\n      </Modal.Body>\r\n    </Modal>\r\n  </>\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, FaCoins, FaHandshake, FaUserMd } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { Settings } from './settings/components/Settings';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { EspecialidadesIndex } from './especialidades/components/EspecialidadesIndex';\r\nimport { PrestacionesIndex, PrestacionForm } from './prestaciones/componentes';\r\nimport MedicosIndex from './medicos/components/MedicosIndex';\r\nimport MedicosForm from './medicos/components/MedicosForm';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención exterana\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion/medicos\",\r\n        path: `${url}/medicos`,\r\n        title: \"Medicos\",\r\n        icon: <FaUserMd />,\r\n      },\r\n      {\r\n        id: \"configuracion/proveedores\",\r\n        path: `${url}/proveedores`,\r\n        title: \"Proveedores\",\r\n        icon: <FaHandshake />,\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        // path: `${url}/configuracion`,\r\n        title: \"Configuración\",\r\n        icon: <FaCog />,\r\n        items: [\r\n          {\r\n            id: \"configuracion/especialidades\",\r\n            path: `${url}/configuracion/especialidades`,\r\n            title: \"Especialidades\",\r\n            icon: <FaCog />,\r\n          },\r\n          {\r\n            id: \"configuracion/prestaciones\",\r\n            path: `${url}/configuracion/prestaciones`,\r\n            title: \"Servicios subrogados\",\r\n            icon: <FaCog />,\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/medicos`}>\r\n        <MedicosIndex />\r\n      </Route>\r\n      <Route exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}>\r\n        <MedicosForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/configuracion/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route>\r\n      {/* <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    <Route exact path={[`${url}/configuracion/prestaciones/registrar`, `${url}/configuracion/prestaciones/:id/editar`]}>\r\n        <PrestacionForm />\r\n      </Route>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"¿Está seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripción</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potosí</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseñas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarán</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Información personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Información de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Hipócrates</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Hipócrates</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  // transformRequest: [(data, headers)=>{\r\n  //   console.log(\"TransformRequest\", data)\r\n  //   return data\r\n  // }],\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}