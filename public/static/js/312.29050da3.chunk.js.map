{"version":3,"file":"static/js/312.29050da3.chunk.js","mappings":"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","sources":["apps/iam/usuarios/services/UserService.ts","apps/iam/roles/services/RolService.ts","apps/iam/usuarios/components/RolesCheckList.tsx","apps/iam/usuarios/policies/index.ts","apps/iam/usuarios/policies/UsuarioPolicy.ts","apps/iam/usuarios/policies/Permisos.ts","apps/iam/usuarios/components/UserForm.tsx","apps/iam/usuarios/components/CambiarContrasenaForm.tsx","apps/iam/usuarios/components/UserFilterForm.tsx","apps/iam/usuarios/components/RowOptions.tsx","apps/iam/usuarios/components/UserIndex.tsx","apps/iam/usuarios/components/UserView.tsx","apps/iam/roles/services/PermisoService.ts","apps/iam/roles/components/PermisoCheckList.tsx","apps/iam/roles/components/RolForm.tsx","apps/iam/roles/policies/index.ts","apps/iam/roles/policies/RolPolicy.ts","apps/iam/roles/policies/Permisos.ts","apps/iam/roles/components/RowOptions.tsx","apps/iam/roles/components/RolIndex.tsx","apps/iam/roles/components/RolView.tsx","apps/iam/IamApp.tsx","commons/components/IndexTemplate.tsx","commons/click-outside-handler/useOnClickOutside.ts","commons/click-outside-handler/ClickOutsideHandler.tsx","commons/components/layouts/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","../node_modules/react-bootstrap/esm/AccordionContext.js","../node_modules/react-bootstrap/esm/AccordionToggle.js","../node_modules/react-bootstrap/esm/AccordionCollapse.js","../node_modules/react-bootstrap/esm/Accordion.js","../node_modules/react-bootstrap/esm/BreadcrumbItem.js","../node_modules/react-bootstrap/esm/Breadcrumb.js","../node_modules/react-bootstrap/esm/CardImg.js","../node_modules/react-bootstrap/esm/Card.js","../node_modules/react-bootstrap/esm/Container.js","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js","../node_modules/react-bootstrap/esm/Table.js"],"sourcesContent":["import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\nimport { Rol } from \"../../roles/services\"\r\n\r\nexport type UserFilter = {\r\n  _busqueda?: string\r\n  ci?: {\r\n    raiz: number\r\n    complemento?: string\r\n  }\r\n  nombreCompleto?: string\r\n  username?: string\r\n  estado?: number\r\n  regionalId?: number\r\n}\r\n\r\nexport type User = {\r\n  id: number\r\n  username: string\r\n  estado: number\r\n  ci: {\r\n    raiz: number\r\n    complemento: string\r\n    texto?: string\r\n  }\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombre: string\r\n  nombreCompleto: string\r\n  roles: Rol[]\r\n  // roleNames: string[]\r\n  regionalId: number\r\n  regional: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const UserService = {\r\n  buscar: (filter: UserFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<User>>('/usuarios', {\r\n      params: keysToUnderscore({\r\n        page,\r\n        filter\r\n      })\r\n    })\r\n  },\r\n  cargar: (userId: number) =>{\r\n    return apiClient.get<User>(`/usuarios/${userId}`)\r\n  },\r\n  registrar: (data: {\r\n    username: string\r\n    password: string\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: {\r\n      raiz: number,\r\n      complemento: string | null\r\n    }\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombre: string\r\n  }) => {\r\n    return apiClient.post('/usuarios', keysToUnderscore(data))\r\n  },\r\n  actualizar: (id: number, data: {\r\n    regionalId: number,\r\n    roles: string[]\r\n    ci: {\r\n      raiz: number,\r\n      complemento: string | null\r\n    }\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombre: string\r\n  }) => {\r\n    return apiClient.put(`/usuarios/${id}`, keysToUnderscore(data))\r\n  },\r\n  cambiarContrasena: (id: number, data: {oldPassword?: string, password: string}) => {\r\n    return apiClient.put(`/usuarios/${id}/cambiar-contrasena`, keysToUnderscore(data))\r\n  },\r\n  bloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/bloquear`)\r\n  },\r\n  desbloquear: (id: number) => {\r\n    return apiClient.put(`/usuarios/${id}/desbloquear`)\r\n  }\r\n}\r\n","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { Permiso } from \"./PermisoService\"\r\n\r\nexport type RolFilter = {\r\n  _busqueda?: string,\r\n}\r\n\r\nexport type Rol = {\r\n  id: number,\r\n  name: string,\r\n  description: string,\r\n  permissions: {id: number, name: string}[]\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport const RolService = {\r\n  buscar: (filter?: RolFilter, page?: Page)=>{\r\n    return apiClient.get<PaginatedResponse<Rol>|Rol[]>('/roles', {\r\n      params: { filter, page }\r\n    })\r\n  },\r\n  cargar: (id: number)=>{\r\n    return apiClient.get<Rol>(`/roles/${id}`)\r\n  },\r\n  registrar: (data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.post<Rol>('roles', data)\r\n  },\r\n  actualizar: (id: number, data: {\r\n    name: string,\r\n    description: string,\r\n    permissions: string[]\r\n  }) => {\r\n    return apiClient.put<Rol>(`roles/${id}`, data)\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`roles/${id}`)\r\n  }\r\n}","import React, { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup, Spinner } from 'react-bootstrap'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { useQuery } from 'react-query'\r\nimport { RolService, Rol } from '../services'\r\n\r\ntype Props = {\r\n  initialized?: boolean,\r\n  isInvalid?: boolean,\r\n  selected?: Rol[],\r\n  onChange?: (roles: Rol[])=>void\r\n}\r\n\r\nexport const RolesCheckList = React.memo(({\r\n  initialized,\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery([\"roles\", \"buscar\"], ()=>{\r\n    return RolService.buscar()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    // refetchOnMount: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = (buscar.data?.data || []) as Rol[]\r\n\r\n  const renderContent = ()=>{\r\n    // if(buscar.isFetching){\r\n    //   return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    // }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de roles. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {roles.map((rol, index)=>{\r\n        return <ListGroup.Item key={rol.id} as=\"li\"\r\n          className={\"py-2 px-3 text-capitalize\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={rol.name}\r\n            checked={selected.some(rolChecked=>rolChecked.id == rol.id)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, rol] : selected.filter(rch=>rch.id != rol.id)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {initialized && (buscar.isError || buscar.data?.data) ? renderContent() : <Skeleton height=\"12rem\" />}\r\n  </div>\r\n})","import { UsuarioPolicy } from \"./UsuarioPolicy\";\r\n\r\nexport const usuarioPolicy = new UsuarioPolicy","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class UsuarioPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }  \r\n\r\n  view = (user: User, context?: {\r\n    regionalId: number\r\n  }) => { \r\n    const byRegionalOnly = this.viewByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.VER_USUARIOS)) return true\r\n  }\r\n\r\n  viewByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.VER_USUARIOS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  register = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.registerByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.REGISTRAR_USUARIOS)) return true\r\n  }\r\n\r\n  registerByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.REGISTRAR_USUARIOS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  edit = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.editByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.ACTUALIZAR_USUARIOS)) return true\r\n  }\r\n\r\n  editByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_USUARIOS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  changePassword = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.changePasswordByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.CAMBIAR_CONTRASEÑAS)) return true\r\n  }\r\n\r\n  changePasswordByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.CAMBIAR_CONTRASEÑAS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  disable = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.enableByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.BLOQUEAR_USUARIOS)) return true\r\n  }\r\n\r\n  disableByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.BLOQUEAR_USUARIOS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  enable = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.enableByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.DESBLOQUEAR_USUARIOS)) return true\r\n  }\r\n\r\n  enableByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.DESBLOQUEAR_USUARIOS_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n}","/**\r\n * Usuarios\r\n */\r\n export const VER_USUARIOS = \"Ver usuarios\";\r\n export const VER_USUARIOS_MISMA_REGIONAL = \"Ver usuarios (misma regional)\";\r\n export const REGISTRAR_USUARIOS = \"Registrar usuarios\";\r\n export const REGISTRAR_USUARIOS_MISMA_REGIONAL = \"Registrar usuarios (misma regional)\";\r\n export const ACTUALIZAR_USUARIOS = \"Actualizar usuarios\";\r\n export const ACTUALIZAR_USUARIOS_MISMA_REGIONAL = \"Actualizar usuarios (misma regional)\";\r\n export const BLOQUEAR_USUARIOS = \"Bloquear usuarios\";\r\n export const BLOQUEAR_USUARIOS_MISMA_REGIONAL = \"Bloquear usuarios (misma regional)\";\r\n export const DESBLOQUEAR_USUARIOS = \"Desbloquear usuarios\";\r\n export const DESBLOQUEAR_USUARIOS_MISMA_REGIONAL = \"Desbloquear usuarios (misma regional)\";\r\n export const CAMBIAR_CONTRASEÑAS = \"Cambiar contraseñas\";\r\n export const CAMBIAR_CONTRASEÑAS_MISMA_REGIONAL = \"Cambiar contraseñas (misma regional)\";","import { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { Alert, Breadcrumb, Accordion, Button, Card, Col, Form, Row, Spinner } from 'react-bootstrap'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport { useForm, Controller } from 'react-hook-form'\r\nimport { AxiosError } from 'axios'\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query'\r\nimport { Link, useParams, useHistory } from \"react-router-dom\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { Regional } from \"../../../../commons/services\"\r\nimport { UserService, User, Rol } from \"../services\"\r\nimport { RolesCheckList } from './RolesCheckList'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { useUser } from '../../../../commons/auth/hooks'\r\nimport { usuarioPolicy } from '../policies'\r\n\r\n\r\ntype Inputs = {\r\n  initialized: boolean\r\n  informacionPersonal: {\r\n    ci: string,\r\n    ciComplemento: string,\r\n    apellidoPaterno: string,\r\n    apellidoMaterno: string,\r\n    nombres: string\r\n  }\r\n  informacionUsuario: {\r\n    username: string,\r\n    password?: string,\r\n    passwordRepeat?: string,\r\n    roles: Rol[],\r\n    regional: Regional[]\r\n  }\r\n}\r\n\r\nexport const UserForm = () => {\r\n\r\n  const loggedUser = useUser()\r\n\r\n  const { id } = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const schema = useMemo(()=> yup.object().shape({\r\n    informacionPersonal: yup.object().shape({\r\n      ci: yup.number().label(\"carnet de identidad\"),\r\n      ciComplemento: yup.lazy(value => value ? yup.string().label(\"'complemento'\").trim().length(2) : yup.string().nullable().optional()),\r\n      apellidoPaterno: yup.string().label(\"apellido paterno\").trim().when(\"apellidoMaterno\", {\r\n        is: (apellidoMaterno: string) => !apellidoMaterno,\r\n        then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\"),\r\n        otherwise: (schema) => schema.nullable().optional()\r\n      }),\r\n      apellidoMaterno: yup.string().label(\"apellido materno\").trim().when(\"apellidoPaterno\", {\r\n        is: (apellidoPaterno: string) => !apellidoPaterno,\r\n        then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\"),\r\n        otherwise: (schema) => schema.nullable().optional()\r\n      }),\r\n      nombres: yup.string().label(\"nombres\").trim().required().label(\"'Nombres'\"),\r\n    }, [[\"apellidoMaterno\", \"apellidoPaterno\"]]),\r\n    informacionUsuario: yup.object().shape(id ? {\r\n        roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n      } : {\r\n      username: yup.string().label(\"usuario\").required().min(6).max(16).matches(/[a-zA-Z0-9]*/),\r\n      password: yup.string().label(\"contraseña\").min(8).max(256).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\/()=?\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      passwordRepeat: yup.string().label(\"confirmar contraseña\").test(\"password-match\", \"Las contraseñas no coinciden\", function (value) {\r\n        const { parent: { password } } = this\r\n        return value === password\r\n      }),\r\n      regional: yup.array().label(\"regional\").length(1, \"Debe seleccionar una regional\"),\r\n      roles: yup.array().label(\"roles\").min(1, \"Debe seleccionar al menos un rol\")\r\n    })\r\n  }), [])\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    setValue,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    mode: 'onBlur',\r\n    defaultValues: {\r\n      initialized: !id,\r\n      informacionUsuario: {\r\n        roles: [],\r\n        regional: []\r\n      }\r\n    }\r\n  })\r\n  const formErrors = formState.errors\r\n\r\n  const history = useHistory<{\r\n    user: User\r\n  }>()\r\n\r\n  const initialized = watch(\"initialized\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const queryKey = [\"usuarios.cargar\", id];\r\n  const cargar = useQuery(queryKey, () => {\r\n    return UserService.cargar(parseInt(id!))\r\n  }, {\r\n    enabled: !!id && !initialized,\r\n    initialData: history.location.state?.user && {status: 200, statusText: \"OK\", data: history.location.state.user, headers: {}, config: {}},\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n  \r\n  const user = cargar.data?.data\r\n\r\n  useEffect(()=>{\r\n    if(cargar.status === \"error\"){\r\n      setValue(\"initialized\", true)\r\n    }\r\n    if(cargar.status === \"success\") {\r\n      setValue(\"initialized\", true)\r\n      setValue(\"informacionPersonal\", {\r\n        ci: String(user!.ci.raiz),\r\n        ciComplemento: user!.ci.complemento,\r\n        apellidoPaterno: user!.apellidoPaterno,\r\n        apellidoMaterno: user!.apellidoMaterno,\r\n        nombres: user!.nombre\r\n      })\r\n      setValue(\"informacionUsuario\", {\r\n        username: user!.username,\r\n        roles: user!.roles,\r\n        regional: [user!.regional as Regional]\r\n      })\r\n    }\r\n  }, [cargar.status])\r\n\r\n  const guardar = useMutation(({informacionPersonal, informacionUsuario}: Inputs) => {\r\n    return id ? UserService.actualizar(parseInt(id), {\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: {\r\n        raiz: parseInt(informacionPersonal.ci),\r\n        complemento: informacionPersonal.ciComplemento,\r\n      },\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombre: informacionPersonal.nombres\r\n    }) : UserService.registrar({\r\n      username: informacionUsuario.username,\r\n      password: informacionUsuario.password as string,\r\n      regionalId: informacionUsuario.regional[0]!.id,\r\n      roles: informacionUsuario.roles.map(r => r.name),\r\n      ci: {\r\n        raiz: parseInt(informacionPersonal.ci),\r\n        complemento: informacionPersonal.ciComplemento,\r\n      },\r\n      apellidoPaterno: informacionPersonal.apellidoPaterno,\r\n      apellidoMaterno: informacionPersonal.apellidoMaterno,\r\n      nombre: informacionPersonal.nombres\r\n    })\r\n  }, {\r\n    onSuccess: (response) => {\r\n      queryClient.invalidateQueries([\"usuarios\",\"buscar\"])\r\n      if(id){\r\n        queryClient.setQueryData([\"usuarios\", \"cargar\", id], response)\r\n        // history.push(\"/iam/roles\")\r\n      }\r\n      else{\r\n        reset({\r\n          initialized: true,\r\n          informacionUsuario: {\r\n            roles: [],\r\n            regional: []\r\n          }\r\n        })\r\n      }\r\n    }\r\n  })\r\n\r\n  const filterRegional = useCallback((regional: Regional)=>{\r\n    if(id){\r\n      return usuarioPolicy.editByRegionalOnly(loggedUser, {regionalId: regional.id}) !== false\r\n    }\r\n    else {\r\n      return usuarioPolicy.registerByRegionalOnly(loggedUser, {regionalId: regional.id}) !== false\r\n    }\r\n  }, [loggedUser])\r\n\r\n  const registeredFields = {\r\n    ci: register(\"informacionPersonal.ci\"),\r\n    ciComplemento: register(\"informacionPersonal.ciComplemento\"),\r\n    apellidoPaterno: register(\"informacionPersonal.apellidoPaterno\"),\r\n    apellidoMaterno: register(\"informacionPersonal.apellidoMaterno\"),\r\n    nombre: register(\"informacionPersonal.nombres\"),\r\n    username: register(\"informacionUsuario.username\")\r\n  }\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/iam/usuarios\"}}>Usuarios</Breadcrumb.Item>\r\n      {id ? <Breadcrumb.Item active>{id}</Breadcrumb.Item> : null}\r\n      <Breadcrumb.Item active>{!id ? \"Registro\" : \"Actualización\"}</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <Form onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Accordion className=\"mb-2\" defaultActiveKey=\"0\">\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header} className={[\"text-light\",\r\n              formErrors.informacionPersonal ? \"bg-danger\" : \"bg-primary\"\r\n            ].join(\" \")} eventKey=\"0\">\r\n              Información personal\r\n              </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"0\">\r\n              <Card.Body>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} xs={12} sm={6} md={4}>\r\n                    <fieldset className={`border${formState.errors.informacionPersonal?.ci || formState.errors.informacionPersonal?.ciComplemento ? \" border-danger \" : \" \"}rounded`}\r\n                      style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n                      <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Carnet de identidad</Form.Label>\r\n                      <Form.Row>\r\n                        <Col xs={8}>\r\n                          {initialized ? <Form.Control\r\n                            aria-label=\"Número raiz\"\r\n                            className=\"text-uppercase\"\r\n                            isInvalid={!!formState.errors.informacionPersonal?.ci}\r\n                            {...registeredFields.ci}\r\n                          /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                          <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.ci?.message}</Form.Control.Feedback>\r\n                        </Col>\r\n                        <Col xs={4}>\r\n                          {initialized ? <Form.Control\r\n                            aria-label=\"Número complemento\"\r\n                            className=\"text-uppercase\"\r\n                            isInvalid={!!formState.errors.informacionPersonal?.ciComplemento}\r\n                            {...registeredFields.ciComplemento}\r\n                          /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                          <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.ciComplemento?.message}</Form.Control.Feedback>\r\n                        </Col>\r\n                      </Form.Row>\r\n                    </fieldset>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} md={4}>\r\n                    <Form.Label>Apellido Paterno</Form.Label>\r\n                    {initialized ? <Form.Control\r\n                      className=\"text-uppercase\"\r\n                      isInvalid={!!formState.errors.informacionPersonal?.apellidoPaterno}\r\n                      {...registeredFields.apellidoPaterno}\r\n                    /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.apellidoPaterno?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} md={4}>\r\n                    <Form.Label>Apellido Materno</Form.Label>\r\n                    {initialized ? <Form.Control\r\n                      className=\"text-uppercase\"\r\n                      isInvalid={!!formState.errors.informacionPersonal?.apellidoMaterno}\r\n                      {...registeredFields.apellidoMaterno}\r\n                    /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.apellidoMaterno?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} md={4}>\r\n                    <Form.Label>Nombres</Form.Label>\r\n                    {initialized ? <Form.Control\r\n                      className=\"text-uppercase\"\r\n                      isInvalid={!!formState.errors.informacionPersonal?.nombres}\r\n                      {...registeredFields.nombre}\r\n                    /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionPersonal?.nombres?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header} className={[\"text-light\", formErrors.informacionUsuario ? \"bg-danger\" : \"bg-primary\"].join(\" \")} eventKey=\"1\">\r\n              Informacion de usuario\r\n              </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n              <Card.Body>\r\n                <Form.Row>\r\n                  <Form.Group controlId=\"username\" as={Col} md={4}>\r\n                    <Form.Label >Usuario</Form.Label>\r\n                    {initialized ? <Form.Control\r\n                      disabled={!!id}\r\n                      isInvalid={!!formState.errors.informacionUsuario?.username}\r\n                      {...register(\"informacionUsuario.username\")}\r\n                    /> : <Skeleton height=\"calc(1.5em + 0.75rem + 2px)\" />}\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.username?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  {id ? null : <><Form.Group as={Col} md={4}>\r\n                    <Form.Label>Contraseña</Form.Label>\r\n                    <Form.Control type=\"password\"\r\n                      isInvalid={!!formState.errors.informacionUsuario?.password}\r\n                      {...register(\"informacionUsuario.password\")}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.password?.message}</Form.Control.Feedback>\r\n                  </Form.Group>\r\n                  <Form.Group as={Col} md={4}>\r\n                    <Form.Label>Confirmar contraseña</Form.Label>\r\n                    <Form.Control type=\"password\"\r\n                      isInvalid={!!formState.errors.informacionUsuario?.passwordRepeat}\r\n                      {...register(\"informacionUsuario.passwordRepeat\", {\r\n                        required: { value: true, message: \"Este campo es requerido\" },\r\n                        validate: {\r\n                          matchPassword: (value) => value === watch('informacionUsuario.password') || \"Las contraseñas no coinciden\"\r\n                        }\r\n                      })}\r\n                    ></Form.Control>\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.informacionUsuario?.passwordRepeat?.message}</Form.Control.Feedback>\r\n                  </Form.Group></>}\r\n                </Form.Row>\r\n                <Form.Group>\r\n                  <Form.Label>Regional</Form.Label>\r\n                  <Controller\r\n                    name=\"informacionUsuario.regional\"\r\n                    control={control}\r\n                    render={({ field, fieldState }) => {\r\n                      return <RegionalesTypeahead\r\n                        id=\"usuario/regionales-typeahead\"\r\n                        initialized={initialized}\r\n                        className=\"text-uppercase\"\r\n                        isInvalid={!!fieldState.error}\r\n                        feedback={fieldState.error?.message}\r\n                        filterBy={filterRegional}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Row>\r\n                  <Form.Group as={Col}>\r\n                    <Form.Label>Roles</Form.Label>\r\n                    <Controller\r\n                      name=\"informacionUsuario.roles\"\r\n                      control={control}\r\n                      render={({ field, fieldState }) => {\r\n                        return <><RolesCheckList\r\n                          initialized={initialized}\r\n                          isInvalid={!!fieldState.error}\r\n                          onChange={field.onChange}\r\n                          selected={field.value}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                      }}\r\n                    />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n      </Accordion>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </div>\r\n}","import { useMemo } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Button, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport { UserService } from '../services'\r\nimport { useUser } from '../../../../commons/auth'\r\n\r\ntype Inputs = {\r\n  oldPassword: string\r\n  password: string\r\n  passwordRepeat: string\r\n}\r\n\r\nexport const CambiarContrasenaForm = ()=>{\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const history = useHistory()\r\n\r\n  const user = useUser()\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      oldPassword: !id ? yup.string().label(\"antigüa contraseña\").trim().required() : yup.mixed().notRequired(),\r\n      password: yup.string().label(\"nueva contraseña\").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/,\r\n        \"La contraseña debe contener al menos un caracter en minuscula, uno en mayuscula, un número y uno de los siguientes caracter especial: !@#$%^&*\")\r\n        .required(),\r\n      passwordRepeat: yup.string().label(\"repita la nueva contraseña\").oneOf([yup.ref(\"password\")], \"Las contraseñas no coinciden\")\r\n    })\r\n  }, [])\r\n\r\n  const {\r\n    formState,\r\n    handleSubmit,\r\n    register\r\n  } = useForm<Inputs>({\r\n    mode: 'onBlur',\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      oldPassword: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\"\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((data: Inputs) =>{\r\n    const parsedId = parseInt(id)\r\n    return UserService.cambiarContrasena(isNaN(parsedId) ? user!.id : parsedId, {\r\n      password: data.password,\r\n      oldPassword: data.oldPassword\r\n    })\r\n  }, {\r\n    onSuccess: ({data})=>{\r\n      // history.replace(\"/iam/usuarios\");\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors;\r\n\r\n  return <Form onSubmit={handleSubmit((data)=>{\r\n    guardar.mutate(data)\r\n  })}>\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Cambiar contraseña</h1>\r\n    {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n      {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n    </Alert> : null}\r\n    {!id ? <Form.Group>\r\n      <Form.Label>Antigüa contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.oldPassword}\r\n        {...register(\"oldPassword\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.oldPassword?.message}</Form.Control.Feedback>\r\n    </Form.Group> : null}\r\n    <Form.Group>\r\n      <Form.Label>Nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.password}\r\n        {...register(\"password\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.password?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Form.Group>\r\n      <Form.Label>Repita la nueva contraseña</Form.Label>\r\n      <Form.Control\r\n        type=\"password\"\r\n        isInvalid={!!formErrors.passwordRepeat}\r\n        {...register(\"passwordRepeat\")}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">{formErrors.passwordRepeat?.message}</Form.Control.Feedback>\r\n    </Form.Group>\r\n    <Button type=\"submit\">\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      Guardar\r\n    </Button>\r\n\r\n  </Form>\r\n}","import { Button, Col, Form } from \"react-bootstrap\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { UserFilter as Filter } from \"../services\"\r\nimport { usuarioPolicy as userPolicy } from \"../policies\"\r\nimport * as yup from \"yup\"\r\n\r\ntype Inputs = {\r\n  numCi: number\r\n  compCi: string\r\n  estado: number\r\n  regional: Regional[]\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  numCi: yup.number().nonEmpty().nullable().when(\"compCi\", {\r\n    is: true,\r\n    then: (schema) => schema.required(),\r\n    otherwise: (schema) => schema.optional()\r\n  }),\r\n  compCi: yup.string().nonEmpty().uppercase().optional(),\r\n  regional: yup.mixed().optional(),\r\n  estado: yup.number().nonEmpty().optional()\r\n})\r\n\r\nexport const UserFilterForm = (props: Props) => {\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      regional: userPolicy.viewByRegionalOnly(user) ? [user!.regional] : [],\r\n      estado: 0\r\n    }\r\n  })\r\n\r\n  return <Form className=\"border rounded p-2\" onSubmit={handleSubmit((data) => {\r\n    const filter: Filter = {}\r\n    filter.ci = data.numCi ? {\r\n      raiz: data.numCi,\r\n      complemento: data.compCi ? data.compCi : undefined\r\n    } : undefined\r\n    filter.regionalId = data.regional.length && data.regional[0].id\r\n    filter.estado = data.estado\r\n    props.onFilter(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Carnet de identidad</Form.Label>\r\n          <Form.Row>\r\n            <Col xs={9}>\r\n              <Form.Control\r\n                aria-label=\"Número raiz\"\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formState.errors.numCi}\r\n                {...register(\"numCi\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.numCi?.message}</Form.Control.Feedback>\r\n            </Col>\r\n            <Col xs={3}>\r\n              <Form.Control\r\n                aria-label=\"Número complemento\"\r\n                className=\"text-uppercase\"\r\n                {...register(\"compCi\")}\r\n              />\r\n            </Col>\r\n          </Form.Row>\r\n        </fieldset>\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"regional\"\r\n          render={({field: {ref, value, ...field}, fieldState})=>{\r\n            return <RegionalesTypeahead\r\n              className=\"text-uppercase\"\r\n              id=\"medico-filter-regional\"\r\n              selected={userPolicy.viewByRegionalOnly(user) ? [user!.regional as Regional] : value}\r\n              filterBy={(regional) => userPolicy.viewByRegionalOnly(user, {regionalId: regional.id}) !== false}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Estado</Form.Label>\r\n          <Controller\r\n            control={control}\r\n            name=\"estado\"\r\n            render={({field: {value, ...field}})=>{\r\n              return <Form.Row>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Activos\"\r\n                    value={1}\r\n                    checked={value == 1}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Bajas\"\r\n                    value={2}\r\n                    checked={value == 2}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Ambos\"\r\n                    value={0}\r\n                    checked={value == 0}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n              </Form.Row>\r\n            }}\r\n          />\r\n        </fieldset>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col className=\"ml-auto\" xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset({\r\n          regional: userPolicy.viewByRegionalOnly(user) ? [user!.regional] : [],\r\n          estado: 0\r\n        })}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { User, UserService } from \"../services\"\r\nimport { usuarioPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  queryKey: QueryKey\r\n  user: User\r\n}\r\nexport const RowOptions = ({user, queryKey}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cambiarEstado = useMutation(()=>{\r\n    return user.estado == 1 ? UserService.bloquear(user.id) : UserService.desbloquear(user.id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.map((u: any)=>{\r\n              return u == user ? {\r\n                ...u,\r\n                estado: user.estado == 1 ? 2 : 1\r\n              } : {...u}\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(cambiarEstado.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(cambiarEstado.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: cambiarEstado.error as any\r\n      })\r\n    }\r\n  }, [cambiarEstado.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-users-${user.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(login) => usuarioPolicy.view(login, {regionalId: user.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Ver</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(login) => usuarioPolicy.edit(login, {regionalId: user.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: { user }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(login) => usuarioPolicy.changePassword(login, {regionalId: user.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/cambiar-contrasena`,\r\n          state: { user }\r\n        }}>Cambiar contraseña</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(login)=> (user.estado == 1 ? usuarioPolicy.disable : usuarioPolicy.enable)(login, {regionalId: user.regionalId})}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n            cambiarEstado.mutate()\r\n        }}>{user.estado == 1 ? \"Bloquear\" : \"Habilitar\"}</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useMemo, useRef} from \"react\"\r\nimport { Button, Breadcrumb, Collapse, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery } from \"react-query\"\r\nimport { FaSync, FaFilter, FaUserPlus } from \"react-icons/fa\"\r\nimport { Page } from \"../../../../commons/services\"\r\nimport { Pagination } from \"../../../../commons/components\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { UserService, UserFilter } from \"../services\"\r\nimport { usuarioPolicy } from \"../policies\"\r\nimport { UserFilterForm } from \"./UserFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\n\r\n\r\nexport const UserIndex = ()=>{\r\n\r\n  const user = useUser()\r\n\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<UserFilter>(() => {\r\n    const defaultFilter: UserFilter = {}\r\n    if(usuarioPolicy.viewByRegionalOnly(user)){\r\n      defaultFilter.regionalId = user!.regionalId;\r\n    }\r\n    return defaultFilter\r\n  })\r\n\r\n  const queryKey = [\"usuarios\", \"buscar\", filter, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UserService.buscar(filter, page)\r\n  }, {\r\n    enabled: !!superUserPolicyEnhancer(usuarioPolicy.view)(user),\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n\r\n  const updateFilter = (filter: UserFilter)=>{\r\n    buscar.remove()\r\n    setFilter(oldFilter => ({...oldFilter, ...filter}));\r\n    setPage(page => ({...page, current: 1}))\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let index = 0; index < page.size; index++){\r\n      rows.push(<tr key={index}>\r\n        <th scope=\"row\">\r\n          {(page.current - 1)*page.size  + index + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Usuarios</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={usuarioPolicy}\r\n      page={page}\r\n      onSearch={(search)=>{\r\n        updateFilter({_busqueda: search})\r\n      }}\r\n      onPageChange={setPage}\r\n      total={totalRef.current}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      data={buscar.data?.data.records}\r\n      renderData={(usuario, index) => {\r\n        return <tr key={usuario.id}>\r\n          <th scope=\"row\">\r\n            {(page.current - 1)*page.size  + index + 1}\r\n          </th>\r\n          <td>\r\n            {usuario.ci.texto}\r\n          </td>\r\n          <td>\r\n            {usuario.nombreCompleto}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            {usuario.username}\r\n          </td>\r\n          <td>\r\n            {usuario.regional!.nombre}\r\n          </td>\r\n          <td>\r\n            {usuario.estado == 1 ? \"Habilitado\" : usuario.estado == 2 ? \"Bloqueado\" : \"\"}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions queryKey={queryKey} user={usuario} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th>Carnet de identidad</th>\r\n          <th style={{ minWidth: 250}}>Nombre</th>\r\n          <th>Login</th>\r\n          <th>Regional</th>\r\n          <th>Estado</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      }}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      renderFilterForm={()=>{\r\n        return <UserFilterForm onFilter={updateFilter} />\r\n      }}\r\n      renderCreateButton={()=>{\r\n        return <Button\r\n          as={Link}\r\n          to={`/iam/usuarios/registrar`}\r\n          className=\"d-flex align-items-center\">\r\n            <FaUserPlus className=\"mr-2\" />Nuevo\r\n        </Button>\r\n      }}\r\n    />\r\n  </div>\r\n}","import { Alert, Button, Breadcrumb, Col, Form, Table } from 'react-bootstrap'\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { useQuery } from 'react-query'\r\nimport { UserService, User } from '../services'\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\nexport const UserView = ()=>{\r\n  const location = useLocation<{user?: User}>()\r\n  const {id} = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const cargar = useQuery([\"usuario\", \"cargar\", id], ()=>{\r\n    return UserService.cargar(parseInt(id))\r\n  }, {\r\n    initialData: location.state?.user && { status: 200, statusText: \"OK\", headers: {}, config: {}, data: location.state?.user },\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const user = cargar.data?.data\r\n\r\n  const renderAlert = () => {\r\n    if (cargar.error) {\r\n      const { response } = cargar.error as any\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          !response ? \r\n            \"No fue posible realizar la solicitud, verifique si tiene conexion a internet\" :\r\n            response.status == 404 ? \r\n              \"El usuario que busca no existe\" :\r\n              \"Ocurrio un error inesperado\"\r\n        }\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{ to: \"/iam/usuarios\" }}>Usuarios</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>{id}</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Detalles</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    {renderAlert()}\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\">Carnet de identidad</th>\r\n          <td>: {user?user.ci.texto : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Nombre completo</th>\r\n          <td>: {user?user.nombreCompleto : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?user.username : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user? (user.estado == 1 ? 'Habilitado' : user?.estado == 2 ? 'Inhabilitado' : '') : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado el</th>\r\n          <td>: {user?user.createdAt : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado el</th>\r\n          <td>: {user?user.updatedAt:<Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td className=\"text-capitalize\">: {user ? user.roles?.map(r => r.name) : <Skeleton />}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {user ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/usuarios/${user.id}/editar`,\r\n          state: {\r\n            user\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\">Bloquear</Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { apiClient } from \"../../../../commons/services\"\r\n\r\nexport type Permiso = string\r\n\r\nexport const PermisoService = {\r\n  buscar: ()=>{\r\n    return apiClient.get<Permiso[]>('/permisos')\r\n  }\r\n}","import { useEffect } from 'react'\r\nimport { Alert, Form, ListGroup } from 'react-bootstrap'\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { useQuery } from 'react-query'\r\nimport { PermisoService, Permiso } from '../services'\r\n\r\ntype Props = {\r\n  initialized: boolean,\r\n  isInvalid?: boolean,\r\n  selected?: Permiso[],\r\n  onChange?: (permisos: Permiso[])=>void\r\n}\r\nexport const PermisoCheckList = ({\r\n  initialized,\r\n  isInvalid,\r\n  selected=[],\r\n  onChange\r\n}: Props)=>{\r\n  const buscar = useQuery(\"permisos.buscar\", ()=>{\r\n    return PermisoService.buscar()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const permisos = (buscar.data?.data || []) as Permiso[]\r\n\r\n  const renderContent = ()=>{\r\n    // if(buscar.isFetching){\r\n    //   return <><Spinner animation=\"border\" size=\"sm\" /><span>Cargando</span></>\r\n    // }\r\n    if(buscar.isError){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al obtener la lista de permisos. Haga clic <a href=\"#\"\r\n          onClick={(e)=>{\r\n            e.preventDefault()\r\n            buscar.refetch()\r\n          }}\r\n        >aqui</a> para volver a intentar\r\n      </Alert>\r\n    }\r\n    return <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1`} style={{maxHeight: \"12rem\"}}>\r\n      {permisos.map((permiso, index)=>{\r\n        return <ListGroup.Item key={permiso} as=\"li\"\r\n          className={\"py-2 px-3 text-uppercase\" + (isInvalid ? \" border-danger\" : \"\")}\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            isInvalid={isInvalid}\r\n            label={permiso}\r\n            checked={selected.some(s=>s == permiso)}\r\n            onChange={(e)=>{\r\n              const isChecked = e.target.checked\r\n              onChange && onChange(\r\n                isChecked ? [...selected, permiso] : selected.filter(s=>s != permiso)\r\n              )\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  }\r\n\r\n  initialized = initialized && (buscar.status === \"error\" || buscar.status === \"success\")\r\n  return <div className={isInvalid ? \"is-invalid\" : \"\"} >\r\n    {initialized ? renderContent() : <Skeleton containerClassName='input-skeleton' count={5} />}\r\n  </div>\r\n}","import { useMemo, useEffect } from 'react'\r\nimport { Alert, Breadcrumb, Button, Form, Col, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { AxiosError } from 'axios'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { Link, useHistory, useParams } from 'react-router-dom'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from 'yup'\r\nimport {PermisoCheckList} from './PermisoCheckList'\r\nimport { RolService, Rol, Permiso } from '../services'\r\nimport { useServerValidation } from '../../../../commons/hooks'\r\nimport { LazyControl } from '../../../../commons/components'\r\n\r\ntype Inputs = {\r\n  initialized: boolean,\r\n  name: string,\r\n  description: string,\r\n  permissions: Permiso[]\r\n}\r\nexport const RolForm = () => {\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    rol?: Rol,\r\n    ignoreAuthorization?: boolean\r\n  }>()\r\n\r\n  const schema = useMemo(()=>{\r\n    return yup.object().shape({\r\n      name: yup.string().label(\"nombre\").trim()/*.lowercase()*/.required(\"El nombre es requerido\").max(125, \"Ha excedido el limite de $max caracteres\"),\r\n      description: yup.string().label(\"descripcion\").max(250, \"Ha excedido el limite de $max caracteres\").nullable().optional(),\r\n      permissions: yup.array().label(\"permisos\").min(1, \"Debe marcar al menos 1 permiso\")\r\n    })\r\n  }, [])\r\n  \r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    setError,\r\n    setValue,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      initialized: !id,\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const initialized = watch(\"initialized\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cargar = useQuery([\"roles\", \"cargar\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !!id && !initialized,\r\n    initialData: history.location.state?.rol && {status: 200, statusText: \"OK\", data: history.location.state.rol, headers: {}, config: {}},\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onError: () => setValue(\"initialized\", true)\r\n  })\r\n  \r\n  const rol = cargar.data?.data || history.location.state?.rol\r\n    \r\n  useEffect(()=>{\r\n    if(rol) {\r\n      setValue(\"initialized\", true)\r\n      setValue(\"name\", rol.name)\r\n      setValue(\"description\", rol.description)\r\n      setValue(\"permissions\", rol.permissions.map(p=>p.name))\r\n    }\r\n  }, [rol])\r\n\r\n  const guardar = useMutation((data: Inputs)=>{\r\n    if(id){\r\n      return RolService.actualizar(parseInt(id), {\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n    else{\r\n      return RolService.registrar({\r\n        name: data.name,\r\n        description: data.description,\r\n        permissions: data.permissions\r\n      })\r\n    }\r\n  }, {\r\n    onSuccess: (response)=>{\r\n      queryClient.invalidateQueries([\"roles\", \"buscar\"])\r\n      if(id) {\r\n        queryClient.setQueryData([\"roles\", \"cargar\", id], response)\r\n        // history.push(\"/iam/roles\")\r\n      }\r\n      else{\r\n        reset({\r\n          initialized: true,\r\n          name: \"\",\r\n          description: \"\",\r\n          permissions: []\r\n        })\r\n      }\r\n    }\r\n  })\r\n\r\n  useServerValidation(guardar.error as AxiosError, setError)\r\n\r\n  const formErrors = formState.errors\r\n\r\n  const renderAlert = ()=>{\r\n    return  guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n      {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n    </Alert> : null\r\n  }\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/iam/roles\"}}>Roles</Breadcrumb.Item>\r\n      {id ? <Breadcrumb.Item active>{id}</Breadcrumb.Item> : null}\r\n      <Breadcrumb.Item active>{!id ? \"Registro\" : \"Actualización\"}</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <Form onSubmit={handleSubmit((data) => {\r\n      guardar.mutate(data)\r\n    })}>\r\n      {renderAlert()}\r\n      <Form.Group>\r\n        <Form.Label >Nombre</Form.Label>\r\n        <LazyControl\r\n          initialized={initialized}\r\n          isInvalid={!!formState.errors.name}\r\n          className=\"text-uppercase\"\r\n          {...register(\"name\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.name?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Descripcion</Form.Label>\r\n        <LazyControl\r\n          initialized={initialized}\r\n          as=\"textarea\"\r\n          isInvalid={!!formErrors.description}\r\n          className=\"text-uppercase\"\r\n          {...register(\"description\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.description?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Permisos</Form.Label>\r\n        <Controller\r\n          name=\"permissions\"\r\n          control={control}\r\n          render={({ field, fieldState }) => {\r\n            return <><PermisoCheckList\r\n              initialized={initialized}\r\n              isInvalid={!!fieldState.error}\r\n              onChange={field.onChange}\r\n              // onBlur={field.onBlur}\r\n              selected={field.value}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Row className=\"mt-2\">\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" className=\"mr-2\" size=\"sm\" /> : null}\r\n            <span className=\"align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </div>\r\n}","import { RolPolicy } from \"./RolPolicy\";\r\n\r\nexport const rolPolicy = new RolPolicy","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class RolPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }  \r\n\r\n  view = (user: User, context?: never) => { \r\n    if(user?.can(Permisos.VER_ROLES)) return true\r\n  }\r\n\r\n  register = (user: User, context?: never) => {\r\n    if(user?.can(Permisos.REGISTRAR_ROLES)) return true\r\n  }\r\n\r\n  edit = (user: User, context?: never) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_ROLES)) return true\r\n  }\r\n\r\n  delete = (user: User, context?: never) => {\r\n    if(user?.can(Permisos.ELIMINAR_ROLES)) return true\r\n  }\r\n}","/**\r\n * Roles\r\n */\r\nexport const VER_ROLES = \"Ver roles\";\r\nexport const REGISTRAR_ROLES = \"Registrar roles\";\r\nexport const ACTUALIZAR_ROLES = \"Actualizar roles\";\r\nexport const ELIMINAR_ROLES = \"Eliminar roles\";","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQuery, useQueryClient, QueryKey } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Rol, RolService } from \"../services\"\r\nimport { rolPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  rol: Rol\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({rol, queryKey}: Props) => {\r\n\r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return RolService.eliminar(id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.invalidateQueries(\"roles.buscar\",{inactive: true})\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.filter((u: any)=>{\r\n              return u !== rol\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(eliminar.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(eliminar.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: eliminar.error as any\r\n      })\r\n    }\r\n  }, [eliminar.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-roles-${rol.id}`}\r\n    />\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={rolPolicy.view}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}`,\r\n          state: {\r\n            rol\r\n          }\r\n        }} >Ver</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={rolPolicy.edit}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            rol\r\n          }\r\n        }}>Editar</Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={rolPolicy.delete}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n          if(window.confirm(\"Esta accion es irreversible, ¿Esta seguro de continuar?\")){\r\n            eliminar.mutate(rol.id)\r\n          }\r\n        }}>Eliminar</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { AxiosPromise, AxiosError } from \"axios\"\r\nimport React, {useMemo, useState, useRef} from \"react\"\r\nimport { Button, Breadcrumb, Form, Modal, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { FaSync, FaFilter, FaPlus } from \"react-icons/fa\"\r\nimport { Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport { RolFilterForm } from \"./RolFilterForm\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { Rol, RolService, RolFilter } from \"../services\"\r\nimport { rolPolicy } from \"../policies\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\n\r\nexport const RolIndex = ()=>{\r\n\r\n  const user = useUser()\r\n\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<RolFilter>({})\r\n\r\n  const queryKey = [\"roles\", \"buscar\", page, filter]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RolService.buscar(filter, page) as AxiosPromise<PaginatedResponse<Rol>>\r\n  }, {\r\n    enabled: !!superUserPolicyEnhancer(rolPolicy.view)(user),\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  \r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let index = 0; index < page.size; index++){\r\n      rows.push(<tr key={index}>\r\n        <th scope=\"row\">\r\n          {(page.current - 1)*page.size  + index + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Roles</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={rolPolicy}\r\n      page={page}\r\n      onSearch={(search) => {\r\n        setFilter(filter => ({...filter, _busqueda: search}))\r\n        setPage(page => ({...page, current: 1}))\r\n      }}\r\n      onPageChange={setPage}\r\n      total={totalRef.current}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      data={buscar.data?.data.records}\r\n      renderData={(rol, index) => {\r\n        return <tr key={rol.id}>\r\n          <th scope=\"row\">\r\n            {(page.current - 1)*page.size  + index + 1}\r\n          </th>\r\n          <td>\r\n            {rol.name}\r\n          </td>\r\n          <td>\r\n            {rol.description}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions queryKey={queryKey} rol={rol} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{ minWidth: 250}}>Descripción</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      }}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      // renderFilterForm={()=>{\r\n      //   return <RolFilterForm onSearch={(filter) => {\r\n      //     buscar.remove()\r\n      //     setFilter({_busqueda: filter})\r\n      //     setPage(page => ({ ...page, current: 1 }))\r\n      //   }} />\r\n      // }}\r\n      renderCreateButton={()=>{\r\n        return <Button\r\n          as={Link}\r\n          to={`/iam/roles/registrar`}\r\n          className=\"d-flex align-items-center\">\r\n            <FaPlus className=\"mr-2\" />Nuevo\r\n        </Button>\r\n      }}\r\n    />\r\n  </div>\r\n\r\n\r\n}","import { useEffect, useRef } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Breadcrumb, Button, Col, Form, Modal, Spinner, Table } from 'react-bootstrap'\r\nimport { RolService, Rol } from '../services'\r\nimport { useQueryClient, useQuery, useMutation } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation, useParams } from 'react-router-dom'\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\n\r\nexport const RolView = ()=>{\r\n  const location = useLocation<{\r\n    rol?: Rol\r\n  }>()\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cargar = useQuery([\"roles\", \"cargar\", id], ()=>{\r\n    return RolService.cargar(parseInt(id))\r\n  }, {\r\n    initialData: location.state?.rol && { status: 200, statusText: \"OK\", headers: {}, config: {}, data: location.state?.rol },\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const eliminar = useMutation(()=>{\r\n    return RolService.eliminar(parseInt(id))\r\n  }, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"roles\", \"buscar\"]);\r\n    },\r\n    onError: (error) => {\r\n    }\r\n  })\r\n\r\n  const rol = cargar.data?.data\r\n\r\n  const renderAlert = () => {\r\n    if (cargar.error) {\r\n      const { response } = cargar.error as any\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          !response ? \r\n            \"No fue posible realizar la solicitud, verifique si tiene conexion a internet\" :\r\n            response.status == 404 ? \r\n              \"El usuario que busca no existe\" :\r\n              \"Ocurrio un error inesperado\"\r\n        }\r\n      </Alert>\r\n    }\r\n    if(eliminar.status == \"success\") {\r\n      return <Alert variant=\"success\">\r\n        El rol ha sido eliminado.\r\n      </Alert>\r\n    }\r\n    if(eliminar.status == \"error\") {\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error mientras se intentaba eliminar el rol.\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n  \r\n  return <>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{ to: \"/iam/roles\" }}>Roles</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>{id}</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Detalles</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    {renderAlert()}\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{rol?rol.name: <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={rol?.description ? \"\" : \"bg-light\"}>{rol?rol.description || \"Sin descripción\": <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{rol?rol.createdAt:<Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{rol?rol.updatedAt: <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${rol?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              rol ? rol.permissions.length ? <ul className=\"d-inline-block\">\r\n                {rol?.permissions.map((p, i)=><li key={p.id} className=\"text-capitalize\">{p.name}</li>)}\r\n              </ul> : \"No se agregaron permisos\" : <Skeleton count={5} />\r\n            }\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n    {rol ? <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button as={Link} to={{\r\n          pathname: `/iam/roles/${rol.id}/editar`,\r\n          state: {\r\n            rol\r\n          }\r\n        }} >Editar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"danger\" onClick={()=>{\r\n          if(window.confirm(\"Esta accion es irreversible, ¿Esta seguro de continuar?\")){\r\n            eliminar.mutate()\r\n          }\r\n        }}>\r\n          {eliminar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : null}\r\n          Eliminar\r\n        </Button>\r\n      </Col>\r\n    </Form.Row> : null}\r\n  </>\r\n}","import { useMemo } from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport { ProtectedRoute } from '../../commons/auth/components'\r\nimport { useUser } from '../../commons/auth/hooks'\r\nimport {UserIndex, UserView, UserForm, CambiarContrasenaForm } from './usuarios/components'\r\nimport {RolIndex, RolView, RolForm} from './roles/components'\r\nimport { usuarioPolicy } from './usuarios/policies'\r\nimport { rolPolicy } from './roles/policies'\r\nimport { Image } from 'react-bootstrap'\r\nimport { superUserPolicyEnhancer } from '../../commons/auth/utils'\r\n\r\nexport const IamApp = ()=>{\r\n  const { url } = useRouteMatch()\r\n  const loggedUser = useUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n    if(superUserPolicyEnhancer(usuarioPolicy.index)(loggedUser)) {\r\n      items.push({\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n      })\r\n    }\r\n    if(superUserPolicyEnhancer(rolPolicy.index)(loggedUser)){\r\n      items.push(\r\n        {\r\n          id: \"roles\",\r\n          icon: <FaTasks />,\r\n          path: `${url}/roles`,\r\n          title: \"Roles\"\r\n        }\r\n      )\r\n    }\r\n    return items\r\n  }, [loggedUser])\r\n\r\n  return <SidebarLayout \r\n    sidebar={{\r\n        header: <div className=\"d-flex justify-content-center\"><Image src=\"/logo-lg.png\" /></div>,\r\n        items: sidebarItems\r\n    }}\r\n  >\r\n    <Switch>\r\n      {/* <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route> */}\r\n      <ProtectedRoute exact path={`${url}/usuarios`}\r\n        authorize={usuarioPolicy.index}\r\n      >\r\n        <UserIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/usuarios/registrar`, `${url}/usuarios/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/usuarios/registrar` ? usuarioPolicy.register(user) : usuarioPolicy.edit(user)}\r\n      >\r\n        <UserForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id/cambiar-contrasena`}\r\n        authorize={(user) => usuarioPolicy.changePassword(user)}\r\n      >\r\n        <CambiarContrasenaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/cambiar-contrasena`}>\r\n        <CambiarContrasenaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/usuarios/:id`}\r\n        authorize={(user) => usuarioPolicy.view(user)}\r\n      >\r\n        <UserView />\r\n      </ProtectedRoute>\r\n      \r\n      <ProtectedRoute exact path={`${url}/roles`}\r\n        authorize={rolPolicy.index}\r\n      >\r\n        <RolIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/roles/registrar`, `${url}/roles/:id/editar`]}\r\n        authorize={(user, currentUrl) => currentUrl == `${url}/roles/registrar` ? rolPolicy.register(user) : rolPolicy.edit(user)}\r\n      >\r\n        <RolForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/roles/:id`}\r\n        authorize={(user)=>rolPolicy.view(user)}\r\n      >\r\n        <RolView />\r\n      </ProtectedRoute>\r\n    </Switch>\r\n  \r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","import React, { useState} from \"react\"\r\nimport { Button, Col, Collapse, Form, InputGroup, Table } from \"react-bootstrap\"\r\nimport {FaFilter, FaSearch, FaSync} from \"react-icons/fa\"\r\nimport { Pagination } from \"./Pagination\"\r\nimport { Page } from \"../services/Page\"\r\nimport { User, ProtectedContent } from \"../auth\"\r\nimport { SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG } from \"constants\"\r\n\r\ntype Props<Data> = {\r\n  page: Page\r\n  total: number\r\n  data?: Data[]\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n  policy: {\r\n    view(user: User): boolean | undefined\r\n    register(user: User): boolean | undefined\r\n  }\r\n  renderLoader: () => React.ReactElement\r\n  renderData: (item: Data, index: number) => React.ReactElement\r\n  renderDataHeaders: () => React.ReactElement\r\n  renderFilterForm?: () => React.ReactElement\r\n  renderCreateButton: () => React.ReactElement\r\n  onRefetch: () => void\r\n  onPageChange: (page: Page) => void\r\n  onSearch?: (search: string) => void\r\n}\r\n\r\nexport function IndexTemplate<Data>({\r\n  total,\r\n  page,\r\n  data,\r\n  isLoading,\r\n  hasError,\r\n  policy,\r\n  onSearch,\r\n  onRefetch,\r\n  onPageChange,\r\n  renderLoader,\r\n  renderData,\r\n  renderDataHeaders,\r\n  renderCreateButton,\r\n  renderFilterForm\r\n}: Props<Data>) {\r\n  \r\n  const [ search, setSearch ] = useState(\"\")\r\n  const [ showFilterForm, setShowFilterForm] = useState(false)\r\n\r\n  const renderRows = ()=>{\r\n    if(data){\r\n      if(data.length === 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return data.map(renderData)\r\n    }\r\n    if (isLoading) {\r\n      return renderLoader()\r\n    }\r\n    if (hasError) {\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          Ocurrió un error al realizar la solicitud\r\n        </td>\r\n      </tr>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <div>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={policy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              onRefetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          {renderFilterForm ? <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              setShowFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col> : null}\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={policy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            {renderCreateButton()}\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={policy.view}\r\n    >\r\n      {renderFilterForm ? <Collapse in={showFilterForm}>\r\n        <div className=\"mb-2\">\r\n          {renderFilterForm()}\r\n        </div>\r\n      </Collapse> : null}\r\n      <Form.Row className=\"mb-2\">\r\n        {onSearch ? <Col className=\"mb-2\">\r\n          {/* <Form.Row className=\"flex-nowrap\">\r\n            <Col>\r\n              <Form.Control aria-label=\"Busqueda\" type=\"search\" />\r\n            </Col>\r\n            <Col xs={\"auto\"}>\r\n              <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n            </Col>\r\n          </Form.Row> */}\r\n          <InputGroup>\r\n              <Form.Control aria-label=\"Busqueda\" type=\"search\" value={search} onChange={(e)=>{\r\n                setSearch(e.target.value)\r\n              }} />\r\n              <InputGroup.Append>\r\n                <Button onClick={()=>{\r\n                  onSearch(search)\r\n                }}><FaSearch /></Button>\r\n              </InputGroup.Append>\r\n          </InputGroup>\r\n        </Col> : null}\r\n        <Col className=\"ml-auto\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Label htmlFor=\"pageSizeSelector\" srOnly>Tamaño de pagina</Form.Label>\r\n            <Form.Control id=\"pageSizeSelector\" className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              onPageChange({\r\n                current: 1,\r\n                size: parseInt(value)\r\n              })\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Form.Row>\r\n      <Table responsive>\r\n        <thead>\r\n          {renderDataHeaders()}\r\n        </thead>\r\n        <tbody className=\"text-uppercase\">\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <Form.Row>\r\n        <Col className=\"mr-auto\" xs=\"auto\">\r\n          {total > 0 ? <span style={{whiteSpace: \"nowrap\"}}>Se encontraron {total} resultados</span> : \"\"}\r\n        </Col>\r\n        <Col className=\"ml-auto\" xs=\"auto\">\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil(total / page.size)}\r\n            onChange={(current) => onPageChange({ ...page, current })}\r\n          />\r\n        </Col>\r\n      </Form.Row>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import { RefObject, useEffect } from 'react'\r\n\r\ntype AnyEvent = MouseEvent | TouchEvent\r\n\r\nexport function useOnClickOutside<T extends HTMLElement = HTMLElement>(\r\n  ref: RefObject<T>,\r\n  handler: (event: AnyEvent) => void,\r\n) {\r\n  useEffect(() => {\r\n    const listener = (event: AnyEvent) => {\r\n      const el = ref?.current\r\n\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!el || el.contains(event.target as Node) || document.querySelector('html') == event.target) {\r\n        return\r\n      }\r\n      handler(event)\r\n    }\r\n\r\n    document.addEventListener(`mousedown`, listener)\r\n    document.addEventListener(`touchstart`, listener)\r\n\r\n    return () => {\r\n      document.removeEventListener(`mousedown`, listener)\r\n      document.removeEventListener(`touchstart`, listener)\r\n    }\r\n\r\n    // Reload only if ref or handler changes\r\n  }, [ref, handler])\r\n}\r\n\r\nexport default useOnClickOutside\r\n","import { FC, useRef, ComponentProps } from 'react'\r\nimport { useOnClickOutside } from './useOnClickOutside'\r\n\r\ntype Props = {\r\n  onClickOutside: (event: MouseEvent | TouchEvent) => void\r\n} & ComponentProps<\"div\">\r\nexport const ClickOutsideHandler:FC<Props> = ({children, onClickOutside, ...props}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(containerRef, onClickOutside)\r\n  return <div ref={containerRef} {...props}>\r\n    {children}\r\n  </div>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"text-nowrap sidebar-navitem\"\r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          borderLeft: !!match ? \"0.25rem solid #f28c2b\" : 0\r\n        }}\r\n        key={item.id}>\r\n          <span className=\"sidebar-navitem-icon\">{item.icon}</span><span className=\"sidebar-navitem-title\">{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          <span className=\"sidebar-navitem-icon\">{item.icon}</span><span className=\"sidebar-navitem-title\">{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action  border-left-3 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">\r\n      <div className=\"sidebar-heading-content\">{header}</div>\r\n    </div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <div className=\"sidebar-menu\">\r\n      <ListGroup variant=\"flush\">\r\n        {items.map(item=>(\r\n          <SidebarItem key={item.id} {...item} />\r\n        ))}      \r\n      </ListGroup>\r\n    </div>\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ClickOutsideHandler } from '../../click-outside-handler'\r\nimport { Sidebar, SidebarProps } from './Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props) => {\r\n  const showSidebar = useSelector((state:any) => state.sidebarVisibility)\r\n  const dispatch = useDispatch()\r\n\r\n  const onClickOutsideHandler = React.useCallback((event: MouseEvent | TouchEvent)=>{\r\n    const toggle = document.querySelector('[aria-label=\"Toggle navigation\"]')\r\n    if(!toggle?.contains(event.target as Node)){\r\n      dispatch({\r\n        type: \"CLOSE_SIDEBAR\"\r\n      })\r\n    }\r\n  }, [showSidebar])\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" collapsed\")}  id=\"wrapper\">\r\n    <ClickOutsideHandler className=\"shadow-sm\" style={{zIndex: 100}} onClickOutside={onClickOutsideHandler}>\r\n      <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    </ClickOutsideHandler>\r\n    <div className=\"overflow-auto\" style={{width: \"100%\"}}>\r\n      <Container className=\"d-flex flex-column\">\r\n        <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n          {children}\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import React from 'react';\nvar context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'AccordionContext';\nexport default context;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport SelectableContext from './SelectableContext';\nimport AccordionContext from './AccordionContext';\nexport function useAccordionToggle(eventKey, onClick) {\n  var contextEventKey = useContext(AccordionContext);\n  var onSelect = useContext(SelectableContext);\n  return function (e) {\n    /*\n      Compare the event key in context with the given event key.\n      If they are the same, then collapse the component.\n    */\n    var eventKeyPassed = eventKey === contextEventKey ? null : eventKey;\n    if (onSelect) onSelect(eventKeyPassed, e);\n    if (onClick) onClick(e);\n  };\n}\nvar AccordionToggle = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'button' : _ref$as,\n      children = _ref.children,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"as\", \"children\", \"eventKey\", \"onClick\"]);\n\n  var accordionOnClick = useAccordionToggle(eventKey, onClick);\n\n  if (Component === 'button') {\n    props.type = 'button';\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    onClick: accordionOnClick\n  }, props), children);\n});\nexport default AccordionToggle;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useContext } from 'react';\nimport Collapse from './Collapse';\nimport AccordionContext from './AccordionContext';\nimport SelectableContext from './SelectableContext';\nvar AccordionCollapse = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      eventKey = _ref.eventKey,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eventKey\"]);\n\n  var contextEventKey = useContext(AccordionContext); // Empty SelectableContext is to prevent elements in the collapse\n  // from collapsing the accordion when clicked.\n\n  return /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(Collapse, _extends({\n    ref: ref,\n    in: contextEventKey === eventKey\n  }, props), /*#__PURE__*/React.createElement(\"div\", null, React.Children.only(children))));\n});\nAccordionCollapse.displayName = 'AccordionCollapse';\nexport default AccordionCollapse;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AccordionToggle from './AccordionToggle';\nimport SelectableContext from './SelectableContext';\nimport AccordionCollapse from './AccordionCollapse';\nimport AccordionContext from './AccordionContext';\nvar Accordion = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      _useUncontrolled$as = _useUncontrolled.as,\n      Component = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      activeKey = _useUncontrolled.activeKey,\n      bsPrefix = _useUncontrolled.bsPrefix,\n      children = _useUncontrolled.children,\n      className = _useUncontrolled.className,\n      onSelect = _useUncontrolled.onSelect,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"as\", \"activeKey\", \"bsPrefix\", \"children\", \"className\", \"onSelect\"]);\n\n  var finalClassName = classNames(className, useBootstrapPrefix(bsPrefix, 'accordion'));\n  return /*#__PURE__*/React.createElement(AccordionContext.Provider, {\n    value: activeKey || null\n  }, /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: onSelect || null\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, controlledProps, {\n    className: finalClassName\n  }), children)));\n});\nAccordion.displayName = 'Accordion';\nAccordion.Toggle = AccordionToggle;\nAccordion.Collapse = AccordionCollapse;\nexport default Accordion;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport SafeAnchor from './SafeAnchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  active: false,\n  linkProps: {}\n};\nvar BreadcrumbItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      children = _ref.children,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'li' : _ref$as,\n      _ref$linkAs = _ref.linkAs,\n      LinkComponent = _ref$linkAs === void 0 ? SafeAnchor : _ref$linkAs,\n      linkProps = _ref.linkProps,\n      href = _ref.href,\n      title = _ref.title,\n      target = _ref.target,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"children\", \"className\", \"as\", \"linkAs\", \"linkProps\", \"href\", \"title\", \"target\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'breadcrumb-item');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(prefix, className, {\n      active: active\n    }),\n    \"aria-current\": active ? 'page' : undefined\n  }), active ? children : /*#__PURE__*/React.createElement(LinkComponent, _extends({}, linkProps, {\n    href: href,\n    title: title,\n    target: target\n  }), children));\n});\nBreadcrumbItem.displayName = 'BreadcrumbItem';\nBreadcrumbItem.defaultProps = defaultProps;\nexport default BreadcrumbItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport BreadcrumbItem from './BreadcrumbItem';\nvar defaultProps = {\n  label: 'breadcrumb',\n  listProps: {}\n};\nvar Breadcrumb = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      listProps = _ref.listProps,\n      children = _ref.children,\n      label = _ref.label,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'nav' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"listProps\", \"children\", \"label\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'breadcrumb');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    \"aria-label\": label,\n    className: className,\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"ol\", _extends({}, listProps, {\n    className: classNames(prefix, listProps == null ? void 0 : listProps.className)\n  }), children));\n});\nBreadcrumb.displayName = 'Breadcrumb';\nBreadcrumb.defaultProps = defaultProps;\nBreadcrumb.Item = BreadcrumbItem;\nexport default Breadcrumb;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: null\n};\nvar CardImg = /*#__PURE__*/React.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      variant = _ref.variant,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'img' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"variant\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card-img');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    className: classNames(variant ? prefix + \"-\" + variant : prefix, className)\n  }, props));\n});\nCardImg.displayName = 'CardImg';\nCardImg.defaultProps = defaultProps;\nexport default CardImg;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport divWithClassName from './divWithClassName';\nimport CardContext from './CardContext';\nimport CardImg from './CardImg';\nvar DivStyledAsH5 = divWithClassName('h5');\nvar DivStyledAsH6 = divWithClassName('h6');\nvar CardBody = createWithBsPrefix('card-body');\nvar CardTitle = createWithBsPrefix('card-title', {\n  Component: DivStyledAsH5\n});\nvar CardSubtitle = createWithBsPrefix('card-subtitle', {\n  Component: DivStyledAsH6\n});\nvar CardLink = createWithBsPrefix('card-link', {\n  Component: 'a'\n});\nvar CardText = createWithBsPrefix('card-text', {\n  Component: 'p'\n});\nvar CardHeader = createWithBsPrefix('card-header');\nvar CardFooter = createWithBsPrefix('card-footer');\nvar CardImgOverlay = createWithBsPrefix('card-img-overlay');\nvar defaultProps = {\n  body: false\n};\nvar Card = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      bg = _ref.bg,\n      text = _ref.text,\n      border = _ref.border,\n      body = _ref.body,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"bg\", \"text\", \"border\", \"body\", \"children\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card');\n  var cardContext = useMemo(function () {\n    return {\n      cardHeaderBsPrefix: prefix + \"-header\"\n    };\n  }, [prefix]);\n  return /*#__PURE__*/React.createElement(CardContext.Provider, {\n    value: cardContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, prefix, bg && \"bg-\" + bg, text && \"text-\" + text, border && \"border-\" + border)\n  }), body ?\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(CardBody, null, children) : children));\n});\nCard.displayName = 'Card';\nCard.defaultProps = defaultProps;\nCard.Img = CardImg;\nCard.Title = CardTitle;\nCard.Subtitle = CardSubtitle;\nCard.Body = CardBody;\nCard.Link = CardLink;\nCard.Text = CardText;\nCard.Header = CardHeader;\nCard.Footer = CardFooter;\nCard.ImgOverlay = CardImgOverlay;\nexport default Card;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  fluid: false\n};\nvar Container = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      fluid = _ref.fluid,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"fluid\", \"as\", \"className\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'container');\n  var suffix = typeof fluid === 'string' ? \"-\" + fluid : '-fluid';\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, fluid ? \"\" + prefix + suffix : prefix)\n  }));\n});\nContainer.displayName = 'Container';\nContainer.defaultProps = defaultProps;\nexport default Container;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { makeEventKey } from './SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"eventKey\", \"onClick\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    // TODO: Restrict eventKey to string in v5?\n    eventKey: makeEventKey(eventKey, props.href) // eslint-disable-next-line no-nested-ternary\n    ,\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"]);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;"],"names":["UserService","filter","page","apiClient","params","keysToUnderscore","userId","data","id","RolService","RolesCheckList","React","initialized","isInvalid","selected","onChange","buscar","useQuery","refetchOnReconnect","refetchOnWindowFocus","roles","className","isError","Alert","variant","href","onClick","e","preventDefault","refetch","ListGroup","as","style","maxHeight","map","rol","index","action","Form","type","label","name","checked","some","rolChecked","isChecked","target","rch","height","usuarioPolicy","user","view","register","context","byRegionalOnly","viewByRegionalOnly","undefined","can","regionalId","registerByRegionalOnly","edit","editByRegionalOnly","changePassword","changePasswordByRegionalOnly","disable","enableByRegionalOnly","disableByRegionalOnly","enable","UserForm","loggedUser","useUser","useParams","schema","useMemo","yup","shape","informacionPersonal","ci","ciComplemento","value","trim","length","nullable","optional","apellidoPaterno","when","is","apellidoMaterno","then","required","otherwise","nombres","informacionUsuario","min","username","max","matches","password","passwordRepeat","test","this","parent","regional","useForm","resolver","yupResolver","mode","defaultValues","control","formState","handleSubmit","reset","setValue","watch","formErrors","errors","history","useHistory","queryClient","useQueryClient","queryKey","cargar","parseInt","enabled","initialData","location","state","status","statusText","headers","config","refetchOnMount","useEffect","String","raiz","complemento","nombre","guardar","useMutation","r","onSuccess","response","invalidateQueries","setQueryData","filterRegional","useCallback","registeredFields","Breadcrumb","linkAs","Link","linkProps","to","active","onSubmit","mutate","error","message","Accordion","defaultActiveKey","Card","join","eventKey","Col","xs","sm","md","padding","paddingTop","marginBottom","width","fontSize","controlId","disabled","validate","matchPassword","render","field","fieldState","feedback","filterBy","onBlur","Button","isLoading","Spinner","animation","size","CambiarContrasenaForm","oldPassword","notRequired","oneOf","parsedId","isNaN","UserFilterForm","numCi","nonEmpty","compCi","uppercase","estado","props","userPolicy","onFilter","lg","ref","paddingBottom","RowOptions","modal","useModal","cambiarEstado","close","oldData","records","u","open","Dropdown","position","VerticalEllipsisDropdownToggle","authorize","login","pathname","UserIndex","useState","current","setPage","defaultFilter","setFilter","superUserPolicyEnhancer","totalRef","useRef","meta","total","updateFilter","remove","oldFilter","loader","rows","push","scope","IndexTemplate","I","policy","onSearch","search","_busqueda","onPageChange","onRefetch","throwOnError","isFetching","hasError","renderData","usuario","texto","nombreCompleto","textTransform","renderDataHeaders","minWidth","renderLoader","renderFilterForm","renderCreateButton","UserView","useLocation","renderAlert","Table","createdAt","updatedAt","PermisoService","PermisoCheckList","permisos","permiso","s","containerClassName","count","RolForm","description","permissions","setError","onError","p","useServerValidation","rolPolicy","delete","eliminar","inactive","window","confirm","RolIndex","RolView","i","IamApp","url","useRouteMatch","sidebarItems","items","icon","path","title","SidebarLayout","sidebar","header","Image","src","exact","currentUrl","setSearch","showFilterForm","setShowFilterForm","visible","in","htmlFor","srOnly","responsive","colSpan","whiteSpace","Math","ceil","useOnClickOutside","handler","listener","event","el","contains","document","querySelector","addEventListener","removeEventListener","ClickOutsideHandler","children","onClickOutside","containerRef","SidebarItem","item","match","borderLeft","subitem","paddingLeft","verticalAlign","marginLeft","Sidebar","side","renderItem","left","right","showSidebar","useSelector","sidebarVisibility","dispatch","useDispatch","onClickOutsideHandler","toggle","zIndex","Container","displayName","_ref","_ref$as","Component","_objectWithoutPropertiesLoose","accordionOnClick","contextEventKey","useContext","AccordionContext","onSelect","SelectableContext","useAccordionToggle","_extends","AccordionCollapse","Collapse","_useUncontrolled","useUncontrolled","activeKey","_useUncontrolled$as","bsPrefix","controlledProps","finalClassName","classNames","useBootstrapPrefix","Provider","Toggle","AccordionToggle","BreadcrumbItem","_ref$linkAs","LinkComponent","SafeAnchor","prefix","defaultProps","listProps","Item","CardImg","DivStyledAsH5","divWithClassName","DivStyledAsH6","CardBody","createWithBsPrefix","CardTitle","CardSubtitle","CardLink","CardText","CardHeader","CardFooter","CardImgOverlay","bg","text","border","body","cardContext","cardHeaderBsPrefix","CardContext","Img","Title","Subtitle","Body","Text","Header","Footer","ImgOverlay","fluid","suffix","ListGroupItem","handleClick","stopPropagation","tabIndex","AbstractNavItem","makeEventKey","horizontal","horizontalVariant","initialBsPrefix","AbstractNav","striped","bordered","borderless","hover","decoratedBsPrefix","classes","table","responsiveClass"],"sourceRoot":""}