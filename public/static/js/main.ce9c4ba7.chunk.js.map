{"version":3,"sources":["commons/services/authClient.ts","commons/services/UnidadesTerritorialesService.ts","commons/services/index.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/PDFViewer.tsx","commons/components/LocationInput.tsx","commons/components/DepartamentosTypeahead.tsx","commons/components/ProvinciasTypeahead.tsx","commons/components/MunicipiosTypeahead.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","commons/components/ImportModal.tsx","apps/clinica/prestaciones/services/PrestacionesService.ts","apps/clinica/prestaciones/componentes/PrestacionesFilterForm.tsx","apps/clinica/prestaciones/componentes/PrestacionesIndex.tsx","apps/clinica/prestaciones/componentes/PrestacionForm.tsx","apps/clinica/medicos/services/MedicosService.ts","apps/clinica/medicos/components/MedicosFilterForm.tsx","apps/clinica/medicos/components/MedicosIndex.tsx","apps/clinica/medicos/components/EspecialidadesTypeahead.tsx","apps/clinica/medicos/components/MedicosForm.tsx","apps/clinica/proveedores/services/ProveedoresService.ts","apps/clinica/proveedores/services/ContratosService.ts","apps/clinica/proveedores/components/ProveedoresFilterForm.tsx","apps/clinica/proveedores/components/ProveedoresIndex.tsx","apps/clinica/proveedores/components/ProveedorEmpresaForm.tsx","apps/clinica/proveedores/components/ProveedorMedicoForm.tsx","apps/clinica/proveedores/components/ContactoForm.tsx","apps/clinica/proveedores/components/PrestacionesContratadasControl.tsx","apps/clinica/proveedores/components/ContratoForm.tsx","apps/clinica/proveedores/components/ProveedorForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/apiClient.ts","commons/utils/latLngExpressionToString.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","defaults","data","result","keysToCamel","console","log","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","UnidadesTerritorialesService","getDepartamentos","apiClient","get","getProvincias","getMunicipios","SidebarItem","item","path","to","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","current","total","onChange","ld","Math","min","rd","minimum","maximum","pageItems","i","push","Pagination","Item","active","onClick","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","numero_patronal","ListaMoraService","page","filter","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","e","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","error","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","ceil","required","validation","maxLength","length","format","pattern","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","PDFViewer","height","PDFObject","embed","fallbackLink","DefaultIcon","L","iconUrl","shadowUrl","iconShadow","iconSize","iconAnchor","Marker","prototype","options","CustomMarker","markerRef","useRef","eventHandlers","useMemo","onclick","marker","remove","dragend","getLatLng","useMapEvents","click","latlng","flyTo","getZoom","position","Array","isArray","lat","lng","latitude","longitude","draggable","Popup","LocationInput","latLngExpressionToString","search","setSearch","mapRef","MapContainer","whenCreated","mapInstance","center","zoom","zoomControl","cursor","TileLayer","attribution","zIndex","InputGroup","instance","stopPropagation","onmousemove","ondblclick","FormControl","preventDefault","Append","coords","split","rawLat","rawLng","parseFloat","abs","setView","ZoomControl","DepartamentosTypeahead","feedback","buscar","refetchOnMount","onLoad","hasValidation","labelKey","minLength","renderMenuItemChildren","prestacion","ProvinciasTypeahead","MunicipiosTypeahead","RegionalesService","RegionalesTypeahead","setOptions","useCache","onSearch","newQuery","ImperativeModal","show","useImperativeHandle","Modal","centered","onHide","Dm11Viewer","setUrl","imperativeModalRef","Header","Body","Footer","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","useLocation","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","solicitud","numero","fecha","asegurado","matricula","medico","proveedor","urlDm11","FcDebt","GenIcon","nombreCompleto","apellidoPaterno","apellidoMaterno","nombres","AseguradoChooser","asegurados","scope","matriculaComplemento","estado","onSelect","AseguradosService","include","estadoText","code","AseguradoCard","useFormContext","trigger","clearErrors","control","useWatch","name","titular","empleador","tipoAsegurado","aseguradoChooserRef","tipo","fechaValidezSeguro","fechaExtinsion","fechaValidezd","fecha_baja","dirtyFields","Card","Accordion","eventKey","Collapse","lg","md","htmlFor","readOnly","validate","unknown","afterDate","now","moment","isSameOrBefore","fechaBaja","aportes","mora","MedicosService","source","CancelToken","promise","nombre_completo","undefined","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryKey","queryClient","useQueryClient","isIdle","isStale","Date","flip","filterBy","trim","maxResults","cancelQueries","especialidad","PrestacionesService","PrestacionesTypeahead","paginate","onPaginate","ProveedorService","ProveedoresTypeahead","subtitle","PrestacionesSolicitadasCard","count","setCount","proveedoresTypeaheadController","useController","useFieldArray","keyName","fields","append","overflow","prestacionSolicitada","render","field","fieldState","prestacionesSolicitadas","contrato","prestaciones","some","pc","ps","prestacionId","onBlur","activos","every","selected","SolicitudAtencionExternaForm","formMethods","nota","registrar","prestacion_id","defaultActiveKey","searchText","promptText","regional","EspecialidadesService","archivo","separador","formato","formData","FormData","EspecialidadesFilter","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","column","File","Check","inline","label","form","EspecialidadesIndex","importModalRef","buscarEspecialidades","ButtonGroup","ImportModal","importar","file","import","separator","delete","PrestacionesFilterForm","PrestacionesIndex","buscarPrestaciones","eliminar","replace","PrestacionForm","useParams","history","useHistory","location","continueRef","guardar","verPrestacion","inputs","status","renderBody","ci","apellido_paterno","apellido_materno","especialidad_id","raiz","ci_complemento","complemento","MedicosFilterForm","EspecialidadesTypeahead","positionFixed","align","regionales","setRegionales","especialidades","setEspecialidades","ciComplemento","goBack","load","String","r","especialidadId","ProveedoresService","cargar","keysToUnderscore","actualizar","actualizarInformacionDeContacto","infoContacto","ContratosService","proveedorId","ProveedoresFilterForm","ProveedoresIndex","ProveedorEmpresaForm","noRedirect","next","tipoId","ProveedorMedicoForm","toString","ContactoForm","setDepartamentos","setProvincias","setMunicipios","showLoader","setShowLoader","departamento","provincia","municipio","ubicacion","guardarInformacionDeContacto","municipioId","direccion","latitud","longitud","telefono1","telefono2","renderLoader","departamentos","provincias","departamentoId","municipios","provinciaId","PrestacionesContratadasControl","p","ContratoForm","idProveedor","methods","inicio","fin","prestacion_ids","ProveedorForm","setTipo","step","setStep","checked","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","MedicosIndex","MedicosForm","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","useDispatch","parse","substr","onClickItem","onClickFirst","onClickPrev","onClickNext","onClickLast","setFields","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","UsersPagination","max","trunc","RolesList","roles","ListGroup","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","hash","fetchRoles","Tab","transition","Content","Pane","fetchPermissions","d","defaultChecked","getValues","saveRole","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","matchPassword","RolesCheckList","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","JSON","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","replaceAll","str","arguments","newStr","Object","call","toLowerCase","this","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","toFixed","isObject","o","n","keys","forEach","k","s","$1","toUpperCase","key"],"mappings":";uZAKaA,EAAaC,IAAMC,OAAO,CACrC,QAAWC,IACX,QAAW,IACXC,kBAAkB,GAAD,mBACZH,IAAMI,SAASD,mBADH,CAEf,SAACE,GACC,IAAMC,EAASC,YAAYF,GAE3B,OADAG,QAAQC,IAAI,sBAAuBH,GAC5BA,OAKbP,EAAWK,SAASM,iBAAkB,EAEtCX,EAAWY,aAAaC,QAAQC,KAAI,SAAAC,GASlC,OARAA,EAAOC,QAAQC,OAAS,mBACxBF,EAAOG,iBAAmB,SAAAC,GAExB,OAAOC,IAAGC,UAAUF,EAAQ,CAC1BG,YAAa,WACbC,QAAQ,KAGLR,M,yEC7BT,8CAoBaS,EAA+B,CAC1CC,iBAAkB,WAChB,OAAOC,IAAUC,IAAoB,kBAEvCC,cAAe,WACb,OAAOF,IAAUC,IAAiB,eAEpCE,cAAe,WACb,OAAOH,IAAUC,IAAiB,iB,0EC5BtC,2d,+RCuBMG,EAAc,SAACC,GACnB,OAAO,qCACJA,EAAKC,KACJ,eAAC,IAAD,CAAMC,GAAIF,EAAKC,KACbE,UAAU,8DACVC,MAAO,CACLC,QAAS,cAHb,UAMKL,EAAKM,KAAK,sBAAMF,MAAO,CAACG,cAAe,SAAUC,WAAY,UAAnD,SAA+DR,EAAKS,UAD5ET,EAAKU,IAGZ,sBACEP,UAAU,uCACVC,MAAO,CACLC,QAAS,cAHb,UAMKL,EAAKM,KAAK,sBAAMF,MAAO,CAACG,cAAe,SAAUC,WAAY,UAAnD,SAA+DR,EAAKS,UAD5ET,EAAKU,IAIbV,EAAKW,OAASX,EAAKW,MAAMC,KAAI,SAAAC,GAC5B,OAAO,eAAC,IAAD,CAAMX,GAAIW,EAAQZ,KACvBG,MAAO,CACLC,QAAS,aACTS,YAAa,QAEfX,UAAU,8DALL,UAOFU,EAAQP,MAAQ,KAAK,sBAAMF,MAAO,CAACG,cAAe,SAAUC,WAAY,UAAnD,SAA+DK,EAAQJ,UAD1FI,EAAQH,WAaRK,EAAU,SAACC,GAAyB,IAAD,EACgCA,EAAvEb,iBADuC,MAC7B,GAD6B,IACgCa,EAAzDC,YADyB,MACpB,QADoB,IACgCD,EAA3CP,aADW,MACL,GADK,IACgCO,EAAjCL,aADC,MACK,GADL,EACgCK,EAAvBE,WADT,YACgCF,EADhC,mDAG9C,OAAO,sBAAKb,UAAS,UAAKA,EAAL,aADD,CAACgB,KAAM,cAAeC,MAAO,gBACGH,IAASP,GAAG,kBAAzD,UACL,qBAAKP,UAAU,kBAAf,SAAkCM,IAClC,qBAAKN,UAAU,aAAf,SACGQ,EAAMC,KAAI,SAAAZ,GAAI,OACb,cAAC,EAAD,eAA+BA,GAAbA,EAAKU,aCrChBW,G,OAtBc,SAAC,GAA8B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,SAChCC,EAAcC,aAAY,SAACC,GAAD,OAAaA,EAAMC,KAAKH,eADC,EAEnCI,cAFmC,EAEjD3B,KAFiD,EAE3C4B,IAEd,OAAO,sBAAK1B,UAAW,iDAAmDqB,EAAc,GAAK,YAAcd,GAAG,UAAvG,UACL,cAAC,EAAD,aAASP,UAAU,sBAAyBmB,IAC5C,cAACQ,EAAA,EAAD,CAAW3B,UAAU,iCAArB,SASE,qBAAKA,UAAU,uEAAf,SACGoB,W,+ECPM,cAAsC,IAApCQ,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,SAE3BC,GADJH,EAAUI,KAAKC,IAAIL,EAASC,EAAM,IACf,EACfK,EAAKL,EAAQD,EACjBG,EAAIC,KAAKC,IAAI,EAAID,KAAKC,IAAI,EAAEC,GAAKH,GACjCG,EAAKF,KAAKC,IAAI,EAAID,KAAKC,IAAI,EAAEF,GAAKG,GAClC,IAAMC,EAAUP,EAAUG,EACpBK,EAAQR,EAAUM,EACxB3D,QAAQC,IAAI,OAAQoD,EAASC,EAAOM,EAAQC,GAC5C,IAAMC,EAAY,GAClB,GAAGD,EAAU,EAAI,IAAjB,eAAyBE,GACpBV,GAAWU,EACZD,EAAUE,KAAK,cAACC,EAAA,EAAWC,KAAZ,CAAyBC,QAAQ,EAAjC,SAAwCJ,GAAlBA,IAGrCD,EAAUE,KAAK,cAACC,EAAA,EAAWC,KAAZ,CAAyBE,QAAS,kBAAIb,EAASQ,IAA/C,SAAoDA,GAA9BA,KALhBA,EAAIH,EAASG,GAAKF,EAASE,IAAK,EAAhCA,GAQzB,OAAO,eAACE,EAAA,EAAD,WACJL,EAAU,EAAI,cAACK,EAAA,EAAWI,MAAZ,CACbD,QAAS,kBAAIb,EAAS,MACnB,KACJF,EAAU,EAAI,cAACY,EAAA,EAAWK,KAAZ,CACbF,QAAS,kBAAIb,EAASF,EAAQ,MAC3B,KAEJS,EAEAT,EAAUC,EAAQ,cAACW,EAAA,EAAWM,KAAZ,CACjBH,QAAS,kBAAIb,EAASF,EAAQ,MAC3B,KACJQ,EAAUP,EAAQ,cAACW,EAAA,EAAWO,KAAZ,CACjBJ,QAAS,kBAAIb,EAASD,MACnB,SCvCMmB,EAV+BC,IAAMC,YAAyD,WAAkCC,GAAlC,EAAE/B,SAAF,EAAYpB,UAAZ,IAA0Ba,EAA1B,+CAC3G,cAACuC,EAAA,EAAD,yBACEpD,UAAU,aACNa,GAFN,IAGEsC,IAAKA,EAHP,SAKE,cAAC,IAAD,U,QCFSE,EACQ,SAACC,GAClB,OAAO9D,IAAUC,IAAe,kCAAmC,CACjER,OAAQ,CACNsE,gBAAiBD,MCKZE,EACJ,SAACC,EAAYC,GAClB,OAAOlE,IAAUC,IAA8F,cAAe,CAC5HR,OAAQ,CACNwE,OAAMC,OAAQ,CACZH,gBAAiBG,EAAOJ,eACxBK,OAAQD,EAAOC,OACfC,IAAKF,EAAOE,IACZC,YAAaH,EAAOI,gBARjBN,EAaF,SAACO,GACR,OAAOvE,IAAUwE,KAAoB,qBAAsB,CACzDC,aAAcF,KAfPP,EAkBH,SAACO,GAEP,OADAxF,QAAQC,IAAIuF,GACLvE,IAAUwE,KAAoB,oBAAqB,CACxDC,aAAcF,KC/BL,WAAClD,GACd,OAAO,MCGM,aAAO,IAAD,EACOqD,mBAAS,GADhB,mBACZrC,EADY,KACLsC,EADK,OAEKD,mBAAS,CAC/BtC,QAAS,EACTwC,KAAM,KAJW,mBAEZX,EAFY,KAENY,EAFM,OAMSH,mBAAiB,IAN1B,mBAMZR,EANY,KAMJY,EANI,OASyBJ,oBAAS,GATlC,mBASOK,GATP,WAWbC,EAAiBC,YAAS,CAAC,iBAAkBhB,EAAK7B,QAAS6B,EAAKW,OAAO,WAC3E,OAAOZ,EAAuBC,EAAMC,KACnC,CACDgB,kBAAkB,EAClBC,sBAAsB,EACtBC,oBAAoB,EACpBC,UAAW,YAAyB,IAAdC,EAAa,EAArB1G,KAAQ0G,KACpBX,EAASW,EAAKjD,UAIZkD,EAAwBC,aAAY,SAACC,GACzC,OAAOzB,EAAwByB,KAC9B,CACDJ,UAAW,WACTL,EAAeU,aAqDnB,OAAO,qCACL,oBAAIjF,MAAO,CAAEkF,SAAU,QAAvB,iCACA,sBAAKnF,UAAU,qBAAf,UACE,cAACoF,EAAA,EAAD,CAAKpF,UAAU,sBAAf,SACE,eAACqF,EAAA,EAAD,CAAKrF,UAAU,wCAAf,UACE,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,8CAGJ,eAACL,EAAA,EAAD,CAAKpF,UAAU,sBAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAO2C,QAAS,WAChC6B,EAAeU,WADjB,SAEG,cAAC,IAAD,QAEL,cAACG,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAO2C,QAAS,WAChC4B,GAAe,SAAAuB,GAAO,OAAKA,MAD7B,SAEG,cAAC,IAAD,QAEL,cAACT,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,cAACzC,EAAA,EAAD,CAAQoC,GAAIO,IACVhG,GAAG,8BACHC,UAAU,OAFZ,8BAMN,cAACgG,EAAD,CACEC,QAAS,SAACvC,GACRY,EAAUZ,MAGd,eAACwC,EAAA,EAAD,CAAOC,YAAU,EAACnG,UAAU,cAA5B,UACE,gCACE,+BACE,oBAAIC,MAAO,CAAEmG,MAAO,GAApB,eACA,oBAAInG,MAAO,CAAEmG,MAAO,GAApB,4BACA,wCACA,oBAAInG,MAAO,CAAEmG,MAAO,UAGxB,gCAvGe,WACjB,GAAI5B,EAAe6B,WACjB,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMC,GAAII,EAAekC,QAAS,CAAC,IAAD,IACvBC,EAAUnC,EAAVmC,MACR,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAACK,EAAqBC,gBAAtB,mBAAgCxI,YAAhC,eAAsCyI,UAAYF,EAAqBE,YAM9E,OAFiBrC,EAATpG,KACgBA,KAAK0I,QACZrG,KAAI,SAACZ,EAAMkH,GAC1B,OAAO,+BACL,oBAAI9G,MAAO,CAAE+G,WAAY,QAAzB,SACGD,EAAQ,IAEX,oBAAI9G,MAAO,CAAE+G,WAAY,QAAzB,SACGnH,EAAKyD,iBAER,oBAAIrD,MAAO,CAAE+G,WAAY,QAAzB,SACGnH,EAAK8D,SAER,6BACE,eAACsD,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,mBAAcV,EAAKU,MAGtC,cAAC0G,EAAA,EAASE,KAAV,UACE,cAACF,EAAA,EAASxE,KAAV,CAAezC,UAAU,cAAcoH,KAAK,IAAIzE,QAAS,WACnD0E,OAAOC,QAAQ,wBACjBvC,EAAsBwC,OAAO1H,EAAKoF,cAFtC,6BAjBQpF,EAAKU,OAoFlBiH,QAGL,eAACpC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UACE,wDAAyBxD,EAAzB,mBAEF,cAACwD,EAAA,EAAD,UACE,cAAC,EAAD,CACEzD,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,2B,0BCxJlD8F,EAAW,iBAAwC,CAC9DjC,OAAO,EACPoB,QAASc,IAAWD,WAGTE,EAAY,SAACC,GAAD,MAAiD,CACxEpC,MAAOoC,EACPhB,QAASc,IAAWC,UAAUE,OAAOD,KAG1BE,EAAU,SAACA,GAAD,MAAiD,CACtEtC,MAAOsC,EACPlB,QAASc,IAAWI,QAAQD,OAAOC,KCHtB,aAAK,IAAD,QAQbC,YAAgB,CAClBC,KAAM,SACNC,cAAe,CACbvE,OAAQ,GACRL,eAAgB,MAVlB6E,EAFe,EAEfA,aACAC,EAHe,EAGfA,SACAC,EAJe,EAIfA,MACAC,EALe,EAKfA,SACAC,EANe,EAMfA,MACAC,EAPe,EAOfA,UASIlF,EAAiB+E,EAAM,kBACvBI,EAAkBhE,YAAS,CAAC,6BAA8BnB,IAAiB,WAC/E,OAAOD,EAAmCC,KACzC,CACDoF,SAAS,IAGLC,EAAyB3D,aAAY,SAACC,GAC1C,OAAOzB,EAAyByB,MAmBlC,OAjBA1G,QAAQC,IAAImK,GAEZC,qBAAU,WACLH,EAAgBrK,MACjBkK,EAAS,SAAUG,EAAgBrK,KAAKA,KAAKuF,UAE9C,CAAC8E,EAAgBrK,OAEpBwK,qBAAU,WACLD,EAAuBvK,MACxBmK,EAAM,CACJ5E,OAAQ,GACRL,eAAgB,OAGnB,CAACqF,EAAuBvK,OAEpB,eAACkH,EAAA,EAAD,CAAM/E,GAAG,sBACdsI,SAAUV,GAAa,SAACW,GACtBH,EAAuBpB,OAAOkB,EAAgBrK,KAAMA,KAAKmC,OAFtD,UAKL,oBAAIN,MAAO,CAACkF,SAAU,QAAtB,uCACCsD,EAAgB/B,QAAU,cAACqC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UACxB,UAAAiC,EAAgB9B,MAAOC,gBAAvB,eAAiCC,UAAW4B,EAAgB9B,MAAOE,UAC3D,KACV8B,EAAuBjC,QAAU,cAACqC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UAC/B,UAAAmC,EAAuBhC,MAAOC,gBAA9B,eAAwCC,UAAW8B,EAAuBhC,MAAOE,UACzE,KACX,cAACvB,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,6BAGA,cAAC5D,EAAA,EAAKC,QAAN,eACM6C,EAAS,yBAInB,eAAChF,EAAA,EAAD,CAAQpD,UAAU,OAAO2C,QAAS,WAChC4F,EAAM,CACJjF,iBACAK,OAAQ,KAGV8E,EAAgBvD,WANlB,UAQGuD,EAAgBpC,WAAa,cAACE,EAAA,EAAD,CAASvG,UAAU,OAAOyG,UAAU,SAASrC,KAAK,OAAU,cAAC,IAAD,CAAUpE,UAAU,SARhH,YAWA,cAACsF,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAhB,UACI,cAACC,EAAA,EAAK4D,MAAN,qBAGA,cAAC5D,EAAA,EAAKC,QAAN,aACE4D,UAAQ,EACRC,YAAaZ,EAAUa,OAAO1F,QAC1ByE,EAAS,SAAU,CACrBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO1F,cAAxD,aAAuC,EAAyBkD,eAGtE,eAACzD,EAAA,EAAD,CAAQoG,KAAK,SAAb,UACGb,EAAuBc,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAU,KADjF,iB,4BCrGG,SAASsF,GAAT,GAAsE,IAAlDhI,EAAiD,EAAjDA,IAAiD,IAA5CiI,cAA4C,MAArC,IAAqC,EAQxE,OAPAf,qBAAU,WAKRgB,KAAUC,MAAMnI,EAAK,gBAJP,CACZoI,aAAc,4JAIf,CAACpI,IACG,qBAAKnB,GAAG,eAAeN,MAAO,CAAC0J,Y,8ICAtCI,GAAcC,KAAE7J,KAAK,CACrB8J,QAAS9J,KACT+J,UAAWC,KACXC,SAAU,CAAC,GAAG,IACdC,WAAY,CAAC,GAAG,MAGpBL,KAAEM,OAAOC,UAAUC,QAAQrK,KAAO4J,GAQlC,IAAMU,GAAe,SAAC5J,GACpB,IAAM6J,EAAaC,iBAA2B,MACxCC,EAAgBC,mBACpB,iBAAO,CACLC,QADK,WAEH,IAAMC,EAASL,EAAU9I,QACX,MAAVmJ,IACFA,EAAOC,SACPnK,EAAMiB,SAAS,QAGnBmJ,QARK,WASH,IAAMF,EAASL,EAAU9I,QACX,MAAVmJ,GACFlK,EAAMiB,SAASiJ,EAAOG,iBAI5B,IAGIzK,EAAM0K,aAAa,CACvBC,MADuB,SACjB1F,GACJ7E,EAAMiB,SAAS4D,EAAE2F,QACjB5K,EAAI6K,MAAM5F,EAAE2F,OAAQ5K,EAAI8K,cAM5B,IAAI1K,EAAM2K,SAAU,OAAO,KA9BqH,MA+BlHC,MAAMC,QAAQ7K,EAAM2K,UAAY3K,EAAM2K,SAAW,CAAC3K,EAAM2K,SAASG,IAAK9K,EAAM2K,SAASI,KA/B6B,mBA+BzIC,EA/ByI,KA+B/HC,EA/B+H,KAgChJ,OAAO,cAACxB,GAAA,EAAD,CACLyB,WAAS,EACT5I,IAAKuH,EACLc,SAAU3K,EAAM2K,SAChBZ,cAAeA,EAJV,SAML,eAACoB,GAAA,EAAD,mCACuB,uBADvB,wBAEE,mBAAG5E,KAAI,eAAUyE,EAAV,YAAsBC,GAA7B,gCAKOG,GAAgB,SAACpL,GAAkB,IAAD,EAEjBqD,oBAAS,WACnC,OAAOgI,aAAyBrL,EAAM4E,UAHK,mBAEtC0G,EAFsC,KAE9BC,EAF8B,KAKvCC,EAAS1B,iBAAY,MAE3B,OAAO,mCACL,eAAC2B,GAAA,EAAD,CAEEC,YAAc,SAAAC,GAAiBH,EAAOzK,QAAU4K,GAChDC,OAAQ5L,EAAM4L,OACdC,KAAM,GACNC,aAAa,EACb1M,MAAO,CAAC0J,OAAQ,IAAKiD,OAAQ,aAN/B,UAQE,cAACC,GAAA,EAAD,CACEC,YAAY,yEACZpL,IAAI,uDAEN,qBAAK1B,UAAU,4BAAf,SAEE,qBAAKA,UAAU,2BAA2BC,MAAO,CAAC8M,OAAQ,KAA1D,SACA,eAACC,GAAA,EAAD,CAAYhN,UAAU,2BACpBmD,IAAK,SAAC8J,GACDA,IACDA,EAASnC,QAAU,SAACpF,GAClBA,EAAEwH,mBAEJD,EAASE,YAAc,SAACzH,GACtBnH,QAAQC,IAAI,UACZkH,EAAEwH,mBAEJD,EAASG,WAAa,SAAC1H,GACrBA,EAAEwH,qBAXV,UAgBE,cAACG,GAAA,EAAD,CACE5H,MAAO0G,EACPxJ,QAAS,SAAC+C,GACRnH,QAAQC,IAAI,QACZkH,EAAE4H,iBACF5H,EAAEwH,mBAEJpL,SAAU,SAAC4D,GACT,IAAMD,EAAQC,EAAEC,OAAOF,MACvB2G,EAAU3G,MAGd,cAACuH,GAAA,EAAWO,OAAZ,UACE,cAACnK,EAAA,EAAD,CAAQoD,QAAQ,oBACdrD,IAAK,SAAC8J,GACDA,IACDA,EAASnC,QAAU,WACjB,IAAM0C,EAASrB,EAAOsB,MAAM,KAC5B,GAAoB,GAAjBD,EAAO3F,OAAY,CAAC,IAAD,cACK2F,EADL,GACbE,EADa,KACLC,EADK,OAED,CAACC,WAAWF,GAASE,WAAWD,IAA5ChC,EAFa,KAERC,EAFQ,KAGjB5J,KAAK6L,IAAIlC,IAAQ,IAAM3J,KAAK6L,IAAIjC,IAAQ,MACzCS,EAAOzK,QAASkM,QAAQ,CAACnC,EAAKC,GAAM,IACpC/K,EAAMiB,SAAS,CAAC6J,EAAKC,SAM/BjJ,QAAS,aAhBX,SAkBC,cAAC,IAAD,eAKP,cAAC,GAAD,CAAc6I,SAAU3K,EAAM4E,MAAO3D,SAAU,SAAC0J,GAC9C3K,EAAMiB,SAAS0J,GACfY,EAAUF,aAAyBV,OAErC,cAACuC,GAAA,EAAD,CAAavC,SAAS,sB,kBC5IfwC,I,MAAyB,SAAC,GAA+K,IAAD,QAA7K5E,EAA6K,EAA7KA,UAAW6E,EAAkK,EAAlKA,SAAapN,EAAqJ,wCAK7MqN,EAASzJ,YAFE,oBAEiB,WAChC,OAAOnF,gCAA6BC,qBACnC,CACD4O,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IASxB,OANAiE,qBAAU,WACQ,IAAD,EAAZsF,EAAO9P,OACRyC,EAAMuN,QAAUvN,EAAMuN,OAAN,UAAaF,EAAO9P,YAApB,aAAa,EAAaA,SAE3C,CAAC8P,EAAO9P,OAEJ,eAAC4O,GAAA,EAAD,CAAYqB,eAAa,EAAzB,UACL,cAAC,KAAD,yBACErO,UAAWkO,EAAOxH,SAAW0C,EAAY,aAAe,GACxDA,UAAW8E,EAAOxH,SAAW0C,GACzBvI,GAHN,IAIE4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,OAAM,GAC5BkQ,SAAS,SACTC,UAAW,EACXC,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,WAGrBuK,EAAOxH,QAAU,qCAChB,cAACsG,GAAA,EAAWO,OAAZ,UACE,cAACnK,EAAA,EAAD,CAAQoD,QAAQ,iBAAiB7D,QAAS,kBAAIuL,EAAOhJ,WAArD,SAAgE,cAAC,IAAD,QAElE,cAACI,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,UAAuC,UAAA0E,EAAOvH,aAAP,mBAAcC,gBAAd,eAAwBC,WAAxB,UAAmCqH,EAAOvH,aAA1C,aAAmC,EAAcE,UAAWoH,OAEnG,UCtCOS,GAAsB,SAAC,GAAyK,IAAD,QAAvKtF,EAAuK,EAAvKA,UAAW6E,EAA4J,EAA5JA,SAAapN,EAA+I,wCAKpMqN,EAASzJ,YAFE,kBAEiB,WAChC,OAAOnF,gCAA6BI,kBACnC,CACDyO,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IASxB,OANAiE,qBAAU,WACQ,IAAD,EAAZsF,EAAO9P,OACRyC,EAAMuN,QAAUvN,EAAMuN,OAAN,UAAaF,EAAO9P,YAApB,aAAa,EAAaA,SAE3C,CAAC8P,EAAO9P,OAEJ,eAAC4O,GAAA,EAAD,CAAYqB,eAAa,EAAzB,UACL,cAAC,KAAD,yBACErO,UAAWkO,EAAOxH,SAAW0C,EAAY,aAAe,GACxDA,UAAW8E,EAAOxH,SAAW0C,GACzBvI,GAHN,IAIE4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,OAAM,GAC5BkQ,SAAS,SACTC,UAAW,EACXC,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,WAGrBuK,EAAOxH,QAAU,qCAChB,cAACsG,GAAA,EAAWO,OAAZ,UACE,cAACnK,EAAA,EAAD,CAAQoD,QAAQ,iBAAiB7D,QAAS,kBAAIuL,EAAOhJ,WAArD,SAAgE,cAAC,IAAD,QAElE,cAACI,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,UAAuC,UAAA0E,EAAOvH,aAAP,mBAAcC,gBAAd,eAAwBC,WAAxB,UAAmCqH,EAAOvH,aAA1C,aAAmC,EAAcE,UAAWoH,OAEnG,SCtCOU,GAAsB,SAAC,GAA4J,IAAD,QAA1JvF,EAA0J,EAA1JA,UAAW6E,EAA+I,EAA/IA,SAAapN,EAAkI,wCAKvLqN,EAASzJ,YAFE,iBAEiB,WAChC,OAAOnF,gCAA6BK,kBACnC,CACDwO,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IASxB,OANAiE,qBAAU,WACQ,IAAD,EAAZsF,EAAO9P,OACRyC,EAAMuN,QAAUvN,EAAMuN,OAAN,UAAaF,EAAO9P,YAApB,aAAa,EAAaA,SAE3C,CAAC8P,EAAO9P,OAEJ,eAAC4O,GAAA,EAAD,CAAYqB,eAAa,EAAzB,UACL,cAAC,KAAD,yBACErO,UAAWkO,EAAOxH,SAAW0C,EAAY,aAAe,GACxDA,UAAW8E,EAAOxH,SAAW0C,GACzBvI,GAHN,IAIE4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,OAAM,GAC5BkQ,SAAS,SACTC,UAAW,EACXC,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,WAGrBuK,EAAOxH,QAAU,qCAChB,cAACsG,GAAA,EAAWO,OAAZ,UACE,cAACnK,EAAA,EAAD,CAAQoD,QAAQ,iBAAiB7D,QAAS,kBAAIuL,EAAOhJ,WAArD,SAAgE,cAAC,IAAD,QAElE,cAACI,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,UAAuC,UAAA0E,EAAOvH,aAAP,mBAAcC,gBAAd,eAAwBC,WAAxB,UAAmCqH,EAAOvH,aAA1C,aAAmC,EAAcE,UAAWoH,OAEnG,SC1COW,GACF,WACP,OAAOpP,IAAUC,IAAgB,eCAxBoP,GAAsB,SAAChO,GAA+H,IAAD,EAElIqD,mBAAqB,IAF6G,mBAEzJsG,EAFyJ,KAEhJsE,EAFgJ,KAM1JZ,EAASzJ,YAFE,qBAEiB,WAChC,OAAOmK,OACN,CACDT,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IAUxB,OAPAiE,qBAAU,WACQ,IAAD,IAAZsF,EAAO9P,OACR0Q,EAAU,UAACZ,EAAO9P,YAAR,aAAC,EAAaA,MACxByC,EAAMuN,QAAUvN,EAAMuN,OAAN,UAAaF,EAAO9P,YAApB,aAAa,EAAaA,SAE3C,CAAC8P,EAAO9P,OAEJ,cAAC,KAAD,2BACDyC,GADC,IAGL4I,UAAWyE,EAAO7H,WAClBmE,QAASA,EACT8D,SAAS,SACTS,UAAU,EAEVR,UAAW,EACXS,SAAU,SAACC,KAGXT,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,YChCXuL,GAAkBhM,sBAA2C,SAACrC,EAAOsC,GAAS,IAAD,EAChEe,oBAAS,GADuD,mBACjF4B,EADiF,KACxEqJ,EADwE,KAUxF,OAJAC,8BAAoBjM,GAAK,iBAAO,CAC9BgM,UACE,IAEG,cAACE,EAAA,EAAD,yBAAOC,UAAQ,GAAKzO,GAApB,IAA2BsO,KAAMrJ,EAASyJ,OAAQ,kBAAIJ,GAAK,UCFvDK,GAAatM,sBAAsC,SAACrC,EAAOsC,GAAS,IAAD,EACxDe,mBAAS,IAD+C,mBACvExC,EADuE,KAClE+N,EADkE,KAExEC,EAAqB/E,iBAA2B,MAOtD,OAJAyE,8BAAoBjM,GAAK,iBAAK,CAC5BgM,KAAM,SAACrJ,GAAD,uBAAoB4J,EAAmB9N,eAAvC,aAAoB,EAA4BuN,KAAKrJ,IAC3D2J,YACE,IACG,eAACP,GAAD,2BAAqBrO,GAArB,IAA4BsC,IAAKuM,EAAjC,UACL,cAACL,EAAA,EAAMM,OAAP,wBAGA,cAACN,EAAA,EAAMO,KAAP,UACGlO,EAAM,cAACgI,GAAD,CAAWhI,IAAKA,IAAS,OAElC,cAAC2N,EAAA,EAAMQ,OAAP,WCVSC,GACH,SAACpM,EAA0CD,GACjD,OAAOjE,aAAUC,IAAiD,+BAAgC,CAChGR,OAAQ,CAACyE,SAAQD,WAHVqM,GAME,SAACC,GACZ,OAAOvQ,aAAUwQ,IAAV,uCAA6DD,EAA7D,mBAPED,GASA,SAACjM,EAAqBoM,EAAsBC,EAAmBC,EAAsBC,GAC9F,OAAO5Q,aAAUwE,KAAK,+BAAgC,CACpDH,cACAoM,eACAC,YACAC,eACAC,8BCjCOC,GAAqC,SAACxP,GACjD,OAAO,MCMIyP,GAAgC,WAAK,IAC/BxQ,EAAQyQ,cAAlBC,SADwC,EAErBtM,mBAAS,GAFY,mBAExCrC,EAFwC,KAEjCsC,EAFiC,OAGvBD,mBAAe,CACrCtC,QAAS,EACTwC,KAAM,KALuC,mBAGxCX,EAHwC,KAGlCY,EAHkC,OAQnBH,mBAA2C,IARxB,mBAQxCR,EARwC,KAQhCY,EARgC,KAUzCmM,EAAgB9F,iBAAsB,MAEtC+F,EAAmCjM,YAAS,CAAC,mCAAoChB,EAAMC,IAAS,WACpG,OAAOoM,GAAyCpM,EAAQD,KACvD,CACDiB,kBAAkB,EAClBE,oBAAoB,EACpBD,sBAAsB,EACtBE,UAAW,YAAqB,IAAZC,EAAW,EAAlB1G,KAAO0G,KAClBX,EAASW,EAAKjD,UAIZ8O,EAAc3L,aAAY,SAAC4L,GAC/B,OAAOd,GAA8Cc,KACpD,CACD/L,UAAW,YAAoB,IAAD,IAAVnD,EAAU,EAAjBtD,KAAOsD,IAClB,UAAA+O,EAAc7O,eAAd,SAAuB6N,OAAO/N,GAC9B,UAAA+O,EAAc7O,eAAd,SAAuBuN,MAAK,MA4DhC,OAAO,sBAAKnP,UAAU,OAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,WAAtB,gDACA,qBAAKnF,UAAU,cAAf,SACE,eAACoF,EAAA,EAAD,CAAKpF,UAAU,sBAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,WACf+N,EAAiCxL,WADnC,SAEG,cAAC,IAAD,QAEL,cAACG,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,aAAjB,SAEG,cAAC,IAAD,QAEL,cAAC0C,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,eAACzC,EAAA,EAAD,CACEoC,GAAIO,IACJhG,GAAE,UAAKD,EAAL,cACFE,UAAU,4BAHZ,UAII,cAAC,IAAD,CAAQA,UAAU,SAJtB,kBASN,eAACoF,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,OAAf,SACE,cAACqQ,GAAD,CAAoCQ,SAAU,SAACnN,GAC7CY,EAAUZ,QAGd,cAAC2B,EAAA,EAAD,CAAKrF,UAAU,OAAO6F,GAAI,OAA1B,SACE,sBAAK7F,UAAU,iDAAf,UACI,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,iDAIR,eAACS,EAAA,EAAD,CAAOC,YAAU,EAAjB,UACE,gCACE,+BACE,oBAAIlG,MAAO,CAACmG,MAAO,GAAnB,eACA,uCACA,8CACA,wDACA,wCACA,2CACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCAtHe,WACjB,GAAIsK,EAAiCrK,WACnC,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMJ,GAAIsM,EAAiChK,QAAS,CAAC,IAAD,IACpCC,EAAU+J,EAAV/J,MACR,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAACK,EAAqBC,gBAAtB,mBAAgCxI,YAAhC,eAAsCyI,UAAYF,EAAqBE,YAI9E,IAAMC,EAAU4J,EAAiCtS,KAAMA,KAAK0I,QAC5D,OAAqB,GAAlBA,EAAQe,OACD,6BACN,oBAAI7H,UAAU,uBAAuBsG,QAAS,IAA9C,4CAKGQ,EAAQrG,KAAI,SAACqQ,EAAW/J,GAC7B,OAAO,+BACL,6BAAKA,EAAQ,IACb,6BAAK+J,EAAUC,SACf,6BAAKD,EAAUE,QACf,6BAAKF,EAAUG,UAAUC,YACzB,6BAAKJ,EAAUK,SACf,6BAAKL,EAAUM,YACf,6BACE,eAACnK,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,6BAAwBuQ,EAAUvQ,MAEnD,cAAC0G,EAAA,EAASE,KAAV,UAEI2J,EAAUO,QACZ,cAACpK,EAAA,EAASxE,KAAV,CAAe2E,KAAK,IAAIzE,QAAS,WAAO,IAAD,IACrC,UAAA8N,EAAc7O,eAAd,SAAuB6N,OAAOqB,EAAUO,SACxC,UAAAZ,EAAc7O,eAAd,SAAuBuN,MAAK,IAF9B,2BAIA,cAAClI,EAAA,EAASxE,KAAV,CAAe2E,KAAK,IAAIzE,QAAS,WAC/BgO,EAAYpJ,OAAOuJ,EAAUC,SAD/B,wCAnBMD,EAAUvQ,OA6FvBiH,QAGL,sBAAKxH,UAAU,kBAAf,UACE,sBAAMA,UAAU,UAAhB,kCAA6C6B,EAA7C,iBACA,cAAC,EAAD,CACED,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,qBAGzD,cAAC4N,GAAD,CAAYrM,IAAKsN,Q,QC7KRa,GAAS,SAAiBzQ,GAErC,OAAO0Q,aAAQ,CAAC,IAAM,MAAM,KAAO,CAAC,QAAU,IAAI,QAAU,YAAY,iBAAmB,iBAAiB,MAAQ,CAAC,CAAC,IAAM,OAAO,KAAO,CAAC,EAAI,+DAA+D,CAAC,IAAM,OAAO,KAAO,CAAC,EAAI,yEAAyE,CAAC,IAAM,IAAI,KAAO,GAAG,MAAQ,CAAC,CAAC,IAAM,OAAO,KAAO,CAAC,EAAI,iNAAiN,CAAC,IAAM,UAAU,KAAO,CAAC,OAAS,kCAE1lB,CAAC,IAAM,SAAS,KAAO,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,OAEhD,CAAC,IAAM,OAAO,KAAO,CAAC,KAAO,OAAO,EAAI,mnCAJnCA,CASH1Q,I,oBCbC,SAAS2Q,GAAeC,EAAgCC,EAAyBC,GACtF,OAAQF,EAAkBA,EAAkB,IAAM,IAA3C,UAAoDC,EAApD,aAAwEC,GCa1E,IAAMC,GAAmB1O,sBAAsC,SAACrC,EAAOsC,GAE5E,OADA5E,QAAQC,IAAIqC,EAAMgR,WAAWhK,QACtB,eAACqH,GAAD,2BAAqBrO,GAArB,IAA4BsC,IAAKA,EAAjC,UACL,cAACkM,EAAA,EAAMM,OAAP,UACG9O,EAAMP,QAET,cAAC+O,EAAA,EAAMO,KAAP,UACE,eAAC1J,EAAA,EAAD,CAAOC,YAAU,EAACnG,UAAU,QAA5B,UACE,gCACE,+BACE,oBAAIC,MAAO,CAACmG,MAAO,GAAnB,eACA,2CACA,iDACA,wCACA,4BAGJ,gCACKvF,EAAMgR,WAAWhK,OAAShH,EAAMgR,WAAWpR,KAAI,SAACwQ,EAAWlK,GAC5D,OAAO,+BACL,oBAAI+K,MAAM,MAAV,SAAiB/K,EAAM,IACvB,+BAAKkK,EAAUC,UAAf,IAA2BD,EAAUc,wBACrC,6BAAKP,GAAeP,EAAUQ,gBAAiBR,EAAUS,gBAAiBT,EAAUU,WACpF,6BAAKV,EAAUe,OAAS,OAAS,SACjC,6BAAI,cAAC5O,EAAA,EAAD,CAAQT,QAAS,WACnBpE,QAAQC,IAAIyS,GACZpQ,EAAMoR,SAAShB,IAFb,6BALUA,EAAU1Q,OAWvB,6BAAI,oBAAIP,UAAU,uBAAuBsG,QAAS,IAA9C,0DCcN4L,GACS,SAAChB,GACnB,OAAO1R,aAAUC,IAAkC,aAAc,CAC/DR,OAAQ,CACNyE,OAAQ,CACNwN,aAEFzN,KAAM,CACJW,KAAM,IAER+N,QAAS,wB,oBCxDXC,GAAa,SAACC,GAElB,OADA9T,QAAQC,IAAI6T,GACD,GAARA,EAAkB,OACV,GAARA,EAAkB,OACd,IAwCIC,GAAgB,WAAK,IAAD,kEAU3BC,cAPFnK,EAH6B,EAG7BA,SACAI,EAJ6B,EAI7BA,UACAgK,EAL6B,EAK7BA,QACAlK,EAN6B,EAM7BA,SACAmK,EAP6B,EAO7BA,YACAC,EAR6B,EAQ7BA,QACArK,EAT6B,EAS7BA,MAGI4I,EAAY0B,YAAS,CACzBD,UACAE,KAAM,cAEFC,GAAUF,YAAS,CACvBD,UACAE,KAAM,YAEFE,GAAYH,YAAS,CACzBD,UACAE,KAAM,cAEFG,GAAgBJ,YAAS,CAC7BD,UACAE,KAAM,mBAGFI,GAAsBrI,iBAAgC,MAEtDuG,GAAYD,EAAUC,UACtBhD,GAASzJ,YAAS,CAAC,8BAA+ByM,KAAY,WAClE,OAAOgB,GAAqChB,MAC3C,CACDxI,SAAS,EACT7D,UAAW,YAAuB,IAAdiC,EAAa,EAApB1I,KAAO0I,QAClB,GAAqB,GAAlBA,EAAQe,OAAY,CACrB,IAAMoJ,EAAYnK,EAAQ,GAC1BhF,GAASmP,OAEN,CAAC,IAAD,EACH,UAAA+B,GAAoBpR,eAApB,SAA6BuN,MAAK,OAKlCrN,GAAW,SAAC,GAA6C,IApF5CuQ,EAoFAS,EAA2C,EAA3CA,UAAWD,EAAgC,EAAhCA,QAAY5B,EAAoB,uCAC5D1S,QAAQC,IAAIyS,EAAW4B,EAASC,GAShCxK,EAAS,eAAgB2I,EAAU1Q,IACnC+H,EAAS,4BAA6B2I,EAAUQ,iBAAmB,IACnEnJ,EAAS,4BAA6B2I,EAAUS,iBAAmB,IACnEpJ,EAAS,oBAAqB2I,EAAUU,SACxCrJ,EAAS,iBAAkB2I,EAAUgC,MACrC3K,EAAS,mBAAoB8J,GAAWnB,EAAUe,SAClD1J,EAAS,+BAAgC2I,EAAUiC,oBACnD5K,EAAS,2BAA4B2I,EAAUkC,gBAC/C7K,EAAS,aAAD,OAAeuK,QAAf,IAAeA,OAAf,EAAeA,EAAStS,IAChC+H,EAAS,oBAAD,OAAsBuK,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAS3B,WACvC5I,EAAS,0BAAD,OAA4BuK,QAA5B,IAA4BA,OAA5B,EAA4BA,EAASpB,iBAC7CnJ,EAAS,0BAAD,OAA4BuK,QAA5B,IAA4BA,OAA5B,EAA4BA,EAASnB,iBAC7CpJ,EAAS,kBAAD,OAAoBuK,QAApB,IAAoBA,OAApB,EAAoBA,EAASlB,SACrCrJ,EAAS,iBAAkB8J,GAAU,OAACS,QAAD,IAACA,OAAD,EAACA,EAASb,SAC/C1J,EAAS,6BAAD,OAA+BuK,QAA/B,IAA+BA,OAA/B,EAA+BA,EAASO,eAChD9K,EAAS,eAAD,OAAiBwK,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAWvS,IACpC+H,EAAS,2BAAD,OAA6BwK,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAWxP,gBAChDgF,EAAS,mBAAD,OAAqBwK,QAArB,IAAqBA,OAArB,EAAqBA,EAAWnP,QACxC2E,EAAS,mBAAoB8J,GAAU,OAACU,QAAD,IAACA,OAAD,EAACA,EAAWd,SACnD1J,EAAS,sBAAD,OAAwBwK,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAWO,YAC3C/K,EAAS,oBAjHA,IADQ+J,EAkHwB,OAACS,QAAD,IAACA,OAAD,EAACA,EAAWd,QAjHlC,YACV,GAARK,EAAkB,UACd,KA+IP,OA7BAzJ,qBAAU,WAAK,IAAD,EACTqI,EAAU1Q,KAAV,UAAgBiI,EAAU8K,YAAYrC,iBAAtC,aAAgB,EAAiCC,aAClD5I,EAAS,eAAgB,IACzBA,EAAS,4BAA6B,IACtCA,EAAS,4BAA6B,IACtCA,EAAS,oBAAqB,IAC9BA,EAAS,kBAAmB,GAC5BA,EAAS,mBAAoB,IAC7BA,EAAS,+BAAgC,IACzCA,EAAS,2BAA4B,IACrCA,EAAS,aAAc,IACvBA,EAAS,0BAA2B,IACpCA,EAAS,0BAA2B,IACpCA,EAAS,kBAAmB,IAC5BA,EAAS,iBAAkB,IAC3BA,EAAS,6BAA8B,IACvCA,EAAS,eAAgB,IACzBA,EAAS,2BAA4B,IACrCA,EAAS,mBAAoB,IAC7BA,EAAS,mBAAoB,IAC7BA,EAAS,sBAAuB,IAChCA,EAAS,oBAAqB,OAE/B,CAAC4I,KAKJ3S,QAAQC,IAAI,QAAS6J,EAAM,4BAA6B0K,GAAe9B,EAAW4B,GAASC,IACpF,eAACS,GAAA,EAAD,WACL,cAACC,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,uBAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,eAACF,GAAA,EAAK3D,KAAN,WACE,eAACtK,EAAA,EAAKF,IAAN,WACE,eAACC,EAAA,EAAD,CAAKsO,GAAI,EAAGC,GAAI,EAAhB,UACE,cAACtO,EAAA,EAAK4D,MAAN,CAAY2K,QAAQ,sBAApB,0BAGA,eAAC7G,GAAA,EAAD,CAAYqB,eAAa,EAACrO,UAAU,OAApC,UACE,cAACqN,GAAA,EAAD,aAAa9M,GAAG,sBACd6I,aAAY,UAACZ,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4BC,eAAc,UAAC1I,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4B1Q,IACpFP,UAAU,kBAAqBoI,EAAS,sBAAuB,CAC/DV,SAAU4B,IACVvB,QAASuB,EAAc,iIAEzB,cAAC0D,GAAA,EAAWO,OAAZ,UACE,cAACnK,EAAA,EAAD,CAAQoD,QAAQ,oBAAoB7D,QAAS,WAAK,IAAD,EAEL,EAA1C,GADA6P,EAAQ,yBACL,UAAChK,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4BC,WAK9B,IAHA,UAAG1I,EAAU8K,YAAYrC,iBAAzB,aAAG,EAAiCC,mBAC3B1I,EAAU8K,YAAYrC,UAAUC,UACzCuB,EAAY,CAAC,YAAa,UAAW,cACjCvE,GAAO9P,KAGP,CAAC,IACW0I,EAAYoH,GAAO9P,KAA1BA,KAAO0I,QACd,GAAqB,GAAlBA,EAAQe,OAAY,CACrB,IAAMoJ,EAAYnK,EAAQ,GAC1BhF,GAASmP,OAEN,CAAC,IAAD,EACH,UAAA+B,GAAoBpR,eAApB,SAA6BuN,MAAK,SATpCjB,GAAOhJ,WARb,SAsBGgJ,GAAO7H,WAAa,cAACE,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAU,cAAC,IAAD,QAGpE,cAACkB,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO4H,iBAAxD,iBAAuC,EAA4BC,iBAAnE,aAAuC,EAAuCrK,gBAGlF,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,kCAGjB,eAAC9C,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,kCAGjB,eAAC9C,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,oBAAqB,CAACV,SAAU4B,cAInD,eAAChE,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4Be,SACrC5J,EAAS,mBAAoB,CAC/B2L,SAAU,CACRC,QAAS,SAACvO,GACR,GAAY,QAATA,GAA4B,QAATA,EACpB,MAAO,2BAOjB,cAACH,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO4H,iBAAxD,iBAAuC,EAA4Be,cAAnE,aAAuC,EAAoCnL,aAE7E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,iCACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4BiC,qBACrC9K,EAAS,+BAAgC,CAC3C2L,SAAU,CACRE,UAAW,SAACxO,GACV,IAAMyO,EAAMC,OACZ,GAAuB,QAApBlD,EAAUe,OAAiB,CAC5B,IAAIvM,EAAO,MAAO,oEAClB,GAAG0O,KAAO1O,EAAO,cAAc2O,eAAeF,GAAM,MAAO,uCAMrE,cAAC5O,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO4H,iBAAxD,iBAAuC,EAA4BiC,0BAAnE,aAAuC,EAAgDrM,aAEtE,GAAlBoK,EAAUgC,KAAY,eAAC3N,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACrB,cAAC3D,EAAA,EAAK4D,MAAN,8BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAO4H,iBAAlB,aAAC,EAA4BkC,iBACrC/K,EAAS,2BAA4B,CACvC2L,SAAU,CACRE,UAAW,SAACxO,GACV,IAAMyO,EAAMC,OACZ,GAAG1O,GAAS0O,KAAO1O,EAAO,cAAc2O,eAAeF,GACrD,MAAO,6CAMjB,cAAC5O,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO4H,iBAAxD,iBAAuC,EAA4BkC,sBAAnE,aAAuC,EAA4CtM,aACrE,QAElB,sBAAK7G,UAA6B,GAAlBiR,EAAUgC,KAAY,GAAK,SAA3C,UAEE,oBAAIhT,MAAO,CAACkF,SAAU,WAAtB,qBACA,eAACG,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,wBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,0BAGjB,eAAC9C,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,gCAGjB,eAAC9C,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,gCAGjB,eAAC9C,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAGC,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,2BAInB,eAAC9C,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOwJ,eAAlB,aAAC,EAA0Bb,SACnC5J,EAAS,iBAAkB,CAC7B2L,SAAU,CACRC,QAAS,SAACvO,GACR,GAAGoN,GAAQtS,IAAe,QAATkF,GAA4B,QAATA,EAClC,MAAO,2BAOjB,cAACH,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOwJ,eAAxD,iBAAuC,EAA0Bb,cAAjE,aAAuC,EAAkCnL,aAE3E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOwJ,eAAlB,aAAC,EAA0BK,qBACnC9K,EAAS,6BAA8B,CACzC2L,SAAU,CACRE,UAAW,SAACxO,GACV,IAAMyO,EAAMC,OACZ,GAAqB,QAAlBtB,GAAQb,OAAiB,CAC1B,IAAIvM,EAAO,MAAO,oEAClB,GAAG0O,KAAO1O,EAAO,cAAc2O,eAAeF,GAAM,MAAO,uCAMrE,cAAC5O,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOwJ,eAAxD,iBAAuC,EAA0BK,0BAAjE,aAAuC,EAA8CrM,mBAM3F,oBAAI5G,MAAO,CAACkF,SAAU,WAAtB,uBACA,eAACG,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,6BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOyJ,iBAAlB,aAAC,EAA4BxP,iBACrC8E,EAAS,2BAA4B,CACvCV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOyJ,iBAAxD,iBAAuC,EAA4BxP,sBAAnE,aAAuC,EAA4CuD,aAErF,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,GACJ1L,EAAS,4BAInB,eAAC9C,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOyJ,iBAAlB,aAAC,EAA4Bd,SACrC5J,EAAS,mBAAoB,CAC/B2L,SAAU,CACRC,QAAS,SAACvO,GACR,GAAGqN,GAAUvS,IAAe,QAATkF,GAA4B,QAATA,EACpC,MAAO,2BAMjB,cAACH,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOyJ,iBAAxD,iBAAuC,EAA4Bd,cAAnE,aAAuC,EAAoCnL,aAE7E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOyJ,iBAAlB,aAAC,EAA4BuB,YACrCjM,EAAS,sBAAuB,CAClC2L,SAAU,CACRE,UAAW,SAACxO,GACV,IAAMyO,EAAMC,OACZ,GAAGrB,GAAUvS,IAA0B,QAApBuS,GAAUd,OAAiB,CAC5C,IAAIvM,EAAO,MAAO,oEAClB,GAAG0O,KAAO1O,EAAO,cAAc2O,eAAeF,GAAM,MAAO,uCAMrE,cAAC5O,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOyJ,iBAAxD,iBAAuC,EAA4BuB,iBAAnE,aAAuC,EAAuCxN,aAEhF,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,sBACA,cAAC5D,EAAA,EAAKC,QAAN,aACEuO,UAAQ,EACR1K,aAAY,UAACZ,EAAUa,OAAOyJ,iBAAlB,aAAC,EAA4BwB,UACrClM,EAAS,oBAAqB,CAChC2L,SAAU,CACRQ,KAAM,SAAC9O,GACL,GAAY,WAATA,EACD,MAAO,kCAMjB,cAACH,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOyJ,iBAAxD,iBAAuC,EAA4BwB,eAAnE,aAAuC,EAAqCzN,gBAGhF,cAAC+K,GAAD,CAAkBzO,IAAK6P,GACrB1S,MAAM,aACNuR,YAAY,UAAA3D,GAAO9P,YAAP,eAAaA,KAAK0I,UAAW,GACzCmL,SAAU,SAAChB,GAETnP,GAASmP,GACT+B,GAAoBpR,QAASuN,MAAK,e,6BCpbjCqF,GACM,SAAC7Q,GAEhB,IACM8Q,EADc1W,KAAM2W,YACCD,SAErBE,EAAUnV,aAAUC,IAA+B,UAAW,CAClER,OAAQ,CACNyE,OAAQ,CACNkR,gBAAiBjR,QAAUkR,GAE7BpR,KAAM,CACJ7B,QAAS,EACTwC,KAAM,KAGV0Q,YAAaL,EAAOM,QAOtB,OAHAJ,EAAQK,OAAS,WACfP,EAAOO,OAAO,uCAETL,GC3BEM,GAAmB,SAACpU,GAAoF,IAAD,MACxFqD,mBAAS,IAD+E,mBAC3GgR,EAD2G,KACpGC,EADoG,KAG5GC,EAAW,CAAC,eAAgBF,GAC5BhH,EAASzJ,YAAS2Q,GAAU,WAChC,OAAOZ,GAA+BU,KACrC,CACDxM,SAAS,IAEL2M,EAAcC,eASpB,OAPA1M,qBAAU,WACLsM,IAAUhH,EAAO9P,MAClB8P,EAAOhJ,YAER,CAACgQ,IAEJ3W,QAAQC,IAAI,UAAW0W,EAAOhH,EAAO7H,WAAY6H,EAAOxH,QAASwH,EAAOqH,OAAQrH,EAAOsH,QAAvF,UAAgGtH,EAAO9P,YAAvG,aAAgG,EAAaA,KAAK0I,QAAS2O,KAAKvB,OACzH,cAAC,KAAD,yBAAgBwB,MAAI,EACzBC,SAAU,kBAAI,IACV9U,GAFC,IAGL4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,KAAK0I,UAAW,GACtCwH,SAAU,SAAC6C,GAET,OADyBA,EAAOM,gBAAkBN,EAAOM,gBAAkB,IAAM,IAAM,UAAGN,EAAOO,gBAAV,YAA6BP,EAAOQ,SAAUiE,QAGvI7G,UAAU,EACV8G,WAAY,GACZtH,UAAW,EACXS,SAAU,SAACC,GACToG,EAAYS,cAAcV,GAC1BD,EAASlG,IAEXT,uBAAwB,SAAC2C,GACvB,IAAMyD,GAAmBzD,EAAOM,gBAAkBN,EAAOM,gBAAkB,IAAM,IAAM,UAAGN,EAAOO,gBAAV,YAA6BP,EAAOQ,SAAUiE,OACrI,OAAO,gCACL,8BAAMhB,IACN,qBAAK5U,UAAW,uBAAhB,SAAyCmR,EAAO4E,uBCtC3CC,GAgBH,SAACtS,EAA2BD,GAClC,IACMgR,EADc1W,KAAM2W,YACCD,SAErBE,EAAUnV,aAAUC,IAAmC,eAAgB,CAC3ER,OAAQ,CACNyE,SAAQD,UAOZ,OAHAkR,EAAQK,OAAS,WACfP,EAAOO,OAAO,uCAETL,GC3BEsB,GAAwB,SAACpV,GAAwF,IAAD,MACjGqD,mBAAS,IADwF,mBACpHgR,EADoH,KAC7GC,EAD6G,OAEnGjR,mBAAS,GAF0F,mBAEpHT,EAFoH,KAE9GY,EAF8G,KAGrH+Q,EAAW,CAAC,qBAAsBF,EAAOzR,GACzCyK,EAASzJ,YAAS2Q,GAAU,WAChC,OAAOY,GAA2B,CAChCrS,OAAQuR,QAAOL,GACd,CACDzQ,KAAM,GACNxC,QAAS6B,MAEV,CACDiF,SAAS,IAEL2M,EAAcC,eAQpB,OANA1M,qBAAU,WACJsF,EAAO9P,MACT8P,EAAOhJ,YAER,CAACgQ,IAEG,cAAC,KAAD,yBAAgBQ,MAAI,EACzBC,SAAU,kBAAI,IACV9U,GAFC,IAGL4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,mBAAaA,YAAb,eAAmB0I,UAAW,GACvCwH,SAAS,SACTS,UAAU,EACV8G,WAAY,GACZtH,UAAW,EACXS,SAAU,SAACC,GACToG,EAAYS,cAAcV,GAC1BD,EAASlG,IAEXiH,UAAQ,EACRC,WAAY,SAACzQ,EAAGtB,GACdC,GAAS,SAAAZ,GAAI,OAAIA,EAAO,MAE1B+K,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,YCvBXyS,GACH,SAAC1S,EAAiBD,GACxB,OAAOjE,aAAUC,IAAiB,cAAe,CAC/CR,OAAQ,CACNyE,SACAD,WCvBK4S,GAAuB,SAACxV,GAAyG,IAAD,EAKrIuU,EAAW,CAAC,kBAAmBvU,EAAM6C,QACrCwK,EAASzJ,YAAS2Q,GAAU,WAEhC,OAAOgB,GAAwBvV,EAAM6C,UACpC,CACDkB,oBAAoB,EACpBD,sBAAsB,EACtBwJ,gBAAgB,IAOlB,OAAO,cAAC,KAAD,yBAAgBuH,MAAI,GAErB7U,GAFC,IAGL4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,OAAQ,GAE9BkQ,SAAU,SAAC8C,GACT,GAAGA,EAAUD,OAAO,CAClB,IAAMA,EAASC,EAAUD,OAEzB,OADwBA,EAAOQ,SAAWR,EAAOM,gBAAkB,IAAMN,EAAOM,gBAAkB,KAAON,EAAOO,gBAAkB,IAAMP,EAAOO,gBAAkB,IAIjK,OAAQN,EAAsBzN,QAGlCoL,UAAU,EACV8G,WAAY,GACZtH,UAAW,EACXS,SAAU,SAACC,KACXT,uBAAwB,SAAC4C,GACvB,IAAI9Q,EAAOgW,EACX,GAAGlF,EAAUD,OAAO,CAClB,IAAMA,EAASC,EAAUD,OACzB7Q,EAAQ6Q,EAAOQ,SAAWR,EAAOM,gBAAkB,IAAMN,EAAOM,gBAAkB,KAAON,EAAOO,gBAAkB,IAAMP,EAAOO,gBAAkB,IACjJ4E,EAAWnF,EAAO4E,kBAGlBzV,EAAQ8Q,EAAUzN,OAClB2S,EAAW,UAEb,OAAO,gCACL,8BAAMhW,IACN,qBAAKN,UAAW,uBAAhB,SAAyCsW,YC1CpCC,GAA8B,WAAO,IAAD,EACrBrS,mBAAS,GADY,mBACxCsS,EADwC,KACjCC,EADiC,OAEClE,cAAxCnK,EAFuC,EAEvCA,SAAUsK,EAF6B,EAE7BA,QAAoBrK,GAFS,EAEpBG,UAFoB,EAETH,OAChCqO,EAAiCC,YAAc,CACnD/D,KAAK,YACLF,UACApJ,MAAO,CACL5B,SAAU4B,OAPiC,EAUZsN,YAAc,CAC/ClE,UACAE,KAAM,0BACNiE,QAAS,iBAHHC,EAVuC,EAUvCA,OAAQC,EAV+B,EAU/BA,OAAQ/L,EAVuB,EAUvBA,OAKxB,OAAO,eAACuI,GAAA,EAAD,CAAMtT,MAAO,CAAE+W,SAAU,WAAzB,UACL,cAACxD,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,0BAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,eAACvN,EAAA,EAAD,WACE,gCACE,+BACE,oBAAIjG,MAAO,CAAEmG,MAAO,GAApB,eACA,4CACA,2CACA,sCACA,oBAAInG,MAAO,CAAEmG,MAAO,UAGxB,kCACG0Q,EAAOrW,KAAI,SAACwW,EAAsBlQ,GAAW,IAAD,QAC3C,OAAO,+BACL,6BAAKA,EAAQ,IACb,6BACE,cAAC,IAAD,CACE6L,KAAI,kCAA6B7L,EAA7B,iBACJ2L,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAA4B,IAAD,EAAxBC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,WAChB,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAE,6DAAwDwG,EAAxD,iBACF/G,UAAaoX,EAAWzQ,MAAQ,aAAe,GAC/CyC,YAAagO,EAAWzQ,MACxBgP,SAAU,SAAClH,GACT,IAAM2C,EAAY/I,EAAM,eAClBgP,EAA0BhP,EAAM,2BACtC,OAAQ+I,GACNA,EAAUkG,SAASC,aAAaC,MAAK,SAAAC,GAAE,OAAIA,EAAGlX,IAAMkO,EAAWlO,QAC9D8W,EAAwBG,MAAK,SAAAE,GAAE,OAAEA,EAAGC,cAAgBlJ,EAAWlO,OAEpEqX,OAAQT,EAAMS,OACd9V,SAAU,SAAC2M,GACT0I,EAAMrV,SAAS2M,EAAW5G,OAAS4G,EAAW,GAAGlO,GAAK,MAG1D,cAAC+E,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,kBAKjE,+BACE,cAAC,GAAD,CACEtG,GAAE,uCACFmD,OAAQ,CACNmU,QAAS,GAEX7X,WAAW,UAAA0W,EAA+BU,kBAA/B,eAA2CzQ,OAAQ,aAAe,GAC7EyC,aAAY,UAACsN,EAA+BU,kBAAhC,aAAC,EAA2CzQ,OACxDgP,SAAU,SAACvE,GAAD,QAAe/I,EAAM,eAAiB+I,EAAUtN,YAAcuE,EAAM,gBAAkBA,EAAM,2BAA2ByP,OAAM,SAAAJ,GAAE,OAAEtG,EAAUkG,SAASC,aAAaC,MAAK,SAAAC,GAAE,OAAEA,EAAGlX,IAAMmX,EAAGC,oBAChM7V,SAAU4U,EAA+BS,MAAMrV,SAC/C8V,OAAQlB,EAA+BS,MAAMS,OAC7CG,SAAUrB,EAA+BS,MAAM1R,QAEjD,cAACH,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCkN,EAA+BU,kBAAtE,iBAAuC,EAA2CzQ,aAAlF,aAAuC,EAAkDE,aAE3F,6BACE,cAACvB,EAAA,EAAKC,QAAN,aAAcC,GAAG,YAAe4C,EAAS,2BAAD,OAA4BrB,EAA5B,cAE1C,6BACE,cAAC3D,EAAA,EAAD,CAAQoD,QAAQ,OAAO7D,QAAS,WAC9BpE,QAAQC,IAAI,SAAUuI,GACtBiE,EAAOjE,IACN/G,UAAU,WAHb,SAGwB,cAAC,IAAD,UAtDZiX,EAAqB1W,OA0DvC,+BACE,uBACA,uBACA,uBACA,6BACE,cAAC6C,EAAA,EAAD,CAAQoD,QAAQ,OAAO7D,QAAS,WAC9BpE,QAAQC,IAAIgY,GACZO,EAAO,CACLxW,GAAIiW,IAENC,GAAS,SAAAD,GAAK,OAAIA,EAAM,MACvBxW,UAAU,WANb,SAMwB,cAAC,IAAD,uBCpGzBgY,GAA+B,WAC1C,IAAMC,EAAcjQ,YAAgB,CAClCC,KAAM,SACNC,cAAe,CACbmP,wBAAyB,CAAC,CACxB9W,GAAI,EACJoX,aAAc,KACdO,KAAM,KAERjH,UAAW,CACTQ,gBAAiB,GACjBC,gBAAiB,GACjBC,QAAS,GACTK,OAAQ,GACRmB,eAAgB,GAChBD,mBAAoB,OAKxB/K,EAME8P,EANF9P,aACAqK,EAKEyF,EALFzF,QACAhK,EAIEyP,EAJFzP,UACAkK,EAGEuF,EAHFvF,QACApK,EAEE2P,EAFF3P,SACAD,EACE4P,EADF5P,MAGF9J,QAAQC,IAAI,SAAUgK,EAAUa,QAEhC,IAAMoH,EAAgB9F,iBAAsB,MAEtCwN,EAAYnT,aAAY,SAAC8D,GAC7B,OAAOgH,GACLhH,EAAOhF,WACPgF,EAAOmI,UAAU1Q,GACjBuI,EAAOqI,OAAQ,GAAG5Q,GAClBuI,EAAOsI,UAAW,GAAG7Q,GACrBuI,EAAOuO,wBAAwB5W,KAAI,kBAAwC,CACzE2X,cADiC,EAAET,aAEnCO,KAFiC,EAA+BA,YAKnE,CACDrT,UAAW,YAAwB,IAAD,IAAdwM,EAAc,EAArBjT,KAAOiT,QAClB,UAAAZ,EAAc7O,eAAd,SAAuB6N,OAAO4B,GAC9B,UAAAZ,EAAc7O,eAAd,SAAuBuN,MAAK,MAMhC,OAAO,eAAC,IAAD,2BAAkB8I,GAAlB,cACL,eAAC3S,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAACW,GAC5BvK,QAAQC,IAAI,WAAYsK,GACxBqP,EAAU5Q,OAAOuB,MAFnB,UAIE,oBAAI7I,MAAO,CAACkF,SAAU,WAAtB,8CACA,eAACqO,GAAA,EAAD,CAAWxT,UAAU,OAAQqY,iBAAiB,IAA9C,UACE,cAAC,GAAD,IACA,eAAC9E,GAAA,EAAD,CAAMtT,MAAO,CAAC+W,SAAU,WAAxB,UACE,cAACxD,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,sBAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,cAACF,GAAA,EAAK3D,KAAN,UACE,cAACtK,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAhB,UACE,cAACC,EAAA,EAAK4D,MAAN,qBACA,cAAC,IAAD,CACEwJ,QAASA,EACTE,KAAK,aACLtJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCAAE,cAAC,GAAD,CACP7W,GAAG,6CACH+X,WAAW,cACXC,WAAW,qBACXvY,UAAWoX,EAAWzQ,MAAQ,aAAe,GAC7CyC,YAAagO,EAAWzQ,MACxBiR,OAAQT,EAAMS,OACd9V,SAAU,SAAC0W,GACTlQ,EAAS,cAAUuM,GACnBvM,EAAS,iBAAauM,GACtBrC,EAAQ,UACRA,EAAQ,aACR2E,EAAMrV,SAAS0W,EAAS3Q,OAAS2Q,EAAS,GAAGjY,GAAK,SAGtD,cAAC+E,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,4BAQvE,eAAC0M,GAAA,EAAD,CAAMtT,MAAO,CAAC+W,SAAU,WAAxB,UACE,cAACxD,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,uBAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,cAACF,GAAA,EAAK3D,KAAN,UACE,cAACtK,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAhB,UACE,cAACC,EAAA,EAAK4D,MAAN,qBACA,cAAC,IAAD,CACEwJ,QAASA,EACTE,KAAK,SACLtJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCAAE,cAAC,GAAD,CACP7W,GAAG,0CACH+X,WAAW,cACXC,WAAW,qBACX5C,SAAU,SAACxE,GAAD,OAAUA,EAAOrN,YAAcuE,EAAM,eAC/CrI,UAAWoX,EAAWzQ,MAAQ,aAAe,GAC7CyC,YAAaZ,EAAUa,OAAO8H,OAC9B4G,SAAUZ,EAAM1R,MAChBmS,OAAQT,EAAMS,OACd9V,SAAUqV,EAAMrV,WAElB,cAACwD,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,4BAQvE,cAAC,GAAD,OAEF,eAACzD,EAAA,EAAD,CAAQpD,UAAU,OAAOwJ,KAAK,SAA9B,UACG2O,EAAU1O,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KADnE,gBAKF,cAACoL,GAAD,CAAYrM,IAAKsN,S,UChJRgI,GACH,SAAC/U,EAAgBD,GACvB,IACMgR,EADc1W,KAAM2W,YACCD,SAErBE,EAAUnV,IAAUC,IAAI,kBAAmB,CAC/CR,OAAQ,CACNyE,OAAQ,CACNC,OAAQD,QAAUmR,GAEpBpR,UAOJ,OAHAkR,EAAQK,OAAS,WACfP,EAAOO,OAAO,uCAETL,GAjBE8D,GAmBD,SAACC,EAAeC,EAAmBC,GAC3C,IAAMC,EAAW,IAAIC,SAIrB,OAHAD,EAAS9B,OAAO,UAAW2B,EAASA,EAAQ9F,MAC5CiG,EAAS9B,OAAO,YAAa4B,GAC7BE,EAAS9B,OAAO,UAAW6B,GACpBpZ,IAAUwE,KAAK,2BAA4B6U,EAAU,CAC1D/Z,QAAS,CACP,eAAgB,0BCnCXia,GAAuB,SAAClY,GAAiB,IAAD,EAChBmH,cAA3BI,EAD2C,EAC3CA,SAAUD,EADiC,EACjCA,aAClB,OAAO,cAAC7C,EAAA,EAAD,CAAMuD,SAAUV,GAAa,YAAa,IAAXxE,EAAU,EAAVA,OACpC9C,EAAMmO,SAASrL,MADV,SAGL,eAAC2B,EAAA,EAAKF,IAAN,CAAUpF,UAAU,cAApB,UACE,eAACqF,EAAA,EAAD,WACE,cAACC,EAAA,EAAK4D,MAAN,CAAY2K,QAAQ,SAASmF,QAAM,EAAnC,oBACA,cAAC1T,EAAA,EAAKC,QAAN,aAAchF,GAAG,SAASN,MAAO,CAACgZ,SAAU,UAAc7Q,EAAS,eAErE,cAAC/C,EAAA,EAAD,CAAKQ,GAAI,OAAT,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAOwJ,KAAK,SAA9B,SAAuC,cAAC,IAAD,cCNlC0P,GAAe,SAAC,GAAwF,IAAD,MAAtFC,EAAsF,EAAtFA,SAAsF,EACpFjV,oBAAS,GAD2E,mBAC3G4B,EAD2G,KAClGsT,EADkG,OAO9GpR,YAAgB,CAClBC,KAAM,SACNC,cAAe,CACbwQ,QAAS,KACTC,UAAW,IACXU,kBAAmB,OACnBC,WAAW,KATblR,EAJgH,EAIhHA,SACAI,EALgH,EAKhHA,UACAL,EANgH,EAMhHA,aAWIoR,EAAavU,aAAY,SAACwU,GAC9B,OAAOf,GAA+Be,EAAKd,QAASc,EAAKb,UAAWa,EAAKH,sBAQ3E,OALAzQ,qBAAU,WACRuQ,EAASvX,QAAU,CACjBuN,KAAMiK,KAEP,IACI,eAAC/J,EAAA,EAAD,CAAOC,UAAQ,EAACH,KAAMrJ,EAASyJ,OAAQ,kBAAI6J,GAAW,IAAtD,UACL,cAAC/J,EAAA,EAAMM,OAAP,6BAGA,cAACN,EAAA,EAAMO,KAAP,UACE,eAACtK,EAAA,EAAD,CAAM/E,GAAG,+BAA+BsI,SAAUV,GAAa,YAA4C,IAA1CuQ,EAAyC,EAAzCA,QAASC,EAAgC,EAAhCA,UAAWU,EAAqB,EAArBA,kBACnFE,EAAWhS,OAAO,CAChBmR,QAASA,EAAS,GAClBC,YACAU,yBAJJ,UAOE,eAAC/T,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,qBACA,cAAC5D,EAAA,EAAD,CAAKrF,UAAU,4BAA4BiJ,GAAI,OAA/C,SACE,cAAC3D,EAAA,EAAKoU,KAAN,yBACEtQ,YAAaZ,EAAUa,OAAOqP,SAC1BtQ,EAAS,UAAW,CACtBV,SAAU4B,OAHd,IAKE2E,SAAQ,UAAEzF,EAAUa,OAAOqP,eAAnB,aAAE,EAA0B7R,gBAI1C,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,uBACA,eAAC5D,EAAA,EAAD,CAAKQ,GAAI,OAAT,UACE,cAACP,EAAA,EAAKC,QAAN,aAAcvF,UAAU,cAAc4H,UAAW,EAAG3H,MAAO,CAACmG,MAAO,UACjEgD,YAAaZ,EAAUa,OAAOsP,WAC1BvQ,EAAS,YAAa,CACxBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAM,UAA7B,mBAAyChB,EAAUa,OAAOsP,iBAA1D,aAAyC,EAA4B9R,gBAGzE,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,4BACA,eAAC5D,EAAA,EAAD,CAAKrF,UAAU,SAAS6F,GAAI,OAA5B,UACE,cAACP,EAAA,EAAKqU,MAAN,aAAYC,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,MAAMpU,MAAM,OAAU2C,EAAS,uBACrE,cAAC9C,EAAA,EAAKqU,MAAN,aAAYC,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,OAAOpU,MAAM,QAAW2C,EAAS,6BAG3E,cAAC9C,EAAA,EAAKqU,MAAN,aAAYE,MAAM,8EAChBzQ,YAAaZ,EAAUa,OAAOiQ,UAC9BrL,SAAQ,UAAEzF,EAAUa,OAAOiQ,iBAAnB,aAAE,EAA4BzS,SAClCuB,EAAS,YAAa,CACxBV,SAAU4B,aAKlB,eAAC+F,EAAA,EAAMQ,OAAP,WACI,cAACzM,EAAA,EAAD,CAAQoD,QAAQ,SAASgD,KAAK,SAASsQ,KAAK,+BAA5C,sBACA,cAAC1W,EAAA,EAAD,8BClFK2W,GAAsB,WAAK,IAAD,EACX7V,mBAAS,GADE,mBAC9BrC,EAD8B,KACvBsC,EADuB,OAEbD,mBAAe,CACrCtC,QAAS,EACTwC,KAAM,KAJ6B,mBAE9BX,EAF8B,KAExBY,EAFwB,OAOTH,mBAAS,IAPA,mBAO9BR,EAP8B,KAOtBY,EAPsB,KAS/B0V,EAAiBrP,mBAEjBsP,EAAuBxV,YAAS,CAAC,uBAAwBhB,EAAMC,IAAS,WAC5E,OAAO+U,GAA6B/U,EAAQD,KAC3C,CACDmB,oBAAoB,EACpBD,sBAAsB,EACtBE,UAAW,YAAqB,IAAZC,EAAW,EAAlB1G,KAAO0G,KAClBX,EAASW,EAAKjD,UAoDlB,OAAO,sBAAK7B,UAAU,OAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,WAAtB,4BACA,qBAAKnF,UAAU,cAAf,SACE,eAACiH,EAAA,EAAD,CAAUjH,UAAU,UAAUwF,GAAI0U,KAAlC,UACE,cAAC9W,EAAA,EAAD,oBACA,cAAC6D,EAAA,EAASC,OAAV,CAAiBuG,OAAK,EAAClN,GAAG,4BAC1B,cAAC0G,EAAA,EAASE,KAAV,UACE,cAACF,EAAA,EAASxE,KAAV,CAAe2E,KAAK,IAAIzE,QAAS,WAC/BqX,EAAepY,SAAWoY,EAAepY,QAAQuN,MAAK,IADxD,6BAON,eAAC/J,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,OAAf,SACE,cAAC,GAAD,CAAsBgP,SAAU,SAACtL,GAC/BY,EAAUZ,QAGd,cAAC2B,EAAA,EAAD,CAAKrF,UAAU,OAAO6F,GAAI,OAA1B,SACE,sBAAK7F,UAAU,iDAAf,UACI,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,MAAW,CACjB7B,QAAS,EACTwC,KAAMwB,SAASH,QAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,iDAIR,eAACS,EAAA,EAAD,CAAOC,YAAU,EAAjB,UACE,gCACE,+BACE,oBAAIlG,MAAO,CAACmG,MAAO,GAAnB,eACA,wCACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCAhGe,WACjB,GAAI6T,EAAqB5T,WACvB,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMJ,GAAI6V,EAAqBvT,QAAS,CAAC,IAAD,IACxBC,EAAUsT,EAAVtT,MACR,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAACK,EAAqBC,gBAAtB,mBAAgCxI,YAAhC,eAAsCyI,UAAYF,EAAqBE,YAI9E,IAAMC,EAAUmT,EAAqB7b,KAAMA,KAAK0I,QAChD,OAAqB,GAAlBA,EAAQe,OACD,6BACN,oBAAI7H,UAAU,uBAAuBsG,QAAS,IAA9C,4CAKGQ,EAAQrG,KAAI,SAACsV,EAAchP,GAChC,OAAO,+BACL,6BAAKA,EAAQ,IACb,6BAAKgP,EAAapS,SAClB,6BACE,eAACsD,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,gCAA2BwV,EAAaxV,MAG3D,cAAC0G,EAAA,EAASE,KAAV,UACE,cAACF,EAAA,EAASxE,KAAV,CAAezC,UAAU,cAAcoH,KAAK,IAAIzE,QAAS,WACnD0E,OAAOC,QAAQ,wBADrB,+BAVQyO,EAAaxV,OAuE1BiH,QAGL,sBAAKxH,UAAU,MAAf,UACE,cAACqF,EAAA,EAAD,UACE,sBAAMrF,UAAU,UAAhB,kCAA6C6B,EAA7C,mBAEF,cAACwD,EAAA,EAAD,UACE,cAAC,EAAD,CACEzD,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,uBAI3D,cAAC,GAAD,CAAcuX,SAAUa,QCpHfG,GAAcjX,sBAAsC,SAACrC,EAAOsC,GAAO,IAAD,QAMzE6E,YAAgB,CAClBC,KAAM,SACNC,cAAe,CACbwQ,QAAS,KACTC,UAAW,IACXU,kBAAmB,OACnBC,WAAW,KATblR,EAH2E,EAG3EA,SACAI,EAJ2E,EAI3EA,UACAL,EAL2E,EAK3EA,aAWIiS,EAAWpV,aAAY,YAA0D,IAAxDqV,EAAuD,EAAvDA,KAAM7P,EAAiD,EAAjDA,QACnC,OAAO3J,EAAMyZ,OAAOD,EAAM7P,MAW5B,OAAO,eAAC0E,GAAD,yBAAiB/L,IAAKA,GAAStC,GAA/B,cACP,cAACwO,EAAA,EAAMM,OAAP,6BAGA,cAACN,EAAA,EAAMO,KAAP,UACE,eAACtK,EAAA,EAAD,CAAM/E,GAAG,+BAA+BsI,SAAUV,GAAa,YAA+D,IAA7DuQ,EAA4D,EAA5DA,QAAoB6B,EAAwC,EAAnD5B,UAAyC7Q,EAAU,EAA7BuR,kBAC9Fe,EAAS7S,OAAO,CACd8S,KAAM3B,EAAS,GACflO,QAAS,CACP+P,YACAzS,eALN,UASGsS,EAAShc,KAAO,cAAC2K,EAAA,EAAD,CAAOvC,QAAS4T,EAAS1T,QAAU,SAAW,UAA9C,SACd0T,EAAS1T,QAAU,QAAU,yBACpB,KACZ,eAACpB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,qBACA,cAAC5D,EAAA,EAAD,CAAKrF,UAAU,4BAA4BiJ,GAAI,OAA/C,SACE,cAAC3D,EAAA,EAAKoU,KAAN,yBACEtQ,YAAaZ,EAAUa,OAAOqP,SAC1BtQ,EAAS,UAAW,CACtBV,SAAU4B,OAHd,IAKE2E,SAAQ,UAAEzF,EAAUa,OAAOqP,eAAnB,aAAE,EAA0B7R,gBAI1C,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,uBACA,eAAC5D,EAAA,EAAD,CAAKQ,GAAI,OAAT,UACE,cAACP,EAAA,EAAKC,QAAN,aAAcvF,UAAU,cAAc4H,UAAW,EAAG3H,MAAO,CAACmG,MAAO,UACjEgD,YAAaZ,EAAUa,OAAOsP,WAC1BvQ,EAAS,YAAa,CACxBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAM,UAA7B,mBAAyChB,EAAUa,OAAOsP,iBAA1D,aAAyC,EAA4B9R,gBAGzE,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,EAAvB,4BACA,eAAC5D,EAAA,EAAD,CAAKrF,UAAU,SAAS6F,GAAI,OAA5B,UACE,cAACP,EAAA,EAAKqU,MAAN,aAAYC,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,MAAMpU,MAAM,OAAU2C,EAAS,uBACrE,cAAC9C,EAAA,EAAKqU,MAAN,aAAYC,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,OAAOpU,MAAM,QAAW2C,EAAS,6BAG3E,cAAC9C,EAAA,EAAKqU,MAAN,aAAYE,MAAM,8EAChBzQ,YAAaZ,EAAUa,OAAOiQ,UAC9BrL,SAAQ,UAAEzF,EAAUa,OAAOiQ,iBAAnB,aAAE,EAA4BzS,SAClCuB,EAAS,YAAa,CACxBV,SAAU4B,aAKlB,eAAC+F,EAAA,EAAMQ,OAAP,WACI,eAACzM,EAAA,EAAD,CAAQoD,QAAQ,SAASgD,KAAK,SAASsQ,KAAK,+BAA5C,UACGM,EAAS3Q,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KADlE,cAIA,cAAChB,EAAA,EAAD,iCC/GO4S,GACH,SAACvS,EAAYC,GACnB,OAAOlE,aAAUC,IAAmC,gBAAiB,CACnER,OAAQ,CACNyE,OAAQ,CACNC,OAAQD,QAAUmR,GAEpBpR,WAPKuS,GAWN,SAACzV,GACJ,OAAOf,aAAUC,IAAV,uBAA0Cc,KAZxCyV,GAcA,SAACrS,GACV,OAAOnE,aAAUwE,KAAiB,eAAgB,CAChDL,YAhBOqS,GAmBC,SAACzV,EAAYoD,GACvB,OAAOnE,aAAUwQ,IAAV,uBAA0CzP,GAAM,CACrDoD,YArBOqS,GAwBD,SAACzV,GACT,OAAOf,aAAUgb,OAAV,uBAAiCja,KAzB/ByV,GA2BD,SAAC0C,EAAeC,EAAmBC,GAC3C,IAAMC,EAAW,IAAIC,SAIrB,OAHAD,EAAS9B,OAAO,UAAW2B,EAASA,EAAQ9F,MAC5CiG,EAAS9B,OAAO,YAAa4B,GAC7BE,EAAS9B,OAAO,UAAW6B,GACpBpZ,aAAUwE,KAAK,yBAA0B6U,EAAU,CACxD/Z,QAAS,CACP,eAAgB,0BCjCX2b,GAAyB,SAAC5Z,GAAiB,IAAD,EAClBmH,cAA3BI,EAD6C,EAC7CA,SAAUD,EADmC,EACnCA,aAClB,OAAO,cAAC7C,EAAA,EAAD,CAAMuD,SAAUV,GAAa,YAAa,IAAXxE,EAAU,EAAVA,OACpC9C,EAAMmO,SAASrL,MADV,SAGL,eAAC2B,EAAA,EAAKF,IAAN,CAAUpF,UAAU,cAApB,UACE,eAACqF,EAAA,EAAD,WACE,cAACC,EAAA,EAAK4D,MAAN,CAAY2K,QAAQ,SAASmF,QAAM,EAAnC,oBACA,cAAC1T,EAAA,EAAKC,QAAN,aAAchF,GAAG,SAASN,MAAO,CAACgZ,SAAU,UAAc7Q,EAAS,eAErE,cAAC/C,EAAA,EAAD,CAAKQ,GAAI,OAAT,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAOwJ,KAAK,SAA9B,SAAuC,cAAC,IAAD,cCHlCkR,GAAoB,WAAK,IAAD,EACTxW,mBAAS,GADA,mBAC5BrC,EAD4B,KACrBsC,EADqB,OAEXD,mBAAe,CACrCtC,QAAS,EACTwC,KAAM,KAJ2B,mBAE5BX,EAF4B,KAEtBY,EAFsB,OAOPH,mBAAS,IAPF,mBAO5BR,EAP4B,KAOpBY,EAPoB,KAS7B0V,EAAiBrP,iBAA2B,MAE5CgQ,EAAqBlW,YAAS,CAAC,qBAAsBhB,EAAMC,IAAS,WACxE,OAAOsS,GAA2BvS,EAAMC,KACvC,CACDkB,oBAAoB,EACpBD,sBAAsB,EACtBE,UAAW,YAAqB,IAAZC,EAAW,EAAlB1G,KAAO0G,KAClBX,EAASW,EAAKjD,UAIZ+Y,EAAW5V,aAAY,SAACzE,GAC5B,OAAOyV,GAA6BzV,MAwDtC,OAAO,sBAAKP,UAAU,OAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,WAAtB,kCACA,eAACC,EAAA,EAAD,CAAKpF,UAAU,OAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAU,eAAe6F,GAAG,OAAjC,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,kBAAIgY,EAAmBzV,WAAxC,SAAmD,cAAC,IAAD,QAErD,cAACG,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,eAACoB,EAAA,EAAD,CAAUzB,GAAI0U,KAAd,UACE,cAAC9W,EAAA,EAAD,CAAQoC,GAAIO,IAAM8U,SAAO,EAAC9a,GAAI,gDAA9B,mBACA,cAACkH,EAAA,EAASC,OAAV,CAAiBuG,OAAK,EAAClN,GAAG,4BAC1B,cAAC0G,EAAA,EAASE,KAAV,UACE,cAACF,EAAA,EAASxE,KAAV,CAAeE,QAAS,WACtBpE,QAAQC,IAAIwb,GACZA,EAAepY,SAAWoY,EAAepY,QAAQuN,MAAK,IAFxD,gCASR,eAAC/J,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,OAAf,SACE,cAAC,GAAD,CAAwBgP,SAAU,SAACtL,GACjCY,EAAUZ,QAGd,cAAC2B,EAAA,EAAD,CAAKrF,UAAU,OAAO6F,GAAI,OAA1B,SACE,sBAAK7F,UAAU,iDAAf,UACI,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,iDAIR,eAACS,EAAA,EAAD,CAAOC,YAAU,EAAjB,UACE,gCACE,+BACE,oBAAIlG,MAAO,CAACmG,MAAO,GAAnB,eACA,wCACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCA3Ge,WACjB,GAAIuU,EAAmBtU,WACrB,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMJ,GAAIuW,EAAmBjU,QAAS,CAAC,IAAD,IACtBC,EAAUgU,EAAVhU,MACR,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAACK,EAAqBC,gBAAtB,mBAAgCxI,YAAhC,eAAsCyI,UAAYF,EAAqBE,YAI9E,IAAMC,EAAU6T,EAAmBvc,KAAMA,KAAK0I,QAC9C,OAAqB,GAAlBA,EAAQe,OACD,6BACN,oBAAI7H,UAAU,uBAAuBsG,QAAS,IAA9C,4CAKGQ,EAAQrG,KAAI,SAACgO,EAAY1H,GAC9B,OAAO,+BACL,6BAAKA,EAAQ,IACb,6BAAK0H,EAAW9K,SAChB,6BACE,eAACsD,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,8BAAyBkO,EAAWlO,MAEvD,eAAC0G,EAAA,EAASE,KAAV,WACE,eAACF,EAAA,EAASxE,KAAV,CAAe+C,GAAIO,IAAM8U,SAAO,EAAC9a,GAAI,CACnCyQ,SAAS,uCAAD,OAAyC/B,EAAWlO,GAApD,WACRgB,MAAO,CACLkN,eAHJ,UAKI,cAAC,IAAD,IAAU,sBAAMzO,UAAU,oBAAhB,uBACd,eAACiH,EAAA,EAASxE,KAAV,CAAezC,UAAU,cAAcoH,KAAK,IAAIzE,QAAS,WACnD0E,OAAOC,QAAQ,wBACjBsT,EAASrT,OAAOkH,EAAWlO,KAF/B,UAIG,cAAC,IAAD,IAAW,sBAAMP,UAAU,oBAAhB,mCAnBNyO,EAAWlO,OAkFxBiH,QAGL,sBAAKxH,UAAU,kBAAf,UACE,sBAAMA,UAAU,UAAhB,kCAA6C6B,EAA7C,iBACA,cAAC,EAAD,CACED,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,qBAGzD,cAACuY,GAAD,CAAahX,IAAK6W,EAChBM,OAAQ,SAACD,EAAM7P,GACb,OAAOwL,GAA6BqE,EAAM7P,EAAQ+P,UAAW/P,EAAQ1C,eCrJhEgT,GAAiB,WAAK,IAC1Bva,EAAMwa,cAANxa,GAIDya,EAAUC,cAIR1Z,EAASyZ,EAAQE,SAAjB3Z,MAEFkN,EAAU,OAAGlN,QAAH,IAAGA,OAAH,EAAGA,EAAOkN,WAEpB0M,EAAcxQ,kBAAgB,GAbJ,EAoB5B3C,cAJFG,EAhB8B,EAgB9BA,aACAC,EAjB8B,EAiB9BA,SACAE,EAlB8B,EAkB9BA,SACAE,EAnB8B,EAmB9BA,UAGI4S,EAAUpW,aAAY,YAAqB,IAAnBrB,EAAkB,EAAlBA,OAC5B,OAAOpD,EAAKyV,GAA+BpQ,SAASrF,GAAKoD,GAAUqS,GAA8BrS,KAChG,CACDkB,UAAW,WACLsW,EAAYvZ,SACdoZ,EAAQH,QAAQ,0CAIhBQ,EAAgB5W,YAAS,CAAC,gBAAiBlE,IAAK,WACpD,OAAOyV,GAAwBpQ,SAASrF,MACvC,CACDmI,UAAWnI,IAAOkO,EAClB9J,sBAAsB,EACtBC,oBAAoB,IAGtBgE,qBAAU,WAAK,IAAD,EAC8B,IAAvC,UAAAyS,EAAcjd,YAAd,eAAoBA,OAAQqQ,IAC7BnG,EAAS,WAAW,UAAA+S,EAAcjd,YAAd,eAAoBA,OAAQqQ,GAAY9K,UAE7D,CAAC0X,EAAcjd,OAkClB,OAAO,eAACiR,EAAA,EAAD,CACLF,MAAI,EACJG,UAAQ,EACRC,OAAQ,WACNyL,EAAQH,QAAQ,wCAJb,UAOL,cAACxL,EAAA,EAAMM,OAAP,UACGpP,EAAK,SAAW,cAEnB,cAAC8O,EAAA,EAAMO,KAAP,UA1CiB,WAAK,IAAD,MACrB,GAAGyL,EAAchV,WACf,OAAO,cAACE,EAAA,EAAD,CAASE,UAAU,SAAnB,sBAET,IACS,IADHE,EAAQ0U,EAAc1U,MAC5B,OAAGA,EACM,cAACoC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UACJ,UAAAG,EAAMC,gBAAN,mBAAgBxI,YAAhB,eAAsByI,UAAWF,EAAME,UAGrC,eAACvB,EAAA,EAAD,CAAM/E,GAAG,kBACdsI,SAAUV,GAAa,SAACmT,GACtBF,EAAQ7T,OAAO+T,MAFZ,UAKc,SAAlBF,EAAQG,QAAuC,WAAlBH,EAAQG,OAAuB,cAACxS,EAAA,EAAD,CAAOvC,QAAS4U,EAAQ1U,QAAU,SAAW,UAA7C,SAC1D0U,EAAQ1U,SAAU,UAAA0U,EAAQzU,MAAMC,gBAAd,mBAAwBxI,YAAxB,eAA8ByI,UAAWuU,EAAQzU,MAAME,QAAU,aAC3E,KACX,eAACvB,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAO1F,QAC1ByE,EAAS,SAAU,CACrBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAO1F,cAAxD,aAAuC,EAAyBkD,gBAiBjE2U,KAEH,eAACnM,EAAA,EAAMQ,OAAP,WACItP,EASU,KATL,eAAC6C,EAAA,EAAD,CACLoG,KAAK,SACLsQ,KAAK,kBACLnX,QAAS,WACPwY,EAAYvZ,SAAU,GAJnB,UAOJwZ,EAAQ3R,WAAa0R,EAAYvZ,QAAU,cAAC2E,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAPjF,yBAUP,eAAChB,EAAA,EAAD,CACEoG,KAAK,SACLsQ,KAAK,kBACLnX,QAAS,WACPwY,EAAYvZ,SAAU,GAJ1B,UAOGwZ,EAAQ3R,YAAc0R,EAAYvZ,QAAU,cAAC2E,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAPzF,oBCzFOoQ,GACH,SAAC9Q,EAAgBD,GACvB,OAAOjE,aAAUC,IAA+B,UAAW,CACzDR,OAAO,CACLyE,SACAD,WALK+Q,GASL,SAACjU,GACL,OAAOf,aAAUC,IAAV,kBAAiCc,KAV/BiU,GAYA,SAACiH,EAGTC,EAA0BC,EAA0BhK,EAAiBiK,EAAyB/X,GAC/F,OAAOrE,aAAUwE,KAAa,UAAW,CACvCyX,GAAIA,EAAGI,KACPC,eAAgBL,EAAGM,YACnBL,mBACAC,mBACAhK,UACAiK,kBACA/X,iBAvBO2Q,GA0BC,SAACjU,EAAYkb,EAGtBC,EAA0BC,EAA0BhK,EAAiBiK,EAAyB/X,GAC/F,OAAOrE,aAAUwQ,IAAV,kBAAiCzP,GAAM,CAC5Ckb,GAAIA,EAAGI,KACPC,eAAgBL,EAAGM,YACnBL,mBACAC,mBACAhK,UACAiK,kBACA/X,iBArCO2Q,GAwCD,SAACjU,GACT,OAAOf,aAAUgb,OAAV,kBAA4Bja,KC3D1Byb,GAAoB,SAACnb,GAChC,OAAO,MCIM,cAAO,IAAD,MACFf,EAAQyQ,cAAlBC,SADY,EAEKtM,mBAAS,CAC/BtC,QAAS,EACTwC,KAAM,KAJW,mBAEZX,EAFY,KAENY,EAFM,OAMSH,mBAAiB,IAN1B,mBAMZR,EANY,KAMJY,EANI,OASyBJ,oBAAS,GATlC,mBASOK,GATP,WAWb2J,EAASzJ,YAAS,CAAC,gBAAiBhB,EAAK7B,QAAS6B,EAAKW,OAAO,WAClE,OAAOoQ,GAAsB9Q,EAAQD,KACpC,CACDkB,sBAAsB,EACtBC,oBAAoB,IAGhB/C,GAAQ,UAAAqM,EAAO9P,YAAP,mBAAaA,YAAb,mBAAmB0G,YAAnB,eAAyBjD,QAAS,EAE1C+Y,EAAW5V,aAAY,SAACzE,GAC5B,OAAOiU,GAAwBjU,KAC9B,CACDsE,UAAW,WACTqJ,EAAOhJ,aAgEX,OAAO,sBAAKlF,UAAU,OAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,WAAtB,qBACA,qBAAKnF,UAAU,cAAf,SACE,eAACoF,EAAA,EAAD,CAAKpF,UAAU,sBAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,WACfuL,EAAOhJ,WADT,SAEG,cAAC,IAAD,QAEL,cAACG,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,WACf4B,GAAe,SAAAuB,GAAO,OAAGA,MAD3B,SAEG,cAAC,IAAD,QAEL,cAACT,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,eAACzC,EAAA,EAAD,CACEoC,GAAIO,IACJhG,GAAE,UAAKD,EAAL,cACFE,UAAU,4BAHZ,UAII,cAAC,IAAD,IAAU,sBAAMA,UAAU,OAAhB,6BAKpB,eAACoF,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,OAAf,SACE,cAACgc,GAAD,CAAmBnL,SAAU,SAACnN,GAC5BY,EAAUZ,QAGd,cAAC2B,EAAA,EAAD,CAAKrF,UAAU,OAAO6F,GAAI,OAA1B,SACE,sBAAK7F,UAAU,iDAAf,UACI,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,iDAIR,eAACS,EAAA,EAAD,CAAOC,YAAU,EAAjB,UACE,gCACE,+BACE,oBAAIlG,MAAO,CAACmG,MAAO,GAAnB,eACA,sCACA,wCACA,8CACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCAxHe,WACjB,GAAI8H,EAAO7H,WACT,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMC,GAAI8J,EAAOxH,QAAS,CAAC,IAAD,IACjBC,EAAQuH,EAAOvH,MACrB,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAAAK,EAAMC,gBAAN,mBAAgBxI,YAAhB,eAAsByI,UAAWF,EAAME,YAM9C,OAFiBqH,EAAT9P,KACgBA,KAAK0I,QACZrG,KAAI,SAACZ,EAAMkH,GAC1B,OAAO,+BACL,oBAAI+K,MAAM,MAAM7R,MAAO,CAAE+G,WAAY,QAArC,SACGD,EAAQ,IAEX,qBAAI9G,MAAO,CAAE+G,WAAY,QAAzB,UAEGnH,EAAK4b,GAAGI,KAAMhc,EAAK4b,GAAGM,YAAR,WAA0Blc,EAAK4b,GAAGM,aAAgB,MAEnE,oBAAI9b,MAAO,CAAE+G,WAAY,QAAzB,SACGwK,GAAe3R,EAAK4R,gBAAiB5R,EAAK6R,gBAAiB7R,EAAK8R,WAEnE,oBAAI1R,MAAO,CAAE+G,WAAY,QAAzB,SACGnH,EAAKkW,eAER,6BACE,eAAC9O,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,mBAAcV,EAAKU,MAGtC,eAAC0G,EAAA,EAASE,KAAV,WACE,eAACF,EAAA,EAASxE,KAAV,CAAe+C,GAAIO,IAAMhG,GAAI,CAC3ByQ,SAAS,oBAAD,OAAsB3Q,EAAKU,GAA3B,WACRgB,MAAO,CACL4P,OAAQtR,IAHZ,UAKI,cAAC,IAAD,IAAU,sBAAMG,UAAU,oBAAhB,uBACd,eAACiH,EAAA,EAASxE,KAAV,CAAezC,UAAU,cAAcoH,KAAK,IAAIzE,QAAS,WACnD0E,OAAOC,QAAQ,wBACjBsT,EAASrT,OAAO1H,EAAKU,KAFzB,UAIG,cAAC,IAAD,IAAW,sBAAMP,UAAU,oBAAhB,mCA/BNH,EAAKU,OAqGlBiH,QAGL,sBAAKxH,UAAU,kBAAf,UACE,sBAAMA,UAAU,UAAhB,kCAA6C6B,EAA7C,iBACA,cAAC,EAAD,CACED,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,yBCjKhDqa,GAA0B,SAACpb,GAAuI,IAAD,EAKtKqN,EAASzJ,YAFE,yBAEiB,WAChC,OAAOgU,GAA6B,MACnC,CACDtK,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IAYxB,OANAiE,qBAAU,WACQ,IAAD,EAAZsF,EAAO9P,OACRyC,EAAMuN,QAAUvN,EAAMuN,OAAN,UAAaF,EAAO9P,YAApB,aAAa,EAAaA,SAE3C,CAAC8P,EAAO9P,OAEJ,cAAC,KAAD,yBACL8d,eAAa,EACbC,MAAM,QACFtb,GAHC,IAKL4I,UAAWyE,EAAO7H,WAClBmE,SAAS,UAAA0D,EAAO9P,YAAP,eAAaA,OAAQ,GAC9BkQ,SAAS,SACTS,UAAU,EACVR,UAAW,EACXS,SAAU,SAACC,KAGXT,uBAAwB,SAACC,GACvB,OAAOA,EAAW9K,YCrBT,cAAK,IAAD,wBACVpD,EAAMwa,cAANxa,GAIDya,EAAUC,cALC,EASmB/W,mBAAqB,IATxC,mBASVkY,EATU,KASEC,EATF,OAU2BnY,mBAAyB,IAVpD,mBAUVoY,EAVU,KAUMC,EAVN,KAYXpB,EAAcxQ,kBAAgB,GAZnB,EAoBb3C,YAAgB,CAClBE,cAAe,CACb6N,aAAc,GACdyC,SAAU,MARZrQ,EAfe,EAefA,aACAC,EAhBe,EAgBfA,SACAE,EAjBe,EAiBfA,SACAoK,EAlBe,EAkBfA,QACAlK,EAnBe,EAmBfA,UAQI4S,EAAUpW,aAAY,SAACsW,GAC3B,OAAO/a,EAAKiU,GAA0B5O,SAASrF,GAAK,CAChDsb,KAAMjW,SAAS0V,EAAOG,IACtBM,YAAaT,EAAOkB,eAEtBlB,EAAO7J,gBACP6J,EAAO5J,gBACP4J,EAAO3J,QACP2J,EAAOvF,aAAc,GAAGxV,GACxB+a,EAAO9C,SAAU,GAAGjY,IAClBiU,GAAyB,CACzBqH,KAAMjW,SAAS0V,EAAOG,IACtBM,YAAaT,EAAOkB,eAEtBlB,EAAO7J,gBACP6J,EAAO5J,gBACP4J,EAAO3J,QACP2J,EAAOvF,aAAc,GAAGxV,GACxB+a,EAAO9C,SAAU,GAAGjY,MAErB,CACDsE,UAAW,WACLsW,EAAYvZ,SACdoZ,EAAQyB,YAIRC,EAAOjY,YAAS,CAAC,aAAclE,IAAK,WACxC,OAAOiU,GAAoB5O,SAASrF,MACnC,CACDmI,UAAWnI,KAAM,UAACya,EAAQE,SAAS3Z,aAAlB,aAAC,EAAwB4P,QAC1CxM,sBAAsB,EACtBC,oBAAoB,IAGhBuM,GAAS,UAAAuL,EAAKte,YAAL,eAAWA,QAAX,UAAmB4c,EAAQE,SAAS3Z,aAApC,aAAmB,EAAwB4P,QAuC1D,OArCAvI,qBAAU,WACLuI,IACD7I,EAAS,KAAMqU,OAAOxL,EAAOsK,GAAGI,OAChCvT,EAAS,gBAAiB6I,EAAOsK,GAAGM,aACpCzT,EAAS,kBAAmB6I,EAAOM,iBACnCnJ,EAAS,kBAAmB6I,EAAOO,iBACnCpJ,EAAS,UAAW6I,EAAOQ,YAI5B,CAACR,IAEJvI,qBAAU,WACLuI,GAAUiL,EAAWvU,QACtBS,EAAS,WAAY8T,EAAW1Y,QAAO,SAAAkZ,GAAC,OAAEA,EAAErc,IAAM4Q,EAAOrN,iBAE1D,CAACqN,EAAQiL,IAEZxT,qBAAU,WACLuI,GAAUmL,EAAezU,QAC1BS,EAAS,eAAgBgU,EAAe5Y,QAAO,SAAAkZ,GAAC,OAAEA,EAAErc,IAAM4Q,EAAO0L,qBAElE,CAAC1L,EAAQmL,IAES,WAAlBlB,EAAQG,QAAwBJ,EAAYvZ,SAC5C,IAYI,qCACL,eAAC0D,EAAA,EAAD,CAAM/E,GAAG,kBACPsI,SAAUV,GAAa,SAACmT,GACtBF,EAAQ7T,OAAO+T,MAFnB,UAKE,oBAAIrb,MAAO,CAACkF,SAAU,QAAtB,SAAgC5E,EAAK,aAAe,qBACjC,SAAlB6a,EAAQG,QAAuC,WAAlBH,EAAQG,OAAuB,cAACxS,EAAA,EAAD,CAAOvC,QAAS4U,EAAQ1U,QAAU,SAAW,UAA7C,SAC1D0U,EAAQ1U,SAAU,UAAC0U,EAAQzU,MAAqBC,gBAA9B,mBAAwCxI,YAAxC,eAA8CyI,UAAYuU,EAAQzU,MAAqBE,QAAU,aAC3G,KACX,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAG/N,GAAI,EAAhC,UACE,cAACP,EAAA,EAAK4D,MAAN,kCACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,KAAM,CACjBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOoS,UAAxD,aAAuC,EAAqB5U,aAE9D,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAG/N,GAAI,EAAhC,UACE,cAACP,EAAA,EAAK4D,MAAN,0BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,gBAAiB,CAC5BR,UAAW0B,EAAgB,OAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOmT,qBAAxD,aAAuC,EAAgC3V,gBAG3E,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,kBAAmB,MAWlC,cAAC9C,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOoI,uBAAxD,aAAuC,EAAkC5K,aAE3E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,kBAAmB,CAS9BV,SAAU4B,IACV1B,UAAW0B,EAAgB,QAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOqI,uBAAxD,aAAuC,EAAkC7K,aAE3E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,sBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,UAAW,CACtBR,UAAW0B,EAAgB,QAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOsI,eAAxD,aAAuC,EAA0B9K,gBAGrE,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,2BACA,cAAC,IAAD,CACE0J,KAAK,eACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAG,wCACH6N,OAAQ,SAACkO,GAAD,OAAkBC,EAAkBD,IAC5Ctc,UAAWwI,EAAUa,OAAO0M,aAAe,aAAe,GAC1D3M,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,mBAKjE,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,uBACA,cAAC,IAAD,CACE0J,KAAK,WACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAG,oCACH6N,OAAQ,SAACgO,GAAD,OAAcC,EAAcD,IACpCpc,UAAWoX,EAAWzQ,MAAQ,aAAe,GAC7CyC,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,sBAMnE,sBAAK7G,UAAU,OAAf,UACIO,EAUU,KAVL,eAAC6C,EAAA,EAAD,CACLpD,UAAU,MACVwJ,KAAK,SACLsQ,KAAK,kBACLnX,QAAS,WACPwY,EAAYvZ,SAAU,GALnB,UAQJwZ,EAAQ3R,WAAa0R,EAAYvZ,QAAU,cAAC2E,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KARjF,yBAWP,eAAChB,EAAA,EAAD,CACEpD,UAAU,MACVwJ,KAAK,SACLsQ,KAAK,kBACLnX,QAAS,WACPwY,EAAYvZ,SAAU,GAL1B,UAQGwZ,EAAQ3R,YAAc0R,EAAYvZ,QAAU,cAAC2E,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KARzF,mBAaJ,cAACiL,EAAA,EAAD,CAAOF,KAAMuN,EAAKrW,YAAcqW,EAAKhW,QAAS4I,UAAQ,EAAtD,SACE,cAACD,EAAA,EAAMO,KAAP,UACG8M,EAAKrW,WACJ,qCAAE,cAACE,EAAA,EAAD,CAASE,UAAU,WAArB,cACAiW,EAAKhW,QAAU,cAACqC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UACT,UAACkW,EAAK/V,MAAqBC,gBAA3B,mBAAqCxI,YAArC,eAA2CyI,UAAY6V,EAAK/V,MAAqBE,UAC5E,aCjNRiW,GAAwC,CAGnD5O,OAAQ,SAACxK,EAAgBD,GACvB,OAAOjE,aAAUC,IAAI,cAAe,CAClCR,OAAQ,CACNyE,SACAD,WAINsZ,OAAQ,SAACxc,GACP,OAAOf,aAAUC,IAAV,sBAA6Bc,KAEtC4X,UAAW,SAACrB,GACV,OAAOtX,aAAUwE,KAAK,cAAegZ,aAAiBlG,KAExDmG,WAAY,SAAC1c,EAAIuW,GACf,OAAOtX,aAAUwQ,IAAV,sBAA6BzP,GAAMyc,aAAiBlG,KAE7D8D,SAAU,SAACra,GACT,OAAOf,aAAUC,IAAV,sBAA6Bc,KAEtC2c,gCAvBmD,SAuBnB3c,EAAY4c,GAU1C,OAAO3d,aAAUwQ,IAAV,sBAA6BzP,EAA7B,aAA4Cyc,aAAiBG,MC3G3DC,GACA,SAACC,EAAqBjf,GAK/B,OAAOoB,aAAUwE,KAAV,sBAA8BqZ,EAA9B,cAAwDjf,ICDtDkf,GAAwB,SAACzc,GACpC,OAAO,MCII0c,GAAmB,WAAO,IAAD,MACnBzd,EAAQyQ,cAAlBC,SAD6B,EAEZtM,mBAAS,CAC/BtC,QAAS,EACTwC,KAAM,KAJ4B,mBAE7BX,EAF6B,KAEvBY,EAFuB,OAMRH,mBAAiB,IANT,mBAM7BR,EAN6B,KAMrBY,EANqB,OASQJ,oBAAS,GATjB,mBASVK,GATU,WAW9B2J,EAASzJ,YAAS,CAAC,qBAAsBf,EAAQD,IAAO,WAC5D,OAAOqZ,GAAmB5O,OAAOxK,EAAQD,KACxC,CACDkB,sBAAsB,EACtBC,oBAAoB,IAGhB/C,GAAQ,UAAAqM,EAAO9P,YAAP,mBAAaA,YAAb,mBAAmB0G,YAAnB,eAAyBjD,QAAS,EAE1C+Y,EAAW5V,aAAY,SAACzE,GAC5B,OAAOuc,GAAmBlC,SAASra,KAClC,CACDsE,UAAW,WACTqJ,EAAOhJ,aA4DX,OAAO,sBAAKlF,UAAU,OAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,WAAtB,yBACA,qBAAKnF,UAAU,cAAf,SACE,eAACoF,EAAA,EAAD,CAAKpF,UAAU,sBAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,WACfuL,EAAOhJ,WADT,SAEG,cAAC,IAAD,QAEL,cAACG,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQT,QAAS,WACf4B,GAAe,SAAAuB,GAAO,OAAGA,MAD3B,SAEG,cAAC,IAAD,QAEL,cAACT,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,eAACzC,EAAA,EAAD,CACEoC,GAAIO,IACJhG,GAAE,UAAKD,EAAL,cACFE,UAAU,4BAHZ,UAII,cAAC,IAAD,IAAU,sBAAMA,UAAU,OAAhB,6BAKpB,eAACoF,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,OAAf,SACE,cAACsd,GAAD,CAAuBzM,SAAU,SAACnN,GAChCY,EAAUZ,QAGd,cAAC2B,EAAA,EAAD,CAAKrF,UAAU,OAAO6F,GAAI,OAA1B,SACE,sBAAK7F,UAAU,iDAAf,UACI,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOhC,EAAKW,KAAMtC,SAAU,SAAC4D,GACtE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,iDAIR,eAACS,EAAA,EAAD,CAAOC,YAAU,EAAjB,UACE,uBAAOnG,UAAU,cAAjB,SACE,+BACE,oBAAIC,MAAO,CAACmG,MAAO,GAAnB,eACA,wCACA,oBAAInG,MAAO,CAACmG,MAAO,GAAnB,kBACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCAnHe,WACjB,GAAI8H,EAAO7H,WACT,OAAO,6BACL,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAMC,GAAI8J,EAAOxH,QAAS,CAAC,IAAD,IACjBC,EAAQuH,EAAOvH,MACrB,OAAO,6BACL,oBAAI3G,UAAU,mCAAmCsG,QAAS,IAA1D,UACG,UAAAK,EAAMC,gBAAN,mBAAgBxI,YAAhB,eAAsByI,UAAWF,EAAME,YAM9C,OAFiBqH,EAAT9P,KACkBA,KAAK0I,QACZrG,KAAI,SAACZ,EAAMkH,GAC5B,OAAO,+BACL,oBAAI+K,MAAM,MAAM7R,MAAO,CAAE+G,WAAY,QAArC,SACGD,EAAQ,IAEX,oBAAI9G,MAAO,CAAE+G,WAAY,QAAzB,SACGnH,EAAKsR,QAAUK,GAAe3R,EAAKsR,OAAOM,gBAAiB5R,EAAKsR,OAAOO,gBAAiB7R,EAAKsR,OAAOQ,UAAY9R,EAAK8D,SAExH,oBAAI1D,MAAO,CAAE+G,WAAY,QAAzB,SACGnH,EAAKoT,OAER,6BACE,eAAChM,EAAA,EAAD,WACE,cAACA,EAAA,EAASC,OAAV,CAAiB1B,GAAIxC,EACnBwD,QAAQ,OAAOjG,GAAE,mBAAcV,EAAKU,MAGtC,eAAC0G,EAAA,EAASE,KAAV,WACE,eAACF,EAAA,EAASxE,KAAV,CAAe+C,GAAIO,IAAMhG,GAAI,CAC3ByQ,SAAS,GAAD,OAAK1Q,EAAL,YAAaD,EAAKU,GAAlB,WACRgB,MAAO,CACL4P,OAAQtR,IAHZ,UAKI,cAAC,IAAD,IAAU,sBAAMG,UAAU,oBAAhB,uBACd,eAACiH,EAAA,EAASxE,KAAV,CAAezC,UAAU,cAAcoH,KAAK,IAAIzE,QAAS,WACnD0E,OAAOC,QAAQ,wBACjBsT,EAASrT,OAAO1H,EAAKU,KAFzB,UAIG,cAAC,IAAD,IAAW,sBAAMP,UAAU,oBAAhB,mCA3BNH,EAAKU,OAgGlBiH,QAGL,sBAAKxH,UAAU,kBAAf,UACE,sBAAMA,UAAU,UAAhB,kCAA6C6B,EAA7C,iBACA,cAAC,EAAD,CACED,QAAS6B,EAAK7B,QACdC,MAAOG,KAAKyF,MAAM5F,EAAQ4B,EAAKW,MAAQX,EAAKW,MAAQ,EACpDtC,SAAU,SAACF,GAAD,OAAayC,GAAQ,SAACZ,GAAD,mBAAC,eAAeA,GAAhB,IAAsB7B,yBC9IhD4b,GAAuB,SAAC,GAA6C,EAA5CpM,UAA4C,EAAjCqM,WAAkC,IAAhBC,EAAe,EAAfA,KAC1Dnd,EAAMwa,cAANxa,GAIDya,EAAUC,cALgE,EAS5C/W,mBAAqB,IATuB,mBAS7DmY,GAT6D,aAc5ErU,cAHFG,EAX8E,EAW9EA,aACAC,EAZ8E,EAY9EA,SACAsK,EAb8E,EAa9EA,QAGI0I,EAAUpW,aAAY,SAAC8D,GAC3B,OAAOvI,EAAKuc,GAAmBG,WAAWrX,SAASrF,GAAK,CACtDod,OAAQ,EACR/Z,IAAKgC,SAASkD,EAAOlF,WAAQiR,EAC7BlR,OAAQmF,EAAOnF,OACfG,WAAYgF,EAAO0P,SAAUjY,KAC1Buc,GAAmB3E,UAAU,CAChCwF,OAAQ,EACR/Z,IAAKgC,SAASkD,EAAOlF,WAAQiR,EAC7BlR,OAAQmF,EAAOnF,OACfG,WAAYgF,EAAO0P,SAAUjY,QAkBjC,OAdAqI,qBAAU,WACLwS,EAAQhd,OACNsf,GACD1C,EAAQH,QAAQG,EAAQE,SAAS1K,SAAU,CACzCY,UAAWgK,EAAQhd,KAAKA,OAE1Bsf,KAGA1C,EAAQH,QAAR,+BAAwCO,EAAQhd,KAAKA,KAAKmC,QAG7D,CAAC6a,EAAQhd,OAEL,eAACkH,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAACW,GACnCsS,EAAQ7T,OAAOuB,MADV,UAGL,eAACxD,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,kBACA,cAAC5D,EAAA,EAAKC,QAAN,eAEM6C,EAAS,MAAO,CAClBL,QAASuB,EAAc,cAI7B,eAAChE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,eACM6C,EAAS,SAAU,CACrBV,SAAU4B,cAKlB,cAAChE,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,uBACA,cAAC,IAAD,CACE0J,KAAK,WACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAG,oCACH6N,OAAQ,SAACgO,GAAD,OAAcC,EAAcD,IACpCpc,UAAWoX,EAAWzQ,MAAQ,aAAe,GAC7CyC,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAAQ,CAAC0R,EAAM1R,OAAS,GACxC3D,SAAU,SAACsa,GAAD,OAAcjF,EAAMrV,SAASsa,EAAWvU,QAAUuU,EAAW,KACvExE,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,qBAMnE,eAACzD,EAAA,EAAD,CACEoG,KAAK,SADP,UAGG4R,EAAQ3R,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAHjE,iBCnFSwZ,GAAsB,SAAC,GAA8C,IAAD,8BAA5CxM,EAA4C,EAA5CA,UAA6BsM,GAAe,EAAjCD,WAAiC,EAAfC,MAAe,EAC3CxZ,mBAAqB,IADsB,mBACxEkY,EADwE,KAC5DC,EAD4D,OAEnCnY,mBAAyB,IAFU,mBAExEoY,EAFwE,KAExDC,EAFwD,KAGxEhc,EAAMwa,cAANxa,GAGDya,EAAUC,cAN+D,EAc3EjT,YAAgB,CAClBC,KAAM,SACNC,cAAe,CACbtE,KAAc,OAATwN,QAAS,IAATA,GAAA,UAAAA,EAAWxN,WAAX,eAAgBia,aAAc,GACnCpC,IAAa,OAATrK,QAAS,IAATA,GAAA,UAAAA,EAAWD,cAAX,mBAAmBsK,UAAnB,eAAuBI,KAAKgC,aAAc,GAC9CrB,eAAwB,OAATpL,QAAS,IAATA,GAAA,UAAAA,EAAWD,cAAX,eAAmBsK,GAAGM,cAAe,GACpDtK,iBAA0B,OAATL,QAAS,IAATA,GAAA,UAAAA,EAAWD,cAAX,eAAmBM,kBAAmB,GACvDC,iBAA0B,OAATN,QAAS,IAATA,GAAA,UAAAA,EAAWD,cAAX,eAAmBO,kBAAmB,GACvDC,QAAO,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAWD,cAAb,aAAE,EAAmBQ,QAC5BoE,aAAc,GACdyC,SAAU,MAfZrQ,EAT6E,EAS7EA,aACAC,EAV6E,EAU7EA,SACAE,EAX6E,EAW7EA,SACAoK,EAZ6E,EAY7EA,QACAlK,EAb6E,EAa7EA,UAeI4S,EAAUpW,aAAY,SAACsW,GAC3B,OAAO/a,EAAKuc,GAAmBG,WAAWrX,SAASrF,GAAK,CACtDod,OAAQ,EACR/Z,IAAKgC,SAAS0V,EAAO1X,KACrB6X,GAAIH,EAAOG,GACXe,cAAelB,EAAOkB,cACtB/K,gBAAiB6J,EAAO7J,gBACxBC,gBAAiB4J,EAAO5J,gBACxBC,QAAS2J,EAAO3J,QAChBkL,eAAgBvB,EAAOvF,aAAc,GAAGxV,GACxCuD,WAAYwX,EAAO9C,SAAU,GAAGjY,KAC7Buc,GAAmB3E,UAAU,CAChCwF,OAAQ,EACR/Z,IAAKgC,SAAS0V,EAAO1X,KACrB6X,GAAIH,EAAOG,GACXe,cAAelB,EAAOkB,cACtB/K,gBAAiB6J,EAAO7J,gBACxBC,gBAAiB4J,EAAO5J,gBACxBC,QAAS2J,EAAO3J,QAChBkL,eAAgBvB,EAAOvF,aAAc,GAAGxV,GACxCuD,WAAYwX,EAAO9C,SAAU,GAAGjY,QA8BpC,OA1BAqI,qBAAU,WACLwI,GAAagL,EAAWvU,QACzBS,EAAS,WAAY8T,EAAW1Y,QAAO,SAAAkZ,GAAC,OAAEA,EAAErc,IAAM6Q,EAAUtN,iBAE7D,CAACsN,EAAWgL,IAEfxT,qBAAU,WACLwI,GAAakL,EAAezU,QAC7BS,EAAS,eAAgBgU,EAAe5Y,QAAO,SAAAkZ,GAAC,aAAEA,EAAErc,KAAF,UAAQ6Q,EAAUD,cAAlB,aAAQ,EAAkB0L,sBAE7E,CAACzL,EAAWkL,IAEf1T,qBAAU,WACLwS,EAAQhd,OACNsf,GACD1C,EAAQH,QAAQG,EAAQE,SAAS1K,SAAU,CACzCY,UAAWgK,EAAQhd,KAAKA,OAE1Bsf,KAGA1C,EAAQH,QAAR,+BAAwCO,EAAQhd,KAAKA,KAAKmC,QAG7D,CAAC6a,EAAQhd,OAEL,mCACL,eAACkH,EAAA,EAAD,CAAM/E,GAAG,kBACPsI,SAAUV,GAAa,SAACmT,GACtBF,EAAQ7T,OAAO+T,MAFnB,UAKqB,SAAlBF,EAAQG,QAAuC,WAAlBH,EAAQG,OAAuB,cAACxS,EAAA,EAAD,CAAOvC,QAAS4U,EAAQ1U,QAAU,SAAW,UAA7C,SAC1D0U,EAAQ1U,SAAU,UAAC0U,EAAQzU,MAAqBC,gBAA9B,mBAAwCxI,YAAxC,eAA8CyI,UAAYuU,EAAQzU,MAAqBE,QAAU,aAC3G,KACX,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAG/N,GAAI,EAAhC,UACE,cAACP,EAAA,EAAK4D,MAAN,kBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOzF,KAC1BwE,EAAS,MAAO,CAClBL,QAASuB,EAAc,WAG3B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOoS,UAAxD,aAAuC,EAAqB5U,aAE9D,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAG/N,GAAI,EAAhC,UACE,cAACP,EAAA,EAAK4D,MAAN,kCACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoS,IAC1BrT,EAAS,KAAM,CACjBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOoS,UAAxD,aAAuC,EAAqB5U,aAE9D,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAG/N,GAAI,EAAhC,UACE,cAACP,EAAA,EAAK4D,MAAN,0BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOmT,eAC1BpU,EAAS,gBAAiB,CAC5BR,UAAW0B,EAAgB,OAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOmT,qBAAxD,aAAuC,EAAgC3V,gBAG3E,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOoI,iBAC1BrJ,EAAS,kBAAmB,MAWlC,cAAC9C,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOoI,uBAAxD,aAAuC,EAAkC5K,aAE3E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOqI,iBAC1BtJ,EAAS,kBAAmB,CAS9BV,SAAU4B,IACV1B,UAAW0B,EAAgB,QAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOqI,uBAAxD,aAAuC,EAAkC7K,aAE3E,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,sBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOsI,SAC1BvJ,EAAS,UAAW,CACtBV,SAAU4B,IACV1B,UAAW0B,EAAgB,QAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOsI,eAAxD,aAAuC,EAA0B9K,gBAGrE,eAACvB,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,2BACA,cAAC,IAAD,CACE0J,KAAK,eACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAG,wCACH6N,OAAQ,SAACkO,GAAD,OAAkBC,EAAkBD,IAC5Ctc,UAAWwI,EAAUa,OAAO0M,aAAe,aAAe,GAC1D3M,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,mBAKjE,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,uBACA,cAAC,IAAD,CACE0J,KAAK,WACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAD,EAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,qCACL,cAAC,GAAD,CACE7W,GAAG,oCACH6N,OAAQ,SAACgO,GAAD,OAAcC,EAAcD,IACpCpc,UAAWoX,EAAWzQ,MAAQ,aAAe,GAC7CyC,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,sBAMnE,eAACzD,EAAA,EAAD,CACEoG,KAAK,SACLsQ,KAAK,kBAFP,UAIGsB,EAAQ3R,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAJjE,mBC9NO0Z,GAAe,SAACjd,GAAgB,IAAD,UACnCN,EAAMwa,cAANxa,GACDya,EAAUC,cAF0B,EAKA/W,mBAAyB,IALzB,mBAKpB6Z,GALoB,aAMN7Z,mBAAsB,IANhB,mBAMvB8Z,GANuB,aAON9Z,mBAAsB,IAPhB,mBAOvB+Z,GAPuB,aAQN/Z,oBAAS,GARH,mBAQnCga,EARmC,KAQvBC,EARuB,OActCnW,YAAgB,CAClBE,cAAe,CACbkW,aAAc,GACdC,UAAW,GACXC,UAAW,GACXC,UAAW,EAAE,UAAW,aAT1BnW,EAVwC,EAUxCA,SACAsK,EAXwC,EAWxCA,QACArK,EAZwC,EAYxCA,MACAG,EAbwC,EAaxCA,UAUIuU,EAAStY,YAAS,CAAC,kBAAmBlE,IAAK,WAC/C,OAAOuc,GAAmBC,OAAOnX,SAASrF,MACzC,CACDmI,UAAS,UAACsS,EAAQE,SAAS3Z,aAAlB,aAAC,EAAwB6P,WAClCjD,gBAAgB,EAChBvJ,oBAAoB,EACpBD,sBAAsB,IAGlByW,EAAUpW,aAAY,SAAC8D,GAC3B,IAAI6C,EAAKC,EACT,GAAGH,MAAMC,QAAQ5C,EAAOyV,WAAW,CAAC,IAAD,cACpBzV,EAAOyV,UADa,GAChC5S,EADgC,KAC3BC,EAD2B,SAG/B,CAAC,IAAD,EACY9C,EAAOyV,UAAnB5S,EADA,EACAA,IAAKC,EADL,EACKA,IAET,OAAOkR,GAAmB0B,6BAA6B,CACrDC,YAAa3V,EAAOwV,UAAU,GAAG/d,GACjCme,UAAW5V,EAAO4V,UAClBH,UAAW,CACTI,QAAShT,EACTiT,SAAUhT,GAEZiT,UAAW/V,EAAO+V,UAClBC,UAAWhW,EAAOgW,gBAAajK,QAIjB,UAAAmG,EAAQE,SAAS3Z,aAAjB,eAAwB6P,YAAxB,UAAqC2L,EAAO3e,YAA5C,OAAqC,EAAaA,KAEpEwK,qBAAU,WACLmU,EAAO3e,OACLyC,EAAM6c,KACP7c,EAAM6c,OAGN1C,EAAQH,QAAR,+BAAwCta,GAAMwc,EAAO3e,KAAKA,KAAKmC,QAGlE,CAACwc,EAAO3e,OAEXwK,qBAAU,WACLmU,EAAOtT,WACR0U,GAAc,KAEf,CAACpB,EAAOtT,YAmBX,OAAO,eAACnE,EAAA,EAAD,WAjBc,WAAM,IAAD,MACxB,OAAO,eAAC+J,EAAA,EAAD,CAAOC,UAAQ,EAACH,KAAM+O,EAAY3O,OAAQ,WAC5CwN,EAAOrW,SACRyX,GAAc,IAFX,UAKL,cAAC9O,EAAA,EAAMM,OAAP,uBAGA,cAACN,EAAA,EAAMO,KAAP,UACGmN,EAAOtT,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,WAAsB,cAACsC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UAC1D,UAAAuW,EAAOpW,aAAP,mBAAcC,gBAAd,eAAwBC,WAAxB,UAAmCkW,EAAOpW,aAA1C,aAAmC,EAAcE,gBAOvDkY,GACD,oBAAI9e,MAAO,CAACkF,SAAU,WAAtB,wCACA,eAACG,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,2BACA,cAAC,IAAD,CACE0J,KAAK,eACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,cAAC,GAAD,CACL7W,GAAG,8BACH6N,OAAQ,SAAC4Q,GACPjB,EAAiBiB,IAEnB5V,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,eAKtB,eAACtS,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,wBACA,cAAC,IAAD,CACE0J,KAAK,YACLF,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,cAAC,GAAD,CACL7W,GAAG,2BACH6N,OAAQ,SAAC6Q,GACPjB,EAAciB,IAEhBtJ,SAAU,SAAC0I,GACT,IAAMD,EAAe/V,EAAM,gBAC3B,QAAS+V,EAAavW,QAAUwW,EAAUa,gBAAkBd,EAAa,GAAG7d,IAE9E6I,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,eAKtB,eAACtS,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,wBACA,cAAC,IAAD,CACE0J,KAAK,YACLF,QAASA,EACTwE,OAAQ,YAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,WACf,OAAO,cAAC,GAAD,CACL7W,GAAG,2BACH6N,OAAQ,SAAC+Q,GACPlB,EAAckB,IAEhBxJ,SAAU,SAAC2I,GACT,IAAMD,EAAYhW,EAAM,aACxB,QAASgW,EAAUxW,QAAUyW,EAAUc,aAAef,EAAU,GAAG9d,IAErE6I,YAAagO,EAAWzQ,MACxBoR,SAAUZ,EAAM1R,MAChB3D,SAAUqV,EAAMrV,SAChB8V,OAAQT,EAAMS,kBAMxB,cAACtS,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAhB,UACE,cAACC,EAAA,EAAK4D,MAAN,wBACA,cAAC5D,EAAA,EAAKC,QAAN,CAAcC,GAAG,kBAGrB,cAACF,EAAA,EAAKF,IAAN,UACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAhB,UACE,cAACC,EAAA,EAAK4D,MAAN,2BACA,cAAC,IAAD,CACE0J,KAAK,YACLF,QAASA,EACTwE,OAAQ,YAAwB,IAAtBC,EAAqB,EAArBA,MAAqB,EAAdC,WAEf,OADA7Y,QAAQC,IAAI,WAAY2Y,GACjB,cAAC,GAAD,CACL1K,OAAQ0K,EAAM1R,OAAS,EAAE,UAAW,UACpCA,MAAO0R,EAAM1R,MACb3D,SAAUqV,EAAMrV,mBAM1B,eAACwD,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOwV,WAC1BzW,EAAS,YAAa,CACxBV,SAAU4B,IACVvB,QAASuB,EAAc,eAG3B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,oBAAwBf,EAAUa,OAAOwV,iBAAzC,aAAwB,EAA4BhY,aAEtD,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOwV,WAC1BzW,EAAS,YAAa,CACxBL,QAASuB,EAAc,eAG3B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,oBAAwBf,EAAUa,OAAOwV,iBAAzC,aAAwB,EAA4BhY,gBAGxD,eAACzD,EAAA,EAAD,WACGgY,EAAQ3R,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAC/D,sBAAMpE,UAAU,oBAAhB,wBAEDa,EAAM6c,KAAO,cAACta,EAAA,EAAD,CAAQoD,QAAQ,OAAO7D,QAAS,WAC5C9B,EAAM6c,MAAQ7c,EAAM6c,QADR,oBAKF,SCjOH2B,GAAiC,WAAK,IAAD,EAM5C9M,cAHFG,GAH8C,EAE9CtK,SAF8C,EAG9CsK,SAEArK,GAL8C,EAI9CmK,QAJ8C,EAK9CnK,OAL8C,EAW5CuO,YAAc,CAChBhE,KAAM,eACNF,YALAoE,EAR8C,EAQ9CA,OACAC,EAT8C,EAS9CA,OACA/L,EAV8C,EAU9CA,OAMF,OAAO,gCACL,oBAAI/K,MAAO,CAACkF,SAAU,WAAtB,kCACC2R,EAAOrW,KAAI,SAAC0W,EAAMpQ,GACjB,OAAO,cAACzB,EAAA,EAAKF,IAAN,CAAyBpF,UAAU,qBAAnC,SACL,cAACsF,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKQ,GAAI,GAAzB,SAII,cAAC,IAAD,CACE+M,KAAI,uBAAkB7L,EAAlB,eACJ2L,QAASA,EACTpJ,MAAO,CACL5B,SAAU4B,KAEZ4N,OAAQ,YAA4B,IAAD,EAAxBC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,WAChB,OAAO,mCACP,eAAC9R,EAAA,EAAKF,IAAN,WACE,eAACC,EAAA,EAAD,WACE,cAAC,GAAD,CACE9E,GAAE,0CAAqCwG,GACvC/G,UAAaoX,EAAWzQ,MAAQ,aAAe,GAC/CyC,YAAagO,EAAWzQ,MACxBgP,SAAU,SAAClH,GAET,OADqBpG,EAAM,gBACNmP,MAAK,SAAA8H,GAAC,aAAE,UAAAA,EAAE7Q,kBAAF,eAAclO,KAAMkO,EAAWlO,OAE9DwX,SAAUZ,EAAM1R,MAAQ,CAAC0R,EAAM1R,OAAO,GACtC3D,SAAU,SAAC2M,GACT0I,EAAMrV,SAAS2M,EAAW5G,OAAS4G,EAAW,GAAK,IAErDmJ,OAAQT,EAAMS,SAEhB,cAACtS,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuC4N,EAAWzQ,aAAlD,aAAuC,EAAkBE,aAE3D,cAACxB,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACI,cAACzC,EAAA,EAAD,CAAQoD,QAAQ,SAAS7D,QAAS,WAChCqI,EAAOjE,IADT,iCAhCMoQ,EAAM5W,OAgD9B,cAAC+E,EAAA,EAAKF,IAAN,CAAUpF,UAAU,OAApB,SACE,cAACqF,EAAA,EAAD,CAAKrF,UAAU,UAAU6F,GAAI,OAA7B,SACE,cAACzC,EAAA,EAAD,CACET,QAAS,WACPoU,EAAO,KAFX,6BCzEKwI,GAAe,SAAC1e,GAA4B,IAAD,IAC/C2e,EAAezE,cAAfyE,YAGDxE,EAAUC,cAGVwE,EAAUzX,YAAgB,CAC9BE,cAAe,CACbqP,aAAc,CAAC,OAMb6D,EAAUpW,aAAY,SAAC8D,GAC3B,OAAOsU,GAA2BxX,SAAS4Z,IAAgBxE,EAAQE,SAAS3Z,MAAO6P,UAAW7Q,GAAI,CAChGmf,OAAQ5W,EAAO4W,OACfC,IAAK7W,EAAO6W,IACZC,eAAgB9W,EAAOyO,aAAa9W,KAAI,SAAA6e,GAAC,OAAEA,EAAE7Q,WAAWlO,WAK1D4H,EAIEsX,EAJFtX,aACAC,EAGEqX,EAHFrX,SACAI,EAEEiX,EAFFjX,UAEEiX,EADF/M,QAcF,OAXA9J,qBAAU,WACLwS,EAAQhd,OACNyC,EAAM6c,KACP7c,EAAM6c,OAGN1C,EAAQH,QAAR,+BAAwCjV,SAAS4Z,IAAgBxE,EAAQE,SAAS3Z,MAAO6P,UAAW7Q,GAApG,kBAGH,CAAC6a,EAAQhd,OAEL,cAAC,IAAD,2BAAkBqhB,GAAlB,aACL,eAACna,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAACW,GAC5BvK,QAAQC,IAAIsK,GACZsS,EAAQ7T,OAAOuB,MAFjB,UAIE,oBAAI7I,MAAO,CAACkF,SAAU,WAAtB,sBACA,eAACG,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,OACjBJ,YAAaZ,EAAUa,OAAOqW,QAC1BtX,EAAS,SAAU,CACrBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOqW,cAAxD,aAAuC,EAAyB7Y,aAElE,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAzB,UACE,cAAC3D,EAAA,EAAK4D,MAAN,kBACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,OACjBJ,YAAaZ,EAAUa,OAAOsW,KAC1BvX,EAAS,MAAO,CAClBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuChB,EAAUa,OAAOsW,WAAxD,aAAuC,EAAsB9Y,gBAmDjE,cAACvB,EAAA,EAAKF,IAAN,UACE,cAACC,EAAA,EAAD,UACE,cAAC,GAAD,QAGJ,cAACC,EAAA,EAAKF,IAAN,UACE,cAACC,EAAA,EAAD,UACE,eAACjC,EAAA,EAAD,CAAQoG,KAAK,SAAb,UACG4R,EAAQ3R,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAS,KAC/D,sBAAMpE,UAAU,oBAAhB,mCCpIC6f,GAAgB,WAAK,IAAD,QACP3b,mBAAS,GADF,mBACxB+O,EADwB,KAClB6M,EADkB,OAEP5b,mBAAS,GAFF,mBAExB6b,EAFwB,KAElBC,EAFkB,OAGK9b,oBAAS,GAHd,mBAGxBga,EAHwB,KAGZC,EAHY,KAIxB5d,EAAMwa,cAANxa,GAGDya,EAAUC,cAKV8B,EAAStY,YAAS,CAAC,kBAAkBlE,IAAK,WAC9C,OAAOuc,GAAmBC,OAAOnX,SAASrF,MACzC,CACDmI,UAAWnI,KAAM,UAACya,EAAQE,SAAS3Z,aAAlB,aAAC,EAAwB6P,WAC1CxM,oBAAoB,EACpBD,sBAAsB,IAGlByM,GAAY,UAAA2L,EAAO3e,YAAP,eAAaA,QAAb,UAAqB4c,EAAQE,SAAS3Z,aAAtC,aAAqB,EAAwB6P,WAE/DxI,qBAAU,WACLwI,GACD0O,EAAQ1O,EAAUuM,UAEnB,CAACvM,IAEJxI,qBAAU,WACLmU,EAAOtT,WACR0U,GAAc,KAEf,CAACpB,EAAOtT,YAmBXlL,QAAQC,IAAIyU,EAAM8M,GAwBlB,OAAW,GAARA,EACM,qCACL,oBAAI9f,MAAO,CAACkF,SAAU,QAAtB,SAAgC5E,EAAK,6BAA+B,0BACpE,eAAC+E,EAAA,EAAK0D,MAAN,CAAYxD,GAAIJ,IAAhB,UACE,cAACE,EAAA,EAAK4D,MAAN,CAAYuQ,QAAM,EAACxQ,GAAI,OAAvB,+BACA,eAAC5D,EAAA,EAAD,CAAKrF,UAAU,SAAS6F,GAAI,OAA5B,UACE,cAACP,EAAA,EAAKqU,MAAN,CAAYxQ,WAAY5I,EAAIqZ,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,YAASpU,MAAO,EAAGwa,QAAiB,GAARhN,EAAWnR,SAAU,SAAC4D,GACnGA,EAAEC,OAAOsa,UAAY1f,GACtBuf,EAAQ,MAEZ,cAACxa,EAAA,EAAKqU,MAAN,CAAYC,QAAM,EAACpQ,KAAK,QAAQqQ,MAAM,UAAUpU,MAAO,EAAGwa,QAAiB,GAARhN,EAAWnR,SAAU,SAAC4D,GACpFA,EAAEC,OAAOsa,UAAY1f,GACtBuf,EAAQ,YArDC,WAAO,IAAD,MACzB,OAAO,eAACzQ,EAAA,EAAD,CAAOC,UAAQ,EAACH,KAAM+O,EAAY3O,OAAQ,WAC5CwN,EAAOrW,SACRyX,GAAc,IAFX,UAKL,cAAC9O,EAAA,EAAMM,OAAP,uBAGA,cAACN,EAAA,EAAMO,KAAP,UACGmN,EAAOtT,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,WAAsB,cAACsC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UAC1D,UAAAuW,EAAOpW,aAAP,mBAAcC,gBAAd,eAAwBC,WAAxB,UAAmCkW,EAAOpW,aAA1C,aAAmC,EAAcE,gBA8CrDkY,GArCQ,GAAR9L,EACM,cAAC,GAAD,CAAqB7B,UAAWA,EACrCsM,KAAM,WACAnd,GACFyf,EAAQ,MAKL,GAAR/M,EACM,cAAC,GAAD,CAAsB7B,UAAWA,EACtCsM,KAAM,WACAnd,GACFyf,EAAQ,MAKT,QAuBE,GAARD,EACM,cAAC,GAAD,CAAcrC,KAAM,WACzBsC,EAAQ,MAGD,GAARD,EACM,cAAC,GAAD,CAAcrC,KAAM,WACzB1C,EAAQH,QAAR,+BAAwCG,EAAQE,SAAS3Z,MAAO6P,UAAU7Q,QAGvE,MCrGI2f,GAAa,WAAK,IAAD,EACNze,cAARC,GADc,EACpB5B,KADoB,EACd4B,KAEd,OAAO,eAAC,EAAD,CAAeP,QAAS,CAC7BX,MAAO,CACL,CACED,GAAI,aACJT,KAAK,GAAD,OAAK4B,EAAL,eACJpB,MAAO,gBACPH,KAAM,cAAC,GAAD,KAER,CACEI,GAAI,mBACJT,KAAK,GAAD,OAAK4B,EAAL,qBACJpB,MAAO,sBACPH,KAAM,cAAC,IAAD,KAER,CACEI,GAAI,wBACJT,KAAK,GAAD,OAAK4B,EAAL,YACJpB,MAAO,UACPH,KAAM,cAAC,IAAD,KAER,CACEI,GAAI,4BACJT,KAAK,GAAD,OAAK4B,EAAL,gBACJpB,MAAO,cACPH,KAAM,cAAC,IAAD,KAER,CACEI,GAAI,gBAEJD,MAAO,mBACPH,KAAM,cAAC,IAAD,IACNK,MAAO,CACL,CACED,GAAI,+BACJT,KAAK,GAAD,OAAK4B,EAAL,iCACJpB,MAAO,iBACPH,KAAM,cAAC,IAAD,KAER,CACEI,GAAI,6BACJT,KAAK,GAAD,OAAK4B,EAAL,+BACJpB,MAAO,uBACPH,KAAM,cAAC,IAAD,SA1CT,UAgDL,eAAC,IAAD,WACE,cAAC,IAAD,CAAOggB,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,uBAAjB,SACE,cAAC0e,EAAD,MAEF,cAAC,IAAD,CAAOtgB,KAAI,UAAK4B,EAAL,eAAX,SACE,cAAC2e,EAAD,MAEF,cAAC,IAAD,CAAOF,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,qBAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,+BAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,YAAjB,SACE,cAAC4e,GAAD,MAEF,cAAC,IAAD,CAAOH,OAAK,EAACrgB,KAAM,CAAC,GAAD,OAAI4B,EAAJ,gCAAgCA,EAAhC,wBAAnB,SACE,cAAC6e,GAAD,MAEF,cAAC,IAAD,CAAOJ,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,gBAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,0BAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,6BAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,iDAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,iCAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5B,KAAI,UAAK4B,EAAL,+BAAX,SACE,cAAC,GAAD,SAOJ,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAM,CAAC,GAAD,OAAI4B,EAAJ,mDAAmDA,EAAnD,2CAAnB,SACI,cAAC,GAAD,U,uCCxGK8e,GACF,SAAC/c,EAGPC,GAKD,OAAOlE,IAAUC,IAGd,SAAU,CACXR,OAAQ,CACNwE,OACAC,aAfK8c,GAmBL,SAACC,GACL,OAAOjhB,IAAUC,IAAV,iBAA8BghB,KApB5BD,GAsBD,YAKH,IALKE,EAKN,EALMA,SAAUC,EAKhB,EALgBA,SAAsBC,EAKtC,EAL0BC,WAAkCC,EAK5D,EALmDC,QAMvD,OAAOvhB,IAAUwE,KAAK,SAAU,CAC9B0c,WAAUC,WAAUC,cAAaE,cA7B1BN,GAgCH,YAID,IAJGjgB,EAIJ,EAJIA,GAAImgB,EAIR,EAJQA,SAAmBI,EAI3B,EAJkBC,QAKtB,OAAOvhB,IAAUwQ,IAAV,iBAAwBzP,GAAM,CACnCmgB,WAAUI,cAKHE,GACD,WACR,OAAOxhB,IAAUC,IAAY,WAFpBuhB,GAIJ,SAACC,GACN,OAAOzhB,IAAUC,IAAV,iBAA8BwhB,KAL5BD,GAOD,SAAC5iB,GACT,OAAOoB,IAAUwE,KAAW,QAAS5F,IAR5B4iB,GAUH,SAAC5iB,GACP,OAAOoB,IAAUwQ,IAAV,gBAA6B5R,EAAKmC,IAAMnC,IAItC8iB,GACD,WACR,OAAO1hB,IAAUC,IAAc,iB,oBChDpB,eAAwD,IAAtDmC,EAAqD,EAArDA,QAASO,EAA4C,EAA5CA,QAASC,EAAmC,EAAnCA,QAASP,EAA0B,EAA1BA,MAAUhB,EAAgB,uDACpEtC,QAAQC,IAAIoD,EAASO,EAASC,EAASP,GAgCvC,IAjCoE,MAEzC0O,cAAVpE,GAFmD,EAE7DqE,SAF6D,EAEnDrE,QA8BX9J,GA7BW8e,cAEItW,mBAAQ,kBAAI3L,KAAGkiB,MAAMjV,EAAOkV,OAAO,MAAK,CAAClV,IACvD1I,KA0BW,IAhCkD,WAiC5DnB,GACHV,GAAWU,EACZD,EAAUE,KAAK,cAACC,EAAA,EAAWC,KAAZ,CAAyBC,QAAQ,EAAjC,SAAwCJ,GAAlBA,IAGrCD,EAAUE,KAAK,cAACC,EAAA,EAAWC,KAAZ,CAAyBE,QAAS,kBAAI9B,EAAMygB,YAAYhf,IAAxD,SAA6DA,GAAvCA,KALjCA,EAAIH,EAASG,GAAKF,EAASE,IAAK,EAAhCA,GAQR,OAAO,eAACE,EAAA,EAAD,WACJL,EAAU,EAAI,cAACK,EAAA,EAAWI,MAAZ,CACbD,QAAS9B,EAAM0gB,eACZ,KACJ3f,EAAU,EAAI,cAACY,EAAA,EAAWK,KAAZ,CACbF,QAAS9B,EAAM2gB,cACZ,KAEJnf,EAEAT,EAAUC,EAAQ,cAACW,EAAA,EAAWM,KAAZ,CACjBH,QAAS9B,EAAM4gB,cACZ,KACJrf,EAAUP,EAAQ,cAACW,EAAA,EAAWO,KAAZ,CACjBJ,QAAS9B,EAAM6gB,cACZ,SClEM,YAAC7gB,GAAgB,IAAD,EACDqD,mBAAS,CACnCwc,SAAU,GACVhe,OAAQ,KAHmB,mBACtBoU,EADsB,KACd6K,EADc,KAM7B,OAAO,cAACrc,EAAA,EAAD,2BAAUzE,GAAV,IAAiBgI,SAAU,SAACnD,GACjCA,EAAE4H,iBACFzM,EAAMgI,UAAYhI,EAAMgI,SAASnD,IAF5B,SAIL,eAACJ,EAAA,EAAKF,IAAN,WACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAK4D,MAAN,CAAY2K,QAAQ,kBAAkBmF,QAAM,EAA5C,qBAGA,cAAC1T,EAAA,EAAKC,QAAN,CACEvF,UAAU,OACVO,GAAG,kBACHkF,MAAOqR,EAAO4J,SACd5e,SAAU,SAAC4D,GACT,IAAMD,EAAQC,EAAEC,OAAOF,MACvBkc,GAAU,SAAA7K,GAAM,kCACXA,GADW,IAEd4J,SAAUjb,QAGdmc,YAAY,eAGhB,eAACvc,EAAA,EAAD,WACE,cAACC,EAAA,EAAK4D,MAAN,CAAY2K,QAAQ,gBAAgBmF,QAAM,EAA1C,oBAGA,eAAC1T,EAAA,EAAKC,QAAN,CACEC,GAAG,SACHxF,UAAU,OACVO,GAAG,gBACHkF,MAAOqR,EAAOpU,OACdZ,SAAU,SAAC4D,GACT,IAAMD,EAAQC,EAAEC,OAAOF,MACvBkc,GAAU,SAAA7K,GAAM,kCACXA,GADW,IAEdpU,OAAQ+C,QATd,UAaE,wBAAQA,MAAM,GAAd,6BACA,wBAAQA,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,4BAGJ,cAACJ,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,cAACzC,EAAA,EAAD,CAAQoG,KAAK,SAAb,8BC7CO,cACI2X,cAAjB,IADiB,EAEkBjd,mBAAS,CAE1CtC,QAAS,EACTwC,KAAM,KALS,0BAETxC,EAFS,EAETA,QAASwC,EAFA,EAEAA,KAAOC,EAFP,OAOaH,mBAAS,CACrCwc,cAAU7L,EACVnS,YAAQmS,IATO,mBAOTnR,EAPS,KAODY,EAPC,OAW6BJ,oBAAS,GAXtC,mBAWV2d,EAXU,KAWUC,EAXV,OAYwBvR,cAZxB,KAYTpE,OAZS,EAYD5K,MACME,eAAT3B,GAbI,EAaT4B,IAbS,EAaJ5B,MAbI,EAuBb2E,YAAS,CAAC,aAAc7C,EAASwC,EAAMV,GAA/B,wBAAwC,6BAAAqe,EAAA,sEAC3BvB,GAAc,CACnC5e,QAASA,EACTwC,KAAMA,GACLV,GAJ+C,cAC5CkD,EAD4C,yBAK3CA,GAL2C,2CAMjD,CACDlC,kBAAkB,EAClBC,sBAAsB,IAbtB0B,EAlBe,EAkBfA,WACAK,EAnBe,EAmBfA,QACMsb,EApBS,EAoBf5jB,KACO6jB,EArBQ,EAqBftb,MACAzB,EAtBe,EAsBfA,QAWIgd,EAAK,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAoB5jB,KAAK0I,QACjCjF,GAA0B,OAAlBmgB,QAAkB,IAAlBA,OAAA,EAAAA,EAAoB5jB,KAAK0G,KAAKjD,QAAS,EA0ErD,OArCA+G,qBAAU,WACRuZ,SAAS7hB,MAAQ,aAChB,IAmCI,sBAAKN,UAAU,uEAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,QAAtB,sBACA,sBAAKnF,UAAU,qBAAf,UACE,cAACoF,EAAA,EAAD,CAAKpF,UAAU,sBAAf,SACE,eAACqF,EAAA,EAAD,CAAKrF,UAAU,wCAAf,UACE,2CACA,eAACsF,EAAA,EAAKC,QAAN,CAAcvF,UAAU,OAAOwF,GAAG,SAASC,MAAOrB,EAAMtC,SAAU,SAAC4D,GACjE,IAAMD,EAAQC,EAAEC,OAAOF,MACvBpB,GAAQ,SAACZ,GAAD,mBAAC,eACJA,GADG,IAENW,KAAMwB,SAASH,SAJnB,UAOE,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,GAAf,gBACA,wBAAQA,MAAO,IAAf,oBAEF,8CAGJ,eAACL,EAAA,EAAD,CAAKpF,UAAU,sBAAf,UACE,cAACqF,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAO2C,QAAS,WAChCuC,KADF,SAEG,cAAC,IAAD,QAEL,cAACG,EAAA,EAAD,CAAKrF,UAAW,OAAQ6F,GAAG,OAA3B,SACE,cAACzC,EAAA,EAAD,CAAQpD,UAAU,OAAO2C,QAAS,WAChCmf,GAAgB,SAAAhc,GAAO,OAAGA,MAD5B,SAEG,cAAC,IAAD,QAEL,cAACT,EAAA,EAAD,CAAKQ,GAAG,OAAR,SACE,cAACzC,EAAA,EAAD,CAAQoC,GAAIO,IACVhG,GAAE,UAAKD,EAAL,cACFE,UAAU,OAAO2C,QAAS,aAF5B,SAIG,cAAC,IAAD,cAIT,cAACyf,GAAD,CACEpiB,UAAW,QAAU6hB,EAAqB,GAAK,WAC/C5b,QAAS,SAACvC,GACRoe,GAAgB,GAChBxd,EAAUZ,MAEd,eAACwC,EAAA,EAAD,CAAOC,YAAU,EAACnG,UAAU,oBAA5B,UACE,gCACE,+BACE,oBAAIC,MAAO,CAACmG,MAAO,GAAnB,eACA,mDACA,oBAAInG,MAAO,CAACmG,MAAO,QAAnB,oBACA,oBAAInG,MAAO,CAACmG,MAAO,UAGvB,gCA1FJ,WAAsB,IAAD,IACnB,OAAOC,EACL,6BACE,qBAAIrG,UAAU,uBAAuBsG,QAAS,IAA9C,UACE,cAACC,EAAA,EAAD,CAASvG,UAAU,OAAOwG,QAAQ,UAAUC,UAAU,SAASrC,KAAK,OADtE,gBAKCsC,EACH,6BACE,oBAAI1G,UAAU,uBAAuBsG,QAAS,IAA9C,UACG,UAAC2b,EAA+Brb,gBAAhC,mBAA0CxI,YAA1C,eAAgDyI,UAAYob,EAA+Bpb,YAHtF,OAOVqb,QAPU,IAOVA,OAPU,EAOVA,EAAOzhB,KAAI,SAAC4hB,EAAG/f,GACb,OAAO,+BACL,oBAAIwP,MAAM,MAAV,SACGxP,EAAE,IAEL,6BAAK+f,EAAE3B,WACP,oBAAI1gB,UAAWqiB,EAAE3f,OAAS,aAAe,YAAzC,SAAsD,sBAAM1C,UAAU,aAAhB,SAA8BqiB,EAAE3f,OAAS,SAAW,eAC1G,6BACE,qBAAK1C,UAAU,SAAf,SACE,cAACoD,EAAA,EAAD,CAAQpD,UAAU,WAAWwG,QAAQ,OAArC,SAA6C,cAAC,KAAD,YARnC6b,EAAE9hB,OA2EjBiH,QAGL,qBAAKxH,UAAU,4BAAf,SACE,cAACsiB,GAAD,CACE1gB,QAASA,EACTO,QAASH,KAAKugB,IAAI,EAAG3gB,EAAU,GAC/BQ,QAASJ,KAAKC,IAAID,KAAKwgB,OAAO3gB,EAAMuC,GAAMA,GAAM,EAAGxC,EAAU,GAC7DC,OAASA,EAAMuC,GAAMA,EAAM,EAC3Bmd,aAAc,kBAAIld,GAAQ,SAACZ,GAAD,mBAAC,eAAYA,GAAb,IAAmB7B,QAAS,QACtD4f,YAAa,WACTjjB,QAAQC,IAAI,YACZ6F,GAAQ,SAACZ,GAAD,mBAAC,eAAYA,GAAb,IAAmB7B,QAAS6B,EAAK7B,QAAU,QAEvD0f,YAAa,SAAC1f,GAAD,OAAWyC,GAAQ,SAACZ,GAAD,mBAAC,eAAYA,GAAb,IAAmB7B,gBACnD6f,YAAa,kBAAIpd,GAAQ,SAAAZ,GAAI,kCAAOA,GAAP,IAAa7B,QAAS6B,EAAK7B,QAAU,QAClE8f,YAAa,kBAAIrd,GAAQ,SAAAZ,GAAI,kCAAOA,GAAP,IAAa7B,SAAWC,EAAMuC,GAAMA,EAAM,gB,oBC7LlEqe,GAAY,SAAC,GAA4B,IAA3BC,EAA0B,EAA1BA,MAEzB,OAAO,mCACL,cAACC,GAAA,EAAD,CAAW3iB,UAAU,cAAewG,QAAQ,QAA5C,SAOGkc,EAAMjiB,KAAI,SAAAmiB,GACT,OAAO,cAACD,GAAA,EAAUlgB,KAAX,CAA2BzC,UAAU,4BAA4BoH,KAAI,WAAMwb,EAAEriB,IAAMsiB,QAAM,EAAzF,SAUJD,EAAEhQ,MAVuBgQ,EAAEriB,YCNzBuiB,GAAW,SAAC,GAA8B,IAAD,EAA5B7B,EAA4B,EAA5BA,OAChBzQ,EAAaD,cAAbC,SACFuS,EAAYte,YAAS,CAAC,YAAawc,IAAS,WAChD,OAAOD,GAAYC,KAClB,CACDvY,SAAS,IAIXE,qBAAU,WACRma,EAAU7d,YACT,IAIH,IAMqB,MANf8d,EAAI,UAAGD,EAAU3kB,YAAb,aAAG,EAAgBA,KAE7B,OAAG2kB,EAAU1c,WACJ,cAACE,EAAA,EAAD,CAASE,UAAU,SAASD,QAAQ,UAAUxG,UAAU,mBAG9D+iB,EAAUrc,QACJ,cAACqC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UACJ,UAAAuc,EAAUpc,aAAV,mBAAiBC,gBAAjB,eAA2BC,WAA3B,UAAsCkc,EAAUpc,aAAhD,aAAsC,EAAiBE,WAIrD,qCAEL,sBAAK7G,UAAU,0BAAf,UACE,oBAAIA,UAAU,iCAAiCC,MAAO,CAACkF,SAAU,WAAjE,gBAA8E6d,QAA9E,IAA8EA,OAA9E,EAA8EA,EAAMpQ,OACpF,cAACxP,EAAA,EAAD,CAAQoC,GAAIO,IAAMhG,GAAI,CAClByQ,SAAS,cAAD,OAAgByQ,EAAhB,WACR1f,MAAO,CACL0hB,KAAMzS,IAGVxQ,UAAU,mBACVwG,QAAQ,OAPV,SASE,cAAC,IAAD,SAIJ,cAACN,EAAA,EAAD,UACE,kCACE,+BACE,oBAAI4L,MAAM,MAAM7R,MAAO,CAACmG,MAAO,OAA/B,oBACA,oBAAIpG,UAAU,kBAAd,gBAAiCgjB,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAMpQ,UAEzC,+BACE,oBAAI5S,UAAU,cAAc8R,MAAM,MAAlC,4BACA,oBAAI9R,WAAe,OAAJgjB,QAAI,IAAJA,OAAA,EAAAA,EAAME,aAAc,GAAK,WAAxC,UAAyD,OAAJF,QAAI,IAAJA,OAAA,EAAAA,EAAME,cAAe,0BAE5E,+BACE,oBAAIpR,MAAM,MAAV,kCACA,oCAAKkR,QAAL,IAAKA,OAAL,EAAKA,EAAMG,eAEb,+BACE,oBAAIrR,MAAM,MAAV,uCACA,oCAAKkR,QAAL,IAAKA,OAAL,EAAKA,EAAMI,eAEb,+BACE,oBAAItR,MAAM,MAAV,sBACE,oBAAI9R,UAAS,kBAAgB,OAAJgjB,QAAI,IAAJA,OAAA,EAAAA,EAAMK,YAAYxb,QAAS,GAAK,YAAzD,UACM,OAAJmb,QAAI,IAAJA,OAAA,EAAAA,EAAMK,YAAYxb,QAClB,oBAAI7H,UAAU,iBAAd,gBAAgCgjB,QAAhC,IAAgCA,OAAhC,EAAgCA,EAAMK,YAAY5iB,KAAI,SAAC6e,EAAGhd,GAAJ,OAAQ,oBAAYtC,UAAU,kBAAtB,SAAyCsf,GAAhChd,QACvE,yCCrEC,cAAK,IAAD,IACD2Y,cACmBC,SAA3BoI,EAFS,EAETA,KAAM9S,EAFG,EAEHA,SACR+S,EAAa9e,YAAS,cAAc,WACxC,OAAOuc,OACN,CACDtY,SAAS,EACT/D,sBAAsB,IAGxBiE,qBAAU,WACR2a,EAAWre,YACV,IAEH,IAAMwd,GAAQ,UAAAa,EAAWnlB,YAAX,eAAiBA,OAAQ,GAEvC,OAAO,qCAEP,sBAAK4B,UAAU,0BAAf,UACI,oBAAIA,UAAU,iBAAiBC,MAAO,CAACkF,SAAU,QAAjD,mBACA,cAAC/B,EAAA,EAAD,CAAQoC,GAAIO,IAAMhG,GAAI,CAClByQ,SAAS,mBACTjP,MAAO,CACL0hB,KAAMzS,IAGVxQ,UAAU,kBACVwG,QAAQ,UAPV,SASE,cAAC,IAAD,SAGN,cAACgd,GAAA,EAAI7hB,UAAL,CAAe0W,iBAAkBiL,EAAMG,YAAY,EAAnD,SACE,sBAAKzjB,UAAU,oDAAf,UACE,qBAAKA,UAAU,cAAf,SACGujB,EAAWld,WACV,cAACE,EAAA,EAAD,CAASE,UAAU,SAASD,QAAQ,UAAUxG,UAAU,WACxD,cAAC,GAAD,CAAW0iB,MAAOA,MAEtB,cAACc,GAAA,EAAIE,QAAL,CAAa1jB,UAAU,uCAAwCC,MAAO,CAACI,WAAY,SAAnF,SAEIqiB,EAAMjiB,KAAI,SAAAuiB,GACR,OAAO,cAACQ,GAAA,EAAIG,KAAL,CAAwBlQ,SAAQ,WAAMuP,EAAKziB,IAA3C,SACL,cAAC,GAAD,CAAU0gB,OAAQ+B,EAAKziB,MADHyiB,EAAKziB,kBC1CxB,YAACM,GAAgB,IAAD,EACrBuI,EAAwBvI,EAAxBuI,UACFwa,GAD0B/iB,EAAbiB,SACM2C,YAAS,oBAAoB,WAEpD,OADAlG,QAAQC,IAAI,iBACL0iB,OACN,CACDxY,SAAS,EACT/D,sBAAsB,KAIlB0e,GAAc,UAAAO,EAAiBxlB,YAAjB,eAAuBA,OAAQ,GAOnD,OALAwK,qBAAU,WACRgb,EAAiB1e,YAChB,IACH3G,QAAQC,IAAI,YAAaqC,GAElB,mCACL,cAAC8hB,GAAA,EAAD,CAAW3iB,UAAS,oCAAgCoJ,EAAiB,aAAL,IAAqBnJ,MAAO,CAAC0J,OAAQ,SAArG,SACGia,EAAiBvd,WAAa,WAAaud,EAAiBld,QAAU,QAAU2c,EAAY5iB,KAAI,SAACojB,EAAGvhB,GACnG,OAAO,cAACqgB,GAAA,EAAUlgB,KAAX,CAAwB+C,GAAG,KAChCxF,UAAU,4BACV6iB,QAAM,EAFD,SAIL,cAACvd,EAAA,EAAKqU,MAAN,CAAYnQ,KAAK,WACfyW,QAASpf,EAAMijB,eAAetM,MAAK,SAAA8H,GAAC,OAAEA,GAAGuE,KACzChK,MAAOgK,EACPza,UAAWA,EACXtH,SAAU,SAAC4D,GAMT7E,EAAMiB,UAAYjB,EAAMiB,SAAS+hB,EAAGne,EAAEC,OAAOsa,aAdvB4D,WCdrB,cAAO,IAAD,QACI9I,cAAPxa,GADG,EACXsiB,OADW,EACHtiB,IADG,GAKH0a,cAYZjT,YAAgB,CAClBC,KAAM,SACNC,cAAe,CACb0K,KAAM,GACNsQ,YAAa,GACbG,YAAa,OAZflb,EAViB,EAUjBA,aACAC,EAXiB,EAWjBA,SACAsK,EAZiB,EAYjBA,QACYrJ,EAbK,EAajBb,UAAYa,OACZd,EAdiB,EAcjBA,MACAF,EAfiB,EAejBA,MAWI0a,GA1Ba,EAgBjBgB,UAUgBtf,YAAS,CAAC,YAAalE,IAAK,WAC5C,OAAOygB,GAAYpb,SAASrF,MAC3B,CACDmI,SAAS,KAGLsb,EAAWhf,aAAY,SAAC5G,GAC5B,OAAGmC,EACMygB,GAAa5iB,GAGb4iB,GAAe5iB,MA0B1B,OAtBAG,QAAQC,IAAI,SAAU6J,KACtB9J,QAAQC,IAAI,YAAaukB,GAEzBna,qBAAU,WACRrK,QAAQC,IAAI,cACX,IAEHoK,qBAAU,YACJma,EAAU3kB,MAAQmC,GACpBwiB,EAAU7d,YAEX,CAAC3E,IAEJqI,qBAAU,WAAK,IAAD,MACZrK,QAAQC,IAAI,cAAeukB,EAAU3kB,MACrCmK,EAAM,CACJqK,KAAI,UAAEmQ,EAAU3kB,YAAZ,aAAE,EAAgBA,KAAKwU,KAC3BsQ,YAAW,UAAEH,EAAU3kB,YAAZ,aAAE,EAAgBA,KAAK8kB,YAClCG,YAAW,UAAEN,EAAU3kB,YAAZ,aAAE,EAAgBA,KAAKilB,gBAEnC,CAACN,EAAU3kB,OAEX2kB,EAAU1c,WACJ,cAACE,EAAA,EAAD,CAASE,UAAU,YAE5BlI,QAAQC,IAAI,OAAQukB,EAAU3kB,MAEvB,eAACkH,EAAA,EAAD,CAAM/E,GAAG,YAAYsI,SAAUV,GAAa,SAAC/J,GAC9CG,QAAQC,IAAIJ,GACZ4lB,EAASzc,OAAT,aACEhH,GAAIqF,SAASrF,GACb4iB,eAAWtO,EACXuO,eAAWvO,GACRzW,OANJ,UASD,eAACkH,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,qBACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,OAAOxJ,UAAU,kBAClCoJ,YAAaC,EAAOuJ,MAChBxK,EAAS,OAAQ,CACnBV,SAAU4B,IACV1B,UAAW0B,EAAgB,QAG/B,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAOuJ,YAA9C,aAAuC,EAAa/L,aAEtD,eAACvB,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,6BACA,cAAC5D,EAAA,EAAKC,QAAN,CAAcC,GAAG,WACf4D,YAAaC,EAAO6Z,YACpBtQ,KAAK,gBAKL,cAACtN,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAO6Z,mBAA9C,aAAuC,EAAoBrc,aAE/D,eAACvB,EAAA,EAAK0D,MAAN,WACI,cAAC1D,EAAA,EAAK4D,MAAN,uBACA,cAAC,IAAD,CACE0J,KAAK,cACLF,QAASA,EACTpJ,MAAO,CACLyK,SAAU,CACRkQ,SAAU,SAACxe,GAAD,OAASA,EAAMoC,OAAO,GAAK,+BAGzCqP,OAAQ,SAACrW,GACP,OAAO,cAACqjB,GAAD,CACLJ,eAAgBzb,EAAM,gBAAgB,GACtCe,YAAaC,EAAOga,YAAavhB,SAAU,SAACqiB,EAAYlE,UAS9D,cAAC3a,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAwCH,EAAOga,mBAA/C,aAAuC,EAA8Cxc,aAEzF,cAACzD,EAAA,EAAD,CAAQoG,KAAK,SAAb,0BCxHO,YAAC3I,GAEX,IAAD,EAMEmH,YAAgB,CAElBE,cAAe,CACbkc,IAAK,GACLC,cAAe,GACfC,YAAa,GACb1R,KAAM,GACN2R,WAAY,GACZC,SAAU,GACVC,OAAQ,GACRC,YAAa,GACbC,YAAa,MAffxc,EAFA,EAEAA,aAFA,KAGAC,SAHA,EAIAG,MAJA,EAKAwb,UAgB4C7f,oBAAS,IArBrD,6BAuBF,OAAO,mCACL,eAACoB,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAAC2O,OAA9B,UAGE,eAACxR,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAG2K,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,qCACA,cAAC5D,EAAA,EAAKC,QAAN,CAAciE,KAAK,SACjBoJ,KAAK,WAGT,eAACtN,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAG2K,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,0BACA,cAAC5D,EAAA,EAAKC,QAAN,CACEqN,KAAK,qBAGT,eAACtN,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAK4D,GAAI,EAAG2K,GAAI,EAAhC,UACE,cAACtO,EAAA,EAAK4D,MAAN,0BACA,eAAC5D,EAAA,EAAKC,QAAN,CAAcC,GAAG,SACfoN,KAAK,cADP,UAGE,wBAAQzJ,UAAQ,EAAC1D,MAAM,KACvB,wBAAQA,MAAM,KAAd,kBACA,wBAAQA,MAAM,KAAd,wBACA,wBAAQA,MAAM,KAAd,wBACA,wBAAQA,MAAM,KAAd,oBACA,wBAAQA,MAAM,KAAd,mBACA,wBAAQA,MAAM,KAAd,mBACA,wBAAQA,MAAM,KAAd,uBACA,wBAAQA,MAAM,KAAd,oBACA,wBAAQA,MAAM,KAAd,iCAIN,eAACH,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAzB,UACE,cAACrO,EAAA,EAAK4D,MAAN,sBACA,cAAC5D,EAAA,EAAKC,QAAN,CACEqN,KAAK,YAGT,eAACtN,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAzB,UACE,cAACrO,EAAA,EAAK4D,MAAN,8BACA,cAAC5D,EAAA,EAAKC,QAAN,CACEqN,KAAK,kBAGT,eAACtN,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKsO,GAAI,EAAzB,UACE,cAACrO,EAAA,EAAK4D,MAAN,+BACA,cAAC5D,EAAA,EAAKC,QAAN,CACEqN,KAAK,yB,SCtFF,cAAK,IAAD,MACqDL,cAA/DnK,EADU,EACVA,SAAuBiB,EADb,EACAb,UAAaa,OAAiBf,GAD9B,EACuBD,MADvB,EAC8BC,UAAUyb,EADxC,EACwCA,UACnDR,EAAa9e,YAAS,cAAc,WAExC,OADAlG,QAAQC,IAAI,iBACLwiB,OACN,CACDtY,SAAS,IAILga,GAAQ,UAAAa,EAAWnlB,YAAX,eAAiBA,OAAQ,GAavC,OAXAwK,qBAAU,WACRR,EAAS,UAAW,CAClB2L,SAAU,CACRkQ,SAAU,SAACxe,GAAD,OAASA,EAAMoC,OAAO,GAAK,qCAGxC,CAACO,IAEJQ,qBAAU,WACR2a,EAAWre,YACV,IACI,qCACL,cAACyd,GAAA,EAAD,CAAWnd,GAAG,KAAKxF,UAAS,oCAAgCqJ,EAAO0X,QAAe,aAAL,IAAqB9gB,MAAO,CAAC0J,OAAQ,SAAlH,SACG4Z,EAAWld,WAAa,WAAakd,EAAW7c,QAAU,QAAUgc,EAAMjiB,KAAI,SAACojB,EAAGvhB,GACjF,OAAO,cAACqgB,GAAA,EAAUlgB,KAAX,CAA2B+C,GAAG,KACnCxF,UAAU,4BACV6iB,QAAM,EAFD,SAIL,cAACvd,EAAA,EAAKqU,MAAN,CAAYnQ,KAAK,WACfqQ,MAAOgK,EAAEjR,KACTxJ,YAAaC,EAAO0X,QACpBnO,KAAI,kBAAaiR,EAAEtjB,GAAf,KAMJuB,SAAU,SAAC4D,GACT,IAAMua,EAAUva,EAAEC,OAAOsa,QACnBc,EAAUgD,EAAU,WAC1Bzb,EAAS,UAAW2X,EAAO,uBACtBc,GADsB,CAEzB8C,EAAEtjB,KACAwgB,EAAQrd,QAAO,SAAAnD,GAAE,OAAEA,GAAIsjB,EAAEtjB,MAAK,CAChCqkB,gBAAgB,QApBIf,EAAEtjB,SA2BlC,cAAC+E,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAO0X,eAA9C,aAAuC,EAAgBla,cC9C5C,YAAChG,GAGDka,cAANxa,GADH,IAAD,MAKG0X,EAAcjQ,YAAgB,CAClCC,KAAM,SACNC,cAAe,CACbwY,SAAU,GACVC,SAAU,GACVkE,eAAgB,GAChB9D,QAAS,MAIL3Y,EAAwE6P,EAAxE7P,SAAUG,EAA8D0P,EAA9D1P,MAAOJ,EAAuD8P,EAAvD9P,aAAcE,EAAyC4P,EAAzC5P,MAfpC,EAe6E4P,EAAlCzP,UAAasc,EAfxD,EAewDA,QAASzb,EAfjE,EAeiEA,OAE9D0b,EAAW/f,YAAYwb,IAjB1B,EAmBiCtc,oBAAS,GAnB1C,mBAmBI8gB,EAnBJ,KAmBoBC,EAnBpB,KAqBHrc,qBAAU,WACLmc,EAASpe,OACVse,GAAU,KAEX,CAACF,EAASpe,QAqCb,OAPAiC,qBAAU,WACLmc,EAAS3mB,MACVmK,MAED,CAACwc,EAAS3mB,OAGN,qCACL,cAAC,IAAD,2BAAkB6Z,GAAlB,aACE,eAAC3S,EAAA,EAAD,CAAM4f,YAAU,EAACC,UAAWL,EAASjc,SAAUV,GAAa,SAAC/J,GAE3DG,QAAQC,IAAI,WAAYJ,GACxB2mB,EAASxd,OAAO,CACdsZ,WAAYhgB,EAAMukB,SAClB1E,SAAUtiB,EAAKsiB,SACfC,SAAUviB,EAAKuiB,SACfI,QAAS3iB,EAAK2iB,aAPlB,UAUE,eAACzb,EAAA,EAAKF,IAAN,WACE,eAACE,EAAA,EAAK0D,MAAN,CAAYqc,UAAU,WAAW7f,GAAIH,IAAKuO,GAAI,EAA9C,UACE,cAACtO,EAAA,EAAK4D,MAAN,uBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaC,EAAOqX,UAChBtY,EAAS,WAAY,CACvBL,QAAS,CAAEtC,MAAO,QAASoB,QAAS,yCACpCa,SAAU,CAACjC,OAAO,EAAMoB,QAAS,4BACjC0H,UAAW,CAAC9I,MAAO,EAAGoB,QAAS,mDAC/Be,UAAW,CAACnC,MAAO,GAAIoB,QAAS,qDAGpC,cAACvB,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAOqX,gBAA9C,aAAuC,EAAiB7Z,aAE1D,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,WACjBJ,YAAaC,EAAOsX,UAChBvY,EAAS,WAAY,CACvBV,SAAU,CAACjC,OAAO,EAAMoB,QAAS,2BACjC0H,UAAW,CAAC9I,MAAO,EAAGoB,QAAS,kDAC/Be,UAAW,CAACnC,MAAO,GAAIoB,QAAS,oDAGpC,cAACvB,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAOsX,gBAA9C,aAAuC,EAAiB9Z,aAE1D,eAACvB,EAAA,EAAK0D,MAAN,CAAYxD,GAAIH,IAAKuO,GAAI,EAAzB,UACE,cAACtO,EAAA,EAAK4D,MAAN,sCACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,WACjBJ,YAAaC,EAAOwb,gBAChBzc,EAAS,iBAAkB,CAC7BV,SAAU,CAACjC,OAAO,EAAMoB,QAAS,2BACjCkN,SAAU,CACRuR,cAAe,SAAC7f,GAAD,OAAWA,IAAU4C,EAAM,aAAe,wCAI/D,cAAC/C,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAOwb,sBAA9C,aAAuC,EAAuBhe,gBAGlE,uBAAO7G,UAAU,OAAjB,4CACA,cAACoF,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACE,cAACkgB,GAAD,QAGJ,cAACjgB,EAAA,EAAKF,IAAN,UACE,cAACC,EAAA,EAAD,UACE,eAACjC,EAAA,EAAD,CAAQoG,KAAK,SAAb,UACGub,EAAStb,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAU,KACjE,sBAAMpE,UAAU,OAAhB,oCA7EQ,WAAK,IAAD,IAEtB,OAAa,MADD,UAAI+kB,EAASpe,aAAb,iBAAG,EAAgCC,gBAAnC,aAAG,EAA0C2U,QArB7B,WAAK,IAAD,QAChChd,QAAQC,IAAR,UAAaumB,EAASpe,aAAtB,iBAAY,EAAgCC,gBAA5C,aAAY,EAA0CxI,MADtB,IAEzBonB,GAFyB,UAEbT,EAASpe,aAFI,iBAEd,EAAgCC,gBAFlB,aAEd,EAA0CxI,MAArDonB,QACP,OAAO,eAACnW,EAAA,EAAD,CAAOC,UAAQ,EAACH,KAAM6V,EAAgBzV,OAAQ,kBAAI0V,GAAU,IAA5D,UACL,cAAC5V,EAAA,EAAMM,OAAP,wBACA,cAACN,EAAA,EAAMO,KAAP,UACE,cAAC7G,EAAA,EAAD,CAAOvC,QAAQ,SAAf,SACE,8CACe,cAAC,IAAD,CAAMzG,GAAI,CACrByQ,SAAS,iBAAD,OAAmBgV,EAAQjlB,IACnCgB,MAAO,CACLkkB,KAAMD,IAHG,qBADf,+BAgBGE,GAEF,KA8ENC,OC7IU,cACIxE,cAAjB,IADmB,EAEejd,mBAAS,KAFxB,mBAEZ0hB,EAFY,aAGa1hB,mBAAwB,OAHrC,mBAGZkhB,EAHY,KAGFS,EAHE,KASnB,OAAO,sBAAK7lB,UAAU,uEAAf,UACL,oBAAIC,MAAO,CAACkF,SAAU,QAAtB,sBACA,eAACqO,GAAA,EAAD,CAAW6E,iBAAkBuN,EAA7B,UACE,eAACrS,GAAA,EAAD,WACE,cAACC,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,qCAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,cAACF,GAAA,EAAK3D,KAAN,UACE,cAACkW,GAAD,CAAkBC,WAAY,SAACX,GAC7BS,EAAYT,aAKpB,eAAC7R,GAAA,EAAD,WACE,cAACC,GAAA,EAAUtM,OAAX,CAAkB1B,GAAI+N,KAAK5D,OAAQ3P,UAAU,wBAAwByT,SAAS,IAA9E,uCAGA,cAACD,GAAA,EAAUE,SAAX,CAAoBD,SAAS,IAA7B,SACE,cAACF,GAAA,EAAK3D,KAAN,UACE,cAACoW,GAAD,CAAcZ,SAAUA,kBC9BvBa,GAAW,WAAK,IACpB1kB,EAASgP,cAAThP,MACAkf,EAAU1F,cAAV0F,OAFmB,EAKFvc,mBAAQ,OAAC3C,QAAD,IAACA,OAAD,EAACA,EAAOkkB,MALd,mBAKnBA,EALmB,KAKbS,EALa,KAMpBC,EAAY1hB,YAAS,CAAC,YAAagc,IAAS,WAChD,OAAOD,GAAW5a,SAAS6a,MAC1B,CACD/X,UAAS,OAACnH,QAAD,IAACA,OAAD,EAACA,EAAOkkB,MACjB9gB,sBAAsB,IASxB,OANAiE,qBAAU,WACW,IAAD,EAAfud,EAAU/nB,MACX8nB,EAAO,UAACC,EAAU/nB,YAAX,aAAC,EAAgBA,QAEzB,CAAC+nB,EAAU/nB,OAEP,qCACL,oBAAI6B,MAAO,CAACkF,SAAU,WAAtB,gBAAmCsgB,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAM/E,WACzC,cAACxa,EAAA,EAAD,UACE,kCACE,+BACE,oBAAIlG,UAAU,cAAc8R,MAAM,MAAM7R,MAAO,CAACmG,MAAO,OAAvD,+BACA,2CAAOqf,QAAP,IAAOA,OAAP,EAAOA,EAAM/E,eAEf,+BACE,oBAAI5O,MAAM,MAAV,oBACA,qCAAW,OAAJ2T,QAAI,IAAJA,OAAA,EAAAA,EAAM/iB,QAAS,SAAW,iBAEnC,+BACE,oBAAIoP,MAAM,MAAV,uBACA,2CAAO2T,QAAP,IAAOA,OAAP,EAAOA,EAAMtC,gBAEf,+BACE,oBAAIrR,MAAM,MAAV,4BACA,2CAAO2T,QAAP,IAAOA,OAAP,EAAOA,EAAMrC,gBAEf,+BACE,oBAAItR,MAAM,MAAV,mBACA,2CAAO2T,QAAP,IAAOA,OAAP,EAAOA,EAAMrC,yBCrCR,cAAK,IAAD,EACV3C,EAAU1F,cAAV0F,OACDxI,EAAcjQ,YAAgB,CAClCC,KAAM,SACNC,cAAe,CACbwY,SAAU,GACVK,QAAS,MAGL3Y,EAAqF6P,EAArF7P,SAAUG,EAA2E0P,EAA3E1P,MAAOJ,EAAoE8P,EAApE9P,aAAcE,EAAsD4P,EAAtD5P,MAAmBgB,EAAmC4O,EAA/CzP,UAAYa,OAAmC4O,EAA1BzP,UAAasc,QAChFvmB,QAAQC,IAAI,SAAU6J,KACtB,IAAM+d,EAAWphB,YAAYwb,IAEvB6F,EAAW5hB,YAAS,CAAC,WAAYgc,IAAS,WAC9C,OAAOD,GAAW5a,SAAS6a,MAC1B,CACD/X,SAAS,IAgBX,OAbAE,qBAAU,WACRyd,EAASnhB,YACR,CAACub,IAEJ7X,qBAAU,WACLyd,EAASjoB,MACVmK,EAAM,CACJmY,SAAU2F,EAASjoB,KAAKA,KAAKsiB,SAC7BK,QAASsF,EAASjoB,KAAKA,KAAK2iB,YAG/B,CAACsF,EAASjoB,OAEN,cAAC,IAAD,2BAAkB6Z,GAAlB,aACL,eAAC3S,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAAC/J,GAC5BgoB,EAAS7e,OAAO,CACdhH,GAAIqF,SAAS6a,GACbC,SAAUtiB,EAAKsiB,SACfK,QAAS3iB,EAAK2iB,aAJlB,UAOE,eAACzb,EAAA,EAAK0D,MAAN,CAAYqc,UAAU,WAAtB,UACE,cAAC/f,EAAA,EAAK4D,MAAN,gCACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaC,EAAOqX,UAChBtY,EAAS,WAAY,CACvBL,QAAS,CAAEtC,MAAO,QAASoB,QAAS,yCACpCa,SAAU,CAACjC,OAAO,EAAMoB,QAAS,4BACjC0H,UAAW,CAAC9I,MAAO,EAAGoB,QAAS,mDAC/Be,UAAW,CAACnC,MAAO,GAAIoB,QAAS,qDAGpC,cAACvB,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAuCH,EAAOqX,gBAA9C,aAAuC,EAAiB7Z,aAE1D,eAACvB,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,oBACA,cAACqc,GAAD,OAEF,eAACniB,EAAA,EAAD,CAAQoG,KAAK,SAAb,UACG4c,EAAS3c,UAAY,cAAClD,EAAA,EAAD,CAASE,UAAU,SAASrC,KAAK,OAAU,KACjE,sBAAMpE,UAAU,OAAhB,iCCIOsmB,GA/DO,WAAK,IAAD,EACF7kB,cAARC,GADU,EAChB5B,KADgB,EACV4B,KACd,OAAO,cAAC,EAAD,CAAeP,QAAS,CAC7BX,MAAO,CACL,CACED,GAAI,QACJJ,KAAM,cAAC,IAAD,IACNL,KAAK,GAAD,OAAK4B,EAAL,aACJpB,MAAO,YAUT,CACEC,GAAI,QACJJ,KAAM,cAAC,IAAD,IACNL,KAAK,GAAD,OAAK4B,EAAL,UACJpB,MAAO,WApBN,SAwBL,eAAC,IAAD,WACE,cAAC,IAAD,CAAO6f,OAAK,EAACrgB,KAAI,UAAK4B,GAAtB,SACE,cAAC,IAAD,CAAU3B,GAAE,UAAK2B,EAAL,iBAEd,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,aAAjB,SACE,cAAC6kB,GAAD,MAEF,cAAC,IAAD,CAAOpG,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,uBAAjB,SACE,cAAC8kB,GAAD,MAEF,cAAC,IAAD,CAAOrG,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,qBAAjB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOye,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,4BAAjB,SACE,cAAC+kB,GAAD,MAGF,cAAC,IAAD,CAAOtG,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,yBAAjB,SACE,cAACglB,GAAD,MAEF,cAAC,IAAD,CAAOvG,OAAK,EAACrgB,KAAI,UAAK4B,EAAL,8BAAjB,SACE,cAACglB,GAAD,MAEF,cAAC,IAAD,CAAO5mB,KAAI,UAAK4B,EAAL,UAAX,SACE,cAACilB,GAAD,YC9DKC,GAAU,SAACrlB,GAAD,OAAaA,EAAMslB,KAAKpB,MAIlCqB,GAAqB,SAACvlB,GAAD,OAAgC,MAAnBA,EAAMslB,KAAKpB,MCD7CsB,GAAc,CACzBC,MAAM,WAAD,8BAAE,WAAOtG,EAAkBC,EAAkBsG,GAA3C,UAAAlF,EAAA,sEACCjkB,cAAW2B,IAAI,uBADhB,uBAEQ3B,cAAWkG,KAAW,QAAS,CAC1C0c,WACAC,WACAsG,gBALG,mFAAF,uDAAC,ICiBKC,I,OAAQ,WAAO,IAAD,UACnBC,EAAWhG,cACV5f,EAASgP,cAAThP,MACD6lB,EAAkB9lB,YAAYwlB,IAHX,EAKmB9e,YAAgB,CAC1DE,cAAe,CACbwY,SAAS,GACTC,SAAU,GACVsG,aAAa,KAJV9e,EALkB,EAKlBA,aAAcC,EALI,EAKJA,SAAUI,EALN,EAKMA,UAQzBwe,EAAQhiB,aAAY,YAA8C,IAA5C0b,EAA2C,EAA3CA,SAAUC,EAAiC,EAAjCA,SAAUsG,EAAuB,EAAvBA,YAC9C,OAAOF,GAAYC,MAAMtG,EAAUC,EAAUsG,KAC5C,CACDpiB,UAAW,YAAa,IAAXzG,EAAU,EAAVA,KACXipB,aAAaC,QAAQ,OAAQC,KAAKpoB,UAAUf,IAC5C+oB,EAAS,CACP3d,KAAM,WACNgc,QAASpnB,OAKf,OAAOgpB,EACL,cAAC,IAAD,CAAUrnB,IAAS,OAALwB,QAAK,IAALA,OAAA,EAAAA,EAAO0hB,OAAQ,MAC7B,qBAAKjjB,UAAU,wBAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,eAACsF,EAAA,EAAD,CAAMuD,SAAUV,GAAa,SAACqf,GAC1BR,EAAMzf,OAAOigB,MADjB,UAIE,oBAAIxnB,UAAU,mBAAmBC,MAAO,CAAEkF,SAAU,WAApD,gDACC6hB,EAAMtgB,QAAU,cAACqC,EAAA,EAAD,CAAOvC,QAAQ,SAAf,UAA0B,UAAAwgB,EAAMrgB,aAAN,mBAAaC,gBAAb,eAAuBC,WAAvB,UAAkCmgB,EAAMrgB,aAAxC,aAAkC,EAAaE,WAAoB,KAC9G,eAACvB,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,sBACA,cAAC5D,EAAA,EAAKC,QAAN,aACE6D,YAAaZ,EAAUa,OAAOqX,UAC1BtY,EAAS,WAAY,CACvBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAwChB,EAAUa,OAAOqX,gBAAzD,aAAwC,EAA2B7Z,aAErE,eAACvB,EAAA,EAAK0D,MAAN,WACE,cAAC1D,EAAA,EAAK4D,MAAN,4BACA,cAAC5D,EAAA,EAAKC,QAAN,aAAciE,KAAK,WACjBJ,YAAaZ,EAAUa,OAAOsX,UAC1BvY,EAAS,WAAY,CACvBV,SAAU4B,QAGd,cAAChE,EAAA,EAAKC,QAAQgE,SAAd,CAAuBC,KAAK,UAA5B,mBAAwChB,EAAUa,OAAOsX,gBAAzD,aAAwC,EAA2B9Z,aAGrE,cAACvB,EAAA,EAAK0D,MAAN,UACE,cAAC1D,EAAA,EAAKqU,MAAN,aACEnQ,KAAM,WACNqQ,MAAM,sBACFzR,EAAS,mBAIjB,eAAChF,EAAA,EAAD,CAAQoG,KAAK,SAASxJ,UAAU,4BAAhC,UACGgnB,EAAMvd,UAAY,cAAClD,EAAA,EAAD,CAASnC,KAAK,KAAKqC,UAAU,WAAc,KAC9D,sBAAMzG,UAAU,oBAAhB,2CC/ECynB,GAAiB,SAAC,GAAkC,IAAhCrmB,EAA+B,EAA/BA,SAAasmB,EAAkB,4BACxDN,EAAkB9lB,YAAYwlB,IACpC,OACE,cAAC,IAAD,2BACMY,GADN,IAEExQ,OAAQ,gBAAGgE,EAAH,EAAGA,SAAH,OACNkM,EACEhmB,EAEA,cAAC,IAAD,CACErB,GAAI,CACFyQ,SAAU,SACVjP,MAAO,CAAE0hB,KAAM/H,W,gCCVnByM,I,aAIOC,IAZXC,GAAe,eAEd,SAASC,KACd,MAAO,CACLte,KAAMqe,IAIV,SAAUF,GAAmB9E,GAA7B,kEACEwE,aAAaU,WAAW,QAD1B,wCAIO,SAAUH,KAAV,kEACL,OADK,SACCI,aAAWH,GAAcF,IAD1B,wCCKQ,kBACb,IAAMR,EAAWhG,cACXsE,EAAOnkB,YAAYslB,IA4BzB,OAnBAhe,qBAAU,WACRpJ,IAAUd,aAAakI,SAAShI,KAC9B,SAAAgI,GAAQ,OAAEA,KACV,SAAAD,GAAU,IAAD,IAIP,OAH6B,MAA1B,UAAAA,EAAMC,gBAAN,eAAgB2U,SAA2C,MAA1B,UAAA5U,EAAMC,gBAAN,eAAgB2U,SAClD4L,EAASW,MAEJG,QAAQC,OAAOvhB,MAI1B,IAAMwhB,EAAWd,aAAae,QAAQ,QACtCjB,EAAS,CACP3d,KAAM,WACNgc,QAAS2C,EAAWZ,KAAKnG,MAAM+G,GAAY,SAG5C,IAEI,eAAC,IAAD,WACL,eAACE,EAAA,EAAD,CAAQroB,UAAU,0BAA0BsoB,GAAG,QAAQ9hB,QAAQ,QAAQvG,MAAO,CAAC8M,OAAQ,GAAvF,UACG0Y,EAAO,cAAC4C,EAAA,EAAOnhB,OAAR,CAAejH,MAAO,CAACsoB,QAAS,WAAY5lB,QA3BlC,WACpBwkB,EAAS,CACP3d,KAAK,oBAyBG,SAAqE,cAAC,IAAD,MAA6B,KAC1G,cAAC6e,EAAA,EAAOG,MAAR,CAAcphB,KAAK,QAAQpH,UAAU,OAArC,2BACA,eAACyoB,EAAA,EAAD,CAAKzoB,UAAU,UAAf,UACE,cAAC0oB,EAAA,EAAD,CACElW,QAAQ,QACRmW,WAAS,EACTC,UAAU,SACVC,QACE,eAACC,EAAA,EAAD,CAASvoB,GAAG,OAAON,MAAO,CAAC8oB,SAAU,QAArC,UACE,cAACD,EAAA,EAAQE,MAAT,CAAehpB,UAAU,cAAcwF,GAAG,KAA1C,0BACA,cAACsjB,EAAA,EAAQpF,QAAT,UACE,eAACte,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKrF,UAAU,cAAf,SAA6B,eAAC,IAAD,CAAMD,GAAG,OAAT,UAAgB,cAAC,IAAD,CAAcC,UAAU,kBAAkBoE,KAAM,KAAM,4CACnG,cAACiB,EAAA,EAAD,CAAKrF,UAAU,cAAf,SAA6B,eAAC,IAAD,CAAMD,GAAG,WAAT,UAAqB,cAAC,IAAD,CAAiBC,UAAU,kBAAmBoE,KAAM,KAAM,2DAVtH,SAgBE,cAACqkB,EAAA,EAAI1iB,KAAL,UAAU,cAAC,IAAD,CAAQ3B,KAAK,cAExBqhB,EAAO,cAACiD,EAAA,EAAD,CACNlW,QAAQ,QACRmW,WAAS,EACTC,UAAU,SACVC,QACE,eAACC,EAAA,EAAD,CAASvoB,GAAG,OAAZ,UACE,cAACuoB,EAAA,EAAQE,MAAT,CAAehpB,UAAU,cAAcwF,GAAG,KAA1C,4BACA,cAACsjB,EAAA,EAAQpF,QAAT,OAPE,SAaN,eAAC+E,EAAA,EAAI1iB,KAAL,CAAU9F,MAAO,CAACgpB,WAAY,UAA9B,UACE,cAAC,IAAD,IAEA,qBAAKjpB,UAAU,kBAAkBC,MAAO,CACtCe,KAAM,UACNkoB,IAAK,WACL9iB,MAAO,SACPuD,OAAQ,SACRwf,aAAc,cAGA,KACnB1D,EAAO,eAAC2D,EAAA,EAAD,CAAa9oB,MAAO,qCAAE,cAAC,IAAD,IAAgB,sBAAMN,UAAU,0BAAhB,SAA2CylB,EAAK/E,cAAqBngB,GAAG,0BAA9G,UACN,cAAC6oB,EAAA,EAAY3mB,KAAb,CAAkB2E,KAAK,cAAvB,oBACA,cAACgiB,EAAA,EAAY3mB,KAAb,CAAkB2E,KAAK,cAAvB,2BACA,cAACgiB,EAAA,EAAYC,QAAb,IACA,cAACD,EAAA,EAAY3mB,KAAb,CAAkB+C,GAAIpC,IAAQpD,UAAU,WAAW2C,QAAS,WAC1DnD,IAAUwE,KAAK,UAAUslB,MAAK,WAC5BnC,EAASW,MACTT,aAAaU,WAAW,YAH5B,iCAMe,cAACU,EAAA,EAAI1iB,KAAL,CAAUP,GAAIO,IAAMhG,GAAG,SAAvB,qCAGjB,eAAC,IAAD,WACE,cAAC,GAAD,CAAgBD,KAAK,OAArB,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgBA,KAAK,WAArB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOqgB,OAAK,EAACrgB,KAAK,SAAlB,SACE,cAAC,GAAD,aCxGGypB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBH,MAAK,YAAkD,IAA/CI,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,6BCPRO,GAA0B,CAC9BjT,OAAQ,CACN4J,SAAU,GACVC,SAAU,IAEZtX,OAAQ,CACNqX,SAAU,GACVC,SAAU,IAEZ9Z,QAAS,ICIImjB,GATkBC,aAAgB,CAC/CxE,KCLa,WAAoD,IAAnDlkB,EAAkD,uDAAjC,KAAMshB,EAA2B,uCACzDrZ,EAAwBqZ,EAAxBrZ,KAAMgc,EAAkB3C,EAAlB2C,QAAS7e,EAASkc,EAATlc,MACtB,OAAO6C,GACL,IAAK,WACL,IAAK,kBACL,IAAK,sBACH,OAAO7C,EAAQpF,EAAQikB,EACzB,IAAK,eACH,OAAO,KACT,QACE,OAAOjkB,IDJX8kB,SERa,WAAkD,IAAjD9kB,EAAgD,uDAAlB,GAAIshB,EAAc,uCAC9CrZ,GAAQqZ,EAAjB2C,QAAiB3C,EAARrZ,MAChB,OAAOA,GACL,IAAK,YACH,MAAO,CAAC0gB,WAAW,GACrB,IAAK,sBACH,MAAO,CAACA,WAAW,GAEvB,OAAO3oB,GFCPylB,MGLa,WAA0C,IAAzCzlB,EAAwC,uDAAlB,GAAIshB,EAAc,uCAC/CrZ,EAAiBqZ,EAAjBrZ,KAAiBqZ,EAAX2C,QACb,OAAOhc,GACL,IAAK,QACH,MAAO,CACL0gB,WAAW,GAEf,IAAK,kBACH,MAAO,CACLA,WAAW,GAGjB,OAAO3oB,GHNP4oB,UDGa,WAA+D,IAA9D5oB,EAA6D,uDAA1CwoB,GAAclH,EAA4B,uCAC3E,GAAkB,qBAAfA,EAAOrZ,KACR,OAAO,2BACFjI,GACAshB,EAAO2C,SAGd,GAAkB,SAAf3C,EAAOrZ,KACR,OAAO,2BACFjI,GADL,IAEEsF,QAAS,GACTwC,OAAQ0gB,GAAa1gB,SAGzB,GAAkB,mBAAfwZ,EAAOrZ,MAA6BqZ,EAAOlc,MAAM,CAAC,IAAD,EACxBkc,EAAO2C,QAA1B3e,EAD2C,EAC3CA,QAASwC,EADkC,EAClCA,OAChB,OAAO,2BACF9H,GADL,IAEEsF,UACAwC,OAAQA,GAAU0gB,GAAa1gB,SAGnC,MAAkB,mBAAfwZ,EAAOrZ,KACDugB,GAEFxoB,KK7BM0oB,oBAAgB,CAC7B5oB,YARK,WAA8C,IAAzBE,IAAwB,yDAAZshB,EAAY,uCAClD,MAAkB,kBAAfA,EAAOrZ,MACAjI,EAEHA,K,aCCC6oB,IAAV,SAAUA,KAAV,kEACE,OADF,SACQC,aAAI,CACRzC,OAFJ,wCAQA,IAAM0C,GAAsBjjB,OAAOkjB,sCAAwCC,KAwB5DC,GAvBe,WAC5B,IAAMC,EAAcT,aAAgB,CAClCzoB,QACAqlB,UAII8D,EAAiBC,eAEjBC,EAAQC,aACZJ,EACAJ,GACES,aAAgBJ,KAOpB,OAFAA,EAAeK,IAAIZ,IAEZS,GC7BJlO,OAAOpS,UAAU0gB,aACrBtO,OAAOpS,UAAU0gB,WAAa,WAC3B,IAAIC,EAAMC,UAAU,GAChBC,EAASD,UAAU,GAEzB,MAA0D,oBAAtDE,OAAO9gB,UAAUsT,SAASyN,KAAKJ,GAAKK,cAChCC,KAAK3Q,QAAQqQ,EAAKE,GAInBI,KAAK3Q,QAAQ,IAAI4Q,OAAOP,EAAK,KAAME,KAYvCzO,OAAOpS,UAAUzC,SACpB6U,OAAOpS,UAAUzC,OAAS,WACxB,IAAI4jB,EAAOP,UACX,OAAOK,KAAK3Q,QAAQ,YAAY,SAAS8Q,EAAOC,GAC9C,MAA8B,oBAAhBF,EAAKE,GACfF,EAAKE,GACLD,O,kBCFJtW,GAAc,IAAIwW,KAAY,CAClCC,eAAgB,CACdC,QAAS,CAAEC,MAAO,GAClBC,UAAW,CAAED,MAAO,MAKxBE,IAAShV,OACP,cAACiV,GAAA,EAAD,CAAqBC,OAAQ/W,GAA7B,SACE,cAAC,IAAD,CAAUwV,MAAOJ,KAAjB,SACE,cAAC,GAAD,QAGJtI,SAASkK,eAAe,SAM1B9C,M,gIC/Ca/pB,EAAYzB,IAAMC,OAAO,CACpC,QAAWsuB,IACX,QAAW,IACX,QAAW,CACT,OAAU,oBAEZpuB,kBAAkB,GAAD,mBACZH,IAAMI,SAASD,mBADH,CAEf,SAACE,GACC,IAAMC,EAASC,YAAYF,GAE3B,OADAG,QAAQC,IAAI,sBAAuBH,GAC5BA,OAKbmB,EAAUrB,SAASM,iBAAkB,EAErCe,EAAUd,aAAaC,QAAQC,KAAI,SAAAC,GAUjC,OATAA,EAAOC,QAAQC,OAAS,mBACxBF,EAAOG,iBAAmB,SAAAC,GAExB,OAAOC,IAAGC,UAAUF,EAAQ,CAC1BG,YAAa,WACbC,QAAQ,KAGZd,QAAQC,IAAI,eAAgBK,GACrBA,KAGMW,O,kJClCF0M,EAA2B,SAACzG,GACvC,IAAIkG,EAAKC,EACT,GAAGnG,EAAM,CACP,GAAGgG,MAAMC,QAAQjG,GAAO,CAAC,IAAD,cACTA,EADS,GACrBkG,EADqB,KAChBC,EADgB,UAIpBD,EAAYlG,EAAZkG,IAAKC,EAAOnG,EAAPmG,IAET,MAAM,GAAN,OAAUD,EAAI4gB,QAAQ,GAAtB,aAA6B3gB,EAAI2gB,QAAQ,IAE3C,MAAO,ICCH7gB,EAAU,SAAUqW,GACxB,OAAOtW,MAAMC,QAAQqW,IAGjByK,EAAW,SAAUC,GACzB,OAAOA,IAAMpB,OAAOoB,KAAO/gB,EAAQ+gB,IAAmB,oBAANA,GAsBrCnuB,EAAc,SAAdA,EAAwBmuB,GACnC,GAAID,EAASC,GAAI,CACf,IAAMC,EAAQ,GAOd,OALArB,OAAOsB,KAAKF,GACTG,SAAQ,SAACC,GA5CO,IAACC,EA6ChBJ,GA7CgBI,EA6CND,EA5CTC,EAAEjS,QAAQ,iBAAiB,SAACkS,GACjC,OAAOA,EAAGC,cACPnS,QAAQ,IAAK,IACbA,QAAQ,IAAK,SAyCIvc,EAAYmuB,EAAEI,OAG3BH,EACF,OAAIhhB,EAAQ+gB,GACVA,EAAEhsB,KAAI,SAAC6B,GACZ,OAAOhE,EAAYgE,MAIhBmqB,GAGIzP,EAAmB,SAAnBA,EAA6ByP,GACxC,GAAID,EAASC,GAAI,CACf,IAAMC,EAAQ,GAOd,OALArB,OAAOsB,KAAKF,GACTG,SAAQ,SAACC,GAvDY,IAACI,EAwDrBP,GAxDqBO,EAwDNJ,EAvDdI,EAAIpS,QAAS,WAAY,OAAO0Q,gBAuDZvO,EAAiByP,EAAEI,OAGrCH,EACF,OAAIhhB,EAAQ+gB,GACVA,EAAEhsB,KAAI,SAAC6B,GACZ,OAAO0a,EAAiB1a,MAIrBmqB,I","file":"static/js/main.ce9c4ba7.chunk.js","sourcesContent":["import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import apiClient from \"./apiClient\"\r\n\r\nexport type Departamento = {\r\n  id: number,\r\n  nombre: string,\r\n  abreviatura: string\r\n}\r\n\r\nexport type Provincia = {\r\n  id: number,\r\n  nombre: string\r\n  departamentoId: number\r\n}\r\n\r\nexport type Municipio = {\r\n  id: number,\r\n  nombre: string\r\n  provinciaId: number\r\n}\r\n\r\nexport const UnidadesTerritorialesService = {\r\n  getDepartamentos: ()=>{\r\n    return apiClient.get<Departamento[]>(\"departamentos\")\r\n  },\r\n  getProvincias: () => {\r\n    return apiClient.get<Provincia[]>(\"provincias\")\r\n  },\r\n  getMunicipios: () => {\r\n    return apiClient.get<Municipio[]>(\"municipios\")\r\n  }\r\n}","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"\r\n\r\nexport * from \"./UnidadesTerritorialesService\"","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    {item.path ? \r\n      <Link to={item.path} \r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </Link> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport default ({current, total, onChange}: Props)=>{\r\n  current = Math.min(current, total+1);\r\n  let ld = current - 1\r\n  let rd = total - current//Math.min(current, total)\r\n  ld= Math.min(2+2-Math.min(2,rd), ld)\r\n  rd = Math.min(2+2-Math.min(2,ld), rd)\r\n  const minimum = current - ld\r\n  const maximum=current + rd\r\n  console.log(\"pag.\", current, total, minimum,maximum)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>onChange(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>Nº Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule, ValidationValueMessage } from \"react-hook-form\"\r\nimport { isObjectBindingPattern } from \"typescript\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): ValidationValueMessage<boolean> => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(pattern)\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { useMemo, useState, useRef } from \"react\"\r\nimport { Button, FormControl, InputGroup } from \"react-bootstrap\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport L, { LatLngExpression, Marker as LeafletMarker, Map } from \"leaflet\"\r\nimport { MapContainer, Marker, MarkerProps, Popup, TileLayer, useMapEvents, ZoomControl } from \"react-leaflet\"\r\nimport { latLngExpressionToString } from \"../utils\"\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25,41],\r\n    iconAnchor: [12,41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\ntype Props = {\r\n  value: LatLngExpression|null,\r\n  center: LatLngExpression\r\n  onChange: (value?: LatLngExpression|null) => void\r\n}\r\n\r\nconst CustomMarker = (props: Omit<MarkerProps, \"position\"> & {position: LatLngExpression|null, onChange(position: LatLngExpression|null): void})=>{\r\n  const markerRef =  useRef<LeafletMarker<any>>(null)\r\n  const eventHandlers = useMemo(\r\n    () => ({\r\n      onclick() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          marker.remove()\r\n          props.onChange(null)\r\n        }\r\n      },\r\n      dragend() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          props.onChange(marker.getLatLng())\r\n        }\r\n      },\r\n    }),\r\n    [],\r\n  )\r\n  \r\n  const map = useMapEvents({\r\n    click(e) {\r\n      props.onChange(e.latlng)\r\n      map.flyTo(e.latlng, map.getZoom())\r\n      // map.locate()\r\n    }\r\n  })\r\n\r\n\r\n  if(!props.position) return null\r\n  const [latitude, longitude] = Array.isArray(props.position) ? props.position : [props.position.lat, props.position.lng]\r\n  return <Marker \r\n    draggable\r\n    ref={markerRef}\r\n    position={props.position}\r\n    eventHandlers={eventHandlers}\r\n  >\r\n    <Popup>\r\n      A pretty CSS3 popup. <br /> Easily customizable.\r\n      <a href={`maps:${latitude},${longitude}`}>Open with...</a>\r\n    </Popup>\r\n  </Marker>\r\n}\r\n\r\nexport const LocationInput = (props: Props) => {\r\n\r\n  const [search, setSearch] = useState(()=>{\r\n    return latLngExpressionToString(props.value)\r\n  })\r\n  const mapRef = useRef<Map>(null)\r\n\r\n  return <>\r\n    <MapContainer\r\n      //@ts-ignore\r\n      whenCreated={ mapInstance => { mapRef.current = mapInstance } }\r\n      center={props.center}\r\n      zoom={13}\r\n      zoomControl={false}\r\n      style={{height: 240, cursor: \"crosshair\"}}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <div className=\"leaflet-control-container\"\r\n      >\r\n        <div className=\"leaflet-top leaflet-left\" style={{zIndex: 999}}>\r\n        <InputGroup className=\"leaflet-control bg-white\"\r\n          ref={(instance: HTMLDivElement)=>{\r\n            if(instance){\r\n              instance.onclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n              instance.onmousemove = (e:any)=>{\r\n                console.log(\"OnMove\")\r\n                e.stopPropagation()\r\n              }\r\n              instance.ondblclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <FormControl\r\n            value={search}\r\n            onClick={(e: any)=>{\r\n              console.log(\"ASFA\")\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n            }}\r\n            onChange={(e)=>{\r\n              const value = e.target.value\r\n              setSearch(value)\r\n            }}\r\n          />\r\n          <InputGroup.Append>\r\n            <Button variant=\"outline-secondary\"\r\n              ref={(instance: any) => {\r\n                if(instance){\r\n                  instance.onclick = ()=>{\r\n                    const coords = search.split(\",\")\r\n                    if(coords.length == 2){\r\n                      const [rawLat, rawLng] = coords\r\n                      const [lat, lng] = [parseFloat(rawLat), parseFloat(rawLng)]\r\n                      if(Math.abs(lat) <= 90 && Math.abs(lng) <= 180){\r\n                        mapRef.current!.setView([lat, lng], 13)\r\n                        props.onChange([lat, lng])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              onClick={()=>{\r\n              }}\r\n            ><FaSearch/></Button>\r\n          </InputGroup.Append>\r\n        </InputGroup>\r\n        </div>\r\n      </div>\r\n      <CustomMarker position={props.value} onChange={(position)=>{\r\n        props.onChange(position)\r\n        setSearch(latLngExpressionToString(position))\r\n      }} />\r\n      <ZoomControl position=\"bottomright\" />\r\n    </MapContainer>\r\n  </>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Departamento, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const DepartamentosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Departamento[])=>void} & Omit<TypeaheadProps<Departamento>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getDepartamentos\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getDepartamentos()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Provincia, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProvinciasTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Provincia[])=>void} & Omit<TypeaheadProps<Provincia>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getProvinciass\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getProvincias()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Municipio, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MunicipiosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Municipio[])=>void} & Omit<TypeaheadProps<Municipio>, \"isLoading\" | \"options\">) => {\r\n\r\n\r\n  const queryKey = \"getMunicipios\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getMunicipios()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: {onLoad?: (options: Regional[])=>void} & Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      setOptions(buscar.data?.data)\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.asegurado.matricula}</td>\r\n        <td>{solicitud.medico}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n                !!solicitud.urlDm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.urlDm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscarSolicitudesAtencionExterna.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrícula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n  console.log(props.asegurados.length)\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}-{asegurado.matriculaComplemento}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado ? \"Alta\" : \"Baja\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","import { AxiosTransformer } from \"axios\"\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\n// export type Asegurado = Titular | Beneficiario\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  matriculaComplemento: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  tipo_id: number,\r\n  estado: string,\r\n  fechaBaja?: string,\r\n  fechaExtinsion?: string,\r\n  empleadorId: string\r\n  titularId: string\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    fechaBaja: string,\r\n    aportes: string\r\n  }\r\n  titular?: {\r\n    id: string,\r\n    matricula: string,\r\n    apellidoPaterno: string | null,\r\n    apellidoMaterno: string,\r\n    nombres: string,\r\n    estado: string,\r\n    fechaBaja?: string,\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useWatch, ValidationRule } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport moment from 'moment';\r\n\r\nconst estadoText = (code?: number) => {\r\n  console.log(code)\r\n  if(code == 1) return \"Alta\"\r\n  if(code == 2) return \"Baja\"\r\n  return \"\"\r\n}\r\n\r\nconst aportesText = (code?: number) => {\r\n  if(code == 1) return \"Al Día\"\r\n  if(code == 2) return \"En Mora\"\r\n  return \"\"\r\n}\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number,\r\n  asegurado: {\r\n    id: string\r\n    matricula: string\r\n    apellidoPaterno: string | null\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    fechaExtinsion: string | null\r\n    tipo: number\r\n    estado: string\r\n    fechaValidezSeguro: string | null\r\n  },\r\n  titular: {\r\n    id: string\r\n    matricula: string\r\n    apellidoPaterno: string | null\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    estado: string\r\n    fechaValidezSeguro: string | null\r\n  },\r\n  empleador: {\r\n    id: string, \r\n    numeroPatronal: string, \r\n    nombre: string,\r\n    estado: string,\r\n    aportes: string,\r\n    fechaBaja: string | null\r\n  }\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    trigger,\r\n    setValue,\r\n    clearErrors,\r\n    control,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  const asegurado = useWatch({\r\n    control,\r\n    name: 'asegurado', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n  const titular = useWatch({\r\n    control,\r\n    name: 'titular', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n  const empleador = useWatch({\r\n    control,\r\n    name: 'empleador', // without supply name will watch the entire form, or ['firstName', 'lastName'] to watch both\r\n  });\r\n  const tipoAsegurado = useWatch({\r\n    control,\r\n    name: 'asegurado.tipo'\r\n  }); \r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = asegurado.matricula//watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: {records}}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        onChange(asegurado)\r\n      }\r\n      else {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const onChange = ({empleador, titular, ...asegurado}: any) => {\r\n    console.log(asegurado, titular, empleador)\r\n    // setValue(\"asegurado\", asegurado)\r\n    // setValue(\"titular\", titular||{})\r\n    // setValue(\"empleador\", empleador || {\r\n    //   id: \"\",\r\n    //   numeroPatronal: \"\",\r\n    //   nombre: \"\"\r\n    // })\r\n\r\n    setValue(\"asegurado.id\", asegurado.id)\r\n    setValue(\"asegurado.apellidoPaterno\", asegurado.apellidoPaterno || \"\")\r\n    setValue(\"asegurado.apellidoMaterno\", asegurado.apellidoMaterno || \"\")\r\n    setValue(\"asegurado.nombres\", asegurado.nombres)\r\n    setValue(\"asegurado.tipo\", asegurado.tipo)\r\n    setValue(\"asegurado.estado\", estadoText(asegurado.estado))\r\n    setValue(\"asegurado.fechaValidezSeguro\", asegurado.fechaValidezSeguro)\r\n    setValue(\"asegurado.fechaExtinsion\", asegurado.fechaExtinsion)\r\n    setValue(\"titular.id\", titular?.id)\r\n    setValue(\"titular.matricula\", titular?.matricula)\r\n    setValue(\"titular.apellidoPaterno\", titular?.apellidoPaterno)\r\n    setValue(\"titular.apellidoMaterno\", titular?.apellidoMaterno)\r\n    setValue(\"titular.nombres\", titular?.nombres)\r\n    setValue(\"titular.estado\", estadoText(titular?.estado))\r\n    setValue(\"titular.fechaValidezSeguro\", titular?.fechaValidezd)\r\n    setValue(\"empleador.id\", empleador?.id)\r\n    setValue(\"empleador.numeroPatronal\", empleador?.numeroPatronal)\r\n    setValue(\"empleador.nombre\", empleador?.nombre)\r\n    setValue(\"empleador.estado\", estadoText(empleador?.estado))\r\n    setValue(\"empleador.fechaBaja\", empleador?.fecha_baja)\r\n    setValue(\"empleador.aportes\", aportesText(empleador?.estado))\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(asegurado.id && formState.dirtyFields.asegurado?.matricula){\r\n      setValue(\"asegurado.id\", \"\")\r\n      setValue(\"asegurado.apellidoPaterno\", \"\")\r\n      setValue(\"asegurado.apellidoMaterno\", \"\")\r\n      setValue(\"asegurado.nombres\", \"\")\r\n      setValue(\"asegurado.tipo\", -1)\r\n      setValue(\"asegurado.estado\", \"\")\r\n      setValue(\"asegurado.fechaValidezSeguro\", \"\")\r\n      setValue(\"asegurado.fechaExtinsion\", \"\")\r\n      setValue(\"titular.id\", \"\")\r\n      setValue(\"titular.apellidoPaterno\", \"\")\r\n      setValue(\"titular.apellidoMaterno\", \"\")\r\n      setValue(\"titular.nombres\", \"\")\r\n      setValue(\"titular.estado\", \"\")\r\n      setValue(\"titular.fechaValidezSeguro\", \"\")\r\n      setValue(\"empleador.id\", \"\")\r\n      setValue(\"empleador.numeroPatronal\", \"\")\r\n      setValue(\"empleador.nombre\", \"\")\r\n      setValue(\"empleador.estado\", \"\")\r\n      setValue(\"empleador.fechaBaja\", \"\")\r\n      setValue(\"empleador.aportes\", \"\")\r\n    }\r\n  }, [matricula])\r\n\r\n  // useEffect(()=>{\r\n  //   console.log(\"Change \", asegurado, empleador, titular)\r\n  // }, [asegurado, empleador, titular])\r\n  console.log(\"WATCH\", watch(\"empleador.numeroPatronal\"), tipoAsegurado, asegurado, titular, empleador)\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formState.errors.asegurado?.matricula || !!formState.errors.asegurado?.id}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\", {\r\n                required: rules.required(),\r\n                pattern: rules.pattern(/^\\d{2}-\\d{4}-[aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ]{2,3}$/)\r\n              })} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  trigger(\"asegurado.matricula\")\r\n                  if(!formState.errors.asegurado?.matricula){\r\n                    // setValue(\"asegurado.matricula\", watch(\"asegurado.matricula\"))\r\n                    if(formState.dirtyFields.asegurado?.matricula)\r\n                      delete formState.dirtyFields.asegurado.matricula\r\n                    clearErrors([\"asegurado\", \"titular\", \"empleador\"])\r\n                    if(!buscar.data){\r\n                      buscar.refetch()\r\n                    }\r\n                    else{\r\n                      const {data: {records}} = buscar.data\r\n                      if(records.length == 1){\r\n                        const asegurado = records[0]\r\n                        onChange(asegurado)\r\n                      }\r\n                      else {\r\n                        aseguradoChooserRef.current?.show(true)\r\n                      }\r\n                    }\r\n                  }\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              {...register(\"asegurado.nombres\", {required: rules.required()})}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\", {\r\n                validate: {\r\n                  unknown: (value) =>{\r\n                    if(value != \"Alta\" && value != \"Baja\"){\r\n                      return \"Estado desconocido\";\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            >\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.estado?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Validez del seguro</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              isInvalid={!!formState.errors.asegurado?.fechaValidezSeguro}\r\n              {...register(\"asegurado.fechaValidezSeguro\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(asegurado.estado == \"Baja\"){\r\n                      if(!value) return \"Fecha sin especificar, se asume que el seguro ya no tiene validez\"\r\n                      if(moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)) return \"El seguro ya no tiene validez\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          {asegurado.tipo == 2 ? <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha extinsion</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)){\r\n                      return \"Se ha cumplido la fecha de extinsion\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaExtinsion?.message}</Form.Control.Feedback>\r\n          </Form.Group> : null}\r\n        </Form.Row>\r\n        <div className={asegurado.tipo == 2 ? \"\" : \"d-none\"}>\r\n          {/* {watch(\"titular.id\") ? <> */}\r\n          <h2 style={{fontSize: \"1.25rem\"}}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                {...register(\"titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                {...register(\"titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                {...register(\"titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                {...register(\"titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                isInvalid={!!formState.errors.titular?.estado}\r\n                {...register(\"titular.estado\", {\r\n                  validate: {\r\n                    unknown: (value) =>{\r\n                      if(titular.id && value != \"Alta\" && value != \"Baja\"){\r\n                        return \"Estado desconocido\";\r\n                      }\r\n                    }\r\n                  }\r\n                })}\r\n              >\r\n              </Form.Control>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.titular?.estado?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control \r\n                readOnly\r\n                isInvalid={!!formState.errors.titular?.fechaValidezSeguro}\r\n                {...register(\"titular.fechaValidezSeguro\", {\r\n                  validate: {\r\n                    afterDate: (value) => {\r\n                      const now = moment()\r\n                      if(titular.estado == \"Baja\"){\r\n                        if(!value) return \"Fecha sin especificar, se asume que el seguro ya no tiene validez\"\r\n                        if(moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)) return \"El seguro ya no tiene validez\"\r\n                      }\r\n                    }\r\n                  }\r\n                })}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.titular?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n          {/* </> : null} */}\r\n        </div>\r\n\r\n        <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formState.errors.empleador?.numeroPatronal}\r\n              {...register(\"empleador.numeroPatronal\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.numeroPatronal?.message}</Form.Control.Feedback>\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              {...register(\"empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formState.errors.empleador?.estado}\r\n              {...register(\"empleador.estado\", {\r\n                validate: {\r\n                  unknown: (value) =>{\r\n                    if(empleador.id && value != \"Alta\" && value != \"Baja\"){\r\n                      return \"Estado desconocido\";\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.estado?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              readOnly\r\n              isInvalid={!!formState.errors.empleador?.fechaBaja}\r\n              {...register(\"empleador.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(empleador.id && empleador.estado == \"Baja\"){\r\n                      if(!value) return \"Fecha sin especificar, se asume que el seguro ya no tiene validez\"\r\n                      if(moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)) return \"El seguro ya no tiene validez\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              isInvalid={!!formState.errors.empleador?.aportes}\r\n              {...register(\"empleador.aportes\", {\r\n                validate: {\r\n                  mora: (value) => {\r\n                    if(value == \"En Mora\"){\r\n                      return \"El empleador esta en mora\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.empleador?.aportes?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          title=\"Resultados\"\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado)=>{\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            onChange(asegurado)\r\n            aseguradoChooserRef.current!.show(false)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string,\r\n  regionalId: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n\r\n  const queryKey = [\"buscarMedico\", query];\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/prestaciones/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  buscar: (filter: {nombre?: string}, page: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Prestacion>>(\"prestaciones\", {\r\n      params: {\r\n        filter, page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [page, setPage] = useState(1)\r\n  const queryKey = [\"buscarPrestaciones\", query, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscar({\r\n      nombre: query||undefined\r\n    }, {\r\n      size: 50,\r\n      current: page\r\n    })\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(!buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data?.records || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    paginate\r\n    onPaginate={(e, size)=>{\r\n      setPage((page => page + 1))\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  regionalId: number\r\n  contrato: {\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId?: number,\r\n  activos?: number\r\n}\r\n\r\nexport const ProveedorService = {\r\n  buscar: (filter?: Filter, page?: Page) => {\r\n    return apiClient.get<Proveedor[]>(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Proveedor[]>(\"proveedores/buscar-nombre\", {\r\n      params: {nombre},\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Filter, Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: {filter:Filter} & Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  // const [query, setQuery] = useState(\"\")\r\n  // const [options, setOptions] = useState<Proveedor[]>([])\r\n\r\n  \r\n  const queryKey = [\"buscarProveedor\", props.filter]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    // return ProveedorService.buscarPorNombre(query)\r\n    return ProveedorService.buscar(props.filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnMount: false,\r\n    // enabled: false,\r\n    // onSuccess: ({data})=>{\r\n    //   setOptions(data)\r\n    // }\r\n  })\r\n\r\n  return <AsyncTypeahead flip \r\n    // filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    // options={options}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        const nombre_completo = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{}}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        title = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = proveedor.nombre\r\n        subtitle = \"Empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor } from \"../services/ProveedoresService\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regionalId: number | null,\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number | null,\r\n    nota: string,\r\n  }[],\r\n  proveedor?: Proveedor[]\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const proveedoresTypeaheadController = useController({\r\n    name:\"proveedor\",\r\n    control,\r\n    rules: {\r\n      required: rules.required()\r\n    }\r\n  })\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\",\r\n    keyName: \"prestacionId\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Prestacion</th>\r\n            <th>Proveedor</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    return <>\r\n                      <PrestacionesTypeahead\r\n                        id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                        className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        filterBy={(prestacion) => {\r\n                          const proveedor = watch(\"proveedor.0\")\r\n                          const prestacionesSolicitadas = watch(\"prestacionesSolicitadas\")\r\n                          return !proveedor ||\r\n                            proveedor.contrato.prestaciones.some(pc => pc.id == prestacion.id) && \r\n                            !prestacionesSolicitadas.some(ps=>ps.prestacionId == prestacion.id)\r\n                        }}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(prestacion) => {\r\n                          field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                    </>\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <ProveedoresTypeahead\r\n                  id={`solicitud-atencion-externa/proveedor`}\r\n                  filter={{\r\n                    activos: 1,\r\n                  }}\r\n                  className={proveedoresTypeaheadController.fieldState?.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!proveedoresTypeaheadController.fieldState?.error}\r\n                  filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                  onChange={proveedoresTypeaheadController.field.onChange}\r\n                  onBlur={proveedoresTypeaheadController.field.onBlur}\r\n                  selected={proveedoresTypeaheadController.field.value}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{proveedoresTypeaheadController.fieldState?.error?.message}</Form.Control.Feedback>\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const)} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import React, { ComponentProps, useRef, useEffect } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport { Medico } from \"../services/MedicosService\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medico?: Medico[]\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacionId: null,\r\n        nota: \"\"\r\n      }],\r\n      asegurado: {\r\n        apellidoPaterno: \"\",\r\n        apellidoMaterno: \"\",\r\n        nombres: \"\",\r\n        estado: \"\",\r\n        fechaExtinsion: \"\",\r\n        fechaValidezSeguro: \"\"\r\n      }\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    trigger,\r\n    formState,\r\n    control,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  console.log(\"Errors\", formState.errors)\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id: prestacion_id as number,\r\n        nota\r\n      }))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11}}) => {\r\n      dm11ViewerRef.current?.setUrl(urlDm11)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(\"onSubmit\", values)\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", undefined)\r\n                          setValue(\"proveedor\", undefined)\r\n                          trigger(\"medico\")\r\n                          trigger(\"proveedor\")\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medico\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        filterBy={(medico)=>medico.regionalId == watch(\"regionalId\")}\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!formState.errors.medico}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </FormProvider>\r\n}","import axios, { AxiosPromise } from \"axios\"\r\nimport { PaginatedResponse } from \"../../../../commons/services\"\r\nimport apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\ninterface EspecialidadesService {\r\n  buscar(filter: string): AxiosPromise<Especialidad[]>\r\n  buscar(filter: string, page: Page): AxiosPromise<PaginatedResponse<Especialidad>>\r\n  // buscar(filter: string, page?: Page): AxiosPromise<PaginatedResponse<Especialidad>|Especialidad[]>\r\n  importar(archivo: File, separador: string, formato: string): AxiosPromise\r\n}\r\n\r\nexport const EspecialidadesService: EspecialidadesService = {\r\n  buscar: (filter: string, page?: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(filter, page)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                current: 1,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"row\">\r\n      <Col>\r\n        <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import { AxiosResponse } from \"axios\"\r\nimport { forwardRef, useImperativeHandle, useRef } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, ModalProps, Row, Spinner } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"./ImperativeModal\"\r\nimport * as rules from \"./rules\"\r\n\r\ntype ImportOptions= {\r\n  separator: string,\r\n  format: string \r\n}\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\n\r\ntype Props = {\r\n  // import: (file: File, options: ImportOptions) => void\r\n  import: (\r\n    file: File,\r\n    options: ImportOptions\r\n  )=>Promise<any>\r\n} & ModalProps\r\n\r\nexport const ImportModal = forwardRef<ImperativeModalRef, Props>((props, ref)=>{\r\n  \r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importar = useMutation(({file, options}: {file: File, options: ImportOptions})=>{\r\n    return props.import(file, options)\r\n  })\r\n\r\n  // const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  // useImperativeHandle(ref, () => ({\r\n  //   show: (show: boolean)=>{\r\n  //     imperativeModalRef.current?.show(show)\r\n  //   }\r\n  // }),[])\r\n  \r\n  return <ImperativeModal ref={ref} {...props}>\r\n  <Modal.Header>\r\n    Importar Datos\r\n  </Modal.Header>\r\n  <Modal.Body>\r\n    <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador: separator, formatoSaltoLinea: format})=>{\r\n      importar.mutate({\r\n        file: archivo![0],\r\n        options: {\r\n          separator,\r\n          format\r\n        }\r\n      })\r\n    })}>\r\n      {importar.data ? <Alert variant={importar.isError ? \"danger\" : \"success\"}>\r\n        {importar.isError ? \"Error\" : \"Importacion existosa\"}\r\n      </Alert> :  null}\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Archivo</Form.Label>\r\n        <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n          <Form.File\r\n            isInvalid={!!formState.errors.archivo}\r\n            {...register(\"archivo\", {\r\n              required: rules.required(),\r\n            })}\r\n            feedback={formState.errors.archivo?.message}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Separador</Form.Label>\r\n        <Col xs={\"auto\"}>\r\n          <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n            isInvalid={!!formState.errors.separador}\r\n            {...register(\"separador\", {\r\n              required: rules.required()\r\n            })}\r\n          ></Form.Control>\r\n          <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n        isInvalid={!!formState.errors.aggrement}\r\n        feedback={formState.errors.aggrement?.message}\r\n        {...register(\"aggrement\", {\r\n          required: rules.required()\r\n        })}\r\n      ></Form.Check>\r\n    </Form>\r\n  </Modal.Body>\r\n  <Modal.Footer>\r\n      <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">\r\n        {importar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Importar\r\n      </Button>\r\n      <Button>Cancelar</Button>\r\n  </Modal.Footer>\r\n</ImperativeModal>\r\n\r\n})","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<PaginatedResponse<Prestacion>>(\"/prestaciones\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  ver: (id: number) => {\r\n    return apiClient.get<Prestacion>(`prestaciones/${id}`)\r\n  },\r\n  registrar: (nombre: string) => {\r\n    return apiClient.post<Prestacion>(\"prestaciones\", {\r\n      nombre\r\n    })\r\n  },\r\n  actualizar: (id: number, nombre: string) => {\r\n    return apiClient.put<Prestacion>(`prestaciones/${id}`, {\r\n      nombre\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`prestaciones/${id}`)\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/prestaciones/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const PrestacionesFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { FaSync, FaEdit, FaTrash } from \"react-icons/fa\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { ImportModal } from \"../../../../commons/components/ImportModal\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { PrestacionesService } from \"../services\"\r\nimport { PrestacionesFilterForm } from \"./PrestacionesFilterForm\"\r\n// import { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\n// import { ImportarPrestaciones } from \"./ImportarPrestaciones\"\r\n\r\nexport const PrestacionesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscarPrestaciones = useQuery([\"buscarPrestaciones\", page, filter], ()=>{\r\n    return PrestacionesService.buscar(page, filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return PrestacionesService.eliminar(id)\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarPrestaciones.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarPrestaciones.isError) {\r\n      const { error } = buscarPrestaciones\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarPrestaciones.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((prestacion, index)=>{\r\n      return <tr key={prestacion.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{prestacion.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-prestacion-${prestacion.id}`}\r\n            />\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} replace to={{\r\n                pathname: `/clinica/configuracion/prestaciones/${prestacion.id}/editar`,\r\n                state: {\r\n                  prestacion\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(prestacion.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\">Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Servicios subrogados</h2>\r\n    <Row className=\"mb-2\">\r\n      <Col className=\"ml-auto pr-0\" xs=\"auto\" >\r\n        <Button onClick={()=>buscarPrestaciones.refetch()}><FaSync /></Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Dropdown as={ButtonGroup}>\r\n          <Button as={Link} replace to={\"/clinica/configuracion/prestaciones/registrar\"}>Nuevo</Button>\r\n          <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={()=>{\r\n              console.log(importModalRef)\r\n              importModalRef.current && importModalRef.current.show(true)\r\n            }}\r\n            >Importar</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </Col>\r\n    </Row>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <PrestacionesFilterForm onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportModal ref={importModalRef}\r\n      import={(file, options)=>{\r\n        return PrestacionesService.importar(file, options.separator, options.format)\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Alert, Button, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery} from \"react-query\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Prestacion, PrestacionesService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\n\r\nexport type Inputs = {\r\n  nombre: string\r\n}\r\n\r\nexport const PrestacionForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    prestacion: Prestacion\r\n  }>()\r\n  \r\n  const { state} = history.location\r\n  \r\n  const prestacion = state?.prestacion\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation(({nombre}: Inputs)=>{\r\n    return id ? PrestacionesService.actualizar(parseInt(id), nombre) : PrestacionesService.registrar(nombre)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }\r\n  })\r\n\r\n  const verPrestacion = useQuery([\"verPrestacion\", id], ()=>{\r\n    return PrestacionesService.ver(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !prestacion,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(verPrestacion.data?.data || prestacion){\r\n      setValue(\"nombre\", (verPrestacion.data?.data || prestacion).nombre)\r\n    }\r\n  }, [verPrestacion.data])\r\n\r\n  const renderBody = ()=>{\r\n    if(verPrestacion.isFetching){\r\n      return <Spinner animation=\"border\">Cargando</Spinner>\r\n    }\r\n    const error = verPrestacion.error as AxiosError\r\n    if(error){\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? guardar.error.response?.data?.message || guardar.error.message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Group>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.nombre}\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form>\r\n  }\r\n\r\n\r\n  return <Modal\r\n    show\r\n    centered\r\n    onHide={()=>{\r\n      history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }}\r\n  >\r\n    <Modal.Header>\r\n      {id ? \"Editar\" : \"Registrar\" }\r\n    </Modal.Header> \r\n    <Modal.Body>\r\n      {renderBody()}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      {!id ? <Button \r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = true\r\n        }}\r\n      >\r\n        {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar y continuar\r\n      </Button> : null}\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = false\r\n        }}\r\n      >\r\n        {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  },\r\n  apellidoPaterno: string,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  sexo: string,\r\n  especialidadId: number\r\n  especialidad: string\r\n  regionalId: number\r\n}\r\n\r\nexport type Filter = {\r\n  ci?: string,\r\n  nombre?: string,\r\n  especialidadId?: number\r\n  regionalId?: number\r\n  incluirProveedores?: boolean\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscar: (filter: Filter, page: Page) => {\r\n    return apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params:{\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  load: (id: number) => {\r\n    return apiClient.get<Medico>(`medicos/${id!}`);\r\n  },\r\n  registrar: (ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.post<Medico>(\"medicos\", {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  actualizar: (id: number, ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.put<Medico>(`medicos/${id}`, {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`medicos/${id!}`)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const MedicosFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { MedicosService, Filter } from \"../services\"\r\nimport { MedicosFilterForm } from \"./MedicosFilterForm\"\r\n\r\nexport default () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarMedicos\", page.current, page.size], () => {\r\n    return MedicosService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return MedicosService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {/* {item.ci.raiz}-{item.ci.complemento} */}\r\n          {item.ci.raiz}{item.ci.complemento ? `-${item.ci.complemento}` : \"\"}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {nombreCompleto(item.apellidoPaterno, item.apellidoMaterno, item.nombres)}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.especialidad}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `/clinica/medicos/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Medicos</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <MedicosFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>C.I.</th>\r\n          <th>Nombre</th>\r\n          <th>Especialidad</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Especialidad, EspecialidadesService } from \"../../especialidades/services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const EspecialidadesTypeahead = (props: {onLoad?: (options: Especialidad[])=>void} & Omit<AsyncTypeaheadProps<Especialidad>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"obtenerEspecialidades\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return EspecialidadesService.buscar(\"\")\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    // onSuccess: ({data})=>{\r\n    //   props.onLoad && props.onLoad(data)\r\n    // }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    positionFixed\r\n    align=\"left\"\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Medico, MedicosService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { Redirect, useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components/RegionalesTypeahead'\r\nimport { EspecialidadesTypeahead } from './EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\nexport default ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    medico: Medico\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? MedicosService.actualizar(parseInt(id), {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    ) : MedicosService.registrar({\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    )\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.goBack()\r\n    }\r\n  })\r\n\r\n  const load = useQuery([\"loadMedico\", id], ()=>{\r\n    return MedicosService.load(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.medico,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const medico = load.data?.data || history.location.state?.medico\r\n\r\n  useEffect(()=>{\r\n    if(medico){\r\n      setValue(\"ci\", String(medico.ci.raiz))\r\n      setValue(\"ciComplemento\", medico.ci.complemento)\r\n      setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      setValue(\"nombres\", medico.nombres)\r\n      // setValue(\"especialidad\",[{id: medico.especialidadId, nombre: medico.especialidad}])\r\n      // setValue(\"regional\", [{id: medico.regionalId}])\r\n    }\r\n  }, [medico])\r\n\r\n  useEffect(()=>{\r\n    if(medico && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == medico.regionalId))\r\n    }\r\n  }, [medico, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(medico && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == medico.especialidadId))\r\n    }\r\n  }, [medico, especialidades])\r\n\r\n  if(guardar.status == \"success\" && !continueRef.current){\r\n    <Redirect to=\"/clinica/medicos\"/>\r\n  }\r\n\r\n  // if(load.isFetching){\r\n  //   return <Spinner animation=\"border\">Cargando</Spinner>\r\n  // }\r\n  // const error = load.error as AxiosError\r\n  // if(error){\r\n  //   return <Alert variant=\"danger\">\r\n  //     {error.response?.data?.message || error.message}\r\n  //   </Alert>\r\n  // }\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizar\" : \"Registrar Medico\"}</h1>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"nombres\", {\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <div className=\"m-n1\">\r\n        {!id ? <Button \r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = true\r\n          }}\r\n        >\r\n          {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar y continuar\r\n        </Button> : null}\r\n        <Button\r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = false\r\n          }}\r\n        >\r\n          {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n    <Modal show={load.isFetching || load.isError} centered >\r\n      <Modal.Body>\r\n        {load.isFetching ? \r\n          <><Spinner animation=\"border\"/>Cargando</> : \r\n          load.isError ? <Alert variant=\"danger\">\r\n               {(load.error as AxiosError).response?.data?.message || (load.error as AxiosError).message}\r\n          </Alert> : null}\r\n      </Modal.Body>\r\n    </Modal>\r\n  </>\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios, { AxiosPromise } from 'axios'\r\nimport { Medico } from \"../../medicos/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nit: number|null\r\n  nombre: string|null\r\n  medico?: Medico\r\n  tipoId: number\r\n  tipo: string\r\n  regionalId: number\r\n  contrato: {\r\n    inicio: string\r\n    fin: string\r\n    tipoId: number\r\n    tipo: string\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId?: number\r\n}\r\n\r\n\r\ninterface IProveedorService {\r\n  buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  cargar(id: number): AxiosPromise<Proveedor>\r\n  registrar(fields: {\r\n    tipoId: 1,\r\n    nit?: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit?: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  actualizar(id: number, fields: {\r\n    tipoId: 1,\r\n    nit?: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit?: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  eliminar(id: number): AxiosPromise\r\n\r\n  [key: string]: any\r\n}\r\n\r\nexport const ProveedoresService: IProveedorService = {\r\n  // buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  // buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  buscar: (filter: Filter, page?: Page) => {\r\n    return apiClient.get(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  cargar: (id) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  registrar: (fields) => {\r\n    return apiClient.post(\"proveedores\", keysToUnderscore(fields))\r\n  },\r\n  actualizar: (id, fields) =>{\r\n    return apiClient.put(`proveedores/${id}`, keysToUnderscore(fields))\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  actualizarInformacionDeContacto(id: number, infoContacto: {\r\n    municipioId: number,\r\n    direccion: string,\r\n    ubicacion: {\r\n      latitud: number,\r\n      longitud: number\r\n    },\r\n    telefono1: number,\r\n    telefono2?: number\r\n  }){\r\n    return apiClient.put(`proveedores/${id}/contacto`, keysToUnderscore(infoContacto))\r\n  }\r\n\r\n}","import { apiClient } from \"../../../../commons/services\"\r\n\r\nexport const ContratosService = {\r\n  registrar: (proveedorId: number, data: {\r\n    inicio: string,\r\n    fin: string,\r\n    prestacion_ids: number[] \r\n  }) =>{\r\n    return apiClient.post(`proveedores/${proveedorId}/contratos`,  data)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const ProveedoresFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { ProveedoresService, Filter } from \"../services\"\r\nimport { ProveedoresFilterForm } from \"./ProveedoresFilterForm\"\r\n\r\nexport const ProveedoresIndex = () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarProveedoress\", filter, page], () => {\r\n    return ProveedoresService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return ProveedoresService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const proveedores = data!.data.records\r\n    return proveedores.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.medico && nombreCompleto(item.medico.apellidoPaterno, item.medico.apellidoMaterno, item.medico.nombres) || item.nombre }\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.tipo}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `${path}/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Proveedores</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <ProveedoresFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead className=\"text-center\">\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}>Tipo</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import { useEffect, useState } from \"react\"\r\nimport { Button, Form, Col, Spinner } from \"react-bootstrap\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Redirect, useParams, useHistory } from \"react-router\"\r\nimport { useMutation } from \"react-query\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Regional } from \"../../../../commons/services/RegionalesService\"\r\nimport { Proveedor, ProveedoresService } from '../services'\r\n\r\ntype Inputs = {\r\n  nit: string,\r\n  nombre: string,\r\n  regional: Regional\r\n}\r\n\r\ntype Props = {\r\n  proveedor?: Proveedor,\r\n  noRedirect?: boolean,\r\n  next?: () => void\r\n}\r\n\r\nexport const ProveedorEmpresaForm = ({proveedor, noRedirect=false, next}: Props)=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    proveedor?: Proveedor,\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation((values: Inputs)=>{\r\n    return id ? ProveedoresService.actualizar(parseInt(id), {\r\n      tipoId: 2,\r\n      nit: parseInt(values.nit) || undefined,\r\n      nombre: values.nombre,\r\n      regionalId: values.regional!.id\r\n    }) : ProveedoresService.registrar({\r\n      tipoId: 2,\r\n      nit: parseInt(values.nit) || undefined,\r\n      nombre: values.nombre,\r\n      regionalId: values.regional!.id\r\n    })\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(next){\r\n        history.replace(history.location.pathname, {\r\n          proveedor: guardar.data.data\r\n        })\r\n        next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${guardar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <Form onSubmit={handleSubmit((values)=>{\r\n    guardar.mutate(values)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>NIT</Form.Label>\r\n        <Form.Control\r\n          // isInvalid={formState}\r\n          {...register(\"nit\", {\r\n            pattern: rules.pattern(/\\d*/)\r\n          })}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          name=\"regional\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <>\r\n              <RegionalesTypeahead\r\n                id=\"medicos-form/regionales-typeahead\"\r\n                onLoad={(regionales)=>setRegionales(regionales)}\r\n                className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                isInvalid={!!fieldState.error}\r\n                selected={field.value ? [field.value] : []}\r\n                onChange={(regionales)=>field.onChange(regionales.length && regionales[0])}\r\n                onBlur={field.onBlur}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n            </>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button\r\n      type=\"submit\"\r\n    >\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n      Guardar\r\n    </Button>\r\n  </Form>\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, InputGroup, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Proveedor, ProveedoresService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components'\r\nimport { EspecialidadesTypeahead } from '../../medicos/components/EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  nit: string\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\n\r\ntype Props = {\r\n  proveedor?: Proveedor,\r\n  noRedirect?: boolean,\r\n  next?: () => void\r\n}\r\n\r\nexport const ProveedorMedicoForm = ({proveedor, noRedirect=false, next}: Props)=>{\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n  const history = useHistory()\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nit: proveedor?.nit?.toString() || \"\",\r\n      ci: proveedor?.medico?.ci?.raiz.toString() || \"\",\r\n      ciComplemento: proveedor?.medico?.ci.complemento || \"\",\r\n      apellidoPaterno: proveedor?.medico?.apellidoPaterno || \"\",\r\n      apellidoMaterno: proveedor?.medico?.apellidoMaterno || \"\",\r\n      nombres: proveedor?.medico?.nombres,\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? ProveedoresService.actualizar(parseInt(id), {\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    }) : ProveedoresService.registrar({\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    })\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == proveedor.regionalId))\r\n    }\r\n  }, [proveedor, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == proveedor.medico?.especialidadId))\r\n    }\r\n  }, [proveedor, especialidades])\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(next){\r\n        history.replace(history.location.pathname, {\r\n          proveedor: guardar.data.data\r\n        })\r\n        next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${guardar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>NIT</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nit}\r\n            {...register(\"nit\", {\r\n              pattern: rules.pattern(/\\d*/)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ciComplemento}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoPaterno}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoMaterno}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nombres}\r\n            {...register(\"nombres\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n      >\r\n        {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n  </>\r\n}","import { useState, useEffect } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { LatLngExpression } from \"leaflet\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Departamento, Provincia, Municipio } from \"../../../../commons/services\"\r\nimport { DepartamentosTypeahead, ProvinciasTypeahead, MunicipiosTypeahead, LocationInput } from \"../../../../commons/components\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { FaLessThanEqual } from \"react-icons/fa\"\r\n\r\n\r\ntype Inputs = {\r\n  departamento: Departamento[]\r\n  provincia: Provincia[]\r\n  municipio: Municipio[]\r\n  direccion: string,\r\n  ubicacion: LatLngExpression\r\n  telefono1: number,\r\n  telefono2: number\r\n}\r\n\r\ntype Props = {\r\n  next?: ()=>void\r\n}\r\n\r\nexport const ContactoForm = (props: Props)=>{\r\n  const {id} = useParams<{id: string}>()\r\n  const history = useHistory<{\r\n    proveedor?: Proveedor,\r\n  }>()\r\n  const [departamentos, setDepartamentos] = useState<Departamento[]>([])\r\n  const [provincias, setProvincias] = useState<Provincia[]>([])\r\n  const [municipios, setMunicipios] = useState<Municipio[]>([])\r\n  const [showLoader, setShowLoader] = useState(false)\r\n  const {\r\n    register,\r\n    control,\r\n    watch,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      departamento: [],\r\n      provincia: [],\r\n      municipio: [],\r\n      ubicacion: [-17.78629, -63.18117]\r\n    }\r\n  })\r\n\r\n  const cargar = useQuery([\"cargarProveedor\", id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !history.location.state?.proveedor,\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const guardar = useMutation((values: Inputs) =>{\r\n    let lat, lng\r\n    if(Array.isArray(values.ubicacion)){\r\n      [lat, lng] = values.ubicacion\r\n    }\r\n    else{\r\n      ({lat, lng} = values.ubicacion)\r\n    }\r\n    return ProveedoresService.guardarInformacionDeContacto({\r\n      municipioId: values.municipio[0].id,\r\n      direccion: values.direccion,\r\n      ubicacion: {\r\n        latitud: lat,\r\n        longitud: lng\r\n      },\r\n      telefono1: values.telefono1,\r\n      telefono2: values.telefono2 || undefined\r\n    })\r\n  })\r\n\r\n  const proveedor = history.location.state?.proveedor || cargar.data?.data\r\n\r\n  useEffect(()=>{\r\n    if(cargar.data){\r\n      if(props.next){\r\n        props.next()\r\n      }\r\n      else {\r\n        history.replace(`/clinica/proveedores/${id || cargar.data.data.id}`)\r\n      }\r\n    }\r\n  }, [cargar.data])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isLoading){\r\n      setShowLoader(true)\r\n    }\r\n  }, [cargar.isLoading])\r\n\r\n  const renderLoader = () =>{\r\n    return <Modal centered show={showLoader} onHide={()=>{\r\n      if(cargar.isError){\r\n        setShowLoader(false)\r\n      }\r\n    }}>\r\n      <Modal.Header>\r\n        Cargando\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {cargar.isLoading ? <Spinner animation=\"border\"></Spinner> : <Alert variant=\"danger\">\r\n          {cargar.error?.response?.message || cargar.error?.message}\r\n        </Alert>}\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  return <Form>\r\n    {renderLoader()}\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Información de contacto</h1>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Departamento</Form.Label>\r\n        <Controller\r\n          name=\"departamento\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <DepartamentosTypeahead \r\n              id=\"contacto-form/departamentos\"\r\n              onLoad={(departamentos)=>{\r\n                setDepartamentos(departamentos)\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Provincia</Form.Label>\r\n        <Controller\r\n          name=\"provincia\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <ProvinciasTypeahead\r\n              id=\"contacto-form/provincias\"\r\n              onLoad={(provincias)=>{\r\n                setProvincias(provincias)\r\n              }}\r\n              filterBy={(provincia) => {\r\n                const departamento = watch(\"departamento\")\r\n                return !!departamento.length && provincia.departamentoId == departamento[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Municipio</Form.Label>\r\n        <Controller\r\n          name=\"municipio\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            return <MunicipiosTypeahead\r\n              id=\"contacto-form/municipios\"\r\n              onLoad={(municipios)=>{\r\n                setMunicipios(municipios)\r\n              }}\r\n              filterBy={(municipio) => {\r\n                const provincia = watch(\"provincia\")\r\n                return !!provincia.length && municipio.provinciaId == provincia[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Direccion</Form.Label>\r\n        <Form.Control as=\"textarea\" />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Ubicación</Form.Label>\r\n        <Controller\r\n          name=\"ubicacion\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            console.log(\"Location\", field)\r\n            return <LocationInput\r\n              center={field.value || [-17.78629, -63.18117]}\r\n              value={field.value}\r\n              onChange={field.onChange}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 1</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            required: rules.required(),\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 2</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button>\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      <span className=\"ml-2 align-middle\">Guardar</span>\r\n    </Button>\r\n    {props.next ? <Button variant=\"link\" onClick={()=>{\r\n      props.next && props.next()\r\n    }}\r\n    >\r\n      Omitir\r\n    </Button> : null}\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Button, Col, Form } from \"react-bootstrap\"\r\nimport { Controller, useFieldArray, useFormContext } from \"react-hook-form\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"../../solicitud_atencion_externa/components/PrestacionesTypeahead\"\r\nimport { Prestacion } from \"../../prestaciones/services\"\r\nimport { ArancelesControl } from \"./ArancelesControl\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\n\r\nexport type Inputs = {\r\n  prestaciones: {\r\n    id: string\r\n    prestacion: Prestacion,\r\n    // aranceles: {\r\n    //   nombre: string,\r\n    //   precio: string,\r\n    //   etiqueta: string\r\n    // }[]\r\n  }[]\r\n}\r\n\r\nexport const PrestacionesContratadasControl = ()=>{\r\n  const {\r\n    register,\r\n    control,\r\n    trigger,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n  const {\r\n    fields,\r\n    append,\r\n    remove\r\n  } = useFieldArray({\r\n    name: \"prestaciones\",\r\n    control\r\n  })\r\n\r\n  return <div>\r\n    <h2 style={{fontSize: \"1.25rem\"}}>Servicios subrogados</h2>\r\n    {fields.map((field,index)=>{\r\n      return <Form.Row key={field.id} className=\"py-2 border-bottom\">\r\n        <Form.Group as={Col} xs={12}>\r\n          {/* <Form.Label>\r\n            Prestaciones\r\n          </Form.Label> */}\r\n            <Controller\r\n              name={`prestaciones.${index}.prestacion` as const}\r\n              control={control}\r\n              rules={{\r\n                required: rules.required(),\r\n              }}\r\n              render={({ field, fieldState }) => {\r\n                return <>\r\n                <Form.Row>\r\n                  <Col>\r\n                    <PrestacionesTypeahead\r\n                      id={`proveedor-contrato/prestaciones.${index}`}\r\n                      className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                      isInvalid={!!fieldState.error}\r\n                      filterBy={(prestacion) => {\r\n                        const prestaciones = watch(\"prestaciones\")\r\n                        return !prestaciones.some(p=>p.prestacion?.id == prestacion.id)\r\n                      }}\r\n                      selected={field.value ? [field.value]:[]}\r\n                      onChange={(prestacion) => {\r\n                        field.onChange(prestacion.length ? prestacion[0] : 0)\r\n                      }}\r\n                      onBlur={field.onBlur}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                  </Col>\r\n                  <Col xs=\"auto\">\r\n                      <Button variant=\"danger\" onClick={()=>{\r\n                        remove(index)\r\n                      }}>\r\n                        Quitar\r\n                      </Button>\r\n                  </Col>\r\n                </Form.Row>\r\n                </>\r\n              }}\r\n            />\r\n        </Form.Group>\r\n        {/* <Col className=\"px-3\" xs={12}>\r\n          <ArancelesControl index={index} />\r\n        </Col> */}\r\n      </Form.Row>\r\n    })}\r\n    <Form.Row className=\"py-2\">\r\n      <Col className=\"ml-auto\" xs={\"auto\"}>\r\n        <Button\r\n          onClick={()=>{\r\n            append({\r\n              // aranceles: [{\r\n              //   nombre: \"\",\r\n              //   precio: \"\",\r\n              //   etiqueta: \"\"\r\n              // }]\r\n            })\r\n          }}\r\n        >Agregar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </div>\r\n}","import { useEffect } from \"react\"\r\nimport { Alert, Button, Col, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useParams, useHistory } from \"react-router\"\r\nimport { useMutation } from \"react-query\"\r\nimport { PrestacionesContratadasControl, Inputs as PCInputs } from \"./PrestacionesContratadasControl\"\r\nimport { ContratosService } from \"../services\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\n\r\ntype Inputs = {\r\n  inicio: string,\r\n  fin: string,\r\n  tipoContratoId: string,\r\n  modalidadPagoId: string,\r\n  contrato: FileList\r\n} & PCInputs\r\n\r\nexport const ContratoForm = (props: {next?: ()=>void})=>{\r\n  const {idProveedor} = useParams<{\r\n    idProveedor: string\r\n  }>()\r\n  const history = useHistory<{\r\n    proveedor: {id: number}\r\n  }>()\r\n  const methods = useForm<Inputs>({\r\n    defaultValues: {\r\n      prestaciones: [{\r\n        // aranceles: [{}]\r\n      }]\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((values: Inputs)=>{\r\n    return ContratosService.registrar(parseInt(idProveedor) || history.location.state!.proveedor!.id, {\r\n      inicio: values.inicio,\r\n      fin: values.fin,\r\n      prestacion_ids: values.prestaciones.map(p=>p.prestacion.id)\r\n    })\r\n  })\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    formState,\r\n    control\r\n  } = methods\r\n\r\n  useEffect(()=>{\r\n    if(guardar.data){\r\n      if(props.next){\r\n        props.next()\r\n      }\r\n      else{\r\n        history.replace(`/clinica/proveedores/${parseInt(idProveedor) || history.location.state!.proveedor!.id}#contratos`)\r\n      }\r\n    }\r\n  }, [guardar.data])\r\n\r\n  return <FormProvider {...methods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(values)\r\n      guardar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Contrato</h1>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Inicio</Form.Label>\r\n          <Form.Control type=\"date\"\r\n            isInvalid={!!formState.errors.inicio}\r\n            {...register(\"inicio\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.inicio?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Fin</Form.Label>\r\n          <Form.Control type=\"date\"\r\n            isInvalid={!!formState.errors.fin}\r\n            {...register(\"fin\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.fin?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      {/* <Form.Row>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Tipo de contrato</Form.Label>\r\n          <Form.Row className=\"is-invalid\">\r\n            <Col><Form.Check inline type=\"radio\" label=\"Contrato\" value=\"1\"\r\n              {...register(\"tipoContratoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n            <Col><Form.Check inline type=\"radio\" label=\"Convenio\" value=\"2\"\r\n              {...register(\"tipoContratoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n          </Form.Row>\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors?.tipoContratoId?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={6}>\r\n          <Form.Label>Modalidad de pago</Form.Label>\r\n          <Form.Row className=\"is-invalid text-nowrap\">\r\n            <Col><Form.Check inline type=\"radio\" label=\"Mensualizado\" value=\"1\"\r\n              {...register(\"modalidadPagoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n            <Col><Form.Check inline type=\"radio\" label=\"Por trabajo realizado\" value=\"2\"\r\n              {...register(\"modalidadPagoId\", {\r\n                required: rules.required()\r\n              })}\r\n            /></Col>\r\n          </Form.Row>\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors?.modalidadPagoId?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row> */}\r\n      {/* <Form.Row>\r\n        <Form.Group as={Col} xs=\"auto\">\r\n          <Form.Row>\r\n            <Form.Label column xs=\"auto\">Contrato</Form.Label>\r\n            <Form.File\r\n              as={Col}\r\n              className=\"my-auto\"\r\n              isInvalid={!!formState.errors.contrato}\r\n              {...register(\"contrato\")}\r\n              feedback={formState.errors.contrato?.message}\r\n            />\r\n          </Form.Row>\r\n        </Form.Group>\r\n      </Form.Row> */}\r\n      <Form.Row>\r\n        <Col>\r\n          <PrestacionesContratadasControl />\r\n        </Col>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\">\r\n            {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n            <span className=\"ml-1 align-middle\">Guardar</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  </FormProvider>\r\n}","\r\nimport { useState, useEffect } from \"react\"\r\nimport { Alert, Form, Col, Modal, Row, Spinner } from \"react-bootstrap\"\r\nimport { useHistory, useParams } from \"react-router\"\r\nimport { useQuery } from \"react-query\"\r\nimport { ProveedorEmpresaForm } from \"./ProveedorEmpresaForm\"\r\nimport { ProveedorMedicoForm } from \"./ProveedorMedicoForm\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { ContactoForm } from \"./ContactoForm\"\r\nimport { ContratoForm } from \"./ContratoForm\"\r\n\r\nexport const ProveedorForm = ()=>{\r\n  const [tipo, setTipo] = useState(0)\r\n  const [step, setStep] = useState(1)\r\n  const [showLoader, setShowLoader] = useState(false)\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n  const history = useHistory<{\r\n    proveedor: Proveedor,\r\n    // step: number\r\n  }>()\r\n\r\n  const cargar = useQuery([\"cargarProveedor\",id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id!))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.proveedor,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const proveedor = cargar.data?.data || history.location.state?.proveedor\r\n\r\n  useEffect(()=>{\r\n    if(proveedor){\r\n      setTipo(proveedor.tipoId)\r\n    }\r\n  }, [proveedor])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isLoading){\r\n      setShowLoader(true)\r\n    }\r\n  }, [cargar.isLoading])\r\n\r\n  const renderLoader = () => {\r\n    return <Modal centered show={showLoader} onHide={()=>{\r\n      if(cargar.isError){\r\n        setShowLoader(false)\r\n      }\r\n    }}>\r\n      <Modal.Header>\r\n        Cargando\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {cargar.isLoading ? <Spinner animation=\"border\"></Spinner> : <Alert variant=\"danger\">\r\n          {cargar.error?.response?.message || cargar.error?.message}\r\n        </Alert>}\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  console.log(tipo, step)\r\n\r\n  const renderForm = () => {\r\n    if(tipo == 1) {\r\n      return <ProveedorMedicoForm proveedor={proveedor}  \r\n        next={()=>{\r\n          if(!id){\r\n            setStep(2)\r\n          }\r\n        }}\r\n      />\r\n    } \r\n    if(tipo == 2){\r\n      return <ProveedorEmpresaForm proveedor={proveedor} \r\n        next={()=>{\r\n          if(!id){\r\n            setStep(2)\r\n          }\r\n        }}\r\n      />\r\n    }\r\n    return null\r\n  }\r\n\r\n  if(step == 1){\r\n    return <>\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizacion de Proveedor\" : \"Registro de Proveedor\"}</h1>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={\"auto\"}>Tipo de proveedor</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check disabled={!!id} inline type=\"radio\" label=\"Médico\" value={1} checked={tipo == 1} onChange={(e)=>{\r\n            if(e.target.checked && !id)\r\n              setTipo(1) \r\n          }} ></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"Empresa\" value={2} checked={tipo == 2} onChange={(e)=>{\r\n            if(e.target.checked && !id)\r\n              setTipo(2) \r\n          }} ></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      {renderLoader()}\r\n      {renderForm()}\r\n    </>\r\n  }\r\n  if(step == 2){\r\n    return <ContactoForm next={()=>{\r\n      setStep(3)\r\n    }}/>\r\n  }\r\n  if(step == 3){\r\n    return <ContratoForm next={()=>{\r\n      history.replace(`/clinica/proveedores/${history.location.state!.proveedor.id}`)\r\n    }} />\r\n  }\r\n  return null\r\n\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, /*FaCoins,*/ FaHandshake, FaUserMd } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { EspecialidadesIndex } from './especialidades/components/EspecialidadesIndex';\r\nimport { PrestacionesIndex, PrestacionForm } from './prestaciones/componentes';\r\nimport MedicosIndex from './medicos/components/MedicosIndex';\r\nimport MedicosForm from './medicos/components/MedicosForm';\r\nimport { ProveedoresIndex, ProveedorForm, ContactoForm, ContratoForm } from './proveedores/components';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención externa\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion/medicos\",\r\n        path: `${url}/medicos`,\r\n        title: \"Medicos\",\r\n        icon: <FaUserMd />,\r\n      },\r\n      {\r\n        id: \"configuracion/proveedores\",\r\n        path: `${url}/proveedores`,\r\n        title: \"Proveedores\",\r\n        icon: <FaHandshake />,\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        // path: `${url}/configuracion`,\r\n        title: \"Configuración\",\r\n        icon: <FaCog />,\r\n        items: [\r\n          {\r\n            id: \"configuracion/especialidades\",\r\n            path: `${url}/configuracion/especialidades`,\r\n            title: \"Especialidades\",\r\n            icon: <FaCog />,\r\n          },\r\n          {\r\n            id: \"configuracion/prestaciones\",\r\n            path: `${url}/configuracion/prestaciones`,\r\n            title: \"Servicios subrogados\",\r\n            icon: <FaCog />,\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/medicos`}>\r\n        <MedicosIndex />\r\n      </Route>\r\n      <Route exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}>\r\n        <MedicosForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores`}>\r\n        <ProveedoresIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/registrar`}>\r\n        <ProveedorForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/:id/contacto`}>\r\n        <ContactoForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/:idProveedor/contratos/registrar`}>\r\n        <ContratoForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/configuracion/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route>\r\n      {/* <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    <Route exact path={[`${url}/configuracion/prestaciones/registrar`, `${url}/configuracion/prestaciones/:id/editar`]}>\r\n        <PrestacionForm />\r\n      </Route>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"¿Está seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripción</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potosí</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseñas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarán</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Información personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Información de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Galeno - DM11</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Galeno - DM11</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  \"headers\": {\r\n    \"Accept\": \"application/json\"\r\n  },\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","import {LatLngExpression} from \"leaflet\"\r\n\r\nexport const latLngExpressionToString = (value?: LatLngExpression|null) => {\r\n  let lat, lng\r\n  if(value){\r\n    if(Array.isArray(value)){\r\n      [lat, lng] = value\r\n    }\r\n    else{\r\n      ({lat, lng} = value)\r\n    }\r\n    return `${lat.toFixed(8)}, ${lng.toFixed(8)}`\r\n  }\r\n  return \"\"\r\n}","export * from \"./latLngExpressionToString\"\r\n\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}