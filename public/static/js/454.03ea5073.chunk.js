"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[454],{16454:function(e,r,n){n.r(r),n.d(r,{ClinicaApp:function(){return jr},default:function(){return vr}});var i=n(72791),a=n(79271),o=n(85908),l=n(56355),t=n(89983),s=function(e){return(0,t.w_)({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{d:"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z"}},{tag:"path",attr:{d:"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z"}},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z"}},{tag:"polygon",attr:{points:"14.4,40 10,40 10,44 14.1,44"}}]},{tag:"circle",attr:{cx:"36",cy:"36",r:"10"}},{tag:"path",attr:{fill:"#fff",d:"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z"}}]})(e)},d=n(7692),c=n(18489),u=n(23430),h=n(2461),m=n(43360),x=n(91933),p=n(91523),j=n(58031),v=n(55086),g=n(32857),Z=function(e,r){return v.x1.get("empleadores",{params:{filter:(0,g.HN)(r),page:e}})},f=function(e,r){return v.x1.get("/lista-mora",{params:(0,g.HN)({page:r,filter:e})})},b=function(e){return v.x1.post("lista-mora",{empleador_id:e})},y=function(e){return v.x1.delete("lista-mora/".concat(e))},N=n(77101),C=n(2677),I=n(87705),w=n(80184),R=function(e){var r=(0,I.cI)(),n=r.handleSubmit,i=r.register,a=r.reset;return(0,w.jsxs)(N.Z,{onSubmit:n((function(r){var n={};r.nombre&&(n.nombre=r.nombre),r.numeroPatronal&&(n.numeroPatronal=r.numeroPatronal),e.onApply(n)})),children:[(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"numeroPatronal",children:"N.\xba Patronal"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({id:"numeroPatronal"},i("numeroPatronal")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:8,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"nombre",children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({id:"nombre"},i("nombre")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{type:"submit",children:"Aplicar"})}),(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{variant:"secondary",onClick:function(){return a()},children:"Limpiar"})})]})]})},E=n(8488),z=n(39124),O=n(94910),S=n(12717),B=n(84531),k=n(27853),F=new((0,B.Z)((function e(){var r=this;(0,k.Z)(this,e),this.index=function(e){return r.view(e)||r.register(e)},this.view=function(e,n){var i=r.viewByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Ver lista de mora"))||void 0},this.viewByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Ver lista de mora (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.register=function(e,n){var i=r.registerByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Agregar empleador en mora"))||void 0},this.registerByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Agregar empleador en mora (misma regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.remove=function(e,n){var i=r.removeByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Quitar empleador en mora"))||void 0},this.removeByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Quitar empleador en mora (misma regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId}}))),L=function(e){var r=e.item,n=e.queryKey,a=(0,O.d)("queryLoader"),o=(0,x.useQueryClient)(),l=(0,x.useMutation)((function(){return y(r.id)}),{onSuccess:function(){a.close(),o.setQueryData(n,(function(e){return(0,c.Z)((0,c.Z)({},e),{},{data:(0,c.Z)((0,c.Z)({},e.data),{},{records:e.data.records.filter((function(e){return e!==r}))})})}))}});return(0,i.useEffect)((function(){"loading"==l.status?a.open({state:"loading"}):"error"==l.status&&(console.error(l.error),a.open({state:"error",error:l.error}))}),[l.status]),(0,w.jsxs)(E.Z,{children:[(0,w.jsx)(E.Z.Toggle,{as:z.VO,variant:"link",id:"dropdown-".concat(r.id)}),(0,w.jsx)(E.Z.Menu,{children:(0,w.jsx)(S.BH,{authorize:function(e){return F.remove(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&l.mutate()},children:"Quitar"})})})]})},M=n(30431),P=n(76859),T=n(2579),G=(n(85862),function(){var e,r=(0,i.useState)({current:1,size:10}),n=(0,u.Z)(r,2),a=n[0],o=n[1],t=(0,j.aF)(),s=(0,i.useState)((function(){var e={};return F.viewByRegionalOnly(t)&&(e.regionalId=null===t||void 0===t?void 0:t.regionalId),e})),d=(0,u.Z)(s,2),v=d[0],g=d[1],Z=!!(0,M.x)(F.view)(t),b=["listaMora.buscar",v,a],y=(0,x.useQuery)(b,(function(){return f(v,a)}),{enabled:Z,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),N=(0,i.useRef)(-1);y.data&&(N.current=y.data.data.meta.total);var C=(0,i.useMemo)((function(){for(var e=[],r=0;r<a.size;r++)e.push((0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:r+1}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{})]},r));return e}),[a.size]);return(0,w.jsxs)("div",{className:"px-1",children:[(0,w.jsx)(h.Z,{children:(0,w.jsx)(h.Z.Item,{active:!0,children:"Lista de mora"})}),(0,w.jsx)(P.I,{policy:F,isLoading:y.isFetching,hasError:y.isError,total:N.current,page:a,data:null===(e=y.data)||void 0===e?void 0:e.data.records,renderLoader:function(){return(0,w.jsx)(w.Fragment,{children:C})},renderData:function(e,r){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(a.current-1)*a.size+r+1}),(0,w.jsx)("td",{children:e.empleadorId}),(0,w.jsx)("td",{children:e.numeroPatronal}),(0,w.jsx)("td",{children:e.nombre}),(0,w.jsx)("td",{children:e.regional.nombre}),(0,w.jsx)("td",{style:{textTransform:"none"},children:(0,w.jsx)(L,{item:e,queryKey:b})})]},e.id)},renderDataHeaders:function(){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"ID Empleador"}),(0,w.jsx)("th",{children:"N.\xba Patronal"}),(0,w.jsx)("th",{style:{minWidth:250},children:"Raz\xf3n social"}),(0,w.jsx)("th",{children:"Regional"}),(0,w.jsx)("th",{style:{width:1}})]})},renderFilterForm:function(){return(0,w.jsx)(R,{onApply:function(e){y.remove(),g(e),o((function(e){return(0,c.Z)((0,c.Z)({},e),{},{current:1})}))}})},renderCreateButton:function(){return(0,w.jsxs)(m.Z,{as:p.rU,to:"/clinica/lista-mora/agregar",children:[(0,w.jsx)(l.wEH,{className:"mr-1"}),"Agregar"]})},onPageChange:function(e){return o(e)},onRefetch:function(){y.remove(),y.refetch({throwOnError:!0})}})]})}),D=n(83738),A=n(2469),H=n(99410),q=n(24849),V=n(61265),Q=n(87451),_=n(32961),U=n(62591),K=function(e){return(0,w.jsxs)(_.Z,(0,c.Z)((0,c.Z)({},e),{},{children:[(0,w.jsx)(_.Z.Header,{children:e.title||"Empleadores"}),(0,w.jsx)(_.Z.Body,{children:(0,w.jsxs)(U.Z,{responsive:!0,className:"small",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"ID"}),(0,w.jsx)("th",{children:"N\xfamero patronal"}),(0,w.jsx)("th",{children:"Raz\xf3n social"}),(0,w.jsx)("th",{})]})}),(0,w.jsx)("tbody",{children:e.empleadores.length?e.empleadores.map((function(r,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:n+1}),(0,w.jsx)("td",{children:r.id}),(0,w.jsx)("td",{children:r.numeroPatronal}),(0,w.jsx)("td",{children:r.nombre}),(0,w.jsx)("td",{children:(0,w.jsx)(m.Z,{onClick:function(){e.onSelect(r)},children:"Seleccionar"})})]},r.id)})):(0,w.jsx)("tr",{children:(0,w.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})})})]})})]}))},X=["onChange"],W=Q.Ry().shape({empleador:Q.Ry().when("$empleador",(function(e,r){return e?r:r.test("","",(function(e,r){return r.createError({message:"Debe indicar un empleador"})}))}))}),$=function(){var e,r=(0,i.useState)(null),n=(0,u.Z)(r,2),o=n[0],t=n[1],s=(0,I.cI)({context:{empleador:o},resolver:(0,V.X)(W)}),d=s.handleSubmit,v=s.register,g=s.watch,f=s.setError,y=s.clearErrors,R=s.setValue,E=(s.reset,s.trigger,s.formState.errors),z=(0,j.aF)(),O=(0,i.useState)(!1),S=(0,u.Z)(O,2),B=S[0],k=S[1],L=(0,a.k6)(),M=(0,x.useQueryClient)(),P=(0,x.useQuery)(["empleadores","buscar","porPatronal"],(function(){return Z({current:1,size:10},{numeroPatronal:g("empleador.numeroPatronal"),regionalId:F.registerByRegionalOnly(z)?z.regionalId:void 0})}),{enabled:!1,onSuccess:function(e){var r=e.data;1==r.records.length?t(r.records[0]):k(!0)}}),T=(0,x.useMutation)((function(e){return b(e)}),{onSuccess:function(){M.invalidateQueries("listaMora.buscar"),L.replace("/clinica/lista-mora")}});(0,i.useEffect)((function(){var e,r=T.error;if(422==(null===r||void 0===r||null===(e=r.response)||void 0===e?void 0:e.status)){var n,i=(null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.data).errors;Object.keys(i).forEach((function(e){var r=e;"empleadorId"==e&&(r="numeroPatronal"),f(r,{type:"serverError",message:i[e]})}))}}),[T.isError]),(0,i.useEffect)((function(){o&&R("empleador",o)}),[o]);var G=v("empleador.numeroPatronal"),Q=G.onChange,_=(0,D.Z)(G,X);return(0,w.jsxs)("div",{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/lista-mora"},children:"Lista de mora"}),(0,w.jsx)(h.Z.Item,{active:!0,children:"Registro"})]}),(0,w.jsxs)(N.Z,{id:"form-empleador-mora",onSubmit:d((function(e){var r=e.empleador;T.mutate(r.id)})),children:[function(){var e,r,n;return null!==(e=E.empleador)&&void 0!==e&&e.message?(0,w.jsx)(A.Z,{variant:"danger",children:null===(n=E.empleador)||void 0===n?void 0:n.message}):T.isSuccess?(0,w.jsx)(A.Z,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"}):T.error&&422!=(null===(r=T.error.response)||void 0===r?void 0:r.status)?(0,w.jsx)(A.Z,{variant:"danger",children:"Ocurrio un error al realizar la solicitud"}):null}(),(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"N\xba Patronal"}),(0,w.jsxs)(H.Z,{hasValidation:!0,children:[(0,w.jsx)(N.Z.Control,(0,c.Z)((0,c.Z)({className:"text-uppercase",isInvalid:P.isError},_),{},{onChange:function(e){t(null),Q(e)}})),(0,w.jsx)(H.Z.Append,{children:(0,w.jsx)(m.Z,{variant:P.isError?"danger":"outline-secondary",onClick:function(){y(),P.refetch()},children:P.isFetching?(0,w.jsx)(q.Z,{animation:"border",size:"sm"}):(0,w.jsx)(l.U41,{})})}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:"Ocurrio un error al realizar la busqueda"})]})]})}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"ID"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},v("empleador.id")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:8,children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},v("empleador.nombre")))]})]}),(0,w.jsxs)(m.Z,{type:"subimt",children:[T.isLoading?(0,w.jsx)(q.Z,{className:"mr-2",animation:"border",size:"sm"}):null,"Guardar"]})]}),(0,w.jsx)(K,{show:B,empleadores:(null===(e=P.data)||void 0===e?void 0:e.data.records)||[],onSelect:function(e){t(e),k(!1)},onHide:function(){return k(!1)}})]})},Y=function(e,r){return v.x1.get("solicitudes-atencion-externa",{params:(0,g.HN)({filter:e,page:r})})},J=function(e,r,n,i,a){return v.x1.post("solicitudes-atencion-externa",{regional_id:e,paciente_id:r,medico_id:n,proveedor_id:i,prestacion:a})},ee=function(e,r){return v.x1.get("medicos",{params:(0,g.HN)({filter:r,page:e})})},re=function(e){return v.x1.get("medicos/".concat(e))},ne=function(e){return v.x1.post("medicos",(0,g.HN)(e))},ie=function(e){return v.x1.put("medicos/".concat(e.id),(0,g.HN)(e))},ae=function(e,r){return v.x1.put("medicos/".concat(e,"/actualizar-estado"),{estado:r})},oe=new((0,B.Z)((function e(){var r=this;(0,k.Z)(this,e),this.index=function(e){return r.view(e)||r.register(e)},this.view=function(e,n){var i=r.viewByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Ver m\xe9dicos"))||void 0},this.viewByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Ver m\xe9dicos (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.register=function(e,n){var i=r.registerByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Registrar m\xe9dicos"))||void 0},this.registerByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Registrar m\xe9dicos (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.edit=function(e,n){var i=r.editByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Editar m\xe9dicos"))||void 0},this.editByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Editar m\xe9dicos (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.updateStatus=function(e,n){var i=r.updateStatusByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Actualizar el estado de los m\xe9dicos"))||void 0},this.updateStatusByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Actualizar el estado de los m\xe9dicos (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId}}))),le=["ref","value"],te=["value"],se=Q.Ry().shape({numCi:Q.Rx().nonEmpty().nullable().when("compCi",{is:!0,then:function(e){return e.required()},otherwise:function(e){return e.optional()}}),compCi:Q.Z_().nonEmpty().uppercase().optional(),nombre:Q.Z_().nonEmpty().uppercase().optional(),especialidad:Q.Z_().nonEmpty().uppercase().optional(),estado:Q.Rx().nonEmpty().optional()}),de=function(e){var r,n=(0,I.cI)({resolver:(0,V.X)(se),defaultValues:{regional:[],estado:""}}),i=n.control,a=n.formState,o=n.handleSubmit,l=n.register,t=n.reset,s=(0,j.aF)();return s?(0,w.jsxs)(N.Z,{onSubmit:o((function(r){var n={};r.numCi&&(n.ci={raiz:parseInt(r.numCi)},r.compCi&&(n.ci.complemento=r.compCi)),r.nombre&&(n.nombre=r.nombre),r.especialidad&&(n.especialidad=r.especialidad),r.regional.length&&(n.regionalId=r.regional[0].id),r.estado&&(n.estado=r.estado),e.onFilter(n)})),children:[(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(N.Z.Group,{as:C.Z,xs:12,md:5,lg:4,children:(0,w.jsxs)("fieldset",{className:"border rounded",style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Carnet de identidad"}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(C.Z,{xs:9,children:[(0,w.jsx)(N.Z.Control,(0,c.Z)({"aria-label":"N\xfamero raiz",className:"text-uppercase",isInvalid:!!a.errors.numCi},l("numCi"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(r=a.errors.numCi)||void 0===r?void 0:r.message})]}),(0,w.jsx)(C.Z,{xs:3,children:(0,w.jsx)(N.Z.Control,(0,c.Z)({"aria-label":"N\xfamero complemento",className:"text-uppercase"},l("compCi")))})]})]})}),(0,w.jsxs)(N.Z.Group,{as:C.Z,xs:12,md:7,lg:8,children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({className:"text-uppercase"},l("nombre")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:4,sm:6,children:[(0,w.jsx)(N.Z.Label,{children:"Especialidad"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({className:"text-uppercase"},l("especialidad")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:4,sm:6,children:[(0,w.jsx)(N.Z.Label,{children:"Regional"}),(0,w.jsx)(I.Qr,{control:i,name:"regional",render:function(e){var r=e.field,n=(r.ref,r.value),i=(0,D.Z)(r,le);e.fieldState;return(0,w.jsx)(z.hl,(0,c.Z)({className:"text-uppercase",id:"medico-filter-regional",selected:oe.viewByRegionalOnly(s)?[s.regional]:n},i))}})]}),(0,w.jsx)(N.Z.Group,{as:C.Z,lg:4,children:(0,w.jsxs)("fieldset",{className:"border rounded",style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Estado"}),(0,w.jsx)(I.Qr,{control:i,name:"estado",render:function(e){var r=e.field,n=r.value,i=(0,D.Z)(r,te);return console.log(n),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Activos",value:1,checked:1==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"De baja",value:2,checked:2==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Ambos",value:"",checked:""===n},i))})]})}})]})})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{type:"submit",children:"Aplicar"})}),(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{variant:"secondary",onClick:function(){return t()},children:"Limpiar"})})]})]}):null},ce=function(e){var r=e.medico,n=e.queryKey,a=(0,O.d)("queryLoader"),o=(0,x.useQueryClient)(),l=(0,x.useMutation)((function(){return ae(r.id,1==r.estado?2:1)}),{onSuccess:function(){a.close(),o.invalidateQueries("medicos.buscar",{inactive:!0}),o.setQueryData(n,(function(e){return(0,c.Z)((0,c.Z)({},e),{},{data:(0,c.Z)((0,c.Z)({},e.data),{},{records:e.data.records.map((function(e){return e==r?(0,c.Z)((0,c.Z)({},e),{},{estado:1==r.estado?2:1,estadoText:1==r.estado?"De baja":"Activo"}):e}))})})}))}});return(0,i.useEffect)((function(){"loading"==l.status?a.open({state:"loading"}):"error"==l.status&&a.open({state:"error",error:l.error})}),[l.status]),(0,w.jsxs)(E.Z,{style:{position:"initial"},children:[(0,w.jsx)(E.Z.Toggle,{as:z.VO,variant:"link",id:"dropdown-medicos-".concat(r.id)}),(0,w.jsxs)(E.Z.Menu,{children:[(0,w.jsx)(S.BH,{authorize:function(e){return oe.view(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{as:p.rU,to:{pathname:"/clinica/medicos/".concat(r.id),state:{medico:r}},children:(0,w.jsx)("span",{className:"align-middle",children:"Ver"})})}),(0,w.jsx)(S.BH,{authorize:function(e){return oe.edit(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{as:p.rU,to:{pathname:"/clinica/medicos/".concat(r.id,"/editar"),state:{medico:r}},children:(0,w.jsx)("span",{className:"align-middle",children:"Editar"})})}),(0,w.jsx)(S.BH,{authorize:function(e){return oe.updateStatus(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{className:"text-danger",href:"#",onClick:function(){l.mutate()},children:1==r.estado?"Baja":"Alta"})})]})]})},ue=function(){var e,r=(0,a.TH)().pathname,n=(0,i.useState)({current:1,size:10}),o=(0,u.Z)(n,2),t=o[0],s=o[1],d=(0,j.aF)(),v=(0,i.useState)((function(){var e={};return oe.viewByRegionalOnly(d)&&(e.regionalId=d.regionalId),e})),g=(0,u.Z)(v,2),Z=g[0],f=g[1],b=["medicos","buscar",Z,t],y=(0,x.useQuery)(b,(function(){return ee(t,Z)}),{enabled:!!(0,M.x)(oe.view)(d),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),N=(0,i.useRef)(-1);y.data&&(N.current=y.data.data.meta.total);var C=(0,i.useMemo)((function(){for(var e=[],r=0;r<t.size;r++)e.push((0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:(t.current-1)*t.size+r+1}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{})]},r));return e}),[t.size]);return(0,w.jsxs)("div",{className:"px-1",children:[(0,w.jsx)(h.Z,{children:(0,w.jsx)(h.Z.Item,{active:!0,children:"M\xe9dicos"})}),(0,w.jsx)(P.I,{policy:oe,page:t,onPageChange:s,total:N.current,onRefetch:function(){y.remove(),y.refetch({throwOnError:!0})},isLoading:y.isFetching,hasError:y.isError,data:null===(e=y.data)||void 0===e?void 0:e.data.records,renderData:function(e,r){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:(t.current-1)*t.size+r+1}),(0,w.jsx)("td",{children:e.ci.texto}),(0,w.jsx)("td",{children:e.nombreCompleto}),(0,w.jsx)("td",{children:e.especialidad}),(0,w.jsx)("td",{children:e.regional.nombre}),(0,w.jsx)("td",{children:1==e.estado?"Activo":2==e.estado?"De baja":""}),(0,w.jsx)("td",{style:{textTransform:"none"},children:(0,w.jsx)(ce,{queryKey:b,medico:e})})]},e.id)},renderDataHeaders:function(){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"Carnet de identidad"}),(0,w.jsx)("th",{style:{minWidth:250},children:"Nombre"}),(0,w.jsx)("th",{children:"Especialidad"}),(0,w.jsx)("th",{children:"Regional"}),(0,w.jsx)("th",{children:"Estado"}),(0,w.jsx)("th",{style:{width:1}})]})},renderLoader:function(){return(0,w.jsx)(w.Fragment,{children:C})},renderFilterForm:function(){return(0,w.jsx)(de,{onFilter:function(e){y.remove(),f(e),s((function(e){return(0,c.Z)((0,c.Z)({},e),{},{current:1})}))}})},renderCreateButton:function(){return(0,w.jsxs)(m.Z,{as:p.rU,to:"".concat(r,"/registrar"),className:"d-flex align-items-center",children:[(0,w.jsx)(l.wEH,{className:"mr-1"}),(0,w.jsx)("span",{children:"Nuevo"})]})}})]})},he=function(){var e,r=(0,a.TH)(),n=(r.pathname,r.state),i=(0,a.UO)().id,o=((0,j.aF)(),(0,x.useQuery)(["cargar",i],(function(){return re(parseInt(i))}),{initialData:(null===n||void 0===n?void 0:n.medico)&&{status:200,statusText:"OK",headers:{},config:{},data:null===n||void 0===n?void 0:n.medico},refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=null===(e=o.data)||void 0===e?void 0:e.data;return(0,w.jsxs)("div",{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/medicos"},children:"M\xe9dicos"}),(0,w.jsx)(h.Z.Item,{active:!0,children:i}),(0,w.jsx)(h.Z.Item,{active:!0,children:"Detalles"})]}),function(){if(o.error){var e=o.error.response;return(0,w.jsx)(A.Z,{variant:"danger",children:e?404==e.status?"El proveedor que busca no existe":"Ocurrio un error inesperado":"No fue posible realizar la solicitud, verifique si tiene conexion a internet"})}return null}(),(0,w.jsx)(U.Z,{children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"Carnet de identidad"}),(0,w.jsxs)("td",{children:[": ",l?l.ci.texto:(0,w.jsx)(T.Z,{})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"Nombre"}),(0,w.jsxs)("td",{children:[": ",l?l.nombreCompleto:(0,w.jsx)(T.Z,{})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"Regional"}),(0,w.jsxs)("td",{children:[": ",l?l.regional.nombre:(0,w.jsx)(T.Z,{})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"Especialidad"}),(0,w.jsxs)("td",{children:[": ",l?l.especialidad:(0,w.jsx)(T.Z,{})]})]})]})})]})},me=Q.Ry().shape({ci:Q.Rx().label("n\xfamero de carnet").nonEmpty().typeError("El ${path} no es un numero valido").required(),ciComplemento:Q.Z_().label("complemento del carnet").nonEmpty().uppercase().default(null).nullable().notRequired().matches(/^[1-9][A-Z]$/,"Complemento invalido."),apellidoPaterno:Q.Z_().label("apellido paterno").nonEmpty().uppercase().default(null).nullable().when("apellidoMaterno",{is:function(e){return!e},then:function(e){return e.required("Debe proporcionar al menos un apellido").max(25)}}),apellidoMaterno:Q.Z_().trim().label("apellido materno").nonEmpty().uppercase().default(null).nullable().when("apellidoPaterno",{is:function(e){return!e},then:function(e){return e.required("Debe proporcionar al menos un apellido").max(25)}}),nombres:Q.Z_().label("nombres").nonEmpty().uppercase().trim().required(),especialidad:Q.Z_().nonEmpty().uppercase().required("Debe indicar la especialidad del m\xe9dico"),regional:Q.IX().length(1,"Debe indicar una regional")},[["apellidoMaterno","apellidoPaterno"]]),xe=function(){var e,r,n,o,l,t,s,d,u,v,g=(0,a.UO)().id,Z=(0,a.k6)(),f=(0,j.aF)(),b=(0,I.cI)({resolver:(0,V.X)(me),defaultValues:{initialized:!g,regional:[]}}),y=b.handleSubmit,R=b.register,E=(b.clearErrors,b.setError),O=b.setValue,S=b.reset,B=b.watch,k=b.control,F=b.formState,L=B("initialized"),M=(0,x.useQueryClient)(),P=(0,x.useQuery)(["medicos","cargar",g],(function(){return re(parseInt(g))}),{enabled:!!g&&!L,initialData:(null===(e=Z.location.state)||void 0===e?void 0:e.medico)&&{status:200,statusText:"OK",data:Z.location.state.medico,headers:{},config:{}},refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),G=(0,x.useMutation)((function(e){return g?ie({id:parseInt(g),ci:{raiz:parseInt(e.ci),complemento:e.ciComplemento},apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombre:e.nombres,especialidad:e.especialidad,regionalId:e.regional[0].id}):ne({ci:{raiz:parseInt(e.ci),complemento:e.ciComplemento},apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombre:e.nombres,especialidad:e.especialidad,regionalId:e.regional[0].id})}),{onSuccess:function(e){S(),M.invalidateQueries(["medicos","buscar"]),g&&(M.setQueryData(["medicos","cargar",g],e),Z.push("/clinica/medicos"))},onError:function(e){var r;if(422==(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.status)){var n,i=(null===(n=e.response)||void 0===n?void 0:n.data).errors;Object.keys(i).forEach((function(e){E(e,{type:"serverError",message:i[e]})}))}}}),D=null===(r=P.data)||void 0===r?void 0:r.data;return(0,i.useEffect)((function(){D&&(O("initialized",!0),O("ci",String(D.ci.raiz)),O("ciComplemento",D.ci.complemento),O("apellidoPaterno",D.apellidoPaterno),O("apellidoMaterno",D.apellidoMaterno),O("nombres",D.nombre),O("especialidad",D.especialidad),O("regional",[D.regional]))}),[D]),(0,w.jsxs)("div",{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/medicos"},children:"M\xe9dicos"}),g?(0,w.jsx)(h.Z.Item,{active:!0,children:g}):null,(0,w.jsx)(h.Z.Item,{active:!0,children:g?"Actualizaci\xf3n":"Registro"})]}),(0,w.jsxs)(N.Z,{id:"medico-form",onSubmit:y((function(e){G.mutate(e)})),children:["error"==G.status||"success"==G.status?(0,w.jsx)(A.Z,{variant:G.isError?"danger":"success",children:G.isError?(null===(n=G.error.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||G.error.message:"Guardado"}):null,(0,w.jsx)(N.Z.Row,{children:(0,w.jsx)(N.Z.Group,{as:C.Z,xs:12,sm:6,md:4,children:(0,w.jsxs)("fieldset",{className:"border".concat(F.errors.ci||F.errors.ciComplemento?" border-danger ":" ","rounded"),style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Carnet de identidad"}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(C.Z,{xs:8,children:[L?(0,w.jsx)(N.Z.Control,(0,c.Z)({"aria-label":"N\xfamero raiz",className:"text-uppercase",isInvalid:!!F.errors.ci},R("ci"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(l=F.errors.ci)||void 0===l?void 0:l.message})]}),(0,w.jsxs)(C.Z,{xs:4,children:[L?(0,w.jsx)(N.Z.Control,(0,c.Z)({"aria-label":"N\xfamero complemento",className:"text-uppercase",isInvalid:!!F.errors.ciComplemento},R("ciComplemento"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(t=F.errors.ciComplemento)||void 0===t?void 0:t.message})]})]})]})})}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Paterno"}),L?(0,w.jsx)(N.Z.Control,(0,c.Z)({className:"text-uppercase",isInvalid:!!F.errors.apellidoPaterno},R("apellidoPaterno"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(s=F.errors.apellidoPaterno)||void 0===s?void 0:s.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Materno"}),L?(0,w.jsx)(N.Z.Control,(0,c.Z)({className:"text-uppercase",isInvalid:!!F.errors.apellidoMaterno},R("apellidoMaterno"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(d=F.errors.apellidoMaterno)||void 0===d?void 0:d.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Nombres"}),L?(0,w.jsx)(N.Z.Control,(0,c.Z)({className:"text-uppercase",isInvalid:!!F.errors.nombres},R("nombres"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(u=F.errors.nombres)||void 0===u?void 0:u.message})]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"medico-especialidad",children:"Especialidad"}),L?(0,w.jsx)(N.Z.Control,(0,c.Z)({id:"medico-especialidad",className:"text-uppercase",isInvalid:!!F.errors.especialidad},R("especialidad"))):(0,w.jsx)(T.Z,{}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(v=F.errors.especialidad)||void 0===v?void 0:v.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Regional"}),L?(0,w.jsx)(I.Qr,{name:"regional",control:k,render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(z.hl,{id:"medicos-form/regionales-typeahead",className:"text-uppercase",filterBy:function(e){return g?!1!==oe.editByRegionalOnly(f,{regionalId:e.id}):!1!==oe.registerByRegionalOnly(f,{regionalId:e.id})},feedback:null===(r=i.error)||void 0===r?void 0:r.message,isInvalid:!!i.error,selected:n.value,onChange:n.onChange,onBlur:n.onBlur})})}}):(0,w.jsx)(T.Z,{})]})]}),(0,w.jsxs)(m.Z,{className:"mt-3",type:"submit",children:[G.isLoading?(0,w.jsx)(q.Z,{className:"mr-2",animation:"border",size:"sm"}):null,"Guardar"]})]})]})},pe=n(95156),je=(n(48901),["isInvalid","feedback","filter"]),ve=function(e){var r=e.isInvalid,n=e.feedback,a=e.filter,o=(0,D.Z)(e,je),t=(0,i.useState)(o.defaultOptions||[]),s=(0,u.Z)(t,2),d=s[0],h=s[1],p=(0,i.useState)(""),j=(0,u.Z)(p,2),v=j[0],g=j[1],Z=["medicos.buscar",a=(0,c.Z)((0,c.Z)({},a),{},{_busqueda:v})],f=(0,x.useInfiniteQuery)(Z,(function(e){var r=e.pageParam,n=void 0===r?1:r;return ee({current:n,size:1===n?20:10},a)}),{enabled:!!v,refetchOnReconnect:!1,refetchOnWindowFocus:!1,getNextPageParam:function(e,r){var n=e.data.meta.nextPage;return 2===n?3:n}});return(0,i.useEffect)((function(){if(f.data){var e=f.data.pages;h(e.flatMap((function(e){return e.data.records}),1))}}),[f.data]),(0,w.jsxs)(H.Z,{hasValidation:!0,className:"position-unset",children:[(0,w.jsx)(pe.Wf,(0,c.Z)((0,c.Z)({clearButton:!0,align:"left",emptyLabel:f.isError?"":"No se encontraron resultados",promptText:"Escribe un nombre o especialidad para buscar",searchText:"Buscando...",paginationText:"Cargar m\xe1s..."},o),{},{labelKey:function(e){return e.nombreCompleto},className:o.className+(f.isError||r?" is-invalid":""),isInvalid:f.isError||r,filterBy:function(){return!0},maxResults:10,minLength:0,options:d,isLoading:"loading"==f.status||f.isFetchingNextPage,onSearch:function(e){g(e)},paginate:!0,onPaginate:function(){f.fetchNextPage()},useCache:!1,renderMenuItemChildren:function(e){return(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:e.nombreCompleto}),(0,w.jsx)("small",{className:"text-muted",children:e.especialidad})]})}})),f.isError?(0,w.jsx)(H.Z.Append,{children:(0,w.jsx)(m.Z,{variant:"outline-danger",onClick:function(){return f.refetch()},children:(0,w.jsx)(l.lbL,{})})}):null,(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:f.isError?"Ocurrio un error al realizar la busqueda":n})]})},ge=new((0,B.Z)((function e(){var r=this;(0,k.Z)(this,e),this.index=function(e){return r.view(e)||r.register(e)},this.view=function(e,n){var i=r.viewByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Ver proveedores"))||void 0},this.viewByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Ver proveedores (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.register=function(e,n){var i=r.registerByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Registrar proveedores"))||void 0},this.registerByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Registrar proveedores (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.edit=function(e,n){var i=r.editByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Editar proveedores"))||void 0},this.editByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Editar proveedores (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.updateStatus=function(e,n){var i=r.updateStatusByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Actualizar estado de proveedores"))||void 0},this.updateStatusByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Actualizar estado de proveedores (regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId}}))),Ze=["id"],fe=function(e,r){return v.x1.get("proveedores",{params:(0,g.HN)({filter:r,page:e})})},be=function(e){return v.x1.get("proveedores/".concat(e))},ye=function(e){return v.x1.post("proveedores",(0,g.HN)(e))},Ne=function(e){var r=e.id,n=(0,D.Z)(e,Ze);return v.x1.put("proveedores/".concat(r),(0,g.HN)(n))},Ce=function(e,r){return v.x1.put("proveedores/".concat(e,"/actualizar-estado"),(0,g.HN)({estado:r}))},Ie=n(18936),we=["ref","value"],Re=["value"],Ee=["value"],ze=function(e){var r=(0,Ie.aF)(),n=(0,I.cI)({defaultValues:{regional:ge.viewByRegionalOnly(r)?[r.regional]:[],estado:0,tipo:0}}),i=n.control,a=n.handleSubmit,o=n.reset;return(0,w.jsxs)(N.Z,{onSubmit:a((function(r){var n={};n.regionalId=r.regional.length&&r.regional[0].id,n.estado=r.estado,n.tipo=r.tipo,e.onFilter(n)})),children:[(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"Regional"}),(0,w.jsx)(I.Qr,{control:i,name:"regional",render:function(e){var n=e.field,i=(n.ref,n.value),a=(0,D.Z)(n,we);e.fieldState;return(0,w.jsx)(z.hl,(0,c.Z)({className:"text-uppercase",id:"medico-filter-regional",selected:ge.viewByRegionalOnly(r)?[r.regional]:i,filterBy:function(e){return!1!==ge.viewByRegionalOnly(r,{regionalId:e.id})}},a))}})]}),(0,w.jsx)(N.Z.Group,{as:C.Z,md:6,lg:4,children:(0,w.jsxs)("fieldset",{className:"border rounded",style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Estado"}),(0,w.jsx)(I.Qr,{control:i,name:"estado",render:function(e){var r=e.field,n=r.value,i=(0,D.Z)(r,Re);return(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Activos",value:1,checked:1==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Bajas",value:2,checked:2==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Ambos",value:0,checked:0==n},i))})]})}})]})}),(0,w.jsx)(N.Z.Group,{as:C.Z,md:6,lg:4,children:(0,w.jsxs)("fieldset",{className:"border rounded",style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Tipo"}),(0,w.jsx)(I.Qr,{control:i,name:"tipo",render:function(e){var r=e.field,n=r.value,i=(0,D.Z)(r,Ee);return(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Medicos",value:1,checked:1==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Empresas",value:2,checked:2==n},i))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({style:{height:"calc(1.5em + 0.75rem + 2px)",paddingTop:"0.375rem",paddingBottom:"0.375rem"},type:"radio",label:"Ambos",value:0,checked:0==n},i))})]})}})]})})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{className:"ml-auto",xs:"auto",children:(0,w.jsx)(m.Z,{type:"submit",children:"Aplicar"})}),(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{variant:"secondary",onClick:function(){return o({regional:ge.viewByRegionalOnly(r)?[r.regional]:[],estado:0,tipo:0})},children:"Limpiar"})})]})]})},Oe=function(e){var r=e.proveedor,n=e.queryKey,a=(0,O.d)("queryLoader"),o=(0,x.useQueryClient)(),l=(0,x.useMutation)((function(e){return Ce(r.id,e)}),{onSuccess:function(){a.close(),o.setQueryData(n,(function(e){return(0,c.Z)((0,c.Z)({},e),{},{data:(0,c.Z)((0,c.Z)({},e.data),{},{records:e.data.records.map((function(e){return e.id==r.id?(0,c.Z)((0,c.Z)({},e),{},{estado:1==e.estado?2:1}):e}))})})}))}});return(0,i.useEffect)((function(){"loading"==l.status?a.open({state:"loading"}):"error"==l.status&&a.open({state:"error",error:l.error})}),[l.status]),(0,w.jsxs)(E.Z,{style:{position:"initial"},alignRight:!0,children:[(0,w.jsx)(E.Z.Toggle,{as:z.VO,variant:"link",id:"dropdown-proveedores-".concat(r.id)}),(0,w.jsxs)(E.Z.Menu,{children:[(0,w.jsx)(S.BH,{authorize:function(e){return ge.view(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{as:p.rU,to:{pathname:"/clinica/proveedores/".concat(r.id),state:{proveedor:r}},children:(0,w.jsx)("span",{className:"align-middle",children:"Ver"})})}),(0,w.jsx)(S.BH,{authorize:function(e){return ge.edit(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{as:p.rU,to:{pathname:"/clinica/proveedores/".concat(r.id,"/editar"),state:{proveedor:r}},children:(0,w.jsx)("span",{className:"align-middle",children:"Editar"})})}),(0,w.jsx)(S.BH,{authorize:function(e){return ge.updateStatus(e,{regionalId:r.regionalId})},children:(0,w.jsx)(E.Z.Item,{className:"text-danger",onClick:function(){l.mutate(1==r.estado?2:1)},children:1==r.estado?"Baja":"Habilitar"})})]})]})},Se=function(){var e,r=(0,a.TH)().pathname,n=(0,i.useState)({current:1,size:10}),o=(0,u.Z)(n,2),t=o[0],s=o[1],d=(0,j.aF)(),v=(0,i.useState)((function(){var e={};return ge.viewByRegionalOnly(d)&&(e.regionalId=null===d||void 0===d?void 0:d.regionalId),e})),g=(0,u.Z)(v,2),Z=g[0],f=g[1],b=["proveedores","buscar",Z,t],y=(0,x.useQuery)(b,(function(){return fe(t,Z)}),{enabled:!!(0,M.x)(ge.view)(d),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),N=(0,i.useRef)(-1);y.data&&(N.current=y.data.data.meta.total);var C=function(e){y.remove(),f((function(r){return(0,c.Z)((0,c.Z)({},r),e)})),s((function(e){return(0,c.Z)((0,c.Z)({},e),{},{current:1})}))},I=(0,i.useMemo)((function(){for(var e=[],r=0;r<t.size;r++)e.push((0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",style:{width:1},children:r+1}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{})]},r));return e}),[t.size]);return(0,w.jsxs)("div",{className:"px-1",children:[(0,w.jsx)(h.Z,{children:(0,w.jsx)(h.Z.Item,{active:!0,children:"Proveedores"})}),(0,w.jsx)(P.I,{policy:ge,page:t,onSearch:function(e){C({_busqueda:e})},onPageChange:s,total:N.current,onRefetch:function(){y.remove(),y.refetch({throwOnError:!0})},isLoading:y.isFetching,hasError:y.isError,data:null===(e=y.data)||void 0===e?void 0:e.data.records,renderData:function(e,r){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:(t.current-1)*t.size+r+1}),(0,w.jsx)("td",{children:1==e.tipo?"Medico":"Empresa"}),(0,w.jsx)("td",{children:e.razonSocial}),(0,w.jsx)("td",{children:e.regional.nombre}),(0,w.jsx)("td",{children:1==e.estado?"Activo":2==e.estado?"De baja":""}),(0,w.jsx)("td",{style:{textTransform:"none"},children:(0,w.jsx)(Oe,{proveedor:e,queryKey:b})})]},e.id)},renderDataHeaders:function(){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"Tipo"}),(0,w.jsx)("th",{style:{minWidth:250},children:"Nombre"}),(0,w.jsx)("th",{children:"Regional"}),(0,w.jsx)("th",{children:"Estado"}),(0,w.jsx)("th",{style:{width:1}})]})},renderLoader:function(){return(0,w.jsx)(w.Fragment,{children:I})},renderFilterForm:function(){return(0,w.jsx)(ze,{onFilter:C})},renderCreateButton:function(){return(0,w.jsxs)(m.Z,{as:p.rU,to:"".concat(r,"/registrar"),className:"d-flex align-items-center",children:[(0,w.jsx)(l.wEH,{className:"mr-1"}),(0,w.jsx)("span",{children:"Nuevo"})]})}})]})},Be=n(89743),ke=n(94052),Fe=n(58898),Le=n(19763),Me=n(42840),Pe=(n(26638),function(){var e,r,n=(0,a.TH)(),i=(n.pathname,n.state),o=(0,a.UO)().id,l=null!==o&&void 0!==o&&o.startsWith("EMP")?2:null!==o&&void 0!==o&&o.startsWith("MED")?1:-1,t=((0,j.aF)(),(0,x.useQuery)(["cargar",o],(function(){return be(o)}),{initialData:(null===i||void 0===i?void 0:i.proveedor)&&{status:200,statusText:"OK",headers:{},config:{},data:null===i||void 0===i?void 0:i.proveedor},refetchOnWindowFocus:!1,refetchOnReconnect:!1})),s=(null===(e=t.data)||void 0===e?void 0:e.data)||(null===i||void 0===i?void 0:i.proveedor),d=(null===s||void 0===s?void 0:s.ubicacion)&&[s.ubicacion.latitud,s.ubicacion.longitud];return(0,w.jsxs)("div",{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/proveedores"},children:"Proveedores"}),(0,w.jsx)(h.Z.Item,{active:!0,children:o}),(0,w.jsx)(h.Z.Item,{active:!0,children:"Detalles"})]}),function(){if(t.error){var e=t.error.response;return(0,w.jsx)(A.Z,{variant:"danger",children:e?404==e.status?"El proveedor que busca no existe":"Ocurrio un error inesperado":"No fue posible realizar la solicitud, verifique si tiene conexion a internet"})}return null}(),(0,w.jsxs)(Be.Z,{children:[(0,w.jsx)(C.Z,{lg:5,md:4,children:(0,w.jsxs)("dl",{className:"form-row",children:[(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Tipo"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?1==s.tipo?"M\xe9dico":2==(null===s||void 0===s?void 0:s.tipo)?"Empresa":null:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"NIT"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?s.nit:(0,w.jsx)(T.Z,{})}),s?1==s.tipo?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Carnet de identidad"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s.ci.texto}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Nombre"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s.razonSocial}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Especialidad"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s.especialidad})]}):2==s.tipo?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Nombre"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s.razonSocial})]}):null:1==l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Carnet de identidad"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Nombre"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Especialidad"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:(0,w.jsx)(T.Z,{})})]}):2==l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Nombre"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:(0,w.jsx)(T.Z,{})})]}):null,(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Regional"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?null===(r=s.regional)||void 0===r?void 0:r.nombre:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Direcci\xf3n"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?s.direccion:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Tel\xe9fono 1"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?s.telefono1:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("dt",{className:"col-lg-5 col-md-12 col-sm-5",children:"Tel\xe9fono 2"}),(0,w.jsx)("dd",{className:"col-lg-7 col-md-12 col-sm-7",children:s?s.telefono2||"No proporcionado":(0,w.jsx)(T.Z,{})})]})}),(0,w.jsx)(C.Z,{lg:7,md:8,children:void 0!==d?(0,w.jsxs)(ke.h,{center:d||[-17.78629,-63.18117],zoom:13,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,style:{minHeight:480,height:"100%"},children:[(0,w.jsx)(Fe.I,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d?(0,w.jsx)(Le.J,{position:d,children:(0,w.jsx)(Me.G,{children:(0,w.jsx)("a",{href:"geo:".concat(d.join(",")),children:"Abrir con"})})}):null]}):(0,w.jsx)(T.Z,{style:{minHeight:480}})})]}),s?(0,w.jsx)(N.Z.Row,{children:(0,w.jsx)(j.BH,{authorize:function(e){return ge.edit(e,{regionalId:s.regionalId})},children:(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{as:p.rU,to:{pathname:"/clinica/proveedores/".concat(s.id,"/editar"),state:{proveedor:s}},children:"Editar"})})})}):null]})}),Te=function(){var e,r,n=(0,a.UO)().id,i=(0,I.Gc)(),o=i.control,l=i.formState,t=i.register,s=i.watch,d=(0,j.aF)(),u=l.errors,h=s("initialized");return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"proveedor-nit",children:"NIT"}),(0,w.jsx)(z.XS,(0,c.Z)({id:"proveedor-nit",initialized:h,className:"text-uppercase",isInvalid:!!u.nit},t("nit"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(e=u.nit)||void 0===e?void 0:e.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:8,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"proveedor-nombre",children:"Nombre"}),(0,w.jsx)(z.XS,(0,c.Z)({id:"proveedor-nombre",initialized:h,className:"text-uppercase",isInvalid:!!u.nombre},t("nombre"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(r=u.nombre)||void 0===r?void 0:r.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"proveedor-form/regionales-typeahead",children:"Regional"}),(0,w.jsx)(I.Qr,{name:"regional",control:o,render:function(e){var r,i=e.field,a=e.fieldState;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(z.hl,{id:"proveedor-form/regionales-typeahead",initialized:h,className:"text-uppercase",filterBy:function(e){return n?!1!==ge.editByRegionalOnly(d,{regionalId:e.id}):!1!==ge.registerByRegionalOnly(d,{regionalId:e.id})},feedback:null===(r=a.error)||void 0===r?void 0:r.message,isInvalid:!!a.error,selected:i.value,onChange:i.onChange,onBlur:i.onBlur})})}})]})]})})},Ge=function(){var e,r,n,i,o,l,t,s=(0,a.UO)().id,d=(0,j.aF)(),u=(0,I.Gc)(),h=u.register,m=u.control,x=u.formState,p=u.watch,v=x.errors,g=p("initialized");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,xs:12,sm:6,md:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"nit",children:"NIT"}),(0,w.jsx)(z.XS,(0,c.Z)({isInvalid:!!v.nit,className:"text-uppercase",initialized:g},h("nit"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(e=v.nit)||void 0===e?void 0:e.message})]}),(0,w.jsx)(N.Z.Group,{as:C.Z,xs:12,sm:6,md:4,children:(0,w.jsxs)("fieldset",{className:"border".concat(x.errors.ci||x.errors.ciComplemento?" border-danger ":" ","rounded"),style:{padding:5,paddingTop:0,marginBottom:-6},children:[(0,w.jsx)(N.Z.Label,{as:"legend",style:{width:"auto",fontSize:"1rem"},children:"Carnet de identidad"}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(C.Z,{xs:8,children:[(0,w.jsx)(z.XS,(0,c.Z)({"aria-label":"N\xfamero raiz",className:"text-uppercase",isInvalid:!!x.errors.ci,initialized:g},h("ci"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(r=x.errors.ci)||void 0===r?void 0:r.message})]}),(0,w.jsxs)(C.Z,{xs:4,children:[(0,w.jsx)(z.XS,(0,c.Z)({"aria-label":"N\xfamero complemento",className:"text-uppercase",initialized:g,isInvalid:!!x.errors.ciComplemento},h("ciComplemento"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(n=x.errors.ciComplemento)||void 0===n?void 0:n.message})]})]})]})})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Paterno"}),(0,w.jsx)(z.XS,(0,c.Z)({isInvalid:!!v.apellidoPaterno,className:"text-uppercase",initialized:g},h("apellidoPaterno"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(i=v.apellidoPaterno)||void 0===i?void 0:i.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Materno"}),(0,w.jsx)(z.XS,(0,c.Z)({isInvalid:!!v.apellidoMaterno,className:"text-uppercase",initialized:g},h("apellidoMaterno"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(o=v.apellidoMaterno)||void 0===o?void 0:o.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Nombres"}),(0,w.jsx)(z.XS,(0,c.Z)({isInvalid:!!v.nombre,className:"text-uppercase",initialized:g},h("nombre"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(l=v.nombre)||void 0===l?void 0:l.message})]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"medico-especialidad",children:"Especialidad"}),(0,w.jsx)(z.XS,(0,c.Z)({id:"medico-especialidad",isInvalid:!!v.especialidad,className:"text-uppercase",initialized:g},h("especialidad"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(t=v.especialidad)||void 0===t?void 0:t.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Regional"}),(0,w.jsx)(I.Qr,{name:"regional",control:m,render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(z.hl,{id:"proveedor-form/regionales-typeahead",className:"text-uppercase",initialized:g,filterBy:function(e){return s?!1!==ge.editByRegionalOnly(d,{regionalId:e.id}):!1!==ge.registerByRegionalOnly(d,{regionalId:e.id})},feedback:null===(r=i.error)||void 0===r?void 0:r.message,isInvalid:!!i.error,selected:n.value,onChange:n.onChange,onBlur:n.onBlur})})}})]})]})]})},De=["value"],Ae=function(){var e=(0,a.UO)().id,r=(0,I.Gc)(),n=r.clearErrors,o=r.control,l=r.register,t=(0,r.watch)("tipo");(0,i.useEffect)((function(){n()}),[t]);l("tipo");return(0,w.jsxs)("fieldset",{children:[(0,w.jsx)("legend",{children:"Informaci\xf3n general"}),(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,md:4,children:[(0,w.jsx)(N.Z.Label,{children:"Tipo de proveedor"}),(0,w.jsx)(I.Qr,{control:o,name:"tipo",render:function(r){var n,i=r.field,a=i.value,o=(0,D.Z)(i,De),l=r.fieldState;return e?(0,w.jsx)(N.Z.Control,{readOnly:!0,value:1==a?"M\xc9DICO":"EMPRESA"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(N.Z.Row,{className:l.error?"is-invalid":"",children:[(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({readOnly:!!e,type:"radio",value:1,checked:1==a,label:"M\xe9dico",isInvalid:!!l.error},o))}),(0,w.jsx)(C.Z,{children:(0,w.jsx)(N.Z.Check,(0,c.Z)({readOnly:!!e,type:"radio",value:2,checked:2==a,label:"Empresa",isInvalid:!!l.error},o))})]}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(n=l.error)||void 0===n?void 0:n.message})]})}})]})}),1==t?(0,w.jsx)(Ge,{}):2==t?(0,w.jsx)(Te,{}):null]})},He=function(){var e,r,n,a=(0,j.aF)(),o=(0,I.Gc)(),l=o.register,t=o.control,s=o.formState,d=o.watch,u=s.errors,h=d("initialized"),m=d("regional"),x=(0,i.useMemo)((function(){return m.length?[m[0].ubicacion.latitud,m[0].ubicacion.longitud]:[a.regional.ubicacion.latitud,a.regional.ubicacion.longitud]}),[a,m.length]);return(0,w.jsxs)("fieldset",{children:[(0,w.jsx)("legend",{children:"Informaci\xf3n de contacto"}),(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,children:[(0,w.jsx)(N.Z.Label,{children:"Direccion"}),(0,w.jsx)(z.XS,(0,c.Z)({as:"textarea",initialized:h,isInvalid:!!u.direccion,className:"text-uppercase","aria-describedby":"direccionHelpBlock"},l("direccion"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(e=u.direccion)||void 0===e?void 0:e.message}),u.direccion?null:(0,w.jsx)(N.Z.Text,{id:"direccionHelpBlock",muted:!0,children:"".concat(d("direccion").length,"/80")})]})}),(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,children:[(0,w.jsx)(N.Z.Label,{children:"Ubicaci\xf3n"}),(0,w.jsx)(I.Qr,{name:"ubicacion",control:t,render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(z.Q7,{initialized:h,isInvalid:!!i.error,center:n.value||x,value:n.value,onChange:n.onChange}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(r=i.error)||void 0===r?void 0:r.message})]})}})]})}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Tel\xe9fono 1"}),(0,w.jsx)(z.XS,(0,c.Z)({initialized:h,isInvalid:!!u.telefono1},l("telefono1"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(r=u.telefono1)||void 0===r?void 0:r.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Tel\xe9fono 2"}),(0,w.jsx)(z.XS,(0,c.Z)({initialized:h,isInvalid:!!u.telefono2},l("telefono2"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(n=u.telefono2)||void 0===n?void 0:n.message})]})]})]})},qe=n(13924),Ve=Q.Ry().shape({tipo:Q.Rx().required().oneOf([1,2]),nit:Q.Z_().trim().label("NIT").matches(/^[0-9]*$/,"Este campo solo admite n\xfameros").required(),ci:Q.Rx().label("n\xfamero de carnet").nonEmpty().typeError("El ${path} no es un numero valido").when("tipo",(function(e,r){return 1==e?r.required():r.optional()})),ciComplemento:Q.Z_().label("complemento del carnet").nonEmpty().uppercase().default(null).nullable().notRequired().when("tipo",{is:function(e){return 1==e},then:function(e){return e.matches(/^[1-9][A-Z]$/,"Complemento invalido.")}}),apellidoPaterno:Q.Z_().label("apellido paterno").nonEmpty().uppercase().default(null).nullable().when(["tipo","apellidoMaterno"],{is:function(e,r){return 1==e&&!r},then:function(e){return e.required("Debe proporcionar al menos un apellido").max(25)}}),apellidoMaterno:Q.Z_().trim().label("apellido materno").nonEmpty().uppercase().default(null).nullable().when(["tipo","apellidoPaterno"],{is:function(e,r){return 1==e&&!r},then:function(e){return e.required("Debe proporcionar al menos un apellido").max(25)}}),nombre:Q.Z_().label("nombre").nonEmpty().uppercase().required().label("nombre").when("tipo",(function(e,r){return 1==e?r.max(50):r.max(100)})),especialidad:Q.Z_().label("especialidad").nonEmpty().uppercase().when("tipo",(function(e,r){return 1==e?r.required("Debe indicar una especialidad"):r.optional()})),regional:Q.IX().length(1,"Debe indicar una regional").required(),direccion:Q.Z_().label("direcci\xf3n").nonEmpty().uppercase().required().max(80),ubicacion:Q.nK().label("ubicaci\xf3n").required(),telefono1:Q.Rx().label("telefono 1").nonEmpty().typeError("No es un numero v\xe1lido").required(),telefono2:Q.Rx().label("telefono 2").nonEmpty().typeError("No es un numero v\xe1lido").nullable().notRequired()},[["apellidoMaterno","apellidoPaterno"]]),Qe=function(){var e,r=(0,a.UO)().id,n=(0,a.k6)(),o=(0,I.cI)({resolver:(0,V.X)(Ve),defaultValues:!r||r.startsWith("MED")?{tipo:1,initialized:!r,ciComplemento:null,regional:[],direccion:"",ubicacion:null}:{tipo:2,initialized:!r,regional:[],direccion:"",ubicacion:null}}),l=(o.formState,o.handleSubmit),t=o.reset,s=o.setError,d=o.setValue,j=(0,o.watch)("initialized"),v=(0,x.useQueryClient)(),g=(0,x.useQuery)(["proveedores","cargar",r],(function(){return be(r)}),{enabled:!!r&&!j,initialData:(null===(e=n.location.state)||void 0===e?void 0:e.proveedor)&&{status:200,statusText:"OK",data:n.location.state.proveedor,headers:{},config:{}},refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onError:function(){d("initialized",!0)}});(0,i.useEffect)((function(){if(g.data){var e=g.data.data;d("initialized",!0),d("tipo",e.tipo),d("nit",e.nit),d("nombre",e.nombre),d("regional",[e.regional]),d("direccion",e.direccion),d("ubicacion",e.ubicacion&&[e.ubicacion.latitud,e.ubicacion.longitud]),d("telefono1",e.telefono1),d("telefono2",e.telefono2),1==e.tipo&&(d("ci",e.ci.raiz),d("ciComplemento",e.ci.complemento),d("apellidoMaterno",e.apellidoMaterno),d("apellidoPaterno",e.apellidoPaterno),d("especialidad",e.especialidad))}}),[g.data]);var Z=(0,x.useMutation)((function(e){var n,i,a;if(n=1==e.tipo?{tipo:e.tipo,nit:e.nit,ci:{raiz:e.ci,complemento:e.ciComplemento},apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombre:e.nombre,especialidad:e.especialidad,regionalId:e.regional[0].id}:{tipo:e.tipo,nit:e.nit,nombre:e.nombre,regionalId:e.regional[0].id},Array.isArray(e.ubicacion)){var o=e.ubicacion,l=(0,u.Z)(o,2);i=l[0],a=l[1]}else{var t=e.ubicacion;i=t.lat,a=t.lng}var s={direccion:e.direccion,ubicacion:{latitud:i,longitud:a},telefono1:e.telefono1,telefono2:e.telefono2};return r?Ne((0,c.Z)((0,c.Z)({id:r},n),s)):ye((0,c.Z)((0,c.Z)({},n),s))}),{onSuccess:function(){t({tipo:1,initialized:!0,ciComplemento:null,regional:[],direccion:"",ubicacion:null}),v.invalidateQueries("proveedores"),r&&n.push("/clinica/proveedores")}});(0,qe.e)(Z.error,s);return(0,w.jsxs)(I.RV,(0,c.Z)((0,c.Z)({},o),{},{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/proveedores"},children:"Proveedores"}),r?(0,w.jsx)(h.Z.Item,{active:!0,children:r}):null,(0,w.jsx)(h.Z.Item,{active:!0,children:r?"Actualizaci\xf3n":"Registro"})]}),(0,w.jsxs)(N.Z,{onSubmit:l((function(e){Z.mutate(e)})),children:[function(){if(g.error){var e=g.error.response;return(0,w.jsx)(A.Z,{variant:"danger",children:e?404==e.status?"El proveedor no existe":e.data.message:"Error: no se pudo conectar con el servidor"})}if(Z.error){var r,n=Z.error.response;return(0,w.jsx)(A.Z,{variant:"danger",children:(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Error: no se pudo conectar con el servidor"})}return Z.isSuccess?(0,w.jsx)(A.Z,{variant:"success",children:"La operacion se realiz\xf3 con exito"}):null}(),(0,w.jsx)(Ae,{}),(0,w.jsx)(He,{}),(0,w.jsxs)(m.Z,{className:"mt-3",type:"submit",children:[Z.isLoading?(0,w.jsx)(q.Z,{className:"mr-2",animation:"border",size:"sm"}):null,"Guardar"]})]})]}))},_e=["isInvalid","feedback","filter"],Ue=function(e){var r=e.isInvalid,n=e.feedback,a=e.filter,o=void 0===a?{}:a,t=(0,D.Z)(e,_e),s=(0,i.useState)(t.defaultOptions||[]),d=(0,u.Z)(s,2),h=d[0],p=d[1],j=(0,i.useState)(""),v=(0,u.Z)(j,2),g=v[0],Z=v[1],f=["proveedores","buscar",o=(0,c.Z)((0,c.Z)({},o),{},{_busqueda:g})],b=(0,x.useInfiniteQuery)(f,(function(e){var r=e.pageParam;return fe({current:void 0===r?1:r,size:10},o)}),{enabled:!!g,refetchOnReconnect:!1,refetchOnWindowFocus:!1,getNextPageParam:function(e){return e.data.meta.nextPage},onSuccess:function(e){var r=e.pages;p(r.flatMap((function(e){return e.data.records}),1))}});return(0,w.jsxs)(H.Z,{hasValidation:!0,className:"position-unset",children:[(0,w.jsx)(pe.Wf,(0,c.Z)((0,c.Z)({clearButton:!0,align:"left",emptyLabel:b.isError?"":"No se encontraron resultados",promptText:"Escribe un nombre o especialidad para buscar",searchText:"Buscando...",paginationText:"Cargar m\xe1s..."},t),{},{labelKey:function(e){return e.razonSocial},className:t.className+(b.isError||r?" is-invalid":""),isInvalid:b.isError||r,filterBy:function(){return!0},maxResults:10,minLength:0,options:h,isLoading:"loading"==b.status||b.isFetchingNextPage,onSearch:function(e){Z(e)},paginate:!0,onPaginate:function(){b.fetchNextPage()},useCache:!1,renderMenuItemChildren:function(e){return(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:e.razonSocial}),(0,w.jsx)("small",{className:"text-muted",children:1==e.tipo?e.especialidad:"Empresa"})]})}})),b.isError?(0,w.jsx)(H.Z.Append,{children:(0,w.jsx)(m.Z,{variant:"outline-danger",onClick:function(){return b.refetch()},children:(0,w.jsx)(l.lbL,{})})}):null,(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:b.isError?"Ocurrio un error al realizar la busqueda":n})]})},Ke=n(72426),Xe=n.n(Ke),We=new((0,B.Z)((function e(){var r=this;(0,k.Z)(this,e),this.index=function(e){return r.view(e)||r.register(e)},this.register=function(e,n){var i=r.registerByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Registrar solicitudes de atencion externa"))||void 0},this.registerByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Registrar solicitudes de atencion externa (misma regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.view=function(e,n){var i=r.viewByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Ver solicitudes de atencion externa"))||void 0},this.viewByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Ver solicitudes de atencion externa (misma regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId},this.emit=function(e,n){var i=r.emitByRegionalOnly(e,n);return void 0!==i?i:!(null===e||void 0===e||!e.can("Emitir solicitudes de atencion externa"))||void 0},this.emitByRegionalOnly=function(e,r){if(null!==e&&void 0!==e&&e.can("Emitir solicitudes de atencion externa (misma regional)"))return!(null!==r&&void 0!==r&&r.regionalId)||e.regionalId==r.regionalId}}))),$e=["ref","value"],Ye=function(e){var r=(0,Ie.aF)(),n=(0,I.cI)({defaultValues:{medico:[],proveedor:[],regional:[]}}),i=n.control,a=(n.formState,n.handleSubmit),o=n.register,l=n.reset,t=n.watch;return(0,w.jsxs)(N.Z,{className:"mb-2 border rounded p-2",onSubmit:a((function(r){e.onFilter({numeroPatronal:r.numeroPatronal,matricula:r.matricula,desde:r.desde&&Xe()(r.desde).format("YYYY-MM-DD"),hasta:r.hasta&&Xe()(r.hasta).format("YYYY-MM-DD"),medicoId:r.medico.length&&r.medico[0].id,proveedorId:r.medico.length?r.proveedor[0].id:void 0,regionalId:r.regional.length&&r.regional[0].id})})),children:[(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"N\xba Patronal"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({},o("numeroPatronal")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"Matricula"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({},o("matricula")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"Regional"}),(0,w.jsx)(I.Qr,{control:i,name:"regional",render:function(e){var n=e.field,i=(n.ref,n.value),a=(0,D.Z)(n,$e);return(0,w.jsx)(z.hl,(0,c.Z)({className:"text-uppercase",id:"medico-filter-regional",selected:We.viewByRegionalOnly(r)?[r.regional]:i,filterBy:function(e){return!1!==We.viewByRegionalOnly(r,{regionalId:e.id})}},a))}})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"M\xe9dico"}),(0,w.jsx)(I.Qr,{control:i,name:"medico",render:function(e){e.field;return(0,w.jsx)(ve,{id:"medicos-typeahead",filter:{regionalId:oe.viewByRegionalOnly(r)?r.regionalId:t("regional").length&&t("regional")[0].id}})}})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:6,lg:4,children:[(0,w.jsx)(N.Z.Label,{children:"Proveedor"}),(0,w.jsx)(I.Qr,{control:i,name:"medico",render:function(){return(0,w.jsx)(Ue,{id:"proveedores-typeahead",filter:{regionalId:ge.viewByRegionalOnly(r)?r.regionalId:t("regional").length&&t("regional")[0].id}})}})]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Desde"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({type:"date"},o("desde")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Hasta"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({type:"date"},o("hasta")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsx)(C.Z,{xs:"auto",className:"ml-auto",children:(0,w.jsx)(m.Z,{type:"submit",children:"Aplicar"})}),(0,w.jsx)(C.Z,{xs:"auto",children:(0,w.jsx)(m.Z,{variant:"secondary",onClick:function(){return l()},children:"Limpiar"})})]})]})},Je=function(e){var r=e.solicitud,n=(0,O.d)("pdfModal");return(0,w.jsxs)(E.Z,{style:{position:"initial"},children:[(0,w.jsx)(E.Z.Toggle,{as:z.VO,variant:"link",id:"dropdown-solicitud-".concat(r.id)}),(0,w.jsx)(E.Z.Menu,{children:(0,w.jsx)(S.BH,{authorize:function(e){return We.emit(e,r)},children:(0,w.jsx)(E.Z.Item,{href:"#",onClick:function(){n.open({title:"Formulario D.M. - 11",url:r.urlDm11})},children:"Ver D.M. - 11"})})})]})},er=function(){var e,r=(0,a.TH)().pathname,n=(0,i.useState)({current:1,size:10}),o=(0,u.Z)(n,2),t=o[0],s=o[1],d=(0,Ie.aF)(),j=(0,i.useState)((function(){var e={};return We.viewByRegionalOnly(d)&&(e.regionalId=d.regionalId),e})),v=(0,u.Z)(j,2),g=v[0],Z=v[1],f=!!(0,M.x)(We.view)(d),b=(0,x.useQuery)(["solicitudesAtencionExterna.buscar",t,g],(function(){return Y(g,t)}),{enabled:!!f,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),y=(0,i.useRef)(-1);b.data&&(y.current=b.data.data.meta.total);var N=(0,i.useMemo)((function(){for(var e=[],r=0;r<t.size;r++)e.push((0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:r+1}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{children:(0,w.jsx)(T.Z,{})}),(0,w.jsx)("td",{})]},r));return e}),[t.size]);return(0,w.jsxs)("div",{className:"px-1",children:[(0,w.jsx)(h.Z,{children:(0,w.jsx)(h.Z.Item,{active:!0,children:"Solicitudes de atencion externa"})}),(0,w.jsx)(P.I,{policy:We,isLoading:b.isFetching,hasError:b.isError,total:y.current,page:t,data:null===(e=b.data)||void 0===e?void 0:e.data.records,renderLoader:function(){return(0,w.jsx)(w.Fragment,{children:N})},renderData:function(e,r){var n,i;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:(t.current-1)*t.size+r+1}),(0,w.jsx)("td",{children:e.numero}),(0,w.jsx)("td",{children:e.fecha}),(0,w.jsx)("td",{children:e.regional.nombre}),(0,w.jsxs)("td",{children:[(0,w.jsx)("div",{children:e.paciente.nombreCompleto}),(0,w.jsx)("div",{className:"text-muted",children:e.paciente.matricula})]}),(0,w.jsxs)("td",{children:[(0,w.jsx)("div",{children:null===(n=e.titular)||void 0===n?void 0:n.nombreCompleto}),(0,w.jsx)("div",{className:"text-muted",children:null===(i=e.titular)||void 0===i?void 0:i.matricula})]}),(0,w.jsx)("td",{children:e.prestacion}),(0,w.jsx)("td",{style:{textTransform:"none"},children:(0,w.jsx)(Je,{solicitud:e})})]},e.id)},renderDataHeaders:function(){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"N\xba"}),(0,w.jsx)("th",{children:"Fecha"}),(0,w.jsx)("th",{children:"Regional"}),(0,w.jsx)("th",{children:"Paciente"}),(0,w.jsx)("th",{children:"Titular"}),(0,w.jsx)("th",{children:"Prestaci\xf3n"}),(0,w.jsx)("th",{style:{width:1}})]})},renderFilterForm:function(){return(0,w.jsx)(Ye,{onFilter:function(e){b.remove(),Z(e),s((function(e){return(0,c.Z)((0,c.Z)({},e),{},{current:1})}))}})},renderCreateButton:function(){return(0,w.jsxs)(m.Z,{as:p.rU,to:"".concat(r,"/registrar"),className:"d-flex align-items-center",children:[(0,w.jsx)(l.wEH,{className:"mr-1"}),(0,w.jsx)("span",{children:"Nuevo"})]})},onPageChange:function(e){return s(e)},onRefetch:function(){b.remove(),b.refetch({throwOnError:!0})}})]})},rr=n(74273),nr=n(78695),ir=n(74292),ar=function(e){return(0,w.jsxs)(_.Z,(0,c.Z)((0,c.Z)({},e),{},{children:[(0,w.jsx)(_.Z.Header,{children:e.title}),(0,w.jsx)(_.Z.Body,{children:(0,w.jsxs)(U.Z,{responsive:!0,className:"small",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:1},children:"#"}),(0,w.jsx)("th",{children:"Matricula"}),(0,w.jsx)("th",{children:"Nombre completo"}),(0,w.jsx)("th",{children:"Estado"}),(0,w.jsx)("th",{})]})}),(0,w.jsx)("tbody",{children:e.asegurados.length?e.asegurados.map((function(r,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:n+1}),(0,w.jsxs)("td",{children:[r.matricula,"-",r.matriculaComplemento]}),(0,w.jsx)("td",{children:r.nombreCompleto}),(0,w.jsx)("td",{className:r.estadoText?"":"bg-ligth",children:r.estadoText||"Desconocido"}),(0,w.jsx)("td",{children:(0,w.jsx)(m.Z,{onClick:function(){e.onSelect(r)},children:"Seleccionar"})})]},r.id)})):(0,w.jsx)("tr",{children:(0,w.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})})})]})})]}))},or=function(e){return v.x1.get("asegurados",{params:{filter:{matricula:e},page:{size:10},include:"empleador,titular"}})},lr=function(e){var r,n,a,o,t,s,d,h,p,j,v,g,Z,f,b,y,R,E,z,O,S,B,k,F,L,M,P,T,G,D,V,Q,_,U,K,X,W,$,Y,J,ee,re,ne,ie,ae,oe,le=(0,I.Gc)(),te=le.register,se=le.formState,de=le.trigger,ce=le.setValue,ue=le.clearErrors,he=(le.control,le.watch),me=(0,i.useState)(!1),xe=(0,u.Z)(me,2),pe=xe[0],je=xe[1],ve=e.value,ge=he("asegurado.matricula"),Ze=(0,x.useQuery)(["asegurados.buscar",ge],(function(){return or(ge)}),{enabled:!1,onSuccess:function(r){var n=r.data.records;if(1==n.length){var i=n[0];e.onChange(i)}else je(!0)}});(0,i.useEffect)((function(){var e,r,n,i,a=null===ve||void 0===ve?void 0:ve.empleador;if(ce("asegurado.apellidoPaterno",(null===ve||void 0===ve?void 0:ve.apellidoPaterno)||""),ce("asegurado.apellidoMaterno",(null===ve||void 0===ve?void 0:ve.apellidoMaterno)||""),ce("asegurado.nombres",(null===ve||void 0===ve?void 0:ve.nombres)||""),ce("asegurado.estado",(null===ve||void 0===ve?void 0:ve.estadoText)||""),null!==ve&&void 0!==ve&&null!==(e=ve.afiliacion)&&void 0!==e&&null!==(r=e.baja)&&void 0!==r&&r.fechaValidezSeguro&&ce("asegurado.baja.fechaValidezSeguro",Xe()(null===ve||void 0===ve||null===(n=ve.afiliacion)||void 0===n||null===(i=n.baja)||void 0===i?void 0:i.fechaValidezSeguro).format("L")),ce("empleador.numeroPatronal",(null===a||void 0===a?void 0:a.numeroPatronal)||""),ce("empleador.nombre",(null===a||void 0===a?void 0:a.nombre)||""),ce("empleador.estado",(null===a||void 0===a?void 0:a.estadoText)||""),ce("empleador.fechaBaja",null!==a&&void 0!==a&&a.fechaBaja?Xe()(null===a||void 0===a?void 0:a.fechaBaja).format("L"):""),ce("empleador.enMora",null!==a&&void 0!==a&&a.enMora?"S\xed":!1===(null===a||void 0===a?void 0:a.enMora)?"No":""),2==(null===ve||void 0===ve?void 0:ve.tipo)){var o,l,t,s,d,c,u=null===ve||void 0===ve?void 0:ve.titular,h=null===ve||void 0===ve||null===(o=ve.afiliacion)||void 0===o?void 0:o.fechaExtincion,m=function(e){switch(e){case 1:return"Hijo(a)";case 2:return"Esposa";case 3:return"Conviviente";case 4:return"Madre";case 5:return"Padre";case 6:return"Hermano(a)";case 7:return"Esposo";case 8:return"Derechohabiente";default:return""}}(null===ve||void 0===ve||null===(l=ve.afiliacion)||void 0===l?void 0:l.parentesco);ce("asegurado.parentesco",m),ce("asegurado.fechaExtincion",h?Xe()(h).format("L"):""),ce("titular.matricula",(null===u||void 0===u?void 0:u.matricula)||""),ce("titular.apellidoPaterno",(null===u||void 0===u?void 0:u.apellidoPaterno)||""),ce("titular.apellidoMaterno",(null===u||void 0===u?void 0:u.apellidoMaterno)||""),ce("titular.nombres",(null===u||void 0===u?void 0:u.nombres)||""),ce("titular.estado",null===u||void 0===u?void 0:u.estadoText),null!==u&&void 0!==u&&null!==(t=u.afiliacion)&&void 0!==t&&null!==(s=t.baja)&&void 0!==s&&s.fechaValidezSeguro&&ce("titular.baja.fechaValidezSeguro",Xe()(null===u||void 0===u||null===(d=u.afiliacion)||void 0===d||null===(c=d.baja)||void 0===c?void 0:c.fechaValidezSeguro).format("L"))}}),[ve]),(0,i.useEffect)((function(){var r;ve&&null!==(r=se.dirtyFields.asegurado)&&void 0!==r&&r.matricula&&e.onChange(null)}),[ge]);var fe=se.errors,be=fe.asegurado||fe.titular||fe.empleador;return(0,w.jsxs)(nr.Z,{children:[(0,w.jsx)(rr.Z.Toggle,{as:nr.Z.Header,className:"text-light "+(be?"bg-danger":"bg-primary"),eventKey:"0",children:"Asegurado"}),(0,w.jsx)(rr.Z.Collapse,{eventKey:"0",children:(0,w.jsxs)(nr.Z.Body,{children:[(0,w.jsxs)("div",{children:[null!==(r=fe.asegurado)&&void 0!==r&&r.message?(0,w.jsx)(A.Z,{variant:"danger",children:null===(n=fe.asegurado)||void 0===n?void 0:n.message}):null,(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{htmlFor:"asegurado-matricula",children:"Matr\xedcula"}),(0,w.jsxs)(H.Z,{hasValidation:!0,children:[(0,w.jsx)(ir.Z,(0,c.Z)((0,c.Z)({id:"asegurado-matricula",isInvalid:!(null===(a=fe.asegurado)||void 0===a||!a.matricula)||Ze.isError,className:"text-uppercase"},te("asegurado.matricula")),{},{"aria-describedby":"matriculaHelpBlock"})),(0,w.jsx)(H.Z.Append,{children:(0,w.jsx)(m.Z,{variant:null!==(o=fe.asegurado)&&void 0!==o&&o.matricula||Ze.isError?"outline-danger":"outline-secondary",onClick:function(){de("asegurado.matricula").then((function(r){var n,i;if(null===(n=fe.asegurado)||void 0===n||!n.matricula)if(null!==(i=se.dirtyFields.asegurado)&&void 0!==i&&i.matricula&&delete se.dirtyFields.asegurado.matricula,ue(["asegurado","titular","empleador"]),Ze.data){var a=Ze.data.data.records;if(1==a.length){var o=a[0];e.onChange(o)}else je(!0)}else Ze.refetch()}))},children:Ze.isFetching?(0,w.jsx)(q.Z,{animation:"border",size:"sm"}):(0,w.jsx)(l.U41,{})})}),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:404==(null===(t=Ze.error)||void 0===t||null===(s=t.response)||void 0===s?void 0:s.status)?"Asegurado no encontrado":"Ocurrio un error al realizar la busqueda"})]}),null!==(d=fe.asegurado)&&void 0!==d&&d.matricula||Ze.isError?null:(0,w.jsx)(N.Z.Text,{id:"matriculaHelpBlock",muted:!0,children:"Ej: 98-0824-ABC"})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Paterno"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("asegurado.apellidoPaterno")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Materno"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("asegurado.apellidoMaterno")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("asegurado.nombres")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[!!ve&&(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Estado"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,className:"text-uppercase",isInvalid:!(null===(h=fe.asegurado)||void 0===h||!h.estado)},te("asegurado.estado"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(p=fe.asegurado)||void 0===p||null===(j=p.estado)||void 0===j?void 0:j.message})]}),2==(null===ve||void 0===ve?void 0:ve.tipo)&&(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Parentesco"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,className:"text-uppercase"},te("asegurado.parentesco")))]}),(null===ve||void 0===ve||null===(v=ve.afiliacion)||void 0===v?void 0:v.baja)&&(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Validez del seguro"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,isInvalid:!(null===(g=fe.asegurado)||void 0===g||null===(Z=g.baja)||void 0===Z||!Z.fechaValidezSeguro)},te("asegurado.baja.fechaValidezSeguro"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(f=fe.asegurado)||void 0===f||null===(b=f.baja)||void 0===b||null===(y=b.fechaValidezSeguro)||void 0===y?void 0:y.message})]}),2==(null===ve||void 0===ve?void 0:ve.tipo)?(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Fecha de extinci\xf3n"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,isInvalid:!(null===(R=fe.asegurado)||void 0===R||!R.fechaExtincion)},te("asegurado.fechaExtincion"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(E=fe.asegurado)||void 0===E||null===(z=E.fechaExtincion)||void 0===z?void 0:z.message})]}):null]})]}),2==(null===ve||void 0===ve?void 0:ve.tipo)&&(0,w.jsxs)("div",{children:[(0,w.jsx)("hr",{}),(0,w.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Titular"}),null!==(O=fe.titular)&&void 0!==O&&O.message?(0,w.jsx)(A.Z,{variant:"danger",children:null===(S=fe.titular)||void 0===S?void 0:S.message}):null,(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Matricula"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("titular.matricula")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Paterno"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("titular.apellidoPaterno")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Apellido Materno"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("titular.apellidoMaterno")))]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,lg:3,md:6,children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("titular.nombres")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Estado"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,className:"text-uppercase",isInvalid:!(null===(B=fe.titular)||void 0===B||!B.estado)},te("titular.estado"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(k=fe.titular)||void 0===k||null===(F=k.estado)||void 0===F?void 0:F.message})]}),(null===ve||void 0===ve||null===(L=ve.titular)||void 0===L||null===(M=L.afiliacion)||void 0===M?void 0:M.baja)&&(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Validez del seguro"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,isInvalid:!(null===(P=fe.titular)||void 0===P||null===(T=P.baja)||void 0===T||!T.fechaValidezSeguro)},te("titular.baja.fechaValidezSeguro"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(G=fe.titular)||void 0===G||null===(D=G.baja)||void 0===D||null===(V=D.fechaValidezSeguro)||void 0===V?void 0:V.message})]})]})]}),!!ve&&(0,w.jsxs)("div",{children:[(0,w.jsx)("hr",{}),(0,w.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Empleador"}),null!==(Q=fe.empleador)&&void 0!==Q&&Q.message?(0,w.jsx)(A.Z,{variant:"danger",children:null===(_=fe.empleador)||void 0===_?void 0:_.message}):null,(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,md:3,children:[(0,w.jsx)(N.Z.Label,{children:"N\xba Patronal"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,isInvalid:!(null===(U=fe.empleador)||void 0===U||!U.numeroPatronal)},te("empleador.numeroPatronal"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(K=fe.empleador)||void 0===K||null===(X=K.numeroPatronal)||void 0===X?void 0:X.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,md:9,children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0},te("empleador.nombre")))]})]}),(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Estado"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,className:"text-uppercase",isInvalid:!(null===(W=fe.empleador)||void 0===W||!W.estado)},te("empleador.estado"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===($=fe.empleador)||void 0===$||null===(Y=$.estado)||void 0===Y?void 0:Y.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"Fecha de baja"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,isInvalid:!(null===(J=fe.empleador)||void 0===J||!J.fechaBaja)},te("empleador.fechaBaja"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(ee=fe.empleador)||void 0===ee||null===(re=ee.fechaBaja)||void 0===re?void 0:re.message})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:3,children:[(0,w.jsx)(N.Z.Label,{children:"En mora"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({readOnly:!0,className:"text-uppercase",isInvalid:!(null===(ne=fe.empleador)||void 0===ne||!ne.enMora)},te("empleador.enMora"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(ie=fe.empleador)||void 0===ie||null===(ae=ie.enMora)||void 0===ae?void 0:ae.message})]})]})]}),(0,w.jsx)(ar,{title:"Resultados",show:pe,asegurados:(null===(oe=Ze.data)||void 0===oe?void 0:oe.data.records)||[],onSelect:function(r){e.onChange(r),je(!1)},onHide:function(){return je(!1)}})]})})]})},tr={1:"Activo",2:"Baja"},sr={1:"Activo",2:"Baja",3:"Baja temporal"},dr=Xe()(),cr=function(e,r){return r.oneOf(Object.values(tr),"Estado desconocido"),e.afiliacion.baja?r.notOneOf([tr[1]],"El asegurado figura como activo, pero hay un registro de su baja con fecha ".concat(e.afiliacion.baja.fechaRegistro,".")):r.notOneOf([tr[2]],"El asegurado figura como dado de baja, aunque no se encontraron registros de la misma.")},ur=function(e,r){return e.afiliacion.baja?r.shape({fechaValidezSeguro:Q.hT().format().emptyStringTo(null).nullable().min(dr,"El seguro ya no tiene validez").required("Fecha sin especificar, se asume que el seguro ya no tiene validez")}):r},hr=function(e,r){return r.oneOf(Object.values(sr),"Estado desconocido"),e.fechaBaja&&r.notOneOf(sr[1],"El empleador figura como activo, pero tiene fecha de baja"),r},mr=Q.Ry().shape({asegurado:Q.Ry().when("$asegurado",(function(e,r){return e?r.shape({matricula:Q.Z_().label("matricula").trim().uppercase().required(),estado:cr(e,Q.Z_().label("estado")),fechaExtincion:Q.hT().format().emptyStringTo(null).nullable().label("fecha de extinsion").notRequired().min(dr.toDate(),"Fecha de extinsion alcanzada"),baja:ur(e,Q.Ry())}):r.test("","",(function(e,r){return r.createError({message:"Debe proporcionar los datos del afiliado"})}))})),titular:Q.Ry().when("$asegurado",(function(e,r){if(2==(null===e||void 0===e?void 0:e.tipo)){var n;if(!e.titular)return r.oneOf([NaN],"No se encontraron datos del titular");if(8!=(null===e||void 0===e||null===(n=e.afiliacion)||void 0===n?void 0:n.parentesco))return r.shape({estado:cr(e.titular,Q.Z_().label("estado")),baja:ur(e,Q.Ry())})}})),empleador:Q.Ry().when("$asegurado",(function(e,r){if(e){var n=e.empleador;return n?r.shape({estado:hr(n,Q.Z_().label("estado")),fechaBaja:Q.hT().format().emptyStringTo(null).nullable().when("estado",{is:function(e){return e==sr[2]||e==sr[3]},then:function(e){return e.required("Fecha sin especificar, se asume que el seguro ya no tiene validez").min(dr.subtract(2,"months").toDate(),"Han pasado mas de 2 meses desde la baja, el seguro ya no tiene validez")}}),enMora:Q.Z_().oneOf(["No"],"El empleador esta en mora")}):r.oneOf([NaN],"No se encontraron datos del empleador")}})),regional:Q.IX().length(1,"Debe seleccionar una regional"),medico:Q.IX().length(1,"Debe indicar el medico que realiza la solicitud"),proveedor:Q.IX().length(1,"Debe indicar el proveedor que brindar\xe1 el servicio"),prestacion:Q.Z_().trim().uppercase().required("Debe indicar la prestacion que se solicita").max(100)}),xr=function(){var e,r=(0,i.useState)(null),n=(0,u.Z)(r,2),a=n[0],o=n[1],l=(0,I.cI)({mode:"onBlur",context:{asegurado:a},resolver:(0,V.X)(mr),defaultValues:{asegurado:{},titular:{},empleador:{},regional:[],medico:[],proveedor:[],prestacion:""}}),t=l.register,s=l.handleSubmit,d=l.formState,j=l.control,v=l.reset,g=l.setValue,Z=l.setError,f=l.watch,b=(0,O.d)("pdfModal"),y=(0,Ie.aF)(),R=(0,x.useMutation)((function(e){return J(e.regional[0].id,a.id,e.medico[0].id,e.proveedor[0].id,e.prestacion)}),{onSuccess:function(e){var r=e.data,n=r.urlDm11,i=r.regionalId;v(),(0,M.x)(We.emit)(y,{regionalId:i})&&(b.open({url:n,title:"Formulario D.M. - 11"}),o(null))}}),E=d.errors,S=R.error;(0,i.useEffect)((function(){var e;if(422==(null===S||void 0===S||null===(e=S.response)||void 0===e?void 0:e.status)){var r,n=(null===(r=S.response)||void 0===r?void 0:r.data).errors;Object.keys(n).forEach((function(e){var r=e;"asegurado.id"==e&&(r="asegurado.matricula"),"empleador.aportes"==e&&(r="empleador.enMora"),Z(r,{type:"serverError",message:n[e]})}))}}),[S]);return(0,w.jsxs)(I.RV,(0,c.Z)((0,c.Z)({},l),{},{children:[(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(h.Z.Item,{linkAs:p.rU,linkProps:{to:"/clinica/atencion-externa"},children:"Solicitudes de atencion externa"}),(0,w.jsx)(h.Z.Item,{active:!0,children:"Registro"})]}),(0,w.jsxs)(N.Z,{onSubmit:s((function(e){R.mutate(e)})),children:[function(){if(R.isSuccess)return(0,w.jsx)(A.Z,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"});if(R.isError){var e,r,n=R.error;return(0,w.jsx)(A.Z,{variant:"danger",children:(null===(e=n.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||n.message})}return null}(),(0,w.jsxs)(rr.Z,{className:"mt-3",defaultActiveKey:"0",children:[(0,w.jsx)(lr,{value:a,onChange:function(e){o(e)}}),(0,w.jsx)(nr.Z,{className:"overflow-visible",children:(0,w.jsxs)("div",{className:"overflow-hidden",children:[(0,w.jsx)(rr.Z.Toggle,{as:nr.Z.Header,className:"text-light "+(E.regional?"bg-danger":"bg-primary"),eventKey:"1",children:"Regional"}),(0,w.jsx)(rr.Z.Collapse,{eventKey:"1",children:(0,w.jsx)(nr.Z.Body,{children:(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,className:"position-unset",children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(I.Qr,{control:j,name:"regional",render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsx)(z.hl,{style:{textTransform:"uppercase"},inputProps:{style:{textTransform:"uppercase"}},id:"solicitud-atencion-externa-form/regionales",filterBy:function(e){return!1!==We.registerByRegionalOnly(y,{regionalId:e.id})},isInvalid:!!i.error,feedback:null===(r=i.error)||void 0===r?void 0:r.message,selected:n.value,onBlur:n.onBlur,onChange:function(e){g("medico",[]),g("proveedor",[]),n.onChange(e)}})}})]})})})})]})}),(0,w.jsx)(nr.Z,{className:"overflow-visible",children:(0,w.jsxs)("div",{className:"overflow-hidden",children:[(0,w.jsx)(rr.Z.Toggle,{as:nr.Z.Header,className:"text-light "+(E.medico?"bg-danger":"bg-primary"),eventKey:"2",children:"M\xe9dico"}),(0,w.jsx)(rr.Z.Collapse,{eventKey:"2",children:(0,w.jsx)(nr.Z.Body,{children:(0,w.jsx)(I.Qr,{control:j,name:"medico",render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:8,className:"position-unset",children:[(0,w.jsx)(N.Z.Label,{children:"Nombre"}),(0,w.jsx)(ve,{id:"medicos-typeahead",feedback:null===(r=i.error)||void 0===r?void 0:r.message,disabled:0==f("regional").length,filter:{regionalId:oe.viewByRegionalOnly(y)?y.regionalId:f("regional").length&&f("regional")[0].id,estado:1},className:"text-uppercase",isInvalid:!!i.error,selected:n.value,onBlur:n.onBlur,onChange:n.onChange})]}),(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Especialidad"}),(0,w.jsx)(N.Z.Control,{readOnly:!0,style:{textTransform:"uppercase"},value:n.value.length?n.value[0].especialidad:""})]})]})}})})})]})}),(0,w.jsx)(nr.Z,{className:"overflow-visible",children:(0,w.jsxs)("div",{className:"overflow-hidden",children:[(0,w.jsx)(rr.Z.Toggle,{as:nr.Z.Header,className:"text-light "+(E.medico?"bg-danger":"bg-primary"),eventKey:"3",children:"Servicio solicitado"}),(0,w.jsx)(rr.Z.Collapse,{eventKey:"3",children:(0,w.jsxs)(nr.Z.Body,{children:[(0,w.jsx)(I.Qr,{control:j,name:"proveedor",render:function(e){var r,n=e.field,i=e.fieldState;return(0,w.jsxs)(N.Z.Row,{children:[(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:8,className:"position-unset",children:[(0,w.jsx)(N.Z.Label,{children:"Proveedor"}),(0,w.jsx)(Ue,{id:"proveedores-typeahead",feedback:null===(r=i.error)||void 0===r?void 0:r.message,disabled:0==f("regional").length,filter:{regionalId:ge.viewByRegionalOnly(y)?y.regionalId:f("regional").length&&f("regional")[0].id,estado:1},className:"text-uppercase",isInvalid:!!i.error,selected:n.value,onBlur:n.onBlur,onChange:n.onChange})]}),n.value.length&&1==n.value[0].tipo?(0,w.jsxs)(N.Z.Group,{as:C.Z,sm:4,children:[(0,w.jsx)(N.Z.Label,{children:"Especialidad"}),(0,w.jsx)(N.Z.Control,{readOnly:!0,style:{textTransform:"uppercase"},value:n.value[0].especialidad})]}):null]})}}),(0,w.jsx)(N.Z.Row,{children:(0,w.jsxs)(N.Z.Group,{as:C.Z,children:[(0,w.jsx)(N.Z.Label,{children:"Prestaci\xf3n"}),(0,w.jsx)(N.Z.Control,(0,c.Z)({as:"textarea",style:{textTransform:"uppercase"},isInvalid:!!d.errors.prestacion,"aria-describedby":"prestacionHelpBlock"},t("prestacion"))),(0,w.jsx)(N.Z.Control.Feedback,{type:"invalid",children:null===(e=d.errors.prestacion)||void 0===e?void 0:e.message}),d.errors.prestacion?null:(0,w.jsx)(N.Z.Text,{id:"prestacionHelpBlock",muted:!0,children:"".concat(f("prestacion").length,"/100")})]})})]})})]})})]}),(0,w.jsxs)(m.Z,{className:"mt-3",type:"submit",children:[R.isLoading?(0,w.jsx)(q.Z,{className:"mr-2",animation:"border",size:"sm"}):null,(0,w.jsx)("span",{children:"Guardar"})]})]})]}))},pr=n(92592),jr=function(){var e=(0,a.$B)().url,r=(0,j.aF)(),n=(0,i.useMemo)((function(){var n=[];return(0,M.x)(F.index)(r)&&n.push({id:"lista-mora",path:"".concat(e,"/lista-mora"),title:"Lista de mora",icon:(0,w.jsx)(s,{})}),(0,M.x)(We.index)(r)&&n.push({id:"atencion-externa",path:"".concat(e,"/atencion-externa"),title:"Atenci\xf3n externa",icon:(0,w.jsx)(d.HZ8,{})}),(0,M.x)(oe.index)&&n.push({id:"medicos",path:"".concat(e,"/medicos"),title:"Medicos",icon:(0,w.jsx)(l.Z5v,{})}),(0,M.x)(ge.index)(r)&&n.push({id:"proveedores",path:"".concat(e,"/proveedores"),title:"Proveedores",icon:(0,w.jsx)(l.Cq,{})}),n}),[r]);return(0,w.jsx)(o.Z,{sidebar:{header:(0,w.jsx)("div",{className:"d-flex justify-content-center",children:(0,w.jsx)(pr.Z,{src:"/logo-lg.png"})}),items:n},children:(0,w.jsxs)(a.rs,{children:[(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/lista-mora/agregar"),authorize:function(e){return F.register(e)},children:(0,w.jsx)($,{})}),(0,w.jsx)(j.i1,{path:"".concat(e,"/lista-mora"),authorize:F.index,children:(0,w.jsx)(G,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/atencion-externa"),authorize:We.index,children:(0,w.jsx)(er,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/atencion-externa/registrar"),authorize:function(e){return We.register(e)},children:(0,w.jsx)(xr,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/medicos"),authorize:oe.index,children:(0,w.jsx)(ue,{})}),(0,w.jsx)(j.i1,{exact:!0,path:["".concat(e,"/medicos/registrar"),"".concat(e,"/medicos/:id/editar")],authorize:function(r,n){return n=="".concat(e,"/medicos/registrar")?oe.register(r):oe.edit(r)},children:(0,w.jsx)(xe,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/medicos/:id"),authorize:function(e){return oe.view(e)},children:(0,w.jsx)(he,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/proveedores"),authorize:ge.index,children:(0,w.jsx)(Se,{})}),(0,w.jsx)(j.i1,{exact:!0,path:["".concat(e,"/proveedores/registrar"),"".concat(e,"/proveedores/:id/editar")],authorize:function(r,n){return n=="".concat(e,"/proveedores/registrar")?ge.register(r):ge.edit(r)},children:(0,w.jsx)(Qe,{})}),(0,w.jsx)(j.i1,{exact:!0,path:"".concat(e,"/proveedores/:id"),authorize:function(e){return ge.view(e)},children:(0,w.jsx)(Pe,{})})]})})},vr=jr},76859:function(e,r,n){n.d(r,{I:function(){return j}});var i=n(18489),a=n(23430),o=n(72791),l=n(77101),t=n(2677),s=n(43360),d=n(73193),c=n(99410),u=n(62591),h=n(56355),m=n(25602),x=n(58031),p=n(80184);function j(e){var r=e.total,n=e.page,j=e.data,v=e.isLoading,g=e.hasError,Z=e.policy,f=e.onSearch,b=e.onRefetch,y=e.onPageChange,N=e.renderLoader,C=e.renderData,I=e.renderDataHeaders,w=e.renderCreateButton,R=e.renderFilterForm,E=(0,o.useState)(""),z=(0,a.Z)(E,2),O=z[0],S=z[1],B=(0,o.useState)(!1),k=(0,a.Z)(B,2),F=k[0],L=k[1];return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"d-flex my-2",children:(0,p.jsxs)(l.Z.Row,{className:"ml-auto flex-nowrap",children:[(0,p.jsxs)(x.BH,{authorize:Z.view,children:[(0,p.jsx)(t.Z,{xs:"auto",children:(0,p.jsx)(s.Z,{onClick:function(){b()},children:(0,p.jsx)(h.lbL,{})})}),R?(0,p.jsx)(t.Z,{xs:"auto",children:(0,p.jsx)(s.Z,{onClick:function(){L((function(e){return!e}))},children:(0,p.jsx)(h.ulB,{})})}):null]}),(0,p.jsx)(x.BH,{authorize:Z.register,children:(0,p.jsx)(t.Z,{xs:"auto",children:w()})})]})}),(0,p.jsxs)(x.BH,{authorize:Z.view,children:[R?(0,p.jsx)(d.Z,{in:F,children:(0,p.jsx)("div",{className:"mb-2",children:R()})}):null,(0,p.jsxs)(l.Z.Row,{className:"mb-2",children:[f?(0,p.jsx)(t.Z,{className:"mb-2",children:(0,p.jsxs)(c.Z,{children:[(0,p.jsx)(l.Z.Control,{"aria-label":"Busqueda",type:"search",value:O,onChange:function(e){S(e.target.value)}}),(0,p.jsx)(c.Z.Append,{children:(0,p.jsx)(s.Z,{onClick:function(){f(O)},children:(0,p.jsx)(h.U41,{})})})]})}):null,(0,p.jsx)(t.Z,{className:"ml-auto",xs:"auto",children:(0,p.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[(0,p.jsx)("span",{children:"Mostrar"}),(0,p.jsx)(l.Z.Label,{htmlFor:"pageSizeSelector",srOnly:!0,children:"Tama\xf1o de pagina"}),(0,p.jsxs)(l.Z.Control,{id:"pageSizeSelector",className:"mx-2",as:"select",value:n.size,onChange:function(e){var r=e.target.value;y({current:1,size:parseInt(r)})},children:[(0,p.jsx)("option",{value:10,children:"10"}),(0,p.jsx)("option",{value:20,children:"20"}),(0,p.jsx)("option",{value:30,children:"30"}),(0,p.jsx)("option",{value:50,children:"50"}),(0,p.jsx)("option",{value:100,children:"100"})]}),(0,p.jsx)("span",{children:"filas"})]})})]}),(0,p.jsxs)(u.Z,{responsive:!0,children:[(0,p.jsx)("thead",{children:I()}),(0,p.jsx)("tbody",{className:"text-uppercase",children:j?0===j.length?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):j.map(C):v?N():g?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:"Ocurri\xf3 un error al realizar la solicitud"})}):null})]}),(0,p.jsxs)(l.Z.Row,{children:[(0,p.jsx)(t.Z,{className:"mr-auto",xs:"auto",children:r>0?(0,p.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["Se encontraron ",r," resultados"]}):""}),(0,p.jsx)(t.Z,{className:"ml-auto",xs:"auto",children:(0,p.jsx)(m.t,{current:n.current,total:Math.ceil(r/n.size),onChange:function(e){return y((0,i.Z)((0,i.Z)({},n),{},{current:e}))}})})]})]})]})}},85908:function(e,r,n){n.d(r,{Z:function(){return v}});var i=n(18489),a=n(72791),o=n(47022),l=n(16789);function t(e,r){(0,a.useEffect)((function(){var n=function(n){var i=null===e||void 0===e?void 0:e.current;i&&!i.contains(n.target)&&document.querySelector("html")!=n.target&&r(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,r])}var s=n(83738),d=n(80184),c=["children","onClickOutside"],u=function(e){var r=e.children,n=e.onClickOutside,o=(0,s.Z)(e,c),l=(0,a.useRef)(null);return t(l,n),(0,d.jsx)("div",(0,i.Z)((0,i.Z)({ref:l},o),{},{children:r}))},h=n(91398),m=n(91523),x=n(79271),p=function(e){var r=(0,x.$B)(e.path||"");return(0,d.jsxs)(d.Fragment,{children:[e.path?(0,d.jsxs)(h.Z.Item,{as:m.rU,to:e.path,action:!0,active:!!r,className:"text-nowrap sidebar-navitem",style:{padding:".5rem 1rem",borderLeft:r?"0.25rem solid #f28c2b":0},children:[(0,d.jsx)("span",{className:"sidebar-navitem-icon",children:e.icon}),(0,d.jsx)("span",{className:"sidebar-navitem-title",children:e.title})]},e.id):(0,d.jsxs)("div",{className:"list-group-item border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[(0,d.jsx)("span",{className:"sidebar-navitem-icon",children:e.icon}),(0,d.jsx)("span",{className:"sidebar-navitem-title",children:e.title})]},e.id),e.items&&e.items.map((function(e){return(0,d.jsxs)(m.rU,{to:e.path,style:{padding:".5rem 1rem",paddingLeft:"2rem"},className:"list-group-item list-group-item-action  border-left-3 text-nowrap",children:[e.icon||null,(0,d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id)}))]})},j=function(e){var r=e.className,n=void 0===r?"":r,a=e.side,o=void 0===a?"right":a,l=e.header,t=void 0===l?"":l,s=e.items,c=void 0===s?[]:s;e.renderItem;return(0,d.jsxs)("div",{className:"".concat(n,"  ").concat({left:"border-left",right:"border-right"}[o]),id:"sidebar-wrapper",children:[(0,d.jsx)("div",{className:"sidebar-heading",children:(0,d.jsx)("div",{className:"sidebar-heading-content",children:t})}),(0,d.jsx)("hr",{className:"mx-2"}),(0,d.jsx)("div",{className:"sidebar-menu",children:(0,d.jsx)(h.Z,{variant:"flush",children:c.map((function(e){return(0,d.jsx)(p,(0,i.Z)({},e),e.id)}))})})]})},v=function(e){var r=e.sidebar,n=e.children,t=(0,l.v9)((function(e){return e.sidebarVisibility})),s=(0,l.I0)(),c=a.useCallback((function(e){var r=document.querySelector('[aria-label="Toggle navigation"]');null!==r&&void 0!==r&&r.contains(e.target)||s({type:"CLOSE_SIDEBAR"})}),[t]);return(0,d.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(t?"":" collapsed"),id:"wrapper",children:[(0,d.jsx)(u,{className:"shadow-sm",style:{zIndex:100},onClickOutside:c,children:(0,d.jsx)(j,(0,i.Z)({className:"bg-white shadow-sm"},r))}),(0,d.jsx)("div",{className:"overflow-auto",style:{width:"100%"},children:(0,d.jsx)(o.Z,{className:"d-flex flex-column",children:(0,d.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:n})})})]})}}}]);
//# sourceMappingURL=454.03ea5073.chunk.js.map