{"version":3,"sources":["commons/services/authClient.ts","commons/services/UnidadesTerritorialesService.ts","commons/services/index.ts","commons/components/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/index.ts","apps/clinica/mora/components/ListaMoraFilter.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","commons/components/rules/index.ts","apps/clinica/mora/components/ListaMoraItemForm.tsx","commons/components/PDFViewer.tsx","commons/components/LocationInput.tsx","commons/components/DepartamentosTypeahead.tsx","commons/components/ProvinciasTypeahead.tsx","commons/components/MunicipiosTypeahead.tsx","commons/services/RegionalesService.ts","commons/components/RegionalesTypeahead.tsx","commons/components/ImperativeModal.tsx","apps/clinica/solicitud_atencion_externa/components/Dm11Viewer.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","commons/components/icons/FcDebt.tsx","commons/utils/nombreCompleto.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/services/MedicosService.ts","apps/clinica/solicitud_atencion_externa/components/MedicosTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/PrestacionesService.ts","apps/clinica/solicitud_atencion_externa/components/PrestacionesTypeahead.tsx","apps/clinica/solicitud_atencion_externa/services/ProveedoresService.ts","apps/clinica/solicitud_atencion_externa/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/components/PrestacionesSolicitadasCard.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/especialidades/services/EspecialidadesServices.ts","apps/clinica/especialidades/components/EspecialidadesFilter.tsx","apps/clinica/especialidades/components/ImportarForm.tsx","apps/clinica/especialidades/components/EspecialidadesIndex.tsx","commons/components/ImportModal.tsx","apps/clinica/prestaciones/services/PrestacionesService.ts","apps/clinica/prestaciones/componentes/PrestacionesFilterForm.tsx","apps/clinica/prestaciones/componentes/PrestacionesIndex.tsx","apps/clinica/prestaciones/componentes/PrestacionForm.tsx","apps/clinica/medicos/services/MedicosService.ts","apps/clinica/medicos/components/MedicosFilterForm.tsx","apps/clinica/medicos/components/MedicosIndex.tsx","apps/clinica/medicos/components/EspecialidadesTypeahead.tsx","apps/clinica/medicos/components/MedicosForm.tsx","apps/clinica/proveedores/services/ProveedoresService.ts","apps/clinica/proveedores/components/ProveedoresFilterForm.tsx","apps/clinica/proveedores/components/ProveedoresIndex.tsx","apps/clinica/proveedores/components/ProveedorEmpresaForm.tsx","apps/clinica/proveedores/components/ProveedorMedicoForm.tsx","apps/clinica/proveedores/components/ProveedorForm.tsx","apps/clinica/proveedores/components/ContactoForm.tsx","apps/clinica/ClinicaApp.tsx","features/iam/services/index.ts","features/iam/components/UsersPagination.tsx","features/iam/components/UsersFilter.tsx","features/iam/components/UsersIndex.tsx","features/iam/components/RolesList.tsx","features/iam/components/RoleView.tsx","features/iam/components/RolesIndex.tsx","features/iam/components/PermissionsCheckList.tsx","features/iam/components/RoleForm.tsx","features/iam/components/PersonalInfoForm.tsx","features/iam/components/RolesCheckList.tsx","features/iam/components/UserInfoForm.tsx","features/iam/components/UserRegistrationForm.tsx","features/iam/components/UserView.tsx","features/iam/components/UserEditForm.tsx","bootstrap/components/IamApp.tsx","features/auth/selectors/inputSelectors.ts","features/auth/services/AuthService.ts","features/auth/components/Login.tsx","features/auth/components/ProtectedRoute.tsx","features/auth/actions/unauthorized.ts","bootstrap/components/App.tsx","reportWebVitals.ts","features/auth/reducers/loginForm.ts","features/auth/reducers/index.ts","features/auth/reducers/user.ts","features/auth/reducers/loadUser.ts","features/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","polyfills/String.ts","index.tsx","commons/services/apiClient.ts","commons/utils/latLngExpressionToString.ts","commons/utils/index.ts"],"names":["authClient","axios","create","authEndpoint","transformResponse","defaults","data","result","keysToCamel","console","log","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","stringify","arrayFormat","encode","UnidadesTerritorialesService","getDepartamentos","apiClient","get","getProvincias","getMunicipios","SidebarItem","item","path","to","className","style","padding","icon","verticalAlign","marginLeft","title","id","items","map","subitem","paddingLeft","Sidebar","props","side","renderItem","left","right","SidebarLayout","sidebar","children","showSidebar","useSelector","state","main","useRouteMatch","url","Container","current","total","onChange","minimum","Math","max","maximum","min","pageItems","i","push","Pagination","Item","active","onClick","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","forwardRef","ref","Button","EmpleadorService","numeroPatronal","numero_patronal","ListaMoraService","page","filter","nombre","nit","regional_id","regionalId","idEmpleador","post","empleador_id","useState","setTotal","size","setPage","setFilter","showFilterForm","fetchListaMora","useQuery","keepPreviousData","refetchOnWindowFocus","refetchOnReconnect","onSuccess","meta","quitarEmpleadorEnMora","useMutation","empleadorId","refetch","fontSize","Row","Col","Form","Control","as","value","e","target","parseInt","xs","visible","Link","ListaMoraFilter","onApply","Table","responsive","width","isFetching","colSpan","Spinner","variant","animation","isError","error","response","message","records","index","lineHeight","Dropdown","Toggle","Menu","href","window","confirm","mutate","renderRows","ceil","required","validation","maxLength","length","format","pattern","useForm","mode","defaultValues","handleSubmit","register","watch","setValue","reset","formState","buscarEmpleador","enabled","agregarEmpleadorEnMora","useEffect","onSubmit","values","Alert","Group","sm","Label","disabled","isInvalid","errors","rules","Feedback","type","isLoading","PDFViewer","height","PDFObject","embed","fallbackLink","DefaultIcon","L","iconUrl","shadowUrl","iconShadow","iconSize","iconAnchor","Marker","prototype","options","CustomMarker","markerRef","useRef","eventHandlers","useMemo","onclick","marker","remove","dragend","getLatLng","useMapEvents","click","latlng","flyTo","getZoom","position","Array","isArray","lat","lng","latitude","longitude","draggable","Popup","LocationInput","latLngExpressionToString","search","setSearch","mapRef","MapContainer","whenCreated","mapInstance","center","zoom","zoomControl","cursor","TileLayer","attribution","InputGroup","instance","stopPropagation","onmousemove","ondblclick","FormControl","preventDefault","Append","coords","split","rawLat","rawLng","parseFloat","abs","setView","ZoomControl","DepartamentosTypeahead","feedback","buscar","refetchOnMount","onLoad","hasValidation","labelKey","minLength","renderMenuItemChildren","prestacion","ProvinciasTypeahead","MunicipiosTypeahead","RegionalesService","RegionalesTypeahead","setOptions","useCache","onSearch","newQuery","ImperativeModal","show","useImperativeHandle","Modal","centered","onHide","Dm11Viewer","setUrl","imperativeModalRef","Header","Body","Footer","SolicitudesAtencionExternaService","solicitud_id","put","asegurado_id","medico_id","proveedor_id","prestaciones_solicitadas","SolicitudAtencionExternaFilterForm","SolicitudAtencionExternaIndex","useLocation","pathname","dm11ViewerRef","buscarSolicitudesAtencionExterna","generarDm11","numeroSolicitud","onFilter","solicitud","numero","fecha","asegurado","matricula","medico","proveedor","urlDm11","FcDebt","GenIcon","nombreCompleto","apellidoPaterno","apellidoMaterno","nombres","AseguradoChooser","asegurados","scope","estado","onSelect","AseguradosService","include","AseguradoCard","useFormContext","trigger","aseguradoChooserRef","dirtyFields","Card","Accordion","eventKey","Collapse","lg","md","htmlFor","fechaBaja","validate","afterDate","now","moment","add","isSameOrBefore","fechaExtinsion","titularId","titular","empleador","aportes","mora","MedicosService","source","CancelToken","promise","nombre_completo","undefined","cancelToken","token","cancel","MedicosTypeahead","query","setQuery","queryKey","queryClient","useQueryClient","isIdle","isStale","Date","flip","filterBy","trim","maxResults","cancelQueries","especialidad","PrestacionesService","PrestacionesTypeahead","paginate","onPaginate","ProveedorService","ProveedoresTypeahead","subtitle","PrestacionesSolicitadasCard","count","setCount","control","proveedoresTypeaheadController","useController","name","useFieldArray","keyName","fields","append","overflow","prestacionSolicitada","render","field","fieldState","prestacionesSolicitadas","contrato","prestaciones","some","pc","ps","prestacionId","onBlur","every","selected","SolicitudAtencionExternaForm","formMethods","nota","registrar","prestacion_id","defaultActiveKey","searchText","promptText","regional","EspecialidadesService","archivo","separador","formato","formData","FormData","EspecialidadesFilter","srOnly","minWidth","ImportarForm","modalRef","setVisible","formatoSaltoLinea","aggrement","importFile","vars","column","File","Check","inline","label","form","EspecialidadesIndex","importModalRef","buscarEspecialidades","ButtonGroup","ImportModal","importar","file","import","separator","delete","PrestacionesFilterForm","PrestacionesIndex","buscarPrestaciones","eliminar","replace","PrestacionForm","useParams","history","useHistory","location","continueRef","guardar","verPrestacion","inputs","status","renderBody","ci","apellido_paterno","apellido_materno","especialidad_id","raiz","ci_complemento","complemento","MedicosFilterForm","EspecialidadesTypeahead","positionFixed","align","regionales","setRegionales","especialidades","setEspecialidades","ciComplemento","goBack","load","String","r","especialidadId","ProveedoresService","cargar","keysToUnderscore","actualizar","actualizarInformacionDeContacto","infoContacto","ProveedoresFilterForm","ProveedoresIndex","tipo","ProveedorEmpresaForm","redirect","shouldRedirect","ProveedorMedicoForm","tipoId","ProveedorForm","setTipo","checked","ContactoForm","setDepartamentos","setProvincias","setMunicipios","showLoader","setShowLoader","departamento","provincia","municipio","ubicacion","guardarInformacionDeContacto","municipioId","direccion","latitud","longitud","telefono1","telefono2","renderLoader","departamentos","provincias","departamentoId","municipios","provinciaId","ClinicaApp","exact","ListaMoraItemForm","ListaMoraIndex","MedicosIndex","MedicosForm","Users","userId","username","password","external_id","externalId","role_ids","roleIds","Roles","roleId","Permissions","useDispatch","parse","substr","onClickItem","onClickFirst","onClickPrev","onClickNext","onClickLast","setFields","placeholder","usersFilterVisible","showUsersFilter","a","fetchUsersResponse","fetchUsersError","users","document","UsersFilter","u","UsersPagination","trunc","RolesList","roles","ListGroup","w","action","RoleView","fetchRole","role","from","description","createdAt","updatedAt","permissions","p","hash","fetchRoles","Tab","transition","Content","Pane","fetchPermissions","d","defaultChecked","getValues","saveRole","nonEmpty","PermissionsCheckList","permission","dni","dniComplement","dniIssuedAt","middlename","lastname","gender","dateOfBirth","nationality","shouldValidate","passwordRepeat","isValid","saveUser","isModalVisible","showModal","noValidate","validated","personId","controlId","matchPassword","RolesCheckList","payload","user","renderUserExistsAlert","renderAlert","activeKey","setPersonId","PersonalInfoForm","onComplete","UserInfoForm","UserView","setUser","fetchUser","editUser","loadUser","IamApp","UsersIndex","UserRegistrationForm","UserEditForm","RoleForm","RolesIndex","getUser","auth","getIsAuthenticated","AuthService","login","remember_me","Login","dispatch","isAuthenticated","localStorage","setItem","JSON","credentials","ProtectedRoute","rest","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","Promise","reject","jsonUser","getItem","Navbar","bg","zIndex","display","Brand","Nav","OverlayTrigger","rootClose","placement","overlay","Popover","maxWidth","Title","whiteSpace","top","borderRadius","NavDropdown","Divider","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","AuthModuleReducer","combineReducers","completed","loginForm","rootSaga","all","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","replaceAll","str","arguments","newStr","Object","toString","call","toLowerCase","this","RegExp","args","match","number","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","QueryClientProvider","client","getElementById","apiEndpoint","toFixed","isObject","o","n","keys","forEach","k","s","$1","toUpperCase","key"],"mappings":"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","file":"static/js/main.e5e485a0.chunk.js","sourcesContent":["import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import apiClient from \"./apiClient\"\r\n\r\nexport type Departamento = {\r\n  id: number,\r\n  nombre: string,\r\n  abreviatura: string\r\n}\r\n\r\nexport type Provincia = {\r\n  id: number,\r\n  nombre: string\r\n  departamentoId: number\r\n}\r\n\r\nexport type Municipio = {\r\n  id: number,\r\n  nombre: string\r\n  provinciaId: number\r\n}\r\n\r\nexport const UnidadesTerritorialesService = {\r\n  getDepartamentos: ()=>{\r\n    return apiClient.get<Departamento[]>(\"departamentos\")\r\n  },\r\n  getProvincias: () => {\r\n    return apiClient.get<Provincia[]>(\"provincias\")\r\n  },\r\n  getMunicipios: () => {\r\n    return apiClient.get<Municipio[]>(\"municipios\")\r\n  }\r\n}","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"\r\n\r\nexport * from \"./UnidadesTerritorialesService\"","import React, { ComponentProps } from 'react'\r\nimport { Link, Router } from 'react-router-dom'\r\nimport { JsxElement } from 'typescript'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  return <>\r\n    {item.path ? \r\n      <Link to={item.path} \r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </Link> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  title?: string | JsxElement,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JsxElement\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", title=\"\", items=[], renderItem, ...rest} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">{title}</div>\r\n    <div className=\"list-group\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </div>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar, SidebarProps } from '../Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props)=>{\r\n  const showSidebar = useSelector((state:any)=>state.main.showSidebar)\r\n  const { path, url } = useRouteMatch()\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" toggled\")}  id=\"wrapper\">\r\n    <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    <Container className=\"d-flex flex-column flex-grow-1\">\r\n      {/* <Switch>\r\n        <Route exact path={path}>\r\n            <Redirect to={`${path}/organizacion`} />\r\n        </Route>\r\n        <Route  path={`${path}/organizacion`}><Organization /></Route>\r\n        <Route  path={`${path}/empleados/registrar`}><EmployeeForm /></Route>\r\n        <Route  exact path={`${path}/empleados`}><EmployeesList /></Route>\r\n      </Switch> */}\r\n      <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n        {children}\r\n      </div>\r\n    </Container>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport default ({current, total, onChange}: Props)=>{\r\n  const minimum=Math.max(1, current - 4)\r\n  const maximum=Math.min(total, current + 4)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>onChange(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import apiClient from \"../../../../commons/services/apiClient\"\r\n\r\ntype Empleador = {\r\n  id: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscarPorPatronal: (numeroPatronal: string) => {\r\n    return apiClient.get<Empleador>(\"empleadores/buscar-por-patronal\", {\r\n      params: {\r\n        numero_patronal: numeroPatronal\r\n      }\r\n    })\r\n  }\r\n}","import apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type ListaMoraFilter = {\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  nit?: number,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: number,\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  fetch: (page: Page, filter: ListaMoraFilter)=>{\r\n    return apiClient.get<{meta: {total: number, page: {current: number, size: number}}, records: ListaMoraItem[]}>(\"/lista-mora\", {\r\n      params: {\r\n        page, filter: {\r\n          numero_patronal: filter.numeroPatronal,\r\n          nombre: filter.nombre,\r\n          nit: filter.nit,\r\n          regional_id: filter.regionalId\r\n        }\r\n      }\r\n    })\r\n  },\r\n  agregar: (idEmpleador: number) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/agregar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (idEmpleador: number) =>{\r\n    console.log(idEmpleador)\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora/quitar\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  }\r\n}\r\n\r\nexport * from './EmpleadorService'","import React from \"react\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport default (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport ListaMoraFilter from \"./ListaMoraFilter\"\r\n\r\nexport default () => {\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const fetchListaMora = useQuery([\"fetchListaMora\", page.current, page.size], () => {\r\n    return ListaMoraService.fetch(page, filter)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onSuccess: ({ data: { meta } }) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const quitarEmpleadorEnMora = useMutation((empleadorId: number) => {\r\n    return ListaMoraService.quitar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      fetchListaMora.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (fetchListaMora.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (fetchListaMora.isError) {\r\n      const { error } = fetchListaMora\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = fetchListaMora\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.numeroPatronal}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.nombre}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Quitar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <h1 style={{ fontSize: \"2rem\" }}>Empleadores en mora</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n            const value = e.target.value\r\n            setPage((page) => ({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            fetchListaMora.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={() => {\r\n            showFilterForm(visible => !visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to=\"/clinica/lista-mora/agregar\"\r\n            className=\"my-2\">+Agregar</Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <ListaMoraFilter\r\n      onApply={(filter) => {\r\n        setFilter(filter)\r\n      }}\r\n    />\r\n    <Table responsive className=\"text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th style={{ width: 1 }}>Nº Patronal</th>\r\n          <th >Nombre</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <Row>\r\n      <Col>\r\n        <span>{`Se encontraron ${total} resultados`}</span>\r\n      </Col>\r\n      <Col>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </Col>\r\n    </Row>\r\n\r\n  </>\r\n}","import { RegisterOptions, ValidationRule, ValidationValueMessage } from \"react-hook-form\"\r\nimport { isObjectBindingPattern } from \"typescript\"\r\nimport { validation } from \"../../../configs/messages.json\"\r\n\r\nexport const required = (): ValidationValueMessage<boolean> => ({\r\n  value: true,\r\n  message: validation.required\r\n})\r\n\r\nexport const maxLength = (length: number): RegisterOptions[\"maxLength\"]=>({\r\n  value: length,\r\n  message: validation.maxLength.format(length)\r\n})\r\n\r\nexport const pattern = (pattern: RegExp): RegisterOptions[\"pattern\"] =>({\r\n  value: pattern,\r\n  message: validation.pattern.format(pattern)\r\n})","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect } from 'react'\r\nimport { Alert, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string,\r\n  nombre: string\r\n}\r\nexport default ()=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      nombre: \"\",\r\n      numeroPatronal: \"\"\r\n    }\r\n  })\r\n\r\n  const numeroPatronal = watch(\"numeroPatronal\")\r\n  const buscarEmpleador = useQuery([\"buscarEmpleadorPorPatronal\", numeroPatronal], ()=>{\r\n    return EmpleadorService.buscarPorPatronal(numeroPatronal)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const agregarEmpleadorEnMora = useMutation((empleadorId: number)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  })\r\n  console.log(agregarEmpleadorEnMora)\r\n\r\n  useEffect(()=>{\r\n    if(buscarEmpleador.data){\r\n      setValue(\"nombre\", buscarEmpleador.data.data.nombre)\r\n    }\r\n  }, [buscarEmpleador.data])\r\n\r\n  useEffect(()=>{\r\n    if(agregarEmpleadorEnMora.data){\r\n      reset({\r\n        nombre: \"\",\r\n        numeroPatronal: \"\"\r\n      });\r\n    }\r\n  }, [agregarEmpleadorEnMora.data])\r\n  \r\n  return <Form id=\"form-empleador-mora\"\r\n    onSubmit={handleSubmit((values)=>{\r\n      agregarEmpleadorEnMora.mutate(buscarEmpleador.data!.data.id)\r\n    })}\r\n  >\r\n    <h1 style={{fontSize: \"2rem\"}}>Agregar empleador en mora</h1>\r\n    {buscarEmpleador.isError ? <Alert variant=\"danger\">\r\n      {buscarEmpleador.error!.response?.message || buscarEmpleador.error!.message}\r\n    </Alert> : null}\r\n    {agregarEmpleadorEnMora.isError ? <Alert variant=\"danger\">\r\n      {agregarEmpleadorEnMora.error!.response?.message || agregarEmpleadorEnMora.error!.message}\r\n    </Alert> : null}\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>\r\n          Nº Patronal\r\n        </Form.Label>\r\n        <Form.Control\r\n          {...register(\"numeroPatronal\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button className=\"mb-3\" onClick={()=>{\r\n      reset({\r\n        numeroPatronal,\r\n        nombre: \"\",\r\n      })\r\n      \r\n      buscarEmpleador.refetch()\r\n    }}>\r\n      {buscarEmpleador.isFetching ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : <FaSearch className=\"mr-2\"/>}\r\n      Buscar\r\n    </Button>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n          <Form.Label>\r\n            Nombre\r\n          </Form.Label>\r\n          <Form.Control\r\n            disabled\r\n            isInvalid={!!formState.errors.nombre}\r\n            {...register(\"nombre\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button type=\"subimt\">\r\n      {agregarEmpleadorEnMora.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n      Agregar\r\n    </Button>\r\n  </Form>\r\n}","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { useMemo, useState, useRef } from \"react\"\r\nimport { Button, FormControl, InputGroup } from \"react-bootstrap\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport L, { LatLngExpression, Marker as LeafletMarker, Map } from \"leaflet\"\r\nimport { MapContainer, Marker, MarkerProps, Popup, TileLayer, useMapEvents, ZoomControl } from \"react-leaflet\"\r\nimport { latLngExpressionToString } from \"../utils\"\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25,41],\r\n    iconAnchor: [12,41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\ntype Props = {\r\n  value: LatLngExpression|null,\r\n  center: LatLngExpression\r\n  onChange: (value?: LatLngExpression|null) => void\r\n}\r\n\r\nconst CustomMarker = (props: Omit<MarkerProps, \"position\"> & {position: LatLngExpression|null, onChange(position: LatLngExpression|null): void})=>{\r\n  const markerRef =  useRef<LeafletMarker<any>>(null)\r\n  const eventHandlers = useMemo(\r\n    () => ({\r\n      onclick() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          marker.remove()\r\n          props.onChange(null)\r\n        }\r\n      },\r\n      dragend() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          props.onChange(marker.getLatLng())\r\n        }\r\n      },\r\n    }),\r\n    [],\r\n  )\r\n  \r\n  const map = useMapEvents({\r\n    click(e) {\r\n      props.onChange(e.latlng)\r\n      map.flyTo(e.latlng, map.getZoom())\r\n      // map.locate()\r\n    }\r\n  })\r\n\r\n\r\n  if(!props.position) return null\r\n  const [latitude, longitude] = Array.isArray(props.position) ? props.position : [props.position.lat, props.position.lng]\r\n  return <Marker \r\n    draggable\r\n    ref={markerRef}\r\n    position={props.position}\r\n    eventHandlers={eventHandlers}\r\n  >\r\n    <Popup>\r\n      A pretty CSS3 popup. <br /> Easily customizable.\r\n      <a href={`maps:${latitude},${longitude}`}>Open with...</a>\r\n    </Popup>\r\n  </Marker>\r\n}\r\n\r\nexport const LocationInput = (props: Props) => {\r\n\r\n  const [search, setSearch] = useState(()=>{\r\n    return latLngExpressionToString(props.value)\r\n  })\r\n  const mapRef = useRef<Map>(null)\r\n\r\n  return <>\r\n    <MapContainer\r\n      //@ts-ignore\r\n      whenCreated={ mapInstance => { mapRef.current = mapInstance } }\r\n      center={props.center}\r\n      zoom={13}\r\n      zoomControl={false}\r\n      style={{height: 240, cursor: \"crosshair\"}}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <div className=\"leaflet-control-container\"\r\n      >\r\n        <div className=\"leaflet-top leaflet-left\">\r\n        <InputGroup className=\"leaflet-control bg-white\"\r\n          draggable \r\n          ref={(instance: HTMLDivElement)=>{\r\n            if(instance){\r\n              instance.onclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n              instance.onmousemove = (e:any)=>{\r\n                console.log(\"OnMove\")\r\n                e.stopPropagation()\r\n              }\r\n              instance.ondblclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <FormControl\r\n            value={search}\r\n            onClick={(e: any)=>{\r\n              console.log(\"ASFA\")\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n            }}\r\n            onChange={(e)=>{\r\n              const value = e.target.value\r\n              setSearch(value)\r\n            }}\r\n          />\r\n          <InputGroup.Append>\r\n            <Button variant=\"outline-secondary\"\r\n              ref={(instance: any) => {\r\n                if(instance){\r\n                  instance.onclick = ()=>{\r\n                    const coords = search.split(\",\")\r\n                    if(coords.length == 2){\r\n                      const [rawLat, rawLng] = coords\r\n                      const [lat, lng] = [parseFloat(rawLat), parseFloat(rawLng)]\r\n                      if(Math.abs(lat) <= 90 && Math.abs(lng) <= 180){\r\n                        mapRef.current!.setView([lat, lng], 13)\r\n                        props.onChange([lat, lng])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              onClick={()=>{\r\n              }}\r\n            ><FaSearch/></Button>\r\n          </InputGroup.Append>\r\n        </InputGroup>\r\n        </div>\r\n      </div>\r\n      <CustomMarker position={props.value} onChange={(position)=>{\r\n        props.onChange(position)\r\n        setSearch(latLngExpressionToString(position))\r\n      }} />\r\n      <ZoomControl position=\"bottomright\" />\r\n    </MapContainer>\r\n  </>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Departamento, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const DepartamentosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Departamento[])=>void} & Omit<TypeaheadProps<Departamento>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getDepartamentos\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getDepartamentos()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Provincia, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProvinciasTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Provincia[])=>void} & Omit<TypeaheadProps<Provincia>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getProvinciass\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getProvincias()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Municipio, UnidadesTerritorialesService } from \"../services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MunicipiosTypeahead = ({isInvalid, feedback, ...props}: {feedback?: string, onLoad?: (options: Municipio[])=>void} & Omit<TypeaheadProps<Municipio>, \"isLoading\" | \"options\">) => {\r\n\r\n\r\n  const queryKey = \"getMunicipios\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getMunicipios()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      className={buscar.isError || isInvalid ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      {...props}\r\n      isLoading={buscar.isFetching}\r\n      options={buscar.data?.data||[]}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n      renderMenuItemChildren={(prestacion) => {\r\n        return prestacion.nombre\r\n      }}\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message || feedback}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n  </InputGroup>\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const RegionalesTypeahead = (props: {onLoad?: (options: Regional[])=>void} & Omit<AsyncTypeaheadProps<Regional>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n  const [options, setOptions] = useState<Regional[]>([])\r\n\r\n  const queryKey = \"obtenerRegionales\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      setOptions(buscar.data?.data)\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={options}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    // maxResults={10}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import React, { forwardRef, useImperativeHandle, useRef, useState } from \"react\"\r\nimport { Modal, ModalProps } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\n\r\nexport type State = {\r\n  url?: string\r\n}\r\n\r\nexport type Dm11ViewerRef = ImperativeModalRef & {\r\n  setUrl: (url: string) => void\r\n}\r\n\r\ntype Props = {\r\n  modalRef: Dm11ViewerRef\r\n}\r\n\r\n\r\nexport const Dm11Viewer = forwardRef<Dm11ViewerRef, ModalProps>((props, ref) => {\r\n  const [url, setUrl] = useState(\"\")\r\n  const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n  // const [visible, show] = useState(false)\r\n\r\n  useImperativeHandle(ref, ()=>({\r\n    show: (visible: boolean)=>imperativeModalRef.current?.show(visible),\r\n    setUrl\r\n  }), [])\r\n  return <ImperativeModal {...props} ref={imperativeModalRef}>\r\n    <Modal.Header>\r\n      D.M. - 11\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      {url ? <PDFViewer url={url}/> : null}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n\r\n    </Modal.Footer>\r\n  </ImperativeModal>\r\n})","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { apiEndpoint } from \"../../../../configs/app.json\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  id?: number,\r\n  desde?: string,\r\n  hasta?: string,\r\n  matricula_asegurado?: string,\r\n  doctor_id?: number,\r\n  proveedor_id?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number,\r\n  numero: number,\r\n  fecha: string,\r\n  asegurado: {\r\n    matricula: string\r\n  },\r\n  medico: string,\r\n  proveedor: string,\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: {filter, page}\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, asegurado_id: string, medico_id: number, proveedor_id: number, prestaciones_solicitadas: {prestacion_id: number, nota: string}[]) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      asegurado_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestaciones_solicitadas\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useRef, useState} from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport {FaFilter, FaPlus, FaSync} from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState<SolicitudesAtencionExternaFilter>({})\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const buscarSolicitudesAtencionExterna = useQuery([\"buscarSolicitudesAtencionExterna\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const generarDm11 = useMutation((numeroSolicitud: number)=>{\r\n    return SolicitudesAtencionExternaService.generarDm11(numeroSolicitud)\r\n  }, {\r\n    onSuccess: ({data: {url}}) => {\r\n      dm11ViewerRef.current?.setUrl(url)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarSolicitudesAtencionExterna.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarSolicitudesAtencionExterna.isError) {\r\n      const { error } = buscarSolicitudesAtencionExterna\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarSolicitudesAtencionExterna.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((solicitud, index)=>{\r\n      return <tr key={solicitud.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{solicitud.numero}</td>\r\n        <td>{solicitud.fecha}</td>\r\n        <td>{solicitud.asegurado.matricula}</td>\r\n        <td>{solicitud.medico}</td>\r\n        <td>{solicitud.proveedor}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n            />\r\n              <Dropdown.Menu>\r\n              {\r\n                !!solicitud.urlDm11 ?\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  dm11ViewerRef.current?.setUrl(solicitud.urlDm11)\r\n                  dm11ViewerRef.current?.show(true)\r\n                }}>Ver D.M. - 11</Dropdown.Item> :\r\n                <Dropdown.Item href=\"#\" onClick={() => {\r\n                  generarDm11.mutate(solicitud.numero)\r\n                }}>Generar D.M. - 11</Dropdown.Item>\r\n              }\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Solicitudes de atención externa</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscarSolicitudesAtencionExterna.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            // showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus className=\"mr-2\" />Nuevo\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th>Fecha y hora</th>\r\n          <th>Matrícula asegurado</th>\r\n          <th>Doctor</th>\r\n          <th>Proveedor</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </div>\r\n}","import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","export function nombreCompleto(apellidoPaterno: string | null, apellidoMaterno: string, nombres: string){\r\n  return (apellidoPaterno ? apellidoPaterno + \" \" : \"\") + `${apellidoMaterno}  ${nombres}`\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { PDFViewer } from \"../../../../commons/components\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { Asegurado } from \"../services/AseguradosService\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\n\r\nexport const AseguradoChooser = forwardRef<ImperativeModalRef, Props>((props, ref) => {\r\n  console.log(props.asegurados.length)\r\n  return <ImperativeModal {...props} ref={ref}>\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}</td>\r\n              <td>{nombreCompleto(asegurado.apellidoPaterno, asegurado.apellidoMaterno, asegurado.nombres)}</td>\r\n              <td>{asegurado.estado ? \"Alta\" : \"Baja\"}</td>\r\n              <td><Button onClick={()=>{\r\n                console.log(asegurado)\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </ImperativeModal>\r\n})","import { AxiosTransformer } from \"axios\"\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\n// export type Asegurado = Titular | Beneficiario\r\nexport type Asegurado = {\r\n  id: string,\r\n  matricula: string,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  tipo_id: number,\r\n  estado: string,\r\n  fechaBaja?: string,\r\n  fechaExtinsion?: string,\r\n  empleadorId: string\r\n  titularId: string\r\n  empleador: {\r\n    id: number,\r\n    numeroPatronal: string,\r\n    nombre: string,\r\n    estado: string,\r\n    fechaBaja: string,\r\n    aportes: string\r\n  }\r\n  titular?: {\r\n    id: string,\r\n    matricula: string,\r\n    apellidoPaterno: string | null,\r\n    apellidoMaterno: string,\r\n    nombres: string,\r\n    estado: string,\r\n    fechaBaja?: string,\r\n  }\r\n}\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Accordion, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext, useController, ValidationRule } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  regionalId: number,\r\n  asegurado: Asegurado,\r\n}\r\nexport const AseguradoCard = ()=>{\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    reset,\r\n    trigger,\r\n    setValue,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  console.log(\"FormState\", watch(), formState.errors)\r\n\r\n  const aseguradoChooserRef = useRef<ImperativeModalRef|null>(null)\r\n\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"buscarAseguradoPorMatricula\", matricula], ()=>{\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data: {records}}) =>{\r\n      if(records.length == 1){\r\n        const asegurado = records[0]\r\n        onChange(asegurado)\r\n      }\r\n      else {\r\n        aseguradoChooserRef.current?.show(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const onChange = (asegurado: Asegurado) => {\r\n    setValue(\"asegurado\", asegurado)\r\n    trigger(\"asegurado.fechaExtinsion\")\r\n    trigger(\"asegurado.fechaBaja\")\r\n    trigger(\"asegurado.titular.fechaBaja\")\r\n    trigger(\"asegurado.empleador.fechaBaja\")\r\n    trigger(\"asegurado.empleador.aportes\")\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(watch(\"asegurado.id\") && formState.dirtyFields.asegurado?.matricula){\r\n      setValue(\"asegurado.id\", \"\")\r\n      setValue(\"asegurado.apellidoPaterno\", \"\")\r\n      setValue(\"asegurado.apellidoMaterno\", \"\")\r\n      setValue(\"asegurado.nombres\", \"\")\r\n      setValue(\"asegurado.estado\", \"\")\r\n      setValue(\"asegurado.fechaBaja\", \"\")\r\n      setValue(\"asegurado.fechaExtinsion\", \"\")\r\n      setValue(\"asegurado.empleador.numeroPatronal\", \"\")\r\n      setValue(\"asegurado.empleador.nombre\", \"\")\r\n      setValue(\"asegurado.empleador.estado\", \"\")\r\n      setValue(\"asegurado.empleador.aportes\", \"\")\r\n    }\r\n  }, [matricula])\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <Form.Row>\r\n          <Col lg={3} md={6}>\r\n            <Form.Label htmlFor=\"asegurado-matricula\">\r\n              Matrícula\r\n            </Form.Label>\r\n            <InputGroup hasValidation className=\"mb-2\">\r\n              <FormControl id=\"asegurado-matricula\"\r\n                isInvalid={!!formState.errors.asegurado?.matricula || !!formState.errors.asegurado?.id}\r\n                className=\"text-uppercase\" {...register(\"asegurado.matricula\", {\r\n                required: rules.required(),\r\n                pattern: rules.pattern(/^\\d{2}-\\d{4}-[a-zA-Z]{3}(-\\d)?$/)\r\n              })} />\r\n              <InputGroup.Append >\r\n                <Button variant=\"outline-secondary\" onClick={()=>{\r\n                  trigger(\"asegurado.matricula\")\r\n                  if(!formState.errors.asegurado?.matricula){\r\n                    // setValue(\"asegurado.matricula\", watch(\"asegurado.matricula\"))\r\n                    if(formState.dirtyFields.asegurado?.matricula)\r\n                      delete formState.dirtyFields.asegurado.matricula\r\n                    buscar.refetch()\r\n                  }\r\n                }}>\r\n                  {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                </Button>\r\n              </InputGroup.Append>\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.matricula?.message}</Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Col>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Paterno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoPaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Apellido Materno</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.apellidoMaterno\")}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group as={Col} lg={3} md={6}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n              {...register(\"asegurado.nombres\", {required: rules.required()})}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control \r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.estado}\r\n              {...register(\"asegurado.estado\", {\r\n                required: rules.required()\r\n              })}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"1\">Alta</option>\r\n              <option value=\"0\">Baja</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaBaja}\r\n              {...register(\"asegurado.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha ext.</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.fechaExtinsion}\r\n              {...register(\"asegurado.fechaExtinsion\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").isSameOrBefore(now)){\r\n                      return \"Se ha cumplido la fecha de extinsion\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.fechaExtinsion?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <div className={watch(\"asegurado\")?.titularId ? \"\" : \"d-none\"}>\r\n          <h2 style={{fontSize: \"1.25rem\"}}>Titular</h2>\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.apellidoPaterno}\r\n                {...register(\"asegurado.titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                {...register(\"asegurado.titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control \r\n                as=\"select\"\r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.estado}\r\n                {...register(\"asegurado.titular.estado\", {  \r\n                  validate: {\r\n                    required: (value) => {\r\n                      if(watch(\"asegurado.titularId\") && !value){\r\n                        return rules.required().message\r\n                      }\r\n                    }\r\n                  }\r\n                })}\r\n              >\r\n                <option value=\"\"></option>\r\n                <option value=\"1\">Alta</option>\r\n                <option value=\"0\">Baja</option>\r\n              </Form.Control>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control \r\n                disabled\r\n                isInvalid={!!formState.errors.asegurado?.titular?.fechaBaja}\r\n                {...register(\"asegurado.titular.fechaBaja\", {\r\n                  validate: {\r\n                    afterDate: (value) => {\r\n                      const now = moment()\r\n                      if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                        return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                      } \r\n                    }\r\n                  }\r\n                })}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.titular?.fechaBaja?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n        </div>\r\n\r\n        <h2 style={{fontSize: \"1.25rem\"}}>Empleador</h2>\r\n        <Form.Row>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Nº Patronal</Form.Label>\r\n            <Form.Control\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.numeroPatronal}\r\n              {...register(\"asegurado.empleador.numeroPatronal\")}\r\n            />\r\n          </Form.Group> \r\n          <Form.Group as={Col} md={8}>\r\n            <Form.Label>Nombre</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.nombre}\r\n              {...register(\"asegurado.empleador.nombre\")}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Form.Row>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Estado</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.estado}\r\n              {...register(\"asegurado.empleador.estado\")}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"0\">Baja</option>\r\n              <option value=\"1\">Alta</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Fecha de baja</Form.Label>\r\n            <Form.Control \r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.fechaBaja}\r\n              {...register(\"asegurado.empleador.fechaBaja\", {\r\n                validate: {\r\n                  afterDate: (value) => {\r\n                    const now = moment()\r\n                    if(value && moment(value, \"DD/MM/YYYY\").add(60, \"days\").isSameOrBefore(now)){\r\n                      return \"Pasaron mas de 60 dias desde la fecha de baja\"\r\n                    } \r\n                  }\r\n                }\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} sm={4}>\r\n            <Form.Label>Aportes</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              disabled\r\n              isInvalid={!!formState.errors.asegurado?.empleador?.aportes}\r\n              {...register(\"asegurado.empleador.aportes\", {\r\n                validate: {\r\n                  mora: (value) => {\r\n                    if(value == \"0\"){\r\n                      return \"El empleador esta en mora\"\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n            >\r\n              <option></option>\r\n              <option value=\"0\">En mora</option>\r\n              <option value=\"1\">Al día</option>\r\n            </Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{formState.errors.asegurado?.empleador?.aportes?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <AseguradoChooser ref={aseguradoChooserRef}\r\n          title=\"Resultados\"\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado)=>{\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            onChange(asegurado)\r\n            aseguradoChooserRef.current!.show(false)\r\n          }}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import { apiClient, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  apellidoPaterno: string | null,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  especialidad: string,\r\n  regionalId: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: {\r\n        filter: {\r\n          nombre_completo: nombre || undefined,\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10\r\n        }\r\n      },\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Medico, MedicosService } from \"../services/MedicosService\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const MedicosTypeahead = (props: Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n\r\n  const queryKey = [\"buscarMedico\", query];\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return MedicosService.buscarPorNombre(query)\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(query && !buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  console.log(\"Medicos\", query, buscar.isFetching, buscar.isError, buscar.isIdle, buscar.isStale, buscar.data?.data.records, Date.now())\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data.records || []}\r\n    labelKey={(medico)=>{\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return nombre_completo\r\n    }}\r\n    useCache={false}\r\n    maxResults={10}\r\n    minLength={2}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    renderMenuItemChildren={(medico) => {\r\n      const nombre_completo = (medico.apellidoPaterno ? medico.apellidoPaterno + \" \" : \"\") + `${medico.apellidoMaterno} ${medico.nombres}`.trim()\r\n      return <div>\r\n        <div>{nombre_completo}</div>\r\n        <div className={\"small text-secondary\"}>{medico.especialidad}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import axios from \"axios\";\r\nimport { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscarPorNombre: (nombre: string) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Prestacion[]>(\"/prestaciones/buscar-nombre\", {\r\n      params: {\r\n        nombre\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  buscar: (filter: {nombre?: string}, page: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<PaginatedResponse<Prestacion>>(\"prestaciones\", {\r\n      params: {\r\n        filter, page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { Prestacion, PrestacionesService } from \"../services/PrestacionesService\";\r\n\r\n\r\nexport const PrestacionesTypeahead = (props: Omit<AsyncTypeaheadProps<Prestacion>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [page, setPage] = useState(1)\r\n  const queryKey = [\"buscarPrestaciones\", query, page]\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return PrestacionesService.buscar({\r\n      nombre: query||undefined\r\n    }, {\r\n      size: 50,\r\n      current: page\r\n    })\r\n  }, {\r\n    enabled: false,\r\n  })\r\n  const queryClient = useQueryClient()\r\n  \r\n  useEffect(()=>{\r\n    if(!buscar.data){\r\n      buscar.refetch()\r\n    }\r\n  }, [query])\r\n\r\n  return <AsyncTypeahead flip\r\n    filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data?.records || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      queryClient.cancelQueries(queryKey)\r\n      setQuery(newQuery)\r\n    }}\r\n    paginate\r\n    onPaginate={(e, size)=>{\r\n      setPage((page => page + 1))\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios from 'axios'\r\nimport { Medico } from \"./MedicosService\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  regionalId: number\r\n  contrato: {\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId: number\r\n}\r\n\r\nexport const ProveedorService = {\r\n  buscar: (filter?: Filter, page?: Page) => {\r\n    return apiClient.get<Proveedor[]>(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  buscarPorNombre: (nombre: string) =>{\r\n    // Create a new CancelToken source for this request\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get<Proveedor[]>(\"proveedores/buscar-nombre\", {\r\n      params: {nombre},\r\n      cancelToken: source.token\r\n    })\r\n    // Cancel the request if React Query calls the `promise.cancel` method\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  }\r\n}","\r\nimport { forwardRef, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Proveedor, Empresa, ProveedorService } from \"../services/ProveedoresService\"\r\nimport { Medico } from \"../services/MedicosService\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const ProveedoresTypeahead = (props: Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n  // const [query, setQuery] = useState(\"\")\r\n  // const [options, setOptions] = useState<Proveedor[]>([])\r\n\r\n  \r\n  const queryKey = \"buscarProveedor\"\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    // return ProveedorService.buscarPorNombre(query)\r\n    return ProveedorService.buscar()\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnMount: false,\r\n    // enabled: false,\r\n    // onSuccess: ({data})=>{\r\n    //   setOptions(data)\r\n    // }\r\n  })\r\n\r\n  return <AsyncTypeahead flip \r\n    // filterBy={()=>true}\r\n    {...props}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    // options={options}\r\n    labelKey={(proveedor: Proveedor)=>{\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        const nombre_completo = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        return nombre_completo\r\n      }\r\n      else {\r\n        return (proveedor as Empresa).nombre\r\n      }\r\n    }}\r\n    useCache={false}\r\n    maxResults={50}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{}}\r\n    renderMenuItemChildren={(proveedor) => {\r\n      let title, subtitle;\r\n      if(proveedor.medico){\r\n        const medico = proveedor.medico\r\n        title = medico.nombres + (medico.apellidoPaterno ? \" \" + medico.apellidoPaterno : \"\") + (medico.apellidoMaterno ? \" \" + medico.apellidoMaterno : \"\")\r\n        subtitle = medico.especialidad\r\n      }\r\n      else {\r\n        title = proveedor.nombre\r\n        subtitle = \"Empresa\"\r\n      }\r\n      return <div>\r\n        <div>{title}</div>\r\n        <div className={\"small text-secondary\"}>{subtitle}</div> \r\n      </div>\r\n    }}\r\n  />\r\n}","import { useState } from \"react\"\r\nimport { Card, Accordion, Form, Table, Button } from \"react-bootstrap\"\r\nimport { useFormContext, useFieldArray, Controller, useController } from \"react-hook-form\"\r\nimport { FaPlus, FaMinus } from \"react-icons/fa\"\r\nimport { PrestacionesTypeahead } from \"./PrestacionesTypeahead\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor } from \"../services/ProveedoresService\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\n\r\nexport type PrestacionesSolicitadasInputs = {\r\n  regionalId: number | null,\r\n  prestacionesSolicitadas: {\r\n    id: number,\r\n    prestacionId: number | null,\r\n    nota: string,\r\n  }[],\r\n  proveedor?: Proveedor[]\r\n}\r\n\r\nexport const PrestacionesSolicitadasCard = () => {\r\n  const [count, setCount] = useState(1)\r\n  const { register, control, formState, watch } = useFormContext<PrestacionesSolicitadasInputs>()\r\n  const proveedoresTypeaheadController = useController({\r\n    name:\"proveedor\",\r\n    control,\r\n    rules: {\r\n      required: rules.required()\r\n    }\r\n  })\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"prestacionesSolicitadas\",\r\n    keyName: \"prestacionId\"\r\n  })\r\n  return <Card style={{ overflow: \"visible\" }} >\r\n    <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"3\">\r\n      Prestaciones\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"3\">\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: 1 }}>#</th>\r\n            <th>Prestacion</th>\r\n            <th>Proveedor</th>\r\n            <th>Nota</th>\r\n            <th style={{ width: 1 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fields.map((prestacionSolicitada, index) => {\r\n            return <tr key={prestacionSolicitada.id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Controller\r\n                  name={`prestacionesSolicitadas.${index}.prestacionId` as const}\r\n                  control={control}\r\n                  rules={{\r\n                    required: rules.required(),\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    return <>\r\n                      <PrestacionesTypeahead\r\n                        id={`solicitud-atencion-externa/prestacionesSolicitadas.${index}.prestacionId`}\r\n                        className={!!fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!fieldState.error}\r\n                        filterBy={(prestacion) => {\r\n                          const proveedor = watch(\"proveedor.0\")\r\n                          const prestacionesSolicitadas = watch(\"prestacionesSolicitadas\")\r\n                          return !proveedor ||\r\n                            proveedor.contrato.prestaciones.some(pc => pc.id == prestacion.id) && \r\n                            !prestacionesSolicitadas.some(ps=>ps.prestacionId == prestacion.id)\r\n                        }}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(prestacion) => {\r\n                          field.onChange(prestacion.length ? prestacion[0].id : 0)\r\n                        }}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                    </>\r\n                  }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <ProveedoresTypeahead\r\n                  filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                  onChange={proveedoresTypeaheadController.field.onChange}\r\n                  onBlur={proveedoresTypeaheadController.field.onBlur}\r\n                  selected={proveedoresTypeaheadController.field.value}\r\n                />\r\n              </td>\r\n              <td>\r\n                <Form.Control as=\"textarea\" {...register(`prestacionesSolicitadas.${index}.nota` as const)} />\r\n              </td>\r\n              <td>\r\n                <Button variant=\"link\" onClick={() => {\r\n                  console.log(\"Remove\", index)\r\n                  remove(index)\r\n                }} className=\"btn-icon\"><FaMinus /></Button>\r\n              </td>\r\n            </tr>\r\n          })}\r\n          <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>\r\n              <Button variant=\"link\" onClick={() => {\r\n                console.log(count)\r\n                append({\r\n                  id: count\r\n                })\r\n                setCount(count => count+1)\r\n              }} className=\"btn-icon\"><FaPlus /></Button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </Table>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","import React, { ComponentProps, useRef } from \"react\"\r\nimport { Accordion, Button, Card,Col,Form, FormControl, InputGroup, Spinner, Table } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { FaPlus, FaSearch } from \"react-icons/fa\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { MedicosTypeahead } from \"./MedicosTypeahead\"\r\nimport { ProveedoresTypeahead } from \"./ProveedoresTypeahead\"\r\nimport { PrestacionesSolicitadasInputs, PrestacionesSolicitadasCard } from \"./PrestacionesSolicitadasCard\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { useMutation } from \"react-query\"\r\nimport { SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport { Medico } from \"../services/MedicosService\"\r\nimport { Dm11Viewer, Dm11ViewerRef } from \"./Dm11Viewer\"\r\n\r\ntype Inputs = AseguradoInputs & PrestacionesSolicitadasInputs & {\r\n  regionalId: number | null\r\n  medico?: Medico[]\r\n}\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      prestacionesSolicitadas: [{\r\n        id: 0,\r\n        prestacionId: null,\r\n        nota: \"\"\r\n      }],\r\n      asegurado: {\r\n        titular: undefined\r\n      }\r\n    }\r\n  })\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    trigger,\r\n    formState,\r\n    control,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  const dm11ViewerRef = useRef<Dm11ViewerRef>(null)\r\n\r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regionalId as number,\r\n      values.asegurado.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacionesSolicitadas.map(({prestacionId: prestacion_id, nota})=>({\r\n        prestacion_id: prestacion_id as number,\r\n        nota\r\n      }))\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11}}) => {\r\n      dm11ViewerRef.current?.setUrl(urlDm11)\r\n      dm11ViewerRef.current?.show(true)\r\n    }\r\n  })\r\n\r\n  // console.log(\"Solicitud\", watch())  \r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      console.log(\"onSubmit\", values)\r\n      registrar.mutate(values)\r\n    })}>\r\n      <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1>\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard />\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n            Regional\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"regionalId\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <RegionalesTypeahead\r\n                        id=\"solicitud-atencion-externa-form/regionales\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        isInvalid={!!fieldState.error}\r\n                        onBlur={field.onBlur}\r\n                        onChange={(regional)=>{\r\n                          setValue(\"medico\", undefined)\r\n                          setValue(\"proveedor\", undefined)\r\n                          trigger(\"medico\")\r\n                          trigger(\"proveedor\")\r\n                          field.onChange(regional.length ? regional[0].id : null)\r\n                        }}\r\n                      />\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"2\">\r\n            Médico\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"2\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller \r\n                    control={control}\r\n                    name=\"medico\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <><MedicosTypeahead\r\n                        id=\"solicitud-atencion-externa-form/medicos\"\r\n                        searchText=\"Buscando...\"\r\n                        promptText=\"Introduce un texto\"\r\n                        filterBy={(medico)=>medico.regionalId == watch(\"regionalId\")}\r\n                        className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                        isInvalid={!!formState.errors.medico}\r\n                        selected={field.value}\r\n                        onBlur={field.onBlur}\r\n                        onChange={field.onChange}\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback></>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <PrestacionesSolicitadasCard />\r\n        {/* <Card style={{overflow: \"visible\"}} >\r\n          <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"4\">\r\n            Proveedor\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"4\">\r\n            <Card.Body>\r\n              <Form.Row>\r\n                <Form.Group as={Col}>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Controller\r\n                    control={control}\r\n                    name=\"proveedor\"\r\n                    rules={{\r\n                      required: rules.required()\r\n                    }}\r\n                    render={({field, fieldState})=>{\r\n                      return <>\r\n                        <ProveedoresTypeahead\r\n                          id=\"solicitud-atencion-externa-form/proveedores\"\r\n                          searchText=\"Buscando...\"\r\n                          promptText=\"Introduce un texto\"\r\n                          filterBy={(proveedor)=>(!watch(\"regionalId\") || proveedor.regionalId == watch(\"regionalId\")) && watch(\"prestacionesSolicitadas\").every(ps=>proveedor.contrato.prestaciones.some(pc=>pc.id == ps.prestacionId))}\r\n                          className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                          isInvalid={!!formState.errors.proveedor}\r\n                          onBlur={field.onBlur}\r\n                          onChange={field.onChange}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n                      </>\r\n                    }}\r\n                  />\r\n                </Form.Group> \r\n              </Form.Row>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n       */}\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Dm11Viewer ref={dm11ViewerRef} />\r\n  </FormProvider>\r\n}","import axios, { AxiosPromise } from \"axios\"\r\nimport { PaginatedResponse } from \"../../../../commons/services\"\r\nimport apiClient from \"../../../../commons/services/apiClient\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\n\r\nexport type Especialidad = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\ninterface EspecialidadesService {\r\n  buscar(filter: string): AxiosPromise<Especialidad[]>\r\n  buscar(filter: string, page: Page): AxiosPromise<PaginatedResponse<Especialidad>>\r\n  // buscar(filter: string, page?: Page): AxiosPromise<PaginatedResponse<Especialidad>|Especialidad[]>\r\n  importar(archivo: File, separador: string, formato: string): AxiosPromise\r\n}\r\n\r\nexport const EspecialidadesService: EspecialidadesService = {\r\n  buscar: (filter: string, page?: Page) => {\r\n    const CancelToken = axios.CancelToken;\r\n    const source = CancelToken.source()\r\n  \r\n    const promise = apiClient.get(\"/especialidades\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n    //@ts-ignore\r\n    promise.cancel = () => {\r\n      source.cancel('Query was cancelled by React Query')\r\n    }\r\n    return promise\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/especialidades/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const EspecialidadesFilter = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, { useState, useEffect, MutableRefObject } from \"react\"\r\nimport { Form, Modal, Row, Col, Button } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useMutation } from \"react-query\";\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { EspecialidadesService } from \"../services\";\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\nexport const ImportarForm = ({modalRef}: {modalRef: MutableRefObject<{show: (visible: boolean)=>void}|undefined>})=>{\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importFile = useMutation((vars: {archivo: File, separador: string, formatoSaltoLinea: string})=>{\r\n    return EspecialidadesService.importar(vars.archivo, vars.separador, vars.formatoSaltoLinea)\r\n  })\r\n\r\n  useEffect(()=>{\r\n    modalRef.current = {\r\n      show: setVisible\r\n    }\r\n  }, [])\r\n  return <Modal centered show={visible} onHide={()=>setVisible(false)}>\r\n    <Modal.Header>\r\n      Importar Datos\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador, formatoSaltoLinea})=>{\r\n        importFile.mutate({\r\n          archivo: archivo![0],\r\n          separador,\r\n          formatoSaltoLinea\r\n        })\r\n      })}>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Archivo</Form.Label>\r\n          <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n            <Form.File\r\n              isInvalid={!!formState.errors.archivo}\r\n              {...register(\"archivo\", {\r\n                required: rules.required(),\r\n              })}\r\n              feedback={formState.errors.archivo?.message}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Separador</Form.Label>\r\n          <Col xs={\"auto\"}>\r\n            <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n              isInvalid={!!formState.errors.separador}\r\n              {...register(\"separador\", {\r\n                required: rules.required()\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Group as={Row}>\r\n          <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n          <Col className=\"d-flex\" xs={\"auto\"}>\r\n            <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n            <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          </Col>\r\n        </Form.Group>\r\n        <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n          isInvalid={!!formState.errors.aggrement}\r\n          feedback={formState.errors.aggrement?.message}\r\n          {...register(\"aggrement\", {\r\n            required: rules.required()\r\n          })}\r\n        ></Form.Check>\r\n      </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n        <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">Importar</Button>\r\n        <Button>Cancelar</Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { AxiosError } from \"axios\"\r\nimport React, {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { useQuery } from \"react-query\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { EspecialidadesService } from \"../services\"\r\nimport { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\nimport { ImportarForm } from \"./ImportarForm\"\r\n\r\nexport const EspecialidadesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<{show(visible: boolean): void}>()\r\n\r\n  const buscarEspecialidades = useQuery([\"buscarEspecialidades\", page, filter], ()=>{\r\n    return EspecialidadesService.buscar(filter, page)\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarEspecialidades.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarEspecialidades.isError) {\r\n      const { error } = buscarEspecialidades\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarEspecialidades.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((especialidad, index)=>{\r\n      return <tr key={especialidad.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{especialidad.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-especialidad-${especialidad.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  // quitarEmpleadorEnMora.mutate(item.empleadorId)\r\n                }\r\n              }}>Eliminar</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Especialidades</h2>\r\n    <div className=\"d-flex mb-2\">\r\n      <Dropdown className=\"ml-auto\" as={ButtonGroup}>\r\n        <Button>Nuevo</Button>\r\n        <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item href=\"#\" onClick={()=>{\r\n            importModalRef.current && importModalRef.current.show(true)\r\n          }}\r\n          >Importar</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <EspecialidadesFilter onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportarForm modalRef={importModalRef} />\r\n  </div>\r\n}","import { AxiosResponse } from \"axios\"\r\nimport { forwardRef, useImperativeHandle, useRef } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, ModalProps, Row, Spinner } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { ImperativeModal, ImperativeModalRef } from \"./ImperativeModal\"\r\nimport * as rules from \"./rules\"\r\n\r\ntype ImportOptions= {\r\n  separator: string,\r\n  format: string \r\n}\r\n\r\ntype Inputs = {\r\n  archivo: FileList|null,\r\n  separador: string,\r\n  formatoSaltoLinea: string,\r\n  aggrement: boolean\r\n}\r\n\r\ntype Props = {\r\n  // import: (file: File, options: ImportOptions) => void\r\n  import: (\r\n    file: File,\r\n    options: ImportOptions\r\n  )=>Promise<any>\r\n} & ModalProps\r\n\r\nexport const ImportModal = forwardRef<ImperativeModalRef, Props>((props, ref)=>{\r\n  \r\n  const {\r\n    register,\r\n    formState,\r\n    handleSubmit\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      archivo: null,\r\n      separador: \",\",\r\n      formatoSaltoLinea: \"UNIX\",\r\n      aggrement: false\r\n    }\r\n  })\r\n\r\n  const importar = useMutation(({file, options}: {file: File, options: ImportOptions})=>{\r\n    return props.import(file, options)\r\n  })\r\n\r\n  // const imperativeModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  // useImperativeHandle(ref, () => ({\r\n  //   show: (show: boolean)=>{\r\n  //     imperativeModalRef.current?.show(show)\r\n  //   }\r\n  // }),[])\r\n  \r\n  return <ImperativeModal ref={ref} {...props}>\r\n  <Modal.Header>\r\n    Importar Datos\r\n  </Modal.Header>\r\n  <Modal.Body>\r\n    <Form id=\"importar-especialidades-form\" onSubmit={handleSubmit(({archivo, separador: separator, formatoSaltoLinea: format})=>{\r\n      importar.mutate({\r\n        file: archivo![0],\r\n        options: {\r\n          separator,\r\n          format\r\n        }\r\n      })\r\n    })}>\r\n      {importar.data ? <Alert variant={importar.isError ? \"danger\" : \"success\"}>\r\n        {importar.isError ? \"Error\" : \"Importacion existosa\"}\r\n      </Alert> :  null}\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Archivo</Form.Label>\r\n        <Col className=\"d-flex align-items-center\" sm={\"auto\"}>\r\n          <Form.File\r\n            isInvalid={!!formState.errors.archivo}\r\n            {...register(\"archivo\", {\r\n              required: rules.required(),\r\n            })}\r\n            feedback={formState.errors.archivo?.message}\r\n          />\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Separador</Form.Label>\r\n        <Col xs={\"auto\"}>\r\n          <Form.Control className=\"text-center\" maxLength={1} style={{width: \"2.5rem\"}}\r\n            isInvalid={!!formState.errors.separador}\r\n            {...register(\"separador\", {\r\n              required: rules.required()\r\n            })}\r\n          ></Form.Control>\r\n          <Form.Control.Feedback type={\"invalid\"}>{formState.errors.separador?.message}</Form.Control.Feedback>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Group as={Row}>\r\n        <Form.Label column sm={4}>Salto de linea</Form.Label>\r\n        <Col className=\"d-flex\" xs={\"auto\"}>\r\n          <Form.Check inline type=\"radio\" label=\"DOS\" value=\"DOS\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n          <Form.Check inline type=\"radio\" label=\"UNIX\" value=\"UNIX\" {...register(\"formatoSaltoLinea\")}></Form.Check>\r\n        </Col>\r\n      </Form.Group>\r\n      <Form.Check label=\"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.\"\r\n        isInvalid={!!formState.errors.aggrement}\r\n        feedback={formState.errors.aggrement?.message}\r\n        {...register(\"aggrement\", {\r\n          required: rules.required()\r\n        })}\r\n      ></Form.Check>\r\n    </Form>\r\n  </Modal.Body>\r\n  <Modal.Footer>\r\n      <Button variant=\"danger\" type=\"submit\" form=\"importar-especialidades-form\">\r\n        {importar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n        Importar\r\n      </Button>\r\n      <Button>Cancelar</Button>\r\n  </Modal.Footer>\r\n</ImperativeModal>\r\n\r\n})","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\nexport type Prestacion = {\r\n  id: number,\r\n  nombre: string,\r\n}\r\n\r\nexport const PrestacionesService = {\r\n  buscar: (page: Page, filter: string) => {\r\n    return apiClient.get<PaginatedResponse<Prestacion>>(\"/prestaciones\", {\r\n      params: {\r\n        filter: {\r\n          nombre: filter || undefined\r\n        },\r\n        page\r\n      }\r\n    })\r\n  },\r\n  ver: (id: number) => {\r\n    return apiClient.get<Prestacion>(`prestaciones/${id}`)\r\n  },\r\n  registrar: (nombre: string) => {\r\n    return apiClient.post<Prestacion>(\"prestaciones\", {\r\n      nombre\r\n    })\r\n  },\r\n  actualizar: (id: number, nombre: string) => {\r\n    return apiClient.put<Prestacion>(`prestaciones/${id}`, {\r\n      nombre\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`prestaciones/${id}`)\r\n  },\r\n  importar: (archivo: File, separador: string, formato: string) =>{\r\n    const formData = new FormData()\r\n    formData.append(\"archivo\", archivo, archivo.name)\r\n    formData.append(\"separador\", separador)\r\n    formData.append(\"formato\", formato)\r\n    return apiClient.post(\"/prestaciones/importar\", formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  }\r\n}","import React from \"react\"\r\nimport { Form, Button, Col } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\n\r\ntype Props = {\r\n  onSearch: (nombre: string) => void \r\n}\r\nexport const PrestacionesFilterForm = (props: Props) =>{\r\n  const { register, handleSubmit } = useForm<{nombre: string}>()\r\n  return <Form onSubmit={handleSubmit(({nombre})=>{\r\n    props.onSearch(nombre)\r\n  })} >\r\n    <Form.Row className=\"flex-nowrap\">\r\n      <Col>\r\n        <Form.Label htmlFor=\"nombre\" srOnly>Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" style={{minWidth: \"10rem\"}} {...register(\"nombre\")}></Form.Control>\r\n      </Col>\r\n      <Col xs={\"auto\"}>\r\n        <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { AxiosError } from \"axios\"\r\nimport {useState, useRef} from \"react\"\r\nimport { Dropdown, ButtonGroup, Button, Form, Table, Spinner, Row, Col } from \"react-bootstrap\"\r\nimport { FaSync, FaEdit, FaTrash } from \"react-icons/fa\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { ImperativeModalRef } from \"../../../../commons/components/ImperativeModal\"\r\nimport { ImportModal } from \"../../../../commons/components/ImportModal\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { PrestacionesService } from \"../services\"\r\nimport { PrestacionesFilterForm } from \"./PrestacionesFilterForm\"\r\n// import { EspecialidadesFilter } from \"./EspecialidadesFilter\"\r\n// import { ImportarPrestaciones } from \"./ImportarPrestaciones\"\r\n\r\nexport const PrestacionesIndex = ()=>{\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const [filter, setFilter] = useState(\"\")\r\n\r\n  const importModalRef = useRef<ImperativeModalRef>(null)\r\n\r\n  const buscarPrestaciones = useQuery([\"buscarPrestaciones\", page, filter], ()=>{\r\n    return PrestacionesService.buscar(page, filter)\r\n  }, {\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    onSuccess: ({data: {meta}}) => {\r\n      setTotal(meta.total)\r\n    }\r\n  })\r\n\r\n  const eliminar = useMutation((id: number)=>{\r\n    return PrestacionesService.eliminar(id)\r\n  })\r\n\r\n  const renderRows = ()=>{\r\n    if (buscarPrestaciones.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    if (buscarPrestaciones.isError) {\r\n      const { error } = buscarPrestaciones\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {(error as AxiosError).response?.data?.message || (error as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const records = buscarPrestaciones.data!.data.records\r\n    if(records.length == 0){\r\n      return  <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          No se encontraron resultados\r\n        </td>\r\n    </tr>\r\n    }\r\n    return records.map((prestacion, index)=>{\r\n      return <tr key={prestacion.id}>\r\n        <td>{index + 1}</td>\r\n        <td>{prestacion.nombre}</td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-prestacion-${prestacion.id}`}\r\n            />\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} replace to={{\r\n                pathname: `/clinica/configuracion/prestaciones/${prestacion.id}/editar`,\r\n                state: {\r\n                  prestacion\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(prestacion.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\">Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  return <div className=\"px-1\">\r\n    <h2 style={{fontSize: \"1.75rem\"}}>Servicios subrogados</h2>\r\n    <Row className=\"mb-2\">\r\n      <Col className=\"ml-auto pr-0\" xs=\"auto\" >\r\n        <Button onClick={()=>buscarPrestaciones.refetch()}><FaSync /></Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Dropdown as={ButtonGroup}>\r\n          <Button as={Link} replace to={\"/clinica/configuracion/prestaciones/registrar\"}>Nuevo</Button>\r\n          <Dropdown.Toggle split id=\"especialidades-dropdown\" />\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={()=>{\r\n              console.log(importModalRef)\r\n              importModalRef.current && importModalRef.current.show(true)\r\n            }}\r\n            >Importar</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </Col>\r\n    </Row>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <PrestacionesFilterForm onSearch={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n    <ImportModal ref={importModalRef}\r\n      import={(file, options)=>{\r\n        return PrestacionesService.importar(file, options.separator, options.format)\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Alert, Button, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery} from \"react-query\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Prestacion, PrestacionesService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\n\r\nexport type Inputs = {\r\n  nombre: string\r\n}\r\n\r\nexport const PrestacionForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    prestacion: Prestacion\r\n  }>()\r\n  \r\n  const { state} = history.location\r\n  \r\n  const prestacion = state?.prestacion\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const guardar = useMutation(({nombre}: Inputs)=>{\r\n    return id ? PrestacionesService.actualizar(parseInt(id), nombre) : PrestacionesService.registrar(nombre)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }\r\n  })\r\n\r\n  const verPrestacion = useQuery([\"verPrestacion\", id], ()=>{\r\n    return PrestacionesService.ver(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !prestacion,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(verPrestacion.data?.data || prestacion){\r\n      setValue(\"nombre\", (verPrestacion.data?.data || prestacion).nombre)\r\n    }\r\n  }, [verPrestacion.data])\r\n\r\n  const renderBody = ()=>{\r\n    if(verPrestacion.isFetching){\r\n      return <Spinner animation=\"border\">Cargando</Spinner>\r\n    }\r\n    const error = verPrestacion.error as AxiosError\r\n    if(error){\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? guardar.error.response?.data?.message || guardar.error.message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Group>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.nombre}\r\n          {...register(\"nombre\", {\r\n            required: rules.required()\r\n          })}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formState.errors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form>\r\n  }\r\n\r\n\r\n  return <Modal\r\n    show\r\n    centered\r\n    onHide={()=>{\r\n      history.replace(\"/clinica/configuracion/prestaciones\")\r\n    }}\r\n  >\r\n    <Modal.Header>\r\n      {id ? \"Editar\" : \"Registrar\" }\r\n    </Modal.Header> \r\n    <Modal.Body>\r\n      {renderBody()}\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n      {!id ? <Button \r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = true\r\n        }}\r\n      >\r\n        {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar y continuar\r\n      </Button> : null}\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n        onClick={()=>{\r\n          continueRef.current = false\r\n        }}\r\n      >\r\n        {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\n\r\nexport type Medico = {\r\n  id: number,\r\n  ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  },\r\n  apellidoPaterno: string,\r\n  apellidoMaterno: string,\r\n  nombres: string,\r\n  sexo: string,\r\n  especialidadId: number\r\n  especialidad: string\r\n  regionalId: number\r\n}\r\n\r\nexport type Filter = {\r\n  ci?: string,\r\n  nombre?: string,\r\n  especialidadId?: number\r\n  regionalId?: number\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscar: (filter: Filter, page: Page) => {\r\n    return apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params:{\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  load: (id: number) => {\r\n    return apiClient.get<Medico>(`medicos/${id!}`);\r\n  },\r\n  registrar: (ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.post<Medico>(\"medicos\", {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  actualizar: (id: number, ci: {\r\n    raiz: number,\r\n    complemento: string,\r\n  }, apellido_paterno: string, apellido_materno: string, nombres: string, especialidad_id: number, regional_id: number) => {\r\n    return apiClient.put<Medico>(`medicos/${id}`, {\r\n      ci: ci.raiz,\r\n      ci_complemento: ci.complemento,\r\n      apellido_paterno,\r\n      apellido_materno,\r\n      nombres,\r\n      especialidad_id,\r\n      regional_id\r\n    })\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.delete(`medicos/${id!}`)\r\n  }\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const MedicosFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { MedicosService, Filter } from \"../services\"\r\nimport { MedicosFilterForm } from \"./MedicosFilterForm\"\r\n\r\nexport default () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarMedicos\", page.current, page.size], () => {\r\n    return MedicosService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return MedicosService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const listaMora = data!.data.records\r\n    return listaMora.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {/* {item.ci.raiz}-{item.ci.complemento} */}\r\n          {item.ci.raiz}{item.ci.complemento ? `-${item.ci.complemento}` : \"\"}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {nombreCompleto(item.apellidoPaterno, item.apellidoMaterno, item.nombres)}\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.especialidad}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `/clinica/medicos/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Medicos</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <MedicosFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>C.I.</th>\r\n          <th>Nombre</th>\r\n          <th>Especialidad</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","\r\nimport { forwardRef, MutableRefObject, useEffect, useRef, useState } from \"react\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useQuery, useQueryClient } from 'react-query'\r\nimport { Especialidad, EspecialidadesService } from \"../../especialidades/services\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\n\r\nexport const EspecialidadesTypeahead = (props: {onLoad?: (options: Especialidad[])=>void} & Omit<AsyncTypeaheadProps<Especialidad>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"obtenerEspecialidades\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return EspecialidadesService.buscar(\"\")\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    // onSuccess: ({data})=>{\r\n    //   props.onLoad && props.onLoad(data)\r\n    // }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <AsyncTypeahead\r\n    positionFixed\r\n    align=\"left\"\r\n    {...props}\r\n    // filterBy={()=>true}\r\n    isLoading={buscar.isFetching}\r\n    options={buscar.data?.data || []}\r\n    labelKey=\"nombre\"\r\n    useCache={false}\r\n    minLength={0}\r\n    onSearch={(newQuery)=>{\r\n      // setOptions(buscar.data?.data.filter(r=>r.nombre.includes(newQuery))||[])\r\n    }}\r\n    renderMenuItemChildren={(prestacion) => {\r\n      return prestacion.nombre\r\n    }}\r\n  />\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Medico, MedicosService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { Redirect, useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components/RegionalesTypeahead'\r\nimport { EspecialidadesTypeahead } from './EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\nexport default ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    medico: Medico\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n\r\n  const continueRef = useRef<boolean>(false)\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      especialidad: [],\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? MedicosService.actualizar(parseInt(id), {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    ) : MedicosService.registrar({\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      inputs.apellidoPaterno,\r\n      inputs.apellidoMaterno,\r\n      inputs.nombres,\r\n      inputs.especialidad![0].id,\r\n      inputs.regional![0].id\r\n    )\r\n  }, {\r\n    onSuccess: ()=>{\r\n      if(!continueRef.current)\r\n        history.goBack()\r\n    }\r\n  })\r\n\r\n  const load = useQuery([\"loadMedico\", id], ()=>{\r\n    return MedicosService.load(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.medico,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const medico = load.data?.data || history.location.state?.medico\r\n\r\n  useEffect(()=>{\r\n    if(medico){\r\n      setValue(\"ci\", String(medico.ci.raiz))\r\n      setValue(\"ciComplemento\", medico.ci.complemento)\r\n      setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      setValue(\"nombres\", medico.nombres)\r\n      // setValue(\"especialidad\",[{id: medico.especialidadId, nombre: medico.especialidad}])\r\n      // setValue(\"regional\", [{id: medico.regionalId}])\r\n    }\r\n  }, [medico])\r\n\r\n  useEffect(()=>{\r\n    if(medico && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == medico.regionalId))\r\n    }\r\n  }, [medico, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(medico && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == medico.especialidadId))\r\n    }\r\n  }, [medico, especialidades])\r\n\r\n  if(guardar.status == \"success\" && !continueRef.current){\r\n    <Redirect to=\"/clinica/medicos\"/>\r\n  }\r\n\r\n  // if(load.isFetching){\r\n  //   return <Spinner animation=\"border\">Cargando</Spinner>\r\n  // }\r\n  // const error = load.error as AxiosError\r\n  // if(error){\r\n  //   return <Alert variant=\"danger\">\r\n  //     {error.response?.data?.message || error.message}\r\n  //   </Alert>\r\n  // }\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizar\" : \"Registrar Medico\"}</h1>\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"nombres\", {\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <div className=\"m-n1\">\r\n        {!id ? <Button \r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = true\r\n          }}\r\n        >\r\n          {guardar.isLoading && continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar y continuar\r\n        </Button> : null}\r\n        <Button\r\n          className=\"m-1\"\r\n          type=\"submit\"\r\n          form=\"prestacion-form\"\r\n          onClick={()=>{\r\n            continueRef.current = false\r\n          }}\r\n        >\r\n          {guardar.isLoading && !continueRef.current ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n          Guardar\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n    <Modal show={load.isFetching || load.isError} centered >\r\n      <Modal.Body>\r\n        {load.isFetching ? \r\n          <><Spinner animation=\"border\"/>Cargando</> : \r\n          load.isError ? <Alert variant=\"danger\">\r\n               {(load.error as AxiosError).response?.data?.message || (load.error as AxiosError).message}\r\n          </Alert> : null}\r\n      </Modal.Body>\r\n    </Modal>\r\n  </>\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios, { AxiosPromise } from 'axios'\r\nimport { Medico } from \"../../medicos/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Empresa = {\r\n  id: number,\r\n  nombre: string\r\n}\r\n\r\nexport type Proveedor = {\r\n  id: number\r\n  nombre: string\r\n  medico?: Medico\r\n  tipoId: number\r\n  tipo: string\r\n  regionalId: number\r\n  contrato: {\r\n    inicio: string\r\n    fin: string\r\n    tipoId: number\r\n    tipo: string\r\n    prestaciones: {\r\n      id: number\r\n      nombre: string\r\n    }[]\r\n  }\r\n}\r\n\r\nexport type Filter = {\r\n  regionalId?: number\r\n}\r\n\r\n\r\ninterface IProveedorService {\r\n  buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  cargar(id: number): AxiosPromise<Proveedor>\r\n  registrar(fields: {\r\n    tipoId: 1,\r\n    nit: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  actualizar(id: number, fields: {\r\n    tipoId: 1,\r\n    nit: number,\r\n    ci: string,\r\n    ciComplemento: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    especialidadId: number\r\n    regionalId: number\r\n  } | {\r\n    tipoId: 2,\r\n    nit: number,\r\n    nombre: string,\r\n    regionalId: number\r\n  }): AxiosPromise<Proveedor>\r\n  eliminar(id: number): AxiosPromise\r\n\r\n  [key: string]: any\r\n}\r\n\r\nexport const ProveedoresService: IProveedorService = {\r\n  // buscar(filter: Filter): AxiosPromise<Proveedor[]>\r\n  // buscar(filter: Filter, page: Page): AxiosPromise<PaginatedResponse<Proveedor>>\r\n  buscar: (filter: Filter, page?: Page) => {\r\n    return apiClient.get(\"proveedores\", {\r\n      params: {\r\n        filter,\r\n        page\r\n      }\r\n    })\r\n  },\r\n  cargar: (id) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  registrar: (fields) => {\r\n    return apiClient.post(\"proveedores\", keysToUnderscore(fields))\r\n  },\r\n  actualizar: (id, fields) =>{\r\n    return apiClient.put(`proveedores/${id}`, keysToUnderscore(fields))\r\n  },\r\n  eliminar: (id: number) => {\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  actualizarInformacionDeContacto(id: number, infoContacto: {\r\n    municipioId: number,\r\n    direccion: string,\r\n    ubicacion: {\r\n      latitud: number,\r\n      longitud: number\r\n    },\r\n    telefono1: number,\r\n    telefono2?: number\r\n  }){\r\n    return apiClient.put(`proveedores/${id}/contacto`, keysToUnderscore(infoContacto))\r\n  }\r\n\r\n}","import React from \"react\"\r\nimport { Filter } from \"../services\"\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const ProveedoresFilterForm = (props: Props)=>{\r\n  return null\r\n}","import { AxiosError } from \"axios\"\r\nimport React, { useState } from \"react\"\r\nimport { Button, Col, Dropdown, Form, Row, Spinner, Table } from \"react-bootstrap\"\r\nimport { FaEdit, FaTrash, FaFilter, FaSync, FaPlus } from \"react-icons/fa\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Pagination from \"../../../../commons/components/Pagination\"\r\nimport VerticalEllipsisDropdownToggle from \"../../../../commons/components/VerticalEllipsisDropdownToggle\"\r\nimport { nombreCompleto } from \"../../../../commons/utils/nombreCompleto\"\r\nimport { ProveedoresService, Filter } from \"../services\"\r\nimport { ProveedoresFilterForm } from \"./ProveedoresFilterForm\"\r\n\r\nexport const ProveedoresIndex = () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [filter, setFilter] = useState<Filter>({\r\n\r\n  })\r\n  const [filterFormVisible, showFilterForm] = useState(false)\r\n\r\n  const buscar = useQuery([\"buscarProveedoress\", filter, page], () => {\r\n    return ProveedoresService.buscar(filter, page)\r\n  }, {\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const total = buscar.data?.data?.meta?.total || 0\r\n\r\n  const eliminar = useMutation((id: number) => {\r\n    return ProveedoresService.eliminar(id)\r\n  }, {\r\n    onSuccess: () => {\r\n      buscar.refetch()\r\n    }\r\n  })\r\n\r\n  const renderRows = () => {\r\n    if (buscar.isFetching) {\r\n      return <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    }\r\n    else if (buscar.isError) {\r\n      const error = buscar.error as AxiosError\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          {error.response?.data?.message || error.message}\r\n        </td>\r\n      </tr>\r\n    }\r\n    const { data } = buscar\r\n    const proveedores = data!.data.records\r\n    return proveedores.map((item, index) => {\r\n      return <tr key={item.id}>\r\n        <th scope=\"row\" style={{ lineHeight: \"26px\" }}>\r\n          {index + 1}\r\n        </th>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.medico && nombreCompleto(item.medico.apellidoPaterno, item.medico.apellidoMaterno, item.medico.nombres) || item.nombre }\r\n        </td>\r\n        <td style={{ lineHeight: \"26px\" }}>\r\n          {item.tipo}\r\n        </td>\r\n        <td>\r\n          <Dropdown>\r\n            <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n              variant=\"link\" id={`dropdown-${item.id}`}\r\n            />\r\n\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item as={Link} to={{\r\n                pathname: `${path}/${item.id}/editar`,\r\n                state: {\r\n                  medico: item\r\n                }\r\n              }} ><FaEdit /><span className=\"ml-2 align-middle\">Editar</span></Dropdown.Item>\r\n              <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n                if (window.confirm(\"¿Está seguro?\")) {\r\n                  eliminar.mutate(item.id)\r\n                }\r\n              }}><FaTrash /><span className=\"ml-2 align-middle\" >Eliminar</span></Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </td>\r\n      </tr>\r\n    })\r\n  }\r\n\r\n  \r\n  return <div className=\"px-1\">\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Proveedores</h1>\r\n    <div className=\"d-flex my-2\">\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            buscar.refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button onClick={()=>{\r\n            showFilterForm(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button\r\n            as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"d-flex align-items-center\">\r\n              <FaPlus /><span className=\"mr-2\">Nuevo</span>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <Row>\r\n      <Col className=\"mb-2\">\r\n        <ProveedoresFilterForm onFilter={(filter)=>{\r\n          setFilter(filter)\r\n        }} />\r\n      </Col>\r\n      <Col className=\"mb-2\" xs={\"auto\"}>\r\n        <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Control className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage((page) => ({\r\n                ...page,\r\n                size: parseInt(value)\r\n              }))\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n    <Table responsive>\r\n      <thead className=\"text-center\">\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nombre</th>\r\n          <th style={{width: 1}}>Tipo</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"d-flex flex-row\">\r\n      <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n      <Pagination\r\n        current={page.current}\r\n        total={Math.ceil((total - page.size) / page.size) + 1}\r\n        onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import { useState } from \"react\"\r\nimport { Button, Form, Col } from \"react-bootstrap\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { Redirect } from \"react-router\"\r\nimport { RegionalesTypeahead } from \"../../../../commons/components/RegionalesTypeahead\"\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Regional } from \"../../../../commons/services/RegionalesService\"\r\n\r\ntype Inputs = {\r\n  nit: string,\r\n  nombre: string,\r\n  regional: Regional[]\r\n}\r\n\r\nexport const ProveedorEmpresaForm = ()=>{\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [redirect, shouldRedirect] = useState(false)\r\n  const {\r\n    handleSubmit,\r\n    control\r\n  } = useForm<Inputs>()\r\n\r\n  if(redirect){\r\n    return <Redirect to=\"/clinica/proveedores/1/contacto\"></Redirect>\r\n  }\r\n\r\n  return <Form onSubmit={handleSubmit((values)=>{\r\n\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>NIT</Form.Label>\r\n        <Form.Control/>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label>Nombre</Form.Label>\r\n        <Form.Control/>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          name=\"regional\"\r\n          control={control}\r\n          // rules={{\r\n          //   required: rules.required()\r\n          // }}\r\n          render={({field, fieldState})=>{\r\n            return <>\r\n              <RegionalesTypeahead\r\n                id=\"medicos-form/regionales-typeahead\"\r\n                onLoad={(regionales)=>setRegionales(regionales)}\r\n                className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                isInvalid={!!fieldState.error}\r\n                selected={field.value}\r\n                onChange={field.onChange}\r\n                onBlur={field.onBlur}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n            </>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button\r\n      type=\"submit\"\r\n      onClick={()=>{\r\n        shouldRedirect(true)\r\n      }}\r\n    >\r\n      Guardar\r\n    </Button>\r\n  </Form>\r\n}","import { AxiosError, AxiosResponse } from 'axios'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Alert, Button, Col, Form, InputGroup, Modal, Spinner } from 'react-bootstrap'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport * as rules from '../../../../commons/components/rules'\r\nimport { Proveedor, ProveedoresService } from '../services'\r\nimport { Especialidad } from '../../especialidades/services'\r\nimport { Redirect, useHistory, useParams } from 'react-router'\r\nimport { Regional } from '../../../../commons/services/RegionalesService'\r\nimport { RegionalesTypeahead } from '../../../../commons/components'\r\nimport { EspecialidadesTypeahead } from '../../medicos/components/EspecialidadesTypeahead'\r\n\r\ntype Inputs = {\r\n  nit: string\r\n  ci: string\r\n  ciComplemento: string\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: Especialidad[]\r\n  regional: Regional[]\r\n}\r\nexport const ProveedorMedicoForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    proveedor: Proveedor\r\n  }>()\r\n\r\n  const [regionales, setRegionales] = useState<Regional[]>([])\r\n  const [especialidades, setEspecialidades] = useState<Especialidad[]>([])\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    setValue,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>()\r\n\r\n  const load = useQuery([\"cargarProveedorMedico\", id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !history.location.state?.proveedor,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const proveedor = load.data?.data || history.location.state?.proveedor\r\n  \r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? ProveedoresService.actualizar(parseInt(id), {\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    }) : ProveedoresService.registrar({\r\n      tipoId: 1,\r\n      nit: parseInt(inputs.nit),\r\n      ci: inputs.ci,\r\n      ciComplemento: inputs.ciComplemento,\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombres: inputs.nombres,\r\n      especialidadId: inputs.especialidad![0].id,\r\n      regionalId: inputs.regional![0].id\r\n    })\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(proveedor){\r\n      // setValue(\"ci\", String(proveedor.medico.ci.raiz))\r\n      // setValue(\"ciComplemento\", medico.ci.complemento)\r\n      // setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      // setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      // setValue(\"nombres\", medico.nombres)\r\n    }\r\n  }, [proveedor])\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && regionales.length){\r\n      setValue(\"regional\", regionales.filter(r=>r.id == proveedor.regionalId))\r\n    }\r\n  }, [proveedor, regionales])\r\n\r\n  useEffect(()=>{\r\n    if(proveedor && especialidades.length){\r\n      setValue(\"especialidad\", especialidades.filter(r=>r.id == proveedor.medico?.especialidadId))\r\n    }\r\n  }, [proveedor, especialidades])\r\n\r\n  // if(load.isFetching){\r\n  //   return <Spinner animation=\"border\">Cargando</Spinner>\r\n  // }\r\n  // const error = load.error as AxiosError\r\n  // if(error){\r\n  //   return <Alert variant=\"danger\">\r\n  //     {error.response?.data?.message || error.message}\r\n  //   </Alert>\r\n  // }\r\n  return <>\r\n    <Form id=\"prestacion-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>NIT</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nit}\r\n            {...register(\"nit\")}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        {/* <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <InputGroup className={formState.errors.ci || formState.errors.ciComplemento ? \"is-invalid\" : \"\"}>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.ci}\r\n              {...register(\"ci\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.ciComplemento}\r\n              {...register(\"ciComplemento\", {\r\n                maxLength: rules.maxLength(2)\r\n              })}\r\n            />\r\n          </InputGroup>\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group> */}\r\n        <Form.Group as={Col} md={4} xs={8}>\r\n          <Form.Label>Carnet de identidad</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ci}\r\n            {...register(\"ci\", {\r\n              required: rules.required()\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={2} xs={4}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.ciComplemento}\r\n            {...register(\"ciComplemento\", {\r\n              maxLength: rules.maxLength(2)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoPaterno}\r\n            {...register(\"apellidoPaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoMaterno = watch(\"apellidoMaterno\")\r\n              //     if(!apellidoMaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.apellidoMaterno}\r\n            {...register(\"apellidoMaterno\", {\r\n              // validate: {\r\n              //   required: (value)=>{\r\n              //     const apellidoPaterno = watch(\"apellidoPaterno\")\r\n              //     if(!apellidoPaterno && !value){\r\n              //       return \"Debe indicar al menos un apellido\"\r\n              //     }\r\n              //   }\r\n              // }\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(20)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control\r\n            isInvalid={!!formState.errors.nombres}\r\n            {...register(\"nombres\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(40)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Especialidad</Form.Label>\r\n          <Controller\r\n            name=\"especialidad\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <EspecialidadesTypeahead\r\n                  id=\"medicos-form/especialidades-typeahead\"\r\n                  onLoad={(especialidades)=>setEspecialidades(especialidades)}\r\n                  className={formState.errors.especialidad ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            rules={{\r\n              required: rules.required()\r\n            }}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  onLoad={(regionales)=>setRegionales(regionales)}\r\n                  className={fieldState.error ? \"is-invalid\" : \"\"}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n                <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Button\r\n        type=\"submit\"\r\n        form=\"prestacion-form\"\r\n      >\r\n        {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\" />: null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <Modal show={load.isFetching || load.isError} centered >\r\n      <Modal.Body>\r\n        {load.isFetching ? \r\n          <><Spinner animation=\"border\"/>Cargando</> : \r\n          load.isError ? <Alert variant=\"danger\">\r\n               {(load.error as AxiosError).response?.data?.message || (load.error as AxiosError).message}\r\n          </Alert> : null}\r\n      </Modal.Body>\r\n    </Modal>\r\n  </>\r\n}","\r\nimport {useState} from \"react\"\r\nimport {Form, Col, Row} from \"react-bootstrap\"\r\nimport { useParams } from \"react-router\"\r\nimport { ProveedorEmpresaForm } from \"./ProveedorEmpresaForm\"\r\nimport { ProveedorMedicoForm } from \"./ProveedorMedicoForm\"\r\n\r\nexport const ProveedorForm = ()=>{\r\n  const [tipo, setTipo] = useState(0)\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  return <>\r\n    <h1 style={{fontSize: \"2rem\"}}>{id ? \"Actualizacion de Proveedor\" : \"Registro de Proveedor\"}</h1>\r\n    <Form.Group as={Row}>\r\n      <Form.Label column sm={\"auto\"}>Tipo de proveedor</Form.Label>\r\n      <Col className=\"d-flex\" xs={\"auto\"}>\r\n        <Form.Check inline type=\"radio\" label=\"Médico\" value={1} checked={tipo == 1} onChange={(e)=>{\r\n          if(e.target.checked)\r\n            setTipo(1) \r\n        }} ></Form.Check>\r\n        <Form.Check inline type=\"radio\" label=\"Empresa\" value={2} checked={tipo == 2} onChange={(e)=>{\r\n          if(e.target.checked)\r\n            setTipo(2) \r\n        }} ></Form.Check>\r\n      </Col>\r\n    </Form.Group>\r\n    {tipo == 1 ? <ProveedorMedicoForm /> : tipo == 2 ? <ProveedorEmpresaForm /> : null}\r\n  </>\r\n}","import { useState, useEffect } from \"react\"\r\nimport { Alert, Button, Col, Form, Modal, Spinner } from \"react-bootstrap\"\r\nimport { LatLngExpression } from \"leaflet\"\r\nimport { Controller, useForm } from \"react-hook-form\"\r\nimport { useLocation, useParams } from \"react-router-dom\"\r\nimport { useQuery, useMutation } from \"react-query\"\r\nimport { Departamento, Provincia, Municipio } from \"../../../../commons/services\"\r\nimport { DepartamentosTypeahead, ProvinciasTypeahead, MunicipiosTypeahead, LocationInput } from \"../../../../commons/components\"\r\nimport * as rules from \"../../../../commons/components/rules\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { FaLessThanEqual } from \"react-icons/fa\"\r\n\r\n\r\ntype Inputs = {\r\n  departamento: Departamento[]\r\n  provincia: Provincia[]\r\n  municipio: Municipio[]\r\n  direccion: string,\r\n  ubicacion: LatLngExpression\r\n  telefono1: number,\r\n  telefono2: number\r\n}\r\n\r\nexport const ContactoForm = ()=>{\r\n  const {id} = useParams<{id: string}>()\r\n  const {state} = useLocation<{\r\n    proveedor: Proveedor\r\n  }>()\r\n  const [departamentos, setDepartamentos] = useState<Departamento[]>([])\r\n  const [provincias, setProvincias] = useState<Provincia[]>([])\r\n  const [municipios, setMunicipios] = useState<Municipio[]>([])\r\n  const [showLoader, setShowLoader] = useState(false)\r\n  const {\r\n    register,\r\n    control,\r\n    watch,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      departamento: [],\r\n      provincia: [],\r\n      municipio: [],\r\n      ubicacion: [-17.78629, -63.18117]\r\n    }\r\n  })\r\n\r\n  const cargar = useQuery([\"cargarProveedor\", id], ()=>{\r\n    return ProveedoresService.cargar(parseInt(id))\r\n  }, {\r\n    enabled: !state?.proveedor,\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const guardar = useMutation((values: Inputs) =>{\r\n    let lat, lng\r\n    if(Array.isArray(values.ubicacion)){\r\n      [lat, lng] = values.ubicacion\r\n    }\r\n    else{\r\n      ({lat, lng} = values.ubicacion)\r\n    }\r\n    return ProveedoresService.guardarInformacionDeContacto({\r\n      municipioId: values.municipio[0].id,\r\n      direccion: values.direccion,\r\n      ubicacion: {\r\n        latitud: lat,\r\n        longitud: lng\r\n      },\r\n      telefono1: values.telefono1,\r\n      telefono2: values.telefono2 || undefined\r\n    })\r\n  })\r\n\r\n  const proveedor = state?.proveedor || cargar.data?.data\r\n\r\n  useEffect(()=>{\r\n    if(cargar.data){\r\n      \r\n    }\r\n  }, [cargar.data])\r\n\r\n  useEffect(()=>{\r\n    if(cargar.isLoading){\r\n      setShowLoader(true)\r\n    }\r\n  }, [cargar.isLoading])\r\n\r\n  const renderLoader = () =>{\r\n    return <Modal centered show={showLoader} onHide={()=>{\r\n      if(cargar.isError){\r\n        setShowLoader(false)\r\n      }\r\n    }}>\r\n      <Modal.Header>\r\n        Cargando\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {cargar.isLoading ? <Spinner animation=\"border\"></Spinner> : <Alert variant=\"danger\">\r\n          {cargar.error?.response?.message || cargar.error?.message}\r\n        </Alert>}\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  return <Form>\r\n    {renderLoader()}\r\n    <h1 style={{fontSize: \"1.75rem\"}}>Información de contacto</h1>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Departamento</Form.Label>\r\n        <Controller\r\n          name=\"departamento\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <DepartamentosTypeahead \r\n              id=\"contacto-form/departamentos\"\r\n              onLoad={(departamentos)=>{\r\n                setDepartamentos(departamentos)\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Provincia</Form.Label>\r\n        <Controller\r\n          name=\"provincia\"\r\n          control={control}\r\n          rules={{\r\n            required: rules.required()\r\n          }}\r\n          render={({field, fieldState})=>{\r\n            return <ProvinciasTypeahead\r\n              id=\"contacto-form/provincias\"\r\n              onLoad={(provincias)=>{\r\n                setProvincias(provincias)\r\n              }}\r\n              filterBy={(provincia) => {\r\n                const departamento = watch(\"departamento\")\r\n                return !!departamento.length && provincia.departamentoId == departamento[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Municipio</Form.Label>\r\n        <Controller\r\n          name=\"municipio\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            return <MunicipiosTypeahead\r\n              id=\"contacto-form/municipios\"\r\n              onLoad={(municipios)=>{\r\n                setMunicipios(municipios)\r\n              }}\r\n              filterBy={(municipio) => {\r\n                const provincia = watch(\"provincia\")\r\n                return !!provincia.length && municipio.provinciaId == provincia[0].id\r\n              }}\r\n              isInvalid={!!fieldState.error}\r\n              selected={field.value}\r\n              onChange={field.onChange}\r\n              onBlur={field.onBlur}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Direccion</Form.Label>\r\n        <Form.Control as=\"textarea\" />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Ubicación</Form.Label>\r\n        <Controller\r\n          name=\"ubicacion\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            console.log(\"Location\", field)\r\n            return <LocationInput\r\n              center={field.value || [-17.78629, -63.18117]}\r\n              value={field.value}\r\n              onChange={field.onChange}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 1</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            required: rules.required(),\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 2</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!formState.errors.telefono1}\r\n          {...register(\"telefono1\", {\r\n            pattern: rules.pattern(/\\d{7,8}/)\r\n          })}\r\n        />\r\n        <Form.Control.Feedback>{formState.errors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Button>\r\n      {guardar.isLoading ? <Spinner animation=\"border\" size=\"sm\"/> : null}\r\n      <span className=\"ml-2 align-middle\">Guardar</span>\r\n    </Button>\r\n  </Form>\r\n}","import { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaCog, /*FaCoins,*/ FaHandshake, FaUserMd } from 'react-icons/fa';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { SolicitudAtencionExternaIndex } from './solicitud_atencion_externa/components/SolicitudAtencionExternaIndex';\r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { SolicitudAtencionExternaForm } from './solicitud_atencion_externa/components/SolicitudAtencionExternaForm';\r\nimport { EspecialidadesIndex } from './especialidades/components/EspecialidadesIndex';\r\nimport { PrestacionesIndex, PrestacionForm } from './prestaciones/componentes';\r\nimport MedicosIndex from './medicos/components/MedicosIndex';\r\nimport MedicosForm from './medicos/components/MedicosForm';\r\nimport { ProveedoresIndex, ProveedorForm, ContactoForm } from './proveedores/components';\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"lista-mora\",\r\n        path: `${url}/lista-mora`,\r\n        title: \"Lista de mora\",\r\n        icon: <FcDebt  />\r\n      },\r\n      {\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención exterana\",\r\n        icon: <BiTransfer />\r\n      },\r\n      {\r\n        id: \"configuracion/medicos\",\r\n        path: `${url}/medicos`,\r\n        title: \"Medicos\",\r\n        icon: <FaUserMd />,\r\n      },\r\n      {\r\n        id: \"configuracion/proveedores\",\r\n        path: `${url}/proveedores`,\r\n        title: \"Proveedores\",\r\n        icon: <FaHandshake />,\r\n      },\r\n      {\r\n        id: \"configuracion\",\r\n        // path: `${url}/configuracion`,\r\n        title: \"Configuración\",\r\n        icon: <FaCog />,\r\n        items: [\r\n          {\r\n            id: \"configuracion/especialidades\",\r\n            path: `${url}/configuracion/especialidades`,\r\n            title: \"Especialidades\",\r\n            icon: <FaCog />,\r\n          },\r\n          {\r\n            id: \"configuracion/prestaciones\",\r\n            path: `${url}/configuracion/prestaciones`,\r\n            title: \"Servicios subrogados\",\r\n            icon: <FaCog />,\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}/lista-mora/agregar`}>\r\n        <ListaMoraItemForm />\r\n      </Route>\r\n      <Route path={`${url}/lista-mora`}>\r\n        <ListaMoraIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa`}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/atencion-externa/registrar`}>\r\n        <SolicitudAtencionExternaForm />\r\n      </Route>\r\n      <Route exact path={`${url}/medicos`}>\r\n        <MedicosIndex />\r\n      </Route>\r\n      <Route exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}>\r\n        <MedicosForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores`}>\r\n        <ProveedoresIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/registrar`}>\r\n        <ProveedorForm />\r\n      </Route>\r\n      <Route exact path={`${url}/proveedores/:id/contacto`}>\r\n        <ContactoForm />\r\n      </Route>\r\n      <Route exact path={`${url}/configuracion/especialidades`}>\r\n        <EspecialidadesIndex />\r\n      </Route>\r\n      <Route path={`${url}/configuracion/prestaciones`}>\r\n        <PrestacionesIndex />\r\n      </Route>\r\n      {/* <Route exact path={`${url}/configuracion`} >\r\n        <Settings />\r\n      </Route> */}\r\n    </Switch>\r\n    \r\n    <Route exact path={[`${url}/configuracion/prestaciones/registrar`, `${url}/configuracion/prestaciones/:id/editar`]}>\r\n        <PrestacionForm />\r\n      </Route>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import axios from \"axios\";\r\nimport apiClient from \"../../../commons/services/apiClient\"\r\nimport { User } from \"../../auth/state\";\r\nimport { Role } from \"../state\";\r\n\r\nexport const Users = {\r\n  loadAll: (page: {\r\n    current: number,\r\n    size: number\r\n  }, filter: {\r\n    username?: string,\r\n    active?: number,\r\n    externalId?: number\r\n  })=>{\r\n    return apiClient.get<{\r\n      meta: {total: number},\r\n      records: User[]\r\n    }>('/users', {\r\n      params: {\r\n        page,\r\n        filter\r\n      }\r\n    })\r\n  },\r\n  load: (userId: number) =>{\r\n    return apiClient.get<User>(`/users/${userId}`)\r\n  },\r\n  register: ({username, password, externalId: external_id, roleIds: role_ids}: {\r\n    username: string,\r\n    password: string,\r\n    roleIds: number[],\r\n    externalId: number  \r\n  }) => {\r\n    return apiClient.post('/users', {\r\n      username, password, external_id, role_ids\r\n    })\r\n  },\r\n  update: ({id, username, roleIds: role_ids}: {\r\n    id: number,\r\n    username: string,\r\n    roleIds: number[]\r\n  }) => {\r\n    return apiClient.put(`/users/${id}`, {\r\n      username, role_ids\r\n    })\r\n  }\r\n}\r\n\r\nexport const Roles = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<Role[]>('/roles')\r\n  },\r\n  fetch: (roleId: number)=>{\r\n    return apiClient.get<Role>(`/roles/${roleId}`)\r\n  },\r\n  register: (data: Role) => {\r\n    return apiClient.post<Role>('roles', data)\r\n  },\r\n  update: (data: Role) => {\r\n    return apiClient.put<Role>(`roles/${data.id}`, data)\r\n  }\r\n}\r\n\r\nexport const Permissions = {\r\n  fetchAll: ()=>{\r\n    return apiClient.get<string[]>('/permissions')\r\n  }\r\n}","import { useMemo, useEffect } from \"react\"\r\nimport { Button, Pagination } from \"react-bootstrap\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport Qs from 'qs'\r\n\r\ntype Props = {\r\n  current: number,\r\n  minimum: number,\r\n  maximum: number,\r\n  total: number,  \r\n  onClickFirst: ()=>void,\r\n  onClickLast: ()=>void,\r\n  onClickPrev: ()=>void,\r\n  onClickNext: ()=>void,\r\n  onClickItem: (page: number)=>void\r\n}\r\nexport default ({current, minimum, maximum, total, ...props}: Props)=>{\r\n  console.log(current, minimum, maximum, total)\r\n  const {pathname, search} = useLocation()\r\n  const dispatch = useDispatch()\r\n  // const {total, current, size} = useSelector(getUsersPagination)\r\n  const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  const {page} = parsedSearch as any\r\n\r\n  // useEffect(()=>{\r\n  //   if(page){\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: {\r\n  //         current: parseInt(page.current) || current,\r\n  //         size: parseInt(page.size) || size\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }, [page])\r\n\r\n  // const links = useMemo(()=>{\r\n  //   const parsedSearch = Qs.parse(search.substr(1))\r\n  //   return {\r\n  //     first: `${pathname}?${Qs.stringify({\r\n  //       ...parsedSearch,\r\n  //       page: {\r\n  //         current: 1,\r\n  //         size\r\n  //       }\r\n  //     })}`\r\n  //   }\r\n  // }, [search, pathname, total, current, size])\r\n  const pageItems = []\r\n  for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<Pagination.Item key={i} active={true}>{i}</Pagination.Item>)\r\n    else\r\n      // pageItems.push(<Pagination.Item key={i} as={Link} href={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`} to={`${pathname}?${Qs.stringify({...parsedSearch, page: {current: i, size}}, { arrayFormat: \"brackets\", encode: false})}`}>{i}</Pagination.Item>)\r\n      pageItems.push(<Pagination.Item key={i} onClick={()=>props.onClickItem(i)}>{i}</Pagination.Item>)\r\n  }\r\n  \r\n  return <Pagination>\r\n    {minimum > 1 ? <Pagination.First\r\n      onClick={props.onClickFirst}\r\n    /> : null}\r\n    {current > 1 ? <Pagination.Prev \r\n      onClick={props.onClickPrev}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <Pagination.Next\r\n      onClick={props.onClickNext}\r\n    /> : null}\r\n    {maximum < total ? <Pagination.Last\r\n      onClick={props.onClickLast}\r\n    /> : null}\r\n      \r\n  </Pagination>\r\n}","import React, { useState } from 'react'\r\nimport { Button, Col, Form, FormProps } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\n\r\ntype Props = {\r\n  onApply: (filter: { username?: string, active?: boolean})=>void\r\n} & FormProps\r\nexport default (props: Props)=>{\r\n  const [fields, setFields] = useState({\r\n    username: \"\",\r\n    active: \"\",\r\n  })\r\n\r\n  return <Form {...props} onSubmit={(e)=>{\r\n    e.preventDefault()\r\n    props.onSubmit && props.onSubmit(e)\r\n  }}>\r\n    <Form.Row>\r\n      <Col>\r\n        <Form.Label htmlFor=\"username-filter\" srOnly>\r\n          Usuario\r\n        </Form.Label>\r\n        <Form.Control\r\n          className=\"mb-2\"\r\n          id=\"username-filter\"\r\n          value={fields.username}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              username: value\r\n            }))\r\n          }}\r\n          placeholder=\"Usuario\"\r\n        />\r\n      </Col>\r\n      <Col >\r\n        <Form.Label htmlFor=\"status-filter\" srOnly>\r\n          Estado\r\n        </Form.Label>\r\n        <Form.Control\r\n          as=\"select\"\r\n          className=\"mb-2\"\r\n          id=\"status-filter\"\r\n          value={fields.active}\r\n          onChange={(e)=> {\r\n            const value = e.target.value\r\n            setFields(fields=>({\r\n              ...fields,\r\n              active: value\r\n            }))\r\n          }}\r\n        >\r\n          <option value=\"\">Elige un estado</option>\r\n          <option value=\"1\">Activo</option>\r\n          <option value=\"0\">Inactivo</option>\r\n        </Form.Control>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\" >Aplicar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport { Table, Button, Pagination, Form, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { BsEyeFill, BsTrashFill } from \"react-icons/bs\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Qs from \"qs\"\r\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\"\r\nimport { Users } from \"../services\"\r\nimport UsersPagination from \"./UsersPagination\"\r\nimport { FaFilter, FaSync, FaUserPlus } from \"react-icons/fa\"\r\nimport UsersFilter from \"./UsersFilter\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AxiosError } from \"axios\"\r\n// import FilterUsersForm from \"./FilterUsersForm\"\r\n\r\nexport default ()=>{  \r\n  const dispatch = useDispatch()\r\n  const [{current, size}, setPage] = useState({\r\n    // total: 0,\r\n    current: 1,\r\n    size: 10\r\n  })\r\n  const [ filter, setFilter ] = useState({\r\n    username: undefined,\r\n    active: undefined\r\n  })\r\n  const [usersFilterVisible, showUsersFilter] = useState(false)\r\n  const { search, state: locationState } = useLocation<{page: any, filter: any}>()\r\n  const { url, path } = useRouteMatch()\r\n  // const users = useSelector(getUsers)\r\n  // const {current, size} = useSelector(getUsersPagination)\r\n\r\n  const {\r\n    isFetching,\r\n    isError,\r\n    data: fetchUsersResponse,\r\n    error: fetchUsersError,\r\n    refetch\r\n  } = useQuery([\"fetchUsers\", current, size, filter], async ()=>{\r\n    const response = await Users.loadAll({\r\n      current: current,\r\n      size: size\r\n    }, filter)\r\n    return response\r\n  }, {\r\n    keepPreviousData: true,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  const users = fetchUsersResponse?.data.records\r\n  const total = fetchUsersResponse?.data.meta.total || 0\r\n  // const parsedSearch = useMemo(()=>Qs.parse(search.substr(1)), [search])\r\n  // const mergedSearch = useRef<any>()\r\n  // const lastParsedSearch = useRef<any>()\r\n  // useEffect(()=>{\r\n  //   if(lastParsedSearch.current != parsedSearch){\r\n  //     lastParsedSearch.current = parsedSearch\r\n  //     mergedSearch.current = {\r\n  //       page: {\r\n  //         ...page,\r\n  //         ...(parsedSearch.page as Qs.ParsedQs || {})\r\n  //       },\r\n  //       filter: {\r\n  //         ...filter,\r\n  //         ...(parsedSearch.fiter as Qs.ParsedQs || {})\r\n  //       }\r\n  //     }\r\n  //     dispatch({\r\n  //       type: \"UPDATE_USERS_PAGINATION\",\r\n  //       payload: mergedSearch.current.page\r\n  //     })\r\n  //   }\r\n  // }, [page, filter, parsedSearch])\r\n\r\n  // useEffect(()=>{\r\n  //   if(mergedSearch.current){\r\n  //     Users.loadAll(mergedSearch.current.page as any, mergedSearch.current.filter as any)\r\n  //     .then(({data})=>{\r\n  //       dispatch({\r\n  //         type: \"LOAD_USERS_COMPLETED\",\r\n  //         payload: data\r\n  //       })\r\n  //       console.log(data)\r\n  //     })\r\n  //   }\r\n  // }, [mergedSearch.current])\r\n\r\n  useEffect(()=>{\r\n    document.title = \"Usuarios\"\r\n  }, [])\r\n\r\n  function renderRows(){\r\n    return isFetching ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          <Spinner className=\"mr-2\" variant=\"primary\" animation=\"border\" size=\"sm\" />\r\n          Cargando\r\n        </td>\r\n      </tr>\r\n    ) : (isError ? (\r\n      <tr>\r\n        <td className=\"bg-light text-center\" colSpan={100}>\r\n          {(fetchUsersError as AxiosError).response?.data?.message || (fetchUsersError as AxiosError).message}\r\n        </td>\r\n      </tr>\r\n    ) : (\r\n      users?.map((u, i)=>{\r\n        return <tr key={u.id}>\r\n          <th scope=\"row\">\r\n            {i+1}\r\n          </th>\r\n          <td>{u.username}</td>\r\n          <td className={u.active ? \"bg-success\" : \"bg-danger\"}><span className=\"text-light\">{u.active ? \"Activo\" : \"Inactivo\"}</span></td>\r\n          <td>\r\n            <div className=\"d-flex\">\r\n              <Button className=\"btn-icon\" variant=\"link\" ><BsEyeFill /></Button>\r\n              {/* <Button className=\"btn-icon d-inline\" variant=\"link\" ><BsTrashFill /></Button> */}\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      })\r\n    ))\r\n  }\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <div className=\"d-flex flex-nowrap\">\r\n      <Row className=\"mr-auto flex-nowrap\">\r\n        <Col className=\"d-flex flex-nowrap align-items-center\">\r\n          <span>Mostrar</span>\r\n          <Form.Control className=\"mx-2\" as=\"select\" value={size} onChange={(e)=>{\r\n            const value = e.target.value\r\n            setPage((page)=>({\r\n              ...page,\r\n              size: parseInt(value)\r\n            }))\r\n          }}>\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={30}>30</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </Form.Control>\r\n          <span>filas</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"ml-auto flex-nowrap\" >\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            refetch()\r\n          }}><FaSync /></Button>\r\n        </Col>\r\n        <Col className={\"pr-0\"} xs=\"auto\" >\r\n          <Button className=\"my-2\" onClick={()=>{\r\n            showUsersFilter(visible=>!visible)\r\n          }}><FaFilter /></Button>\r\n        </Col>\r\n        <Col xs=\"auto\">\r\n          <Button as={Link}\r\n            to={`${path}/registrar`}\r\n            className=\"my-2\" onClick={()=>{\r\n            // showUserRegistrationModal()\r\n          }}><FaUserPlus /></Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <UsersFilter\r\n      className={\"mt-2\" + (usersFilterVisible ? \"\" : \" d-none\")}\r\n      onApply={(filter: any)=>{\r\n        showUsersFilter(false)\r\n        setFilter(filter)\r\n      }} />\r\n    <Table responsive className=\"small text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th >Nombre de usuario</th>\r\n          <th style={{width: \"6rem\"}}>Estado</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {renderRows()}\r\n      </tbody>\r\n    </Table>\r\n    <div className=\"mt-auto align-self-center\">\r\n      <UsersPagination\r\n        current={current}\r\n        minimum={Math.max(1, current - 4)}\r\n        maximum={Math.min(Math.trunc((total-size)/size)+1, current + 4)}\r\n        total={((total-size)/size)+1}\r\n        onClickFirst={()=>setPage((page)=>({...page, current: 1}))}\r\n        onClickPrev={()=> {\r\n            console.log(\"Previous\");\r\n            setPage((page)=>({...page, current: page.current - 1}))\r\n          }}\r\n        onClickItem={(current)=>setPage((page)=>({...page, current}))}\r\n        onClickNext={()=>setPage(page=>({...page, current: page.current + 1}))}\r\n        onClickLast={()=>setPage(page=>({...page, current: ((total-size)/size)+1}))}\r\n      />\r\n    </div>\r\n  </div>\r\n}","import React from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\n// import { Item, Menu, useContextMenu } from 'react-contexify'\r\nimport { Role } from '../state';\r\n// import { getWages } from '../selectors/inputSelectors'\r\n\r\n// const MENU_ID = \"ROLES_MENU\"\r\nexport const RolesList = ({roles}: {roles: Role[]})=>{\r\n\r\n  return <>\r\n    <ListGroup className=\"flex-grow-1\"  variant=\"flush\"\r\n      // onContextMenu={(e: any)=>{\r\n      //   show(e, {\r\n      //     props: { id: null}\r\n      //   })\r\n      // }}\r\n    >\r\n      {roles.map(w=>{\r\n        return <ListGroup.Item key={w.id} className=\"py-2 px-3 text-capitalize\" href={`#${w.id}`} action \r\n          // onContextMenu={(e)=>{\r\n          //   e.stopPropagation()\r\n          //   show(e, {\r\n          //     props: {\r\n          //       id: w.id\r\n          //     }\r\n          //   })\r\n          // }} \r\n        >\r\n          {w.name}\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    {/* <Menu id={MENU_ID}>\r\n      <Item hidden={({props})=>props.id} onClick={function({props}){\r\n          // history.push(`${url}/crear`, {})\r\n        }}>\r\n        Crear\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n          // const id = props.id\r\n          // history.push(`${url}/editar/${id}`, {})\r\n        }}>\r\n        Editar\r\n      </Item>\r\n      <Item hidden={({props})=>!props.id} onClick={function({props}){\r\n        const id = props.id\r\n        // if(confirm(\"¿Está seguro de eliminar? Esta accion es irreversible\")){\r\n          // dispatch({\r\n          //   type: \"DELETE_WAGE_TYPE\",\r\n          //   payload: id\r\n          // })\r\n        // }\r\n      }}>\r\n        Eliminar\r\n      </Item>\r\n    </Menu> */}\r\n  </>\r\n}","import React, {useEffect, useMemo} from 'react'\r\nimport { Alert, Button, ListGroup, Spinner, Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { Role } from '../state'\r\nimport { Roles } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { FaEdit } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n// import { makeGetWageById } from '../selectors/getSelectedWage'\r\n// import { Wage } from '../state'\r\n\r\n\r\nexport const RoleView = ({roleId}: {roleId: number})=>{\r\n  const { pathname } = useLocation()\r\n  const fetchRole = useQuery([\"fetchRole\", roleId], ()=>{\r\n    return Roles.fetch(roleId)\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRole.refetch()\r\n  }, [])\r\n\r\n\r\n\r\n  const role = fetchRole.data?.data\r\n  \r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block m-auto\"></Spinner>\r\n  }\r\n\r\n  if(fetchRole.isError){\r\n    return <Alert variant=\"danger\">\r\n      {fetchRole.error?.response?.message || fetchRole.error?.message}\r\n    </Alert>\r\n  }\r\n\r\n  return <>\r\n    {/* <h2 className=\"text-capitalize mb-2\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2> */}\r\n    <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"text-capitalize d-inline-block\" style={{fontSize: \"1.75rem\"}}>{role?.name}</h2>\r\n      <Button as={Link} to={{\r\n          pathname: `/iam/roles/${roleId}/editar`,\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"btn-icon mb-auto\"\r\n        variant=\"link\"\r\n      >\r\n        <FaEdit />\r\n      </Button>\r\n    </div>\r\n    \r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th scope=\"row\" style={{width: '1px'}}>Nombre</th>\r\n          <td className=\"text-capitalize\">{role?.name}</td>\r\n        </tr>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\">Descripción</th>\r\n          <td className={role?.description ? \"\" : \"bg-light\"}>{role?.description || \"Sin descripción\"}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de creación</th>\r\n          <td>{role?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Fecha de actualización</th>\r\n          <td>{role?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Permisos</th>\r\n            <td className={`d-flex ${role?.permissions.length ? \"\" : \"bg-light\"}`}>{\r\n              role?.permissions.length ? \r\n              <ul className=\"d-inline-block\">{role?.permissions.map((p, i)=><li key={i} className=\"text-capitalize\">{p}</li>)}</ul> :\r\n              \"No se agregaron permisos\"\r\n            }\r\n              {/* <Button className=\"btn-icon ml-auto mb-auto\" style={{top: 0, right: 0}} variant=\"link\" onClick={()=>{\r\n                      //refetch()\r\n              }}><FaEdit /></Button> */}\r\n            </td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Button, Spinner, Tab } from 'react-bootstrap'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { Roles } from '../services'\r\nimport { RolesList } from './RolesList'\r\nimport { RoleView } from './RoleView'\r\n\r\nexport default ()=>{\r\n  const history = useHistory()\r\n  const { hash, pathname } = history.location//useLocation()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n\r\n  const roles = fetchRoles.data?.data || []\r\n\r\n  return <>\r\n  {/* <h1 className=\"mb-2\" style={{fontSize: \"2rem\"}}>Roles</h1> */}\r\n  <div className=\"mb-2 d-flex flex-nowrap\" >\r\n      <h2 className=\"d-inline-block\" style={{fontSize: \"2rem\"}}>Roles</h2>\r\n      <Button as={Link} to={{\r\n          pathname:\"/iam/roles/crear\",\r\n          state: {\r\n            from: pathname\r\n          }\r\n        }}\r\n        className=\"ml-auto my-auto\" \r\n        variant=\"primary\"\r\n      >\r\n        <FaPlus />\r\n      </Button>\r\n    </div>\r\n  <Tab.Container defaultActiveKey={hash} transition={false} >\r\n    <div className=\"list-details position-relative d-flex flex-grow-1\">\r\n      <div className=\"list border\">\r\n        {fetchRoles.isFetching ? \r\n          <Spinner animation=\"border\" variant=\"primary\" className=\"m-auto\"/> : \r\n          <RolesList roles={roles} />}\r\n      </div>\r\n      <Tab.Content className=\"p-3 border flex-grow-1 overflow-auto\"  style={{marginLeft: \"11rem\"}}>\r\n        {\r\n          roles.map(role=>{\r\n            return <Tab.Pane key={role.id} eventKey={`#${role.id}`}>\r\n              <RoleView roleId={role.id} />\r\n            </Tab.Pane>\r\n          })\r\n        }\r\n      </Tab.Content>\r\n    </div>\r\n  </Tab.Container>\r\n  </>\r\n} ","import React, { useEffect, useState } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useQuery } from 'react-query'\r\nimport { Permissions } from '../services'\r\n\r\ntype Props = {\r\n  isInvalid?: boolean,\r\n  defaultChecked: string[],\r\n  onChange?: (permission: string, checked: boolean)=>void\r\n}\r\nexport default (props: Props)=>{\r\n  const { isInvalid, onChange } = props\r\n  const fetchPermissions = useQuery(\"fetchPermissions\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Permissions.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n  // const [checked, setChecked] = useState<string[]>(props.defaultChecked)\r\n\r\n  const permissions = fetchPermissions.data?.data || [] as string[]\r\n\r\n  useEffect(()=>{\r\n    fetchPermissions.refetch()\r\n  }, [])\r\n  console.log(\"isInvalid\", props)\r\n\r\n  return <>\r\n    <ListGroup className={`overflow-auto flex-grow-1 ${!isInvalid ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchPermissions.isFetching ? \"Cargando\" : fetchPermissions.isError ? \"Error\" : permissions.map((d, i)=>{\r\n        return <ListGroup.Item key={d} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            checked={props.defaultChecked.some(p=>p==d)}\r\n            label={d}\r\n            isInvalid={isInvalid}\r\n            onChange={(e)=>{\r\n              // const newState = e.target.checked ? [\r\n              //   ...checked,\r\n              //   d\r\n              // ] : checked.filter(p=>p!=d)\r\n              // setChecked(newState)\r\n              props.onChange && props.onChange(d, e.target.checked)\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n  </>\r\n}","import React, { useCallback, useEffect } from 'react'\r\nimport { Modal, Button, Form, Row, Col, ListGroup, InputGroup, FormControl, Spinner } from 'react-bootstrap'\r\nimport { Controller, FieldError, useForm } from 'react-hook-form'\r\nimport { FaExternalLinkSquareAlt } from 'react-icons/fa'\r\nimport { useMutation, useQuery } from 'react-query'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport * as rules from '../../../commons/components/rules'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\nimport PermissionsCheckList from './PermissionsCheckList'\r\n\r\ntype Inputs = {\r\n  name: string,\r\n  description: string,\r\n  permissions: string[]\r\n}\r\nexport default () => {\r\n  const { action, id } = useParams<{\r\n    action: string,\r\n    id: string\r\n  }>()\r\n  const history = useHistory<{\r\n    from?: string\r\n  }>()\r\n  \r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    formState: {errors},\r\n    reset,\r\n    watch,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      name: \"\",\r\n      description: \"\",\r\n      permissions: []\r\n    }\r\n  })\r\n\r\n  const fetchRole = useQuery([\"fetchRole\", id], ()=>{\r\n    return Roles.fetch(parseInt(id))\r\n  }, {\r\n    enabled: false,\r\n  })\r\n\r\n  const saveRole = useMutation((data: Role)=>{\r\n    if(id){\r\n      return Roles.update(data)\r\n    }\r\n    else{\r\n      return Roles.register(data)\r\n    }\r\n  })\r\n\r\n  console.log(\"Values\", watch())\r\n  console.log(\"FetchRole\", fetchRole)\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Mounting\")\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if(!fetchRole.data && id){\r\n      fetchRole.refetch()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(()=>{\r\n    console.log(\"Change data\", fetchRole.data)\r\n    reset({\r\n      name: fetchRole.data?.data.name,\r\n      description: fetchRole.data?.data.description,\r\n      permissions: fetchRole.data?.data.permissions\r\n    })\r\n  }, [fetchRole.data])\r\n\r\n  if(fetchRole.isFetching){\r\n    return <Spinner animation=\"border\" />\r\n  }\r\n  console.log(\"Data\", fetchRole.data)\r\n\r\n  return <Form id=\"role-form\" onSubmit={handleSubmit((data) => {\r\n        console.log(data)\r\n        saveRole.mutate({\r\n          id: parseInt(id),\r\n          createdAt: undefined,\r\n          updatedAt: undefined,\r\n          ...data\r\n        })\r\n      })}>\r\n        <Form.Group>\r\n          <Form.Label>Nombre</Form.Label>\r\n          <Form.Control type=\"text\" className=\"text-capitalize\"\r\n            isInvalid={!!errors.name}\r\n            {...register(\"name\", {\r\n              required: rules.required(),\r\n              maxLength: rules.maxLength(32)\r\n            })}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">{errors.name?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Descripción</Form.Label>\r\n          <Form.Control as=\"textarea\"\r\n            isInvalid={!!errors.description}\r\n            name=\"description\" \r\n            // ref={register({\r\n            //   maxLength: rules.maxLength(250)\r\n            // })} \r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{errors.description?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label >Permisos</Form.Label>\r\n            <Controller\r\n              name=\"permissions\"\r\n              control={control}\r\n              rules={{\r\n                validate: {\r\n                  nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos uno.\"\r\n                }\r\n              }}\r\n              render={(props)=>{\r\n                return <PermissionsCheckList\r\n                  defaultChecked={watch(\"permissions\")||[] as string[]}\r\n                  isInvalid={!!errors.permissions} onChange={(permission, checked)=>{\r\n                    // props.onChange(checked ? [\r\n                    //   ...watch(\"permissions\"),\r\n                    //   permission\r\n                    // ] : watch(\"permissions\").filter(p=>p!=permission))\r\n                  }}\r\n                />\r\n              }}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{(errors.permissions as FieldError|undefined)?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button type=\"submit\">Guardar</Button>\r\n      </Form>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { Col, Form, Button, FormProps, Spinner, Modal, Alert } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\n// import { PersonService } from '../../../commons/services/PersonService'\r\n// import { Person } from '../../../commons/types'\r\nimport { validation as validationMessages } from '../../../configs/messages.json'\r\n\r\ntype Inputs = {\r\n  dni: string,\r\n  dniComplement: string,\r\n  dniIssuedAt: string,\r\n  name: string,\r\n  middlename: string,\r\n  lastname: string,\r\n  gender: string,\r\n  dateOfBirth: string,\r\n  nationality: string\r\n}\r\nexport default (props: FormProps & {\r\n  onComplete: (personId: number)=>void\r\n})=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    getValues\r\n  } = useForm<Inputs>({\r\n    // mode: \"onBlur\",\r\n    defaultValues: {\r\n      dni: \"\",\r\n      dniComplement: \"\",\r\n      dniIssuedAt: \"\",\r\n      name: \"\",\r\n      middlename: \"\",\r\n      lastname: \"\",\r\n      gender: \"\",\r\n      dateOfBirth: \"\",\r\n      nationality: \"\"\r\n    }\r\n  })\r\n\r\n  const [errorDialogVisible, showErrorDialog] = useState(false)\r\n\r\n  return <>\r\n    <Form onSubmit={handleSubmit((fields)=>{\r\n\r\n    })}>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={8} md={6}>\r\n          <Form.Label>Documento de identidad</Form.Label>\r\n          <Form.Control type=\"number\"\r\n            name=\"dni\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Complemento</Form.Label>\r\n          <Form.Control\r\n            name=\"dniComplement\"\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={4} md={3}>\r\n          <Form.Label>Expedido en</Form.Label>\r\n          <Form.Control as=\"select\"\r\n            name=\"dniIssuedAt\"\r\n          >\r\n            <option disabled value=\"\"></option>\r\n            <option value=\"BN\">Beni</option>\r\n            <option value=\"CB\">Cochabamba</option>\r\n            <option value=\"CH\">Chuquisaca</option>\r\n            <option value=\"LP\">La Paz</option>\r\n            <option value=\"OR\">Oruro</option>\r\n            <option value=\"PN\">Pando</option>\r\n            <option value=\"PT\">Potosí</option>\r\n            <option value=\"TJ\">Tarija</option>\r\n            <option value=\"SC\">Santa Cruz</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          <Form.Control \r\n            name=\"name\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Primer Apellido</Form.Label>\r\n          <Form.Control \r\n            name=\"middlename\"            \r\n          />\r\n        </Form.Group>\r\n        <Form.Group as={Col} lg={4}>\r\n          <Form.Label>Segundo Apellido</Form.Label>\r\n          <Form.Control         \r\n            name=\"lastname\"\r\n          />\r\n        </Form.Group>\r\n      </Form.Row>\r\n    </Form>\r\n  </>\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, ListGroup } from 'react-bootstrap'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport { useQuery } from 'react-query'\r\nimport { Roles } from '../services'\r\nimport { Role } from '../state'\r\n\r\ntype Props = {\r\n  defaultSelection?: number[],\r\n}\r\nexport default ()=>{\r\n  const {register, formState: { errors }, watch, setValue, getValues} = useFormContext()\r\n  const fetchRoles = useQuery(\"fetchRoles\", ()=>{\r\n    console.log(\"fetchingRoles\")\r\n    return Roles.fetchAll()\r\n  }, {\r\n    enabled: false,\r\n    // refetchOnWindowFocus: false\r\n  })\r\n\r\n  const roles = fetchRoles.data?.data || [] as Role[]\r\n\r\n  useEffect(()=>{\r\n    register(\"roleIds\", {\r\n      validate: {\r\n        nonEmpty: (value)=>value.length>0 || \"Debe elegir al menos un rol.\"\r\n      }\r\n    })\r\n  }, [register])\r\n\r\n  useEffect(()=>{\r\n    fetchRoles.refetch()\r\n  }, [])\r\n  return <>\r\n    <ListGroup as=\"ul\" className={`overflow-auto flex-grow-1 ${!errors.roleIds ? \"\" : \"is-invalid\"}`} style={{height: \"10rem\"}}>\r\n      {fetchRoles.isFetching ? \"Cargando\" : fetchRoles.isError ? \"Error\" : roles.map((d, i)=>{\r\n        return <ListGroup.Item key={d.id} as=\"li\"\r\n          className=\"py-2 px-3 text-capitalize\"\r\n          action\r\n        >\r\n          <Form.Check type=\"checkbox\"\r\n            label={d.name}\r\n            isInvalid={!!errors.roleIds}\r\n            name={`roleIds[${d.id}]`}\r\n            // ref={register({\r\n            //   validate: {\r\n            //     nonEmpty: (value)=>watch(\"roles\").some((checked: boolean)=>checked) || \"Debe elegir al menos un rol\"\r\n            //   }\r\n            // })}\r\n            onChange={(e)=>{\r\n              const checked = e.target.checked\r\n              const roleIds = getValues(\"roleIds\") as number[]\r\n              setValue(\"roleIds\", checked ? [\r\n                ...roleIds,\r\n                d.id\r\n              ] : roleIds.filter(id=>id!=d.id), {\r\n                shouldValidate: true\r\n              })\r\n            }}\r\n          />\r\n        </ListGroup.Item>\r\n      })}\r\n    </ListGroup>\r\n    <Form.Control.Feedback type=\"invalid\">{errors.roleIds?.message}</Form.Control.Feedback>\r\n  </>\r\n}","import { AxiosError } from 'axios'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Col, Form, FormProps, Button, Spinner, Modal, Alert, Row } from 'react-bootstrap'\r\nimport { FormProvider, useForm } from 'react-hook-form'\r\nimport { useMutation } from 'react-query'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { Users } from '../services'\r\nimport RolesCheckList from './RolesCheckList'\r\n\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  password: string,\r\n  passwordRepeat: string,\r\n  roleIds: number[]\r\n}\r\n\r\nexport default (props: FormProps & {\r\n  personId: number\r\n}) =>{\r\n  const {id} = useParams<{\r\n    id?: string \r\n  }>()\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\",\r\n      passwordRepeat: \"\",\r\n      roleIds: []\r\n    }\r\n  });\r\n\r\n  const { register, reset, handleSubmit, watch, formState: { isValid, errors} } = formMethods\r\n\r\n  const saveUser = useMutation(Users.register)\r\n\r\n  const [isModalVisible, showModal] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.error){\r\n      showModal(true)\r\n    }\r\n  }, [saveUser.error])\r\n\r\n  const renderUserExistsAlert = ()=>{\r\n    console.log((saveUser.error as AxiosError)?.response?.data)\r\n    const {payload} = (saveUser.error as AxiosError)?.response?.data\r\n    return <Modal centered show={isModalVisible} onHide={()=>showModal(false)}>\r\n      <Modal.Header>Conflicto</Modal.Header>\r\n      <Modal.Body>\r\n        <Alert variant=\"danger\">\r\n          <p>\r\n            Ya existe un <Link to={{\r\n              pathname: `/iam/usuarios/${payload.id}`,\r\n              state: {\r\n                user: payload\r\n              }\r\n            }}>usuario</Link> para esta persona\r\n          </p>\r\n        </Alert>\r\n      </Modal.Body>\r\n    </Modal>\r\n  }\r\n\r\n  const renderAlert = ()=>{\r\n    const status = (saveUser.error as AxiosError)?.response?.status\r\n    if(status == 409){\r\n      return renderUserExistsAlert()\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(saveUser.data){\r\n      reset()\r\n    }\r\n  }, [saveUser.data])\r\n\r\n  // const [validated, setValidated] = useState(false)\r\n  return <>\r\n    <FormProvider {...formMethods}>\r\n      <Form noValidate validated={isValid} onSubmit={handleSubmit((data)=>{\r\n        // setValidated(true)\r\n        console.log(\"OnSubmit\", data)\r\n        saveUser.mutate({\r\n          externalId: props.personId,\r\n          username: data.username,\r\n          password: data.password,\r\n          roleIds: data.roleIds\r\n        })\r\n      })}>\r\n        <Form.Row>\r\n          <Form.Group controlId=\"username\" as={Col} md={4}>\r\n            <Form.Label >Usuarios</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!errors.username}\r\n              {...register(\"username\", {\r\n                pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n                required: {value: true, message: \"Este campo es requerido.\"},\r\n                minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.password}\r\n              {...register(\"password\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                minLength: {value: 8, message: \"Este campo no debe tener al menos 8 caracteres\"},\r\n                maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres\"}\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group as={Col} md={4}>\r\n            <Form.Label>Confirmar contraseña</Form.Label>\r\n            <Form.Control type=\"password\" \r\n              isInvalid={!!errors.passwordRepeat}\r\n              {...register(\"passwordRepeat\", {\r\n                required: {value: true, message: \"Este campo es requerido\"},\r\n                validate: {\r\n                  matchPassword: (value) => value === watch('password') || \"Las contraseñas no coinciden\"\r\n                }\r\n              })}\r\n            ></Form.Control>\r\n            <Form.Control.Feedback type=\"invalid\">{errors.passwordRepeat?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <label className=\"mb-2\">Descuentos que se aplicarán</label>\r\n        <Row>\r\n          <Col>\r\n            <RolesCheckList />\r\n          </Col>\r\n        </Row>\r\n        <Form.Row>\r\n          <Col>\r\n            <Button type=\"submit\">\r\n              {saveUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n              <span className=\"ml-2\">Registrar</span>\r\n            </Button>\r\n          </Col>\r\n        </Form.Row>\r\n      </Form>\r\n    </FormProvider>\r\n    {renderAlert()}\r\n  </>\r\n}","import React, {useState} from 'react'\r\nimport { Accordion, Button, Card, Col, Form } from 'react-bootstrap'\r\nimport { useMutation } from 'react-query'\r\nimport { useDispatch } from 'react-redux'\r\nimport { registerUser } from '../actions'\r\nimport PersonalInfoForm from './PersonalInfoForm'\r\nimport UserInfoForm from './UserInfoForm'\r\n\r\nexport default () => {\r\n  const dispatch = useDispatch()\r\n  const [activeKey, setActiveKey] = useState(\"0\")\r\n  const [personId, setPersonId] = useState<number | null>(null)\r\n  \r\n  // const {\r\n\r\n  // } = useMutation(UserService.register)\r\n\r\n  return <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n    <h1 style={{fontSize: \"2rem\"}}>Usuarios</h1>\r\n    <Accordion defaultActiveKey={activeKey}>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"0\">\r\n          Información personal\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"0\">\r\n          <Card.Body>\r\n            <PersonalInfoForm onComplete={(personId)=>{\r\n              setPersonId(personId)\r\n            }} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n      <Card>\r\n        <Accordion.Toggle as={Card.Header} className=\"bg-primary text-light\" eventKey=\"1\">\r\n          Información de Usuario\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey=\"1\">\r\n          <Card.Body>\r\n            <UserInfoForm personId={personId as number} />\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    </Accordion>\r\n  </div>\r\n}","import React, {useEffect, useState} from 'react'\r\nimport { Table } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation, useParams } from 'react-router'\r\nimport { useQuery } from 'react-query'\r\nimport { User } from '../../auth/state'\r\nimport { Users } from '../services'\r\n\r\nexport const UserView = ()=>{\r\n  const {state} = useLocation<{user?: User}>()\r\n  const {userId} = useParams<{\r\n    userId: string\r\n  }>()\r\n  const [user, setUser] = useState(state?.user)\r\n  const fetchUser = useQuery([\"fetchUser\", userId], ()=>{\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: !state?.user,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(fetchUser.data){\r\n      setUser(fetchUser.data?.data)\r\n    }\r\n  }, [fetchUser.data])\r\n\r\n  return <>\r\n    <h2 style={{fontSize: \"1.75rem\"}}>{user?.username}</h2>\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"text-nowrap\" scope=\"row\" style={{width: '1px'}}>Nombre de usuario</th>\r\n          <td>: {user?.username}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Estado</th>\r\n          <td>: {user?.active ? 'Activo' : 'Inactivo'}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Creado en</th>\r\n          <td>: {user?.createdAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Actualizado en</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n        <tr>\r\n          <th scope=\"row\">Roles</th>\r\n          <td>: {user?.updatedAt}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </>\r\n}","import React, { useEffect } from \"react\"\r\nimport { Button, Form, Spinner } from \"react-bootstrap\"\r\nimport { FormProvider, useForm } from \"react-hook-form\"\r\nimport { useMutation, useQuery } from \"react-query\"\r\nimport { useParams } from \"react-router\"\r\nimport { Users } from \"../services\"\r\nimport RolesCheckList from \"./RolesCheckList\"\r\n\r\ntype Inputs = {\r\n  username: string,\r\n  roleIds: number[]\r\n}\r\nexport default ()=>{\r\n  const {userId} = useParams<{userId: string}>()\r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      roleIds: [] as number[]\r\n    }\r\n  })\r\n  const { register, reset, handleSubmit, watch, formState: {errors}, formState: { isValid} } = formMethods\r\n  console.log(\"Fields\", watch())\r\n  const editUser = useMutation(Users.update)\r\n\r\n  const loadUser = useQuery([\"loadUser\", userId], () => {\r\n    return Users.load(parseInt(userId))\r\n  }, {\r\n    enabled: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    loadUser.refetch()\r\n  }, [userId])\r\n\r\n  useEffect(()=>{\r\n    if(loadUser.data){\r\n      reset({\r\n        username: loadUser.data.data.username,\r\n        roleIds: loadUser.data.data.roleIds\r\n      })\r\n    }\r\n  }, [loadUser.data])\r\n\r\n  return <FormProvider {...formMethods} >\r\n    <Form onSubmit={handleSubmit((data)=>{\r\n      editUser.mutate({\r\n        id: parseInt(userId),\r\n        username: data.username,\r\n        roleIds: data.roleIds\r\n      })\r\n    })}>\r\n      <Form.Group controlId=\"username\">\r\n        <Form.Label >Nombre de usuario</Form.Label>\r\n        <Form.Control\r\n          isInvalid={!!errors.username}\r\n          {...register(\"username\", {\r\n            pattern: { value: /^\\S*$/, message: \"Este campo no debe contener espacios.\"},\r\n            required: {value: true, message: \"Este campo es requerido.\"},\r\n            minLength: {value: 4, message: \"Este campo no debe tener al menos 4 caracteres.\"},\r\n            maxLength: {value: 16, message: \"Este campo no debe exceder los 16 caracteres.\"}\r\n          })}\r\n        ></Form.Control>\r\n        <Form.Control.Feedback type=\"invalid\">{errors.username?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>Roles</Form.Label>\r\n        <RolesCheckList />\r\n      </Form.Group>\r\n      <Button type=\"submit\">\r\n        {editUser.isLoading ? <Spinner animation=\"border\" size=\"sm\" /> : null}\r\n        <span className=\"ml-2\">Registrar</span>\r\n      </Button>\r\n    </Form>\r\n</FormProvider>\r\n}","import React from 'react'\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom'\r\nimport { FaTasks, FaUsers } from 'react-icons/fa'\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout'\r\nimport UsersIndex from '../../features/iam/components/UsersIndex'\r\nimport RolesIndex from '../../features/iam/components/RolesIndex'\r\nimport RoleForm from '../../features/iam/components/RoleForm'\r\nimport UserRegistrationForm from '../../features/iam/components/UserRegistrationForm'\r\nimport { UserView } from '../../features/iam/components/UserView'\r\nimport UserInfoForm from '../../features/iam/components/UserInfoForm'\r\nimport UserEditForm from '../../features/iam/components/UserEditForm'\r\n\r\nexport const IamApp = ()=>{\r\n  const { path, url } = useRouteMatch()\r\n  return <SidebarLayout sidebar={{\r\n    items: [\r\n      {\r\n        id: \"users\",\r\n        icon: <FaUsers />,\r\n        path: `${url}/usuarios`,\r\n        title: \"Usuarios\",\r\n        // items: [\r\n        //   {\r\n        //     id: \"register-user\",\r\n        //     icon: <FaUserPlus />,\r\n        //     path: `${url}/empleados/registrar`,\r\n        //     title: \"Registrar\"\r\n        //   }\r\n        // ]\r\n      },\r\n      {\r\n        id: \"roles\",\r\n        icon: <FaTasks />,\r\n        path: `${url}/roles`,\r\n        title: \"Roles\"\r\n      }\r\n    ]\r\n  }}>\r\n    <Switch>\r\n      <Route exact path={`${url}`}>\r\n        <Redirect to={`${url}/usuarios`} />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios`}>\r\n        <UsersIndex />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/registrar`}>\r\n        <UserRegistrationForm />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId`}>\r\n        <UserView />\r\n      </Route>\r\n      <Route exact path={`${url}/usuarios/:userId/editar`}>\r\n        <UserEditForm />\r\n      </Route>\r\n      \r\n      <Route exact path={`${url}/roles/:action(crear)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n        <RoleForm />\r\n      </Route>\r\n      <Route path={`${url}/roles`}>\r\n        <RolesIndex />\r\n      </Route>\r\n    </Switch>\r\n    \r\n    {/* <Route exact path={`${url}/roles/:action(crear)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n    {/* <Route exact path={`${url}/roles/:id/:action(editar)`}>\r\n      <RoleForm />\r\n    </Route> */}\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default IamApp","export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  }\r\n}","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport * as rules from \"../../../commons/components/rules\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Hipócrates</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\", {\r\n                required: rules.required()\r\n              })}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps } from 'react-router';\r\nimport { getIsAuthenticated } from '../selectors/inputSelectors';\r\n\r\ntype Props = {\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, ...rest }: Props) => {\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Col, Navbar, Nav, Modal, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical, FaUserPlus } from 'react-icons/fa'\r\nimport * as Apps from \"../../apps\";\r\nimport IamApp from \"./IamApp\";\r\nimport {Login, ProtectedRoute} from \"../../features/auth/components\"\r\nimport { getUser } from \"../../features/auth/selectors/inputSelectors\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport '../../App.css';\r\nimport apiClient from '../../commons/services/apiClient';\r\nimport { unauthorized } from '../../features/auth/actions';\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n\r\n  const toggleSidebar = () => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router>\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"white\" variant=\"light\" style={{zIndex: 1}}>\r\n      {user ? <Navbar.Toggle style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle> : null}\r\n      <Navbar.Brand href=\"#home\" className=\"ml-4\">Hipócrates</Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            {/* <Badge className=\"pulse\" pill variant=\"danger\">9</Badge> */}\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null}\r\n        {user ? <NavDropdown title={<><FaUserCircle /><span className=\"d-none d-sm-inline ml-1\">{user.username}</span></>} id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            apiClient.post(\"logout\").then(()=>{\r\n              dispatch(unauthorized())\r\n              localStorage.removeItem(\"user\")\r\n            })\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n        <Switch>\r\n          <ProtectedRoute path=\"/iam\">\r\n            <IamApp />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/clinica\">\r\n            <Apps.ClinicaApp />\r\n          </ProtectedRoute>\r\n          <Route exact path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n        </Switch>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../features/auth/actions\";\r\nimport auth from \"../../features/auth/reducers\";\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","/**\r\n * String.prototype.replaceAll() polyfill\r\n * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\nif (!String.prototype.replaceAll) {\r\n\tString.prototype.replaceAll = function(){\r\n    var str = arguments[0]\r\n    var newStr = arguments[1]\r\n\t\t// If a regex pattern\r\n\t\tif (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\r\n\t\t\treturn this.replace(str, newStr);\r\n\t\t}\r\n\r\n\t\t// If a string\r\n\t\treturn this.replace(new RegExp(str, 'g'), newStr);\r\n\r\n\t};\r\n}\r\n\r\ndeclare global {\r\n  interface String {\r\n    format(...args: any): string;\r\n  }\r\n}\r\n\r\n// First, checks if it isn't implemented yet.\r\nif (!String.prototype.format) {\r\n  String.prototype.format = function() {\r\n    var args = arguments;\r\n    return this.replace(/{(\\d+)}/g, function(match, number) { \r\n      return typeof args[number] != 'undefined'\r\n        ? args[number]\r\n        : match\r\n      ;\r\n    });\r\n  };\r\n}\r\n\r\nexport {}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from \"./bootstrap/components/App\"\nimport reportWebVitals from './reportWebVitals';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\nimport configureStore from './bootstrap/store';\nimport './polyfills/String.ts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\n// const queryClient = new QueryClient({\n//   defaultOptions: {\n//     queries: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3        \n//       }\n//     },\n//     mutations: {\n//       retry: (count, error) => {\n//         if((error as any).response){\n//           return false\n//         }\n//         return count < 3     \n//       }\n//     }\n//   }\n// })\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: { retry: 0 },\n    mutations: { retry: 0 }\n  }\n})\n\n\nReactDOM.render(\n  <QueryClientProvider client={queryClient}>\n    <Provider store={configureStore()}>\n      <Routes />\n    </Provider>\n  </QueryClientProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app.json'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  // transformRequest: [(data, headers)=>{\r\n  //   console.log(\"TransformRequest\", data)\r\n  //   return data\r\n  // }],\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","import {LatLngExpression} from \"leaflet\"\r\n\r\nexport const latLngExpressionToString = (value?: LatLngExpression|null) => {\r\n  let lat, lng\r\n  if(value){\r\n    if(Array.isArray(value)){\r\n      [lat, lng] = value\r\n    }\r\n    else{\r\n      ({lat, lng} = value)\r\n    }\r\n    return `${lat.toFixed(8)}, ${lng.toFixed(8)}`\r\n  }\r\n  return \"\"\r\n}","export * from \"./latLngExpressionToString\"\r\n\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}"],"sourceRoot":""}