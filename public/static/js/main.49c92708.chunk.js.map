{"version":3,"sources":["commons/auth/selectors/inputSelectors.ts","commons/auth/components/Login.tsx","commons/auth/components/ProtectedRoute.tsx","commons/auth/hooks/useLoggedUser.ts","commons/services/RegionalesService.ts","commons/auth/services/AuthService.ts","configs/app.ts","commons/components/PDFViewer.tsx","commons/components/QueryProgressModal.tsx","commons/components/LocationInput.tsx","commons/components/DepartamentosTypeahead.tsx","commons/components/ProvinciasTypeahead.tsx","commons/components/MunicipiosTypeahead.tsx","commons/components/RegionalesTypeahead.tsx","commons/components/Sidebar.tsx","commons/components/ImperativeModal.tsx","commons/components/Pagination.tsx","commons/components/VerticalEllipsisDropdownToggle.tsx","commons/auth/components/ProtectedContent.tsx","commons/services/authClient.ts","commons/services/UnidadesTerritorialesService.ts","commons/utils/latLngExpressionToString.ts","commons/utils/isMatch.ts","commons/utils/index.ts","commons/auth/actions/unauthorized.ts","bootstrap/components/ToggleSidebar.tsx","configs/yup.ts","bootstrap/components/App.tsx","reportWebVitals.ts","commons/auth/reducers/loginForm.ts","commons/auth/reducers/index.ts","commons/auth/reducers/user.ts","commons/auth/reducers/loadUser.ts","commons/auth/reducers/login.ts","bootstrap/reducers/index.ts","bootstrap/store/index.ts","index.tsx","commons/services/index.ts","commons/services/apiClient.ts","commons/reusable-modal/useModal.ts","commons/reusable-modal/reducer.ts"],"names":["getUser","state","auth","user","getIsAuthenticated","schema","yup","shape","username","required","password","Login","dispatch","useDispatch","useLocation","isAuthenticated","useSelector","useForm","resolver","yupResolver","defaultValues","remember_me","handleSubmit","register","formState","login","useMutation","AuthService","onSuccess","data","localStorage","setItem","JSON","stringify","type","payload","to","from","className","Form","onSubmit","credentials","mutate","style","fontSize","isError","Alert","variant","error","response","message","Group","Label","Control","isInvalid","errors","Feedback","Check","label","Button","isLoading","Spinner","size","animation","ProtectedRoute","children","authorize","rest","url","pathname","ignoreAuthorization","loggedUser","useLoggedUser","render","location","useMemo","can","permission","allowSuperUser","every","p","allPermissions","some","up","name","this","isSuperUser","canAny","hasRole","role","roles","r","RegionalesService","obtener","apiClient","get","a","authClient","post","logout","apiEndpoint","process","authEndpoint","PDFViewer","height","useEffect","PDFObject","embed","fallbackLink","id","QueryProgressModal","modal","useModal","errorMessage","status","centered","show","onHide","close","Header","Body","DefaultIcon","L","icon","iconUrl","shadowUrl","iconShadow","iconSize","iconAnchor","Marker","prototype","options","CustomMarker","props","markerRef","useRef","eventHandlers","onclick","marker","current","remove","onChange","dragend","getLatLng","map","useMapEvents","click","e","latlng","flyTo","getZoom","position","Array","isArray","lat","lng","latitude","longitude","draggable","ref","Popup","href","LocationInput","useState","latLngExpressionToString","value","search","setSearch","mapRef","MapContainer","whenCreated","mapInstance","center","zoom","zoomControl","cursor","TileLayer","attribution","zIndex","InputGroup","instance","stopPropagation","onmousemove","console","log","ondblclick","FormControl","target","Append","coords","split","length","rawLat","rawLng","parseFloat","Math","abs","setView","onClick","ZoomControl","DepartamentosTypeahead","feedback","filterBy","buscar","useQuery","UnidadesTerritorialesService","getDepartamentos","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","onLoad","hasValidation","clearButton","departamento","text","isMatch","nombre","isFetching","labelKey","minLength","refetch","ProvinciasTypeahead","getProvincias","provincia","MunicipiosTypeahead","getMunicipios","municipio","RegionalesTypeahead","regional","SidebarItem","item","match","useRouteMatch","path","Item","as","Link","action","active","padding","verticalAlign","marginLeft","title","items","subitem","paddingLeft","Sidebar","side","header","renderItem","left","right","ImperativeModal","forwardRef","visible","useImperativeHandle","Pagination","total","ld","min","rd","minimum","maximum","pageItems","i","push","First","Prev","Next","Last","VerticalEllipsisDropdownToggle","React","ProtectedContent","authorized","undefined","axios","create","transformResponse","defaults","result","keysToCamel","withCredentials","interceptors","request","use","config","headers","Accept","paramsSerializer","params","Qs","arrayFormat","encode","toFixed","searchStr","str","caseSensitive","toLowerCase","ignoreDiacritics","stripDiacritics","indexOf","isObject","o","Object","n","keys","forEach","k","s","replace","$1","toUpperCase","keysToUnderscore","key","handleUnauthorized","watchUnauthorized","UNAUTHORIZED","unauthorized","removeItem","takeLatest","ToggleSidebar","toggleSidebar","useCallback","isExact","Navbar","Toggle","display","yupMessages","transform","originalValue","isType","val","IamApp","lazy","ClinicaApp","queryClient","useQueryClient","Promise","reject","jsonUser","getItem","parse","bg","Brand","Image","width","src","Nav","OverlayTrigger","trigger","rootClose","placement","overlay","Popover","maxWidth","Title","Content","Row","Col","NavDropdown","menuAlign","Divider","open","then","clear","catch","fallback","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","fields","AuthModuleReducer","combineReducers","loadUser","completed","loginForm","showSidebar","rootSaga","all","composeWithDevTools","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","rootReducer","modals","queryLoader","createModalReducer","dm11Viewer","main","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","QueryClient","defaultOptions","queries","retry","mutations","ReactDOM","FallbackComponent","resetErrorBoundary","onReset","reload","QueryClientProvider","client","document","getElementById","filter","prefix","modalState","meta","modalReducer"],"mappings":"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","file":"static/js/main.49c92708.chunk.js","sourcesContent":["export const getUser = (state:any)=>state.auth.user\r\nexport const getStatusOfLoadUser = (state:any)=>state.auth.loadUser\r\nexport const getLoginState = (state:any)=>state.auth.login\r\nexport const getLoginForm = (state:any)=>state.auth.loginForm\r\nexport const getIsAuthenticated = (state:any)=>state.auth.user != null","import React, {useEffect} from \"react\"\r\nimport { Form, Button, Alert, Spinner } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useMutation } from \"react-query\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect, useLocation } from \"react-router\"\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport {authClient} from \"../../../commons/services\"\r\nimport { getIsAuthenticated } from \"../selectors/inputSelectors\"\r\nimport { AuthService } from \"../services/AuthService\"\r\nimport \"./auth.css\"\r\n\r\ntype Credentials = {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ntype Inputs = Credentials & {\r\n  remember_me: boolean\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  username: yup.string().required(),\r\n  password: yup.string().required()\r\n})\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const {state} = useLocation<{from: string}>()\r\n  const isAuthenticated = useSelector(getIsAuthenticated)\r\n\r\n  const {handleSubmit, register, formState} = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      username:\"\",\r\n      password: \"\",\r\n      remember_me: false\r\n    }\r\n  })\r\n\r\n  const login = useMutation(({username, password, remember_me}: Inputs)=>{\r\n    return AuthService.login(username, password, remember_me)\r\n  }, {\r\n    onSuccess: ({data}) => {\r\n      localStorage.setItem(\"user\", JSON.stringify(data))\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        payload: data\r\n      })\r\n    }\r\n  })\r\n\r\n  return isAuthenticated ? \r\n    <Redirect to={state?.from || \"/\"} /> :\r\n    <div className=\"auth-wrapper bg-light\">\r\n      <div className=\"auth-inner shadow-sm\">\r\n        <Form onSubmit={handleSubmit((credentials)=>{\r\n            login.mutate(credentials)\r\n          })}\r\n        >\r\n          <h3 className=\"mb-2 text-center\" style={{ fontSize: \"1.25rem\" }}>Iniciar Sesión en Galeno - DM11</h3>\r\n          {login.isError ? <Alert variant=\"danger\" >{login.error?.response?.message || login.error?.message}</Alert> :  null}\r\n          <Form.Group>\r\n            <Form.Label>Usuario</Form.Label>\r\n            <Form.Control\r\n              isInvalid={!!formState.errors.username}\r\n              {...register(\"username\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.username?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Contraseña</Form.Label>\r\n            <Form.Control type=\"password\"\r\n              isInvalid={!!formState.errors.password}              \r\n              {...register(\"password\")}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\" >{formState.errors.password?.message}</Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Check\r\n              type={\"checkbox\"}\r\n              label=\"Recordar sesión\"\r\n              {...register(\"remember_me\")}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n            {login.isLoading ? <Spinner size=\"sm\" animation=\"border\" /> : null}\r\n            <span className=\"align-middle ml-1\">Iniciar Sesión</span>\r\n          </Button>\r\n          {/* <p className=\"forgot-password text-right\">\r\n        ¿Olvidó su <a href=\"#\">contraseña?</a>\r\n      </p> */}\r\n        </Form>\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, RouteProps, useLocation } from 'react-router';\r\nimport { useLoggedUser } from '../hooks';\r\n\r\ntype Props = {\r\n  authorize?: (user: ReturnType<typeof useLoggedUser>, url: string) => boolean\r\n  children: React.ReactNode\r\n} & RouteProps\r\nexport const ProtectedRoute = ({ children, authorize, ...rest }: Props) => {\r\n  const { pathname: url, state: { ignoreAuthorization } = {} } = useLocation<{\r\n    ignoreAuthorization?: boolean\r\n  }>()\r\n  const loggedUser = useLoggedUser()\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        loggedUser ? (\r\n          !authorize || authorize(loggedUser, url) || ignoreAuthorization ? children : <Redirect\r\n            to=\"/forbidden\"\r\n          />\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute","import { useMemo } from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { getUser } from \"../selectors/inputSelectors\"\r\nimport { User } from \"../state\"\r\n\r\nexport const useLoggedUser = () => {\r\n  const user = useSelector(getUser) as User\r\n\r\n  const loggedUser = useMemo(()=>{\r\n    return user && {\r\n      ...user,\r\n      can: function(permission: string | string[], allowSuperUser: boolean = true) {\r\n        if(typeof permission === \"string\") permission = [permission]\r\n        return permission.every(p => user?.allPermissions.some(up => up.name == p)) || (allowSuperUser && this.isSuperUser())\r\n      },\r\n      canAny: function(permission: string[], allowSuperUser: boolean = true) {\r\n        return permission.some(p => user?.allPermissions.some(up => up.name == p)) || (allowSuperUser && this.isSuperUser())\r\n      },\r\n      hasRole: (role: string) => {\r\n        return user?.roles.some(r=>r.name==role)\r\n      },\r\n      isSuperUser: function() {\r\n        return this.hasRole(\"super user\")\r\n      }\r\n    }\r\n  }, [user])\r\n\r\n  return loggedUser\r\n}","import apiClient from \"./apiClient\"\r\n\r\nexport type Regional = {\r\n  id: number,\r\n  nombre: string\r\n}\r\nexport const RegionalesService = {\r\n  obtener: () => {\r\n    return apiClient.get<Regional[]>(\"regionales\")\r\n  }\r\n}","import { authClient } from \"../../../commons/services\"\r\nimport { User } from \"../state\"\r\n\r\nexport const AuthService = {\r\n  login: async (username: string, password: string, remember_me: boolean) => {\r\n    await authClient.get(\"sanctum/csrf-cookie\")\r\n    return await authClient.post<User>(\"login\", {\r\n      username,\r\n      password,\r\n      remember_me\r\n    })\r\n  },\r\n  logout: () => {\r\n    return authClient.post(\"logout\")\r\n  }\r\n}","export const apiEndpoint = process.env.REACT_APP_API_ENDPOINT || \"/api/\"\r\nexport const authEndpoint = process.env.REACT_APP_AUTH_ENDPOINT || \"/\"","import React, {useEffect} from 'react'\r\nimport PDFObject from 'pdfobject'\r\n\r\nexport function PDFViewer({url, height=600}:{url: string, height?: number}) {\r\n    useEffect(()=>{\r\n      var options = {\r\n        fallbackLink: '<p>Este navegador no soporta la visualizacion de archivos PDF en linea, por favor descarga el archivo haciendo clic : <a href=\"[url]\">aquí</a></p>'\r\n      };\r\n     \r\n      PDFObject.embed(url, \"#pdfcontainer\", options);\r\n    }, [url])\r\n    return <div id=\"pdfcontainer\" style={{height}}></div>\r\n  }","import { useEffect, useState } from \"react\"\r\nimport { AxiosError } from \"axios\"\r\nimport { Alert, Modal as BSModal, Spinner } from \"react-bootstrap\"\r\nimport { useModal } from \"../reusable-modal\"\r\n\r\nexport const QueryProgressModal = ()=>{\r\n  //@ts-ignore\r\n  const modal = useModal(\"queryLoader\")\r\n\r\n  const renderModalHeader = ()=>{\r\n    if(modal.state == \"loading\"){\r\n      return \"Procesando\"\r\n    }\r\n    if(modal.state == \"error\"){\r\n      return \"Error\"\r\n    }\r\n    return null\r\n  }\r\n\r\n  const renderModalBody = ()=>{\r\n    if(modal.state == \"loading\"){\r\n      return <>\r\n        <Spinner variant=\"primary\" animation=\"border\" size=\"sm\"></Spinner>\r\n        <span className=\"ml-2 align-middle\">Espere un momento</span>\r\n      </>\r\n    }\r\n    if(modal.state == \"error\"){\r\n      return <Alert variant=\"danger\">\r\n        {errorMessage()}\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n  \r\n  const errorMessage = () =>{\r\n    const status = modal.error?.response?.status\r\n    switch(status){\r\n      case 403: return \"No tiene los permisos para realizar esta accion\"\r\n      default: return \"Ocurrio un error mientras se procesaba su solicitud\"\r\n    }\r\n  }\r\n\r\n  return <BSModal centered show={modal.show} onHide={()=>{\r\n    if(modal.state !== \"loading\") modal.close()\r\n  }}>\r\n    <BSModal.Header>\r\n      {renderModalHeader()}\r\n    </BSModal.Header>\r\n    <BSModal.Body>\r\n      {renderModalBody()}\r\n    </BSModal.Body>\r\n  </BSModal>\r\n}","import { useMemo, useState, useRef } from \"react\"\r\nimport { Button, FormControl, InputGroup } from \"react-bootstrap\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport L, { LatLngExpression, Marker as LeafletMarker, Map } from \"leaflet\"\r\nimport { MapContainer, Marker, MarkerProps, Popup, TileLayer, useMapEvents, ZoomControl } from \"react-leaflet\"\r\nimport { latLngExpressionToString } from \"../utils\"\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25,41],\r\n    iconAnchor: [12,41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\ntype Props = {\r\n  isInvalid?: boolean\r\n  value: LatLngExpression|null,\r\n  center: LatLngExpression\r\n  onChange: (value?: LatLngExpression|null) => void\r\n}\r\n\r\nconst CustomMarker = (props: Omit<MarkerProps, \"position\"> & {position: LatLngExpression|null, onChange(position: LatLngExpression|null): void})=>{\r\n  const markerRef =  useRef<LeafletMarker<any>>(null)\r\n  const eventHandlers = useMemo(\r\n    () => ({\r\n      onclick() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          marker.remove()\r\n          props.onChange(null)\r\n        }\r\n      },\r\n      dragend() {\r\n        const marker = markerRef.current\r\n        if (marker != null) {\r\n          props.onChange(marker.getLatLng())\r\n        }\r\n      },\r\n    }),\r\n    [],\r\n  )\r\n  \r\n  const map = useMapEvents({\r\n    click(e) {\r\n      props.onChange(e.latlng)\r\n      map.flyTo(e.latlng, map.getZoom())\r\n      // map.locate()\r\n    }\r\n  })\r\n\r\n\r\n  if(!props.position) return null\r\n  const [latitude, longitude] = Array.isArray(props.position) ? props.position : [props.position.lat, props.position.lng]\r\n  return <Marker \r\n    draggable\r\n    ref={markerRef}\r\n    position={props.position}\r\n    eventHandlers={eventHandlers}\r\n  >\r\n    <Popup>\r\n      A pretty CSS3 popup. <br /> Easily customizable.\r\n      <a href={`maps:${latitude},${longitude}`}>Open with...</a>\r\n    </Popup>\r\n  </Marker>\r\n}\r\n\r\nexport const LocationInput = (props: Props) => {\r\n\r\n  const [search, setSearch] = useState(()=>{\r\n    return latLngExpressionToString(props.value)\r\n  })\r\n  const mapRef = useRef<Map>(null)\r\n\r\n  return <>\r\n    <MapContainer\r\n      //@ts-ignore\r\n      whenCreated={ mapInstance => { mapRef.current = mapInstance } }\r\n      center={props.center}\r\n      zoom={13}\r\n      zoomControl={false}\r\n      style={{height: 240, cursor: \"crosshair\"}}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <div className=\"leaflet-control-container\"\r\n      >\r\n        <div className=\"leaflet-top leaflet-left\" style={{zIndex: 999}}>\r\n        <InputGroup className=\"leaflet-control bg-white\"\r\n          ref={(instance: HTMLDivElement)=>{\r\n            if(instance){\r\n              instance.onclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n              instance.onmousemove = (e:any)=>{\r\n                console.log(\"OnMove\")\r\n                e.stopPropagation()\r\n              }\r\n              instance.ondblclick = (e:any)=>{\r\n                e.stopPropagation()\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <FormControl\r\n            isInvalid={props.isInvalid}\r\n            value={search}\r\n            onChange={(e)=>{\r\n              const value = e.target.value\r\n              setSearch(value)\r\n            }}\r\n          />\r\n          <InputGroup.Append>\r\n            <Button variant=\"outline-secondary\"\r\n              ref={(instance: any) => {\r\n                if(instance){\r\n                  instance.onclick = ()=>{\r\n                    const coords = search.split(\",\")\r\n                    if(coords.length == 2){\r\n                      const [rawLat, rawLng] = coords\r\n                      const [lat, lng] = [parseFloat(rawLat), parseFloat(rawLng)]\r\n                      if(Math.abs(lat) <= 90 && Math.abs(lng) <= 180){\r\n                        mapRef.current!.setView([lat, lng], 13)\r\n                        props.onChange([lat, lng])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              onClick={()=>{\r\n              }}\r\n            ><FaSearch/></Button>\r\n          </InputGroup.Append>\r\n        </InputGroup>\r\n        </div>\r\n      </div>\r\n      <CustomMarker position={props.value} onChange={(position)=>{\r\n        props.onChange(position)\r\n        setSearch(latLngExpressionToString(position))\r\n      }} />\r\n      <ZoomControl position=\"bottomright\" />\r\n    </MapContainer>\r\n  </>\r\n}","\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Departamento, UnidadesTerritorialesService } from \"../services\";\r\nimport { isMatch } from \"../utils\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\nexport type { Departamento }\r\n\r\nlet count = 0\r\nexport const DepartamentosTypeahead = ({isInvalid, feedback, filterBy, ...props}: {feedback?: string, onLoad?: (options: Departamento[])=>void} & Omit<TypeaheadProps<Departamento>, \"isLoading\" | \"options\" | \"onSearch\">) => {\r\n\r\n\r\n  const queryKey = \"getDepartamentos\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getDepartamentos()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n  \r\n  const options = useMemo(()=>{\r\n    if(Array.isArray(buscar.data?.data)){\r\n        return buscar.data?.data!\r\n    }\r\n    else if(buscar.data?.data){\r\n        console.error(buscar.data?.data)\r\n    }\r\n    return []\r\n  }, [buscar.data?.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      clearButton\r\n      {...props}\r\n      className={(buscar.isError || isInvalid) ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={(departamento, props)=>{\r\n        return (!props.text || isMatch(departamento.nombre, props)) \r\n          && (!filterBy || (typeof filterBy === \"function\" && filterBy(departamento, props)))\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      options={options}\r\n      labelKey=\"nombre\"\r\n      minLength={0}\r\n    />\r\n\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n    {feedback ? <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback> : null}\r\n    {/* {++count} */}\r\n  </InputGroup>\r\n}","\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Provincia, UnidadesTerritorialesService } from \"../services\";\r\nimport { isMatch } from \"../utils\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\nexport type { Provincia }\r\n\r\ntype Props = {\r\n  feedback?: string,\r\n  onLoad?: (options: Provincia[])=>void\r\n} & Omit<TypeaheadProps<Provincia>, \"isLoading\" | \"options\" | \"onSearch\">\r\n\r\nlet count = 0\r\nexport const ProvinciasTypeahead = ({\r\n  isInvalid,\r\n  feedback,\r\n  filterBy, ...props\r\n}: Props) => {\r\n  const queryKey = \"provincias.buscar\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getProvincias()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  const options = useMemo(()=>{\r\n    if(Array.isArray(buscar.data?.data)){\r\n        return buscar.data?.data!\r\n    }\r\n    else if(buscar.data?.data){\r\n        console.error(buscar.data?.data)\r\n    }\r\n    return []\r\n  }, [buscar.data?.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      {...props}\r\n      className={(buscar.isError || isInvalid) ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={(provincia, props)=>{\r\n        return (!props.text || isMatch(provincia.nombre, props)) \r\n          && (!filterBy || (typeof filterBy === \"function\" && filterBy(provincia, props)))\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      options={options}\r\n      labelKey=\"nombre\"\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n    {feedback ? <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback> : null}\r\n    {/* {++count} */}\r\n  </InputGroup>\r\n}","\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Municipio, UnidadesTerritorialesService } from \"../services\";\r\nimport { isMatch } from \"../utils\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\nexport type { Municipio }\r\n\r\nlet count = 0\r\nexport const MunicipiosTypeahead = ({isInvalid, feedback, filterBy, ...props}: {feedback?: string, onLoad?: (options: Municipio[])=>void} & Omit<TypeaheadProps<Municipio>, \"isLoading\" | \"options\">) => {\r\n\r\n\r\n  const queryKey = \"getMunicipios\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return UnidadesTerritorialesService.getMunicipios()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  const options = useMemo(()=>{\r\n    if(Array.isArray(buscar.data?.data)){\r\n        return buscar.data?.data!\r\n    }\r\n    else if(buscar.data?.data){\r\n        console.error(buscar.data?.data)\r\n    }\r\n    return []\r\n  }, [buscar.data?.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      {...props}\r\n      className={(buscar.isError || isInvalid) ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={(municipio, props)=>{\r\n        return (!props.text || isMatch(municipio.nombre, props)) \r\n          && (!filterBy || (typeof filterBy === \"function\" && filterBy(municipio, props)))\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      options={options}\r\n      labelKey=\"nombre\"\r\n    />\r\n\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n    {feedback ? <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback> : null}\r\n    {/* {++count} */}\r\n  </InputGroup>\r\n}","\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { Typeahead, TypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { FaSync } from 'react-icons/fa'\r\nimport { useQuery } from 'react-query'\r\nimport { Regional, RegionalesService } from \"../services/RegionalesService\";\r\nimport { isMatch } from \"../utils\";\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\n\r\nexport type { Regional }\r\n\r\nexport const RegionalesTypeahead = ({isInvalid, feedback, filterBy, ...props}: {feedback?: string, onLoad?: (options: Regional[])=>void} & Omit<TypeaheadProps<Regional>, \"isLoading\" | \"options\" >) => {\r\n  const queryKey = \"regionales.buscar\"\r\n\r\n  const buscar = useQuery(queryKey, ()=>{\r\n    return RegionalesService.obtener()\r\n  }, {\r\n    refetchOnMount: false,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      props.onLoad && props.onLoad(buscar.data?.data)\r\n    }\r\n  }, [buscar.data])\r\n\r\n  const options = useMemo(()=>{\r\n    if(Array.isArray(buscar.data?.data)){\r\n        return buscar.data?.data!\r\n    }\r\n    else if(buscar.data?.data){\r\n        console.error(buscar.data?.data)\r\n    }\r\n    return []\r\n  }, [buscar.data?.data])\r\n\r\n  return <InputGroup hasValidation>\r\n    <Typeahead\r\n      {...props}\r\n      className={(buscar.isError || isInvalid) ? \"is-invalid\" : \"\"}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={(regional, props)=>{\r\n        return (!props.text || isMatch(regional.nombre, props)) \r\n          && (!filterBy || (typeof filterBy === \"function\" && filterBy(regional, props)))\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      //@ts-ignore\r\n      options={options}\r\n      labelKey=\"nombre\"\r\n    />\r\n    {buscar.isError ? <>\r\n      <InputGroup.Append>\r\n        <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n      </InputGroup.Append>\r\n      <Form.Control.Feedback type=\"invalid\">{buscar.error?.response?.message || buscar.error?.message}</Form.Control.Feedback>\r\n    </>\r\n    : null}\r\n    {feedback ? <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback> : null}\r\n  </InputGroup>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          {item.icon}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action border-0 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading mt-2\">{header}</div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <ListGroup variant=\"flush\">\r\n      {items.map(item=>(\r\n        <SidebarItem key={item.id} {...item} />\r\n      ))}      \r\n    </ListGroup>\r\n    {/* <div className=\"list-group list-group-flush\">\r\n      {items.map(item=><a href=\"#\" className=\"list-group-item list-group-item-action\" key={item.id}>{renderItem ? renderItem(item):item.title}</a>)}\r\n    </div> */}\r\n  </div>\r\n  \r\n}","import { forwardRef, useState, useImperativeHandle } from \"react\";\r\nimport { Modal, ModalProps } from \"react-bootstrap\";\r\n\r\n// We need to wrap component in `forwardRef` in order to gain\r\n// access to the ref object that is assigned using the `ref` prop.\r\n// This ref is passed as the second parameter to the function component.\r\nexport type ImperativeModalRef = {\r\n  show: (show: boolean) => void\r\n}\r\n\r\nexport const ImperativeModal = forwardRef<ImperativeModalRef, ModalProps>((props, ref) => {\r\n  const [visible, show] = useState(false)\r\n\r\n  // The component instance will be extended\r\n  // with whatever you return from the callback passed\r\n  // as the second argument\r\n  useImperativeHandle(ref, () => ({\r\n    show\r\n  }), []);\r\n\r\n  return <Modal centered {...props} show={visible} onHide={()=>show(false)} />;\r\n});","import { Pagination as BSPagination } from \"react-bootstrap\"\r\n\r\ntype Props = {\r\n  // current: number,\r\n  // minimum: number,\r\n  // maximum: number,\r\n  // total: number,  \r\n  // onClickFirst: ()=>void,\r\n  // onClickLast: ()=>void,\r\n  // onClickPrev: ()=>void,\r\n  // onClickNext: ()=>void,\r\n  // onClickItem: (page: number)=>void\r\n  current: number\r\n  total: number\r\n  onChange(page: number): void\r\n}\r\nexport const Pagination = ({current, total, onChange}: Props)=>{\r\n  current = Math.min(current, total+1);\r\n  let ld = current - 1\r\n  let rd = total - current//Math.min(current, total)\r\n  ld= Math.min(2+2-Math.min(2,rd), ld)\r\n  rd = Math.min(2+2-Math.min(2,ld), rd)\r\n  const minimum = current - ld\r\n  const maximum=current + rd\r\n  console.log(\"pag.\", current, total, minimum,maximum)\r\n  const pageItems = []\r\n  if(maximum > 1 ) for(let i = minimum; i <= maximum; i++){\r\n    if(current == i)\r\n      pageItems.push(<BSPagination.Item key={i} active={true}>{i}</BSPagination.Item>)\r\n    else\r\n      pageItems.push(<BSPagination.Item key={i} onClick={()=>onChange(i)}>{i}</BSPagination.Item>)\r\n  }\r\n  \r\n  return <BSPagination>\r\n    {minimum > 1 ? <BSPagination.First\r\n      onClick={()=>onChange(1)}\r\n    /> : null}\r\n    {current > 1 ? <BSPagination.Prev \r\n      onClick={()=>onChange(current-1)}\r\n    /> : null}\r\n    \r\n    {pageItems}\r\n    \r\n    {current < total ? <BSPagination.Next\r\n      onClick={()=>onChange(current+1)}\r\n    /> : null}\r\n    {maximum < total ? <BSPagination.Last\r\n      onClick={()=>onChange(total)}\r\n    /> : null}\r\n      \r\n  </BSPagination>\r\n}\r\n\r\nexport default Pagination","import React, { ForwardedRef } from \"react\"\r\nimport { Button, ButtonProps } from \"react-bootstrap\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\n\r\nexport const VerticalEllipsisDropdownToggle = React.forwardRef<ForwardedRef<HTMLButtonElement>, ButtonProps>(({children, className, ...props}, ref) => (\r\n  <Button\r\n    className=\"py-0 px-1\"\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <FaEllipsisV />\r\n  </Button>\r\n));\r\n\r\nexport default VerticalEllipsisDropdownToggle","import { PropsWithChildren } from \"react\"\r\n// import { Permisos } from \"../constants\"\r\nimport { useLoggedUser } from \"../hooks\"\r\n\r\n// type Values<T> = T[keyof T] \r\n\r\ntype Props = {\r\n  authorize: (user: ReturnType<typeof useLoggedUser>) => boolean|undefined\r\n}\r\n\r\nexport const ProtectedContent = ({\r\n  authorize,\r\n  children\r\n}: PropsWithChildren<Props>) => {\r\n  const loggedUser = useLoggedUser()\r\n\r\n  const authorized = authorize(loggedUser)\r\n  if(authorized || authorized === undefined && loggedUser.isSuperUser()) return <>{children}</>\r\n\r\n\r\n  return null\r\n}","import axios, { AxiosTransformer }  from 'axios'\r\nimport {authEndpoint} from '../../configs/app'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const authClient = axios.create({\r\n  \"baseURL\": authEndpoint,\r\n  \"timeout\": 30000,\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\nauthClient.defaults.withCredentials = true\r\n\r\nauthClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false\r\n    });\r\n  };\r\n  return config;\r\n});\r\n\r\nexport default authClient","import apiClient from \"./apiClient\"\r\n\r\nexport type Departamento = {\r\n  id: number,\r\n  nombre: string,\r\n  abreviatura: string\r\n}\r\n\r\nexport type Provincia = {\r\n  id: number,\r\n  nombre: string\r\n  departamentoId: number\r\n}\r\n\r\nexport type Municipio = {\r\n  id: number,\r\n  nombre: string\r\n  provinciaId: number\r\n}\r\n\r\nexport const UnidadesTerritorialesService = {\r\n  getDepartamentos: ()=>{\r\n    return apiClient.get<Departamento[]>(\"departamentos\")\r\n  },\r\n  getProvincias: () => {\r\n    return apiClient.get<Provincia[]>(\"provincias\")\r\n  },\r\n  getMunicipios: () => {\r\n    return apiClient.get<Municipio[]>(\"municipios\")\r\n  }\r\n}","import {LatLngExpression} from \"leaflet\"\r\n\r\nexport const latLngExpressionToString = (value?: LatLngExpression|null) => {\r\n  let lat, lng\r\n  if(value){\r\n    if(Array.isArray(value)){\r\n      [lat, lng] = value\r\n    }\r\n    else{\r\n      ({lat, lng} = value)\r\n    }\r\n    return `${lat.toFixed(8)}, ${lng.toFixed(8)}`\r\n  }\r\n  return \"\"\r\n}","\r\n//@ts-ignore\r\nimport { stripDiacritics } from 'react-bootstrap-typeahead/lib/utils'\r\n\r\nexport function isMatch(text: string, props: any) {\r\n  var searchStr = props.text;\r\n  var str = text;\r\n\r\n  if (!props.caseSensitive) {\r\n    searchStr = searchStr.toLowerCase();\r\n    str = str.toLowerCase();\r\n  }\r\n\r\n  if (props.ignoreDiacritics) {\r\n    searchStr = stripDiacritics(searchStr);\r\n    str = stripDiacritics(str);\r\n  }\r\n\r\n  return str.indexOf(searchStr) !== -1;\r\n}","export * from \"./latLngExpressionToString\"\r\nexport * from \"./isMatch\"\r\n\r\nexport const toCamel = (s: string) => {\r\n  return s.replace(/([-_][a-z])/ig, ($1) => {\r\n    return $1.toUpperCase()\r\n      .replace('-', '')\r\n      .replace('_', '');\r\n  });\r\n}\r\n\r\nexport const toUnderscore = (key: string) => {\r\n  return key.replace( /([A-Z])/g, \"_$1\").toLowerCase();\r\n}\r\n\r\nconst isArray = function (a: any) {\r\n  return Array.isArray(a);\r\n};\r\n\r\nconst isObject = function (o: any) {\r\n  return o === Object(o) && !isArray(o) && typeof o !== 'function';\r\n}\r\n\r\nexport const keysTransform = (o: any, transform: (key: string)=>string) => {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[transform(k)] = keysTransform(o[k], transform);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysTransform(i, transform);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToCamel = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toCamel(k)] = keysToCamel(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToCamel(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}\r\n\r\nexport const keysToUnderscore = function (o: any) {\r\n  if (isObject(o)) {\r\n    const n:any = {};\r\n\r\n    Object.keys(o)\r\n      .forEach((k) => {\r\n        n[toUnderscore(k)] = keysToUnderscore(o[k]);\r\n      });\r\n\r\n    return n;\r\n  } else if (isArray(o)) {\r\n    return o.map((i: any) => {\r\n      return keysToUnderscore(i);\r\n    });\r\n  }\r\n\r\n  return o;\r\n}","import { takeLatest } from \"@redux-saga/core/effects\"\r\n\r\nconst UNAUTHORIZED = \"UNAUTHORIZED\"\r\n\r\nexport function unauthorized(){\r\n  return {\r\n    type: UNAUTHORIZED\r\n  }\r\n}\r\n\r\nfunction* handleUnauthorized(action: ReturnType<typeof unauthorized>){\r\n  localStorage.removeItem(\"user\")\r\n}\r\n\r\nexport function* watchUnauthorized(){\r\n  yield takeLatest(UNAUTHORIZED, handleUnauthorized)\r\n}","import { useCallback } from \"react\"\r\nimport { Button, Navbar } from \"react-bootstrap\"\r\nimport { FaBars } from \"react-icons/fa\"\r\nimport { useRouteMatch } from \"react-router-dom\"\r\nimport { useDispatch } from \"react-redux\"\r\n\r\nexport const ToggleSidebar = ()=>{\r\n  const match = useRouteMatch([\"/\", \"/login\", \"/forbbiden\"])\r\n  const dispatch = useDispatch()\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    dispatch({\r\n      type:\"TOGGLE_SIDEBAR\"\r\n    })\r\n  }, [])\r\n\r\n  if(match!.isExact) return null\r\n  return <Navbar.Toggle as={Button} style={{display: \"initial\"}} onClick={toggleSidebar} ><FaBars /></Navbar.Toggle>\r\n}","import * as yup from 'yup';\r\nimport { yup as yupMessages } from './messages.json'\r\n\r\nyup.setLocale(yupMessages)\r\n\r\nyup.addMethod(yup.mixed, 'emptyStringToNull', function () {\r\n  return this.transform(function (value, originalValue) {\r\n    if (this.isType(value)) return value;\r\n\r\n    return originalValue === \"\" ? null : value;\r\n  });\r\n});\r\n\r\nyup.addMethod(yup.mixed, 'emptyStringTo', function (val) {\r\n  return this.transform(function (value, originalValue) {\r\n    if (this.isType(value)) return value;\r\n\r\n    return originalValue === \"\" ? val : value;\r\n  });\r\n});","import React, { useEffect, Suspense } from 'react';\r\nimport { Button, Col, Image, Navbar, Nav, NavDropdown, Popover, OverlayTrigger, Row } from 'react-bootstrap'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n} from \"react-router-dom\"\r\nimport { MdApps } from 'react-icons/md'\r\nimport { FaBell, FaUserCircle, FaBars, FaClinicMedical } from 'react-icons/fa'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useQueryClient } from 'react-query'\r\nimport { QueryProgressModal } from \"../../commons/components\"\r\nimport { useModal } from \"../../commons/reusable-modal\"\r\nimport {Login, ProtectedRoute} from \"../../commons/auth/components\"\r\nimport { getUser } from \"../../commons/auth/selectors/inputSelectors\"\r\nimport { AuthService } from '../../commons/auth/services';\r\nimport { apiClient } from '../../commons/services';\r\nimport { unauthorized } from '../../commons/auth/actions';\r\nimport { ToggleSidebar } from './ToggleSidebar'\r\nimport \"../../configs/yup\"\r\nimport '../../App.css';\r\n\r\nconst IamApp = React.lazy(()=>import(\"../../apps/iam/IamApp\"))\r\nconst ClinicaApp = React.lazy(()=>import(\"../../apps/clinica/ClinicaApp\"))\r\n\r\nexport default ()=>{\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(getUser)\r\n\r\n  const modal = useModal(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  useEffect(()=>{\r\n    apiClient.interceptors.response.use(\r\n      response=>response,\r\n      error => {\r\n        if(error.response?.status == 401 || error.response?.status == 419){\r\n          dispatch(unauthorized())\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n\r\n    const jsonUser = localStorage.getItem(\"user\")\r\n    dispatch({\r\n      type: \"SET_USER\",\r\n      payload: jsonUser ? JSON.parse(jsonUser) : null\r\n    })\r\n    // apiClient.get('/user')\r\n  }, [])\r\n\r\n  return <Router >\r\n    <Navbar className=\"shadow-sm border-bottom\" bg=\"primary\" variant=\"dark\" style={{zIndex: 1}}>\r\n      <ToggleSidebar />\r\n      <Navbar.Brand >\r\n        <Image className=\"mx-1\" width={32} src=\"/logo-sm.png\" />\r\n        Transferencias - DM11\r\n      </Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\" style={{maxWidth: \"none\"}}>\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Aplicaciones</Popover.Title>\r\n              <Popover.Content>\r\n                <Row>\r\n                  <Col className=\"text-center\"><Link to=\"/iam\"><FaUserCircle className=\"d-block mx-auto\" size={48} /><span >IAM</span></Link></Col>\r\n                  <Col className=\"text-center\"><Link to=\"/clinica\" ><FaClinicMedical className=\"d-block mx-auto\"  size={48} /><span>Clínica</span></Link></Col>\r\n               </Row>\r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link><MdApps size=\"1.5em\" /></Nav.Link>\r\n        </OverlayTrigger>\r\n        {/* {user ? <OverlayTrigger\r\n          trigger=\"click\"\r\n          rootClose\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Popover id=\"apps\">\r\n              <Popover.Title className=\"text-center\" as=\"h3\">Notificaciones</Popover.Title>\r\n              <Popover.Content>\r\n                \r\n              </Popover.Content>\r\n            </Popover>\r\n          }\r\n        >\r\n          <Nav.Link style={{whiteSpace: \"nowrap\"}}>\r\n            <FaBell />\r\n            <div className=\"pulse bg-danger\" style={{\r\n              left: \"0.65rem\",\r\n              top: \"-1.35rem\",\r\n              width: \"0.5rem\",\r\n              height: \"0.5rem\",\r\n              borderRadius: \"50%\"\r\n            }}></div>\r\n          </Nav.Link>\r\n        </OverlayTrigger> : null} */}\r\n        {user ? <NavDropdown \r\n          menuAlign=\"right\"\r\n          title={<>\r\n            <FaUserCircle />\r\n            <span className=\"d-none d-sm-inline ml-1\">{user.username}</span>\r\n          </>} id=\"collasible-nav-dropdown\">\r\n          {/* <NavDropdown.Item href=\"#action/3.2\">Cuenta</NavDropdown.Item>\r\n          <NavDropdown.Item href=\"#action/3.3\">Configuracion</NavDropdown.Item> */}\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item as={Button} className=\"btn-link\" onClick={()=>{\r\n            modal.open({\r\n              state: \"loading\"\r\n            })\r\n            AuthService.logout().then(()=>{\r\n              localStorage.removeItem(\"user\")\r\n              queryClient.clear()\r\n              dispatch(unauthorized())\r\n              modal.close()\r\n            }).catch((error)=>modal.open({\r\n              state: \"error\",\r\n              error\r\n            }))\r\n          }} >Cerrar sesión</NavDropdown.Item>\r\n        </NavDropdown> : <Nav.Link as={Link} to=\"/login\">Iniciar sesión</Nav.Link>}\r\n      </Nav>\r\n    </Navbar>\r\n\r\n    <QueryProgressModal />\r\n    <Suspense fallback={<div>Cargando...</div>}>\r\n      <Switch>\r\n        <ProtectedRoute path=\"/iam\">\r\n          <IamApp />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/clinica\">\r\n          <ClinicaApp />\r\n        </ProtectedRoute>\r\n        <Route exact path=\"/login\">\r\n          <Login></Login>\r\n        </Route>\r\n      </Switch>\r\n    </Suspense>\r\n  </Router>\r\n};\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { LoginForm } from \"../state\";\r\n\r\nconst initialState: LoginForm = {\r\n  fields: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  errors: {\r\n    username: \"\",\r\n    password: \"\"\r\n  },\r\n  message: \"\"\r\n}\r\nexport default (state: LoginForm = initialState, action: any): LoginForm  => {\r\n  if(action.type == \"UPDATE_LOGIN_FORM\"){\r\n    return {\r\n      ...state,\r\n      ...action.payload\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN\"){\r\n    return {\r\n      ...state,\r\n      message: \"\",\r\n      errors: initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\" && action.error){\r\n    const {message, errors} = action.payload\r\n    return {\r\n      ...state,\r\n      message,\r\n      errors: errors || initialState.errors\r\n    }\r\n  }\r\n  if(action.type == \"LOGIN_COMPLETED\"){\r\n    return initialState\r\n  }\r\n  return state\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user'\r\nimport loadUser from './loadUser'\r\nimport login from './login'\r\nimport loginForm from './loginForm'\r\n\r\nexport const AuthModuleReducer = combineReducers({\r\n  user,\r\n  loadUser,\r\n  login,\r\n  loginForm\r\n})\r\n\r\nexport type AuthModuleState = ReturnType<typeof AuthModuleReducer>\r\n\r\nexport default AuthModuleReducer","import { User } from \"../state\"\r\n\r\nexport default (state: User|null=null, action: any): User|null => {\r\n  const {type, payload, error} = action\r\n  switch(type){\r\n    case \"SET_USER\":\r\n    case \"LOGIN_COMPLETED\":\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return error ? state : payload\r\n    case \"UNAUTHORIZED\":\r\n      return null\r\n    default:\r\n      return state\r\n  }\r\n}","export default (state: {completed?:boolean} = {}, action: any)=>{\r\n  const {payload, type} = action\r\n  switch(type){\r\n    case \"LOAD_USER\":\r\n      return {completed: false}\r\n    case \"LOAD_USER_COMPLETED\":\r\n      return {completed: true}\r\n  }\r\n  return state\r\n}","\r\ntype RequestState = {\r\n  completed?: boolean,\r\n}\r\nexport default (state: RequestState = {}, action: any)=>{\r\n  const {type, payload} = action\r\n  switch(type){\r\n    case \"LOGIN\": \r\n      return {\r\n        completed: false\r\n      }\r\n    case \"LOGIN_COMPLETED\":\r\n      return {\r\n        completed: true\r\n      }\r\n  }\r\n  return state\r\n}","import { combineReducers } from \"redux\"\r\n\r\nexport function showSidebar(state=true, action: any){\r\n  if(action.type == \"TOGGLE_SIDEBAR\"){\r\n    return !state\r\n  }\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  showSidebar\r\n})","import { all } from \"@redux-saga/core/effects\";\r\nimport createSagaMiddleware from \"redux-saga\"\r\nimport { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport { watchUnauthorized } from \"../../commons/auth/actions\";\r\nimport auth from \"../../commons/auth/reducers\";\r\nimport { createModalReducer } from \"../../commons/reusable-modal\"\r\nimport main from \"../reducers\";\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    watchUnauthorized()\r\n  ])\r\n}\r\n\r\n\r\n//@ts-ignore\r\nconst composeWithDevTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nexport const configureStore = () => {\r\n  const rootReducer = combineReducers({\r\n    modals: combineReducers({\r\n      queryLoader: createModalReducer(\"queryLoader\"),\r\n      dm11Viewer: createModalReducer(\"dm11Viewer\")\r\n    }),\r\n    main,\r\n    auth\r\n  })\r\n\r\n  // create the saga middleware\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  // mount it on the Store\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(sagaMiddleware)\r\n    )\r\n  )\r\n\r\n  // then run the saga\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  return store\r\n}\r\n\r\n\r\nexport default configureStore","import 'core-js/es/map';\r\nimport 'core-js/es/set';\r\nimport 'core-js/es/string';\r\nimport 'core-js/es/object';\r\nimport 'core-js/es/promise';\r\nimport ReactDOM from 'react-dom';\r\nimport { ErrorBoundary, FallbackProps } from 'react-error-boundary'\r\nimport { Alert, Button } from 'react-bootstrap'\r\nimport Routes from \"./bootstrap/components/App\"\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport { Provider } from 'react-redux';\r\nimport configureStore from './bootstrap/store';\r\n// import './polyfills/String.ts'\r\nimport './bootstrap/components/custom.scss';\r\nimport './index.css';\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: { retry: 0 },\r\n    mutations: { retry: 0 }\r\n  }\r\n})\r\n\r\nconst ErrorFallback = ({error, resetErrorBoundary}: FallbackProps) => {\r\n  return (\r\n    <Alert>\r\n      <p>Algo salió mal:</p>\r\n      <pre>{error.message}</pre>\r\n      <Button onClick={resetErrorBoundary}>Intentar de nuevo</Button>\r\n    </Alert>\r\n  )\r\n}\r\n\r\nReactDOM.render(\r\n  <ErrorBoundary\r\n    FallbackComponent={ErrorFallback}\r\n    onReset={()=>{\r\n        window.location.reload()\r\n    }}\r\n  >\r\n    <QueryClientProvider client={queryClient}>\r\n      <Provider store={configureStore()}>\r\n        <Routes />\r\n      </Provider>\r\n    </QueryClientProvider>\r\n  </ErrorBoundary>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","export * from \"./apiClient\"\r\nexport * from \"./authClient\"\r\nexport * from \"./Page\"\r\nexport * from \"./PaginatedResponse\"\r\n\r\nexport * from \"./UnidadesTerritorialesService\"\r\nexport * from \"./RegionalesService\"","import axios, { AxiosTransformer } from 'axios'\r\nimport {apiEndpoint} from '../../configs/app'\r\nimport Qs from 'qs'\r\nimport { keysToCamel } from '../utils'\r\n\r\nexport const apiClient = axios.create({\r\n  \"baseURL\": apiEndpoint,\r\n  \"timeout\": 30000,\r\n  \"headers\": {\r\n    \"Accept\": \"application/json\"\r\n  },\r\n  transformResponse: [\r\n    ...axios.defaults.transformResponse as AxiosTransformer[],\r\n    (data)=>{\r\n      const result = keysToCamel(data)\r\n      console.log(\"TransformedResponse\", result)\r\n      return result\r\n    }\r\n  ]\r\n})\r\n\r\napiClient.defaults.withCredentials = true\r\n\r\napiClient.interceptors.request.use(config => {\r\n  config.headers.Accept = \"application/json\"\r\n  config.paramsSerializer = params => {\r\n    // Qs is not included in the Axios package\r\n    return Qs.stringify(params, {\r\n      arrayFormat: \"brackets\",\r\n      encode: false,\r\n      filter: (prefix, value)=>{\r\n        if(typeof value === \"boolean\"){\r\n          return value ? 1 : 0\r\n        }\r\n        return value\r\n      }\r\n    });\r\n  };\r\n  console.log(\"Axios config\", config)\r\n  return config;\r\n});\r\n\r\nexport default apiClient","import { useDispatch, useSelector } from \"react-redux\"\r\n\r\nexport const useModal = <Props = {[k: string]: any}>(key: string = \"modal\") => {\r\n  const modalState = useSelector<{\r\n    modals: {[k: string]: {\r\n      show: boolean\r\n    }}\r\n  }>(state=>state.modals[key]) as {\r\n    show: boolean\r\n  } & Props\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  return {\r\n    ...modalState,\r\n    open: (payload: Props)=>{\r\n      dispatch({\r\n        type: \"OPEN_MODAL\",\r\n        payload,\r\n        meta: { key }\r\n      })\r\n    },\r\n    close: () => {\r\n      dispatch({\r\n        type: \"CLOSE_MODAL\",\r\n        meta: { key }\r\n      })\r\n    }\r\n  }\r\n}","type State = {\r\n  show: boolean\r\n  [key: string]: any\r\n}\r\n\r\nconst modalReducer = (state: State, action: any): State =>{\r\n  const { type, payload } = action\r\n  switch(type) {\r\n    case \"OPEN_MODAL\":\r\n      return {\r\n        show: true,\r\n        ...payload\r\n      }\r\n    case \"CLOSE_MODAL\":\r\n      return {show: false}\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const createModalReducer = (key: string) => {\r\n  return (state: State = {show: false}, action: any) => {\r\n    const { meta } = action\r\n    return meta?.key === key ? modalReducer(state, action) : state\r\n  }\r\n}"],"sourceRoot":""}