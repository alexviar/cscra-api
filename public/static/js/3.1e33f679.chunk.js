(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{621:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n={};t.r(n),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return a})),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return i})),t.d(n,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return o})),t.d(n,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return c})),t.d(n,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return s})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return l})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return d})),t.d(n,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return u})),t.d(n,"VER_USUARIOS",(function(){return j})),t.d(n,"VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return b})),t.d(n,"REGISTRAR_USUARIOS",(function(){return O})),t.d(n,"REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return m})),t.d(n,"EDITAR_USUARIOS",(function(){return h})),t.d(n,"EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return x})),t.d(n,"BLOQUEAR_USUARIOS",(function(){return p})),t.d(n,"BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return v})),t.d(n,"DESBLOQUEAR_USUARIOS",(function(){return f})),t.d(n,"DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return E})),t.d(n,"CAMBIAR_CONTRASE\xd1A",(function(){return R})),t.d(n,"CAMBIAR_CONTRASE\xd1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return g})),t.d(n,"VER_ROLES",(function(){return A})),t.d(n,"REGISTRAR_ROLES",(function(){return _})),t.d(n,"EDITAR_ROLES",(function(){return I})),t.d(n,"ELIMINAR_ROLES",(function(){return S})),t.d(n,"VER_LISTA_DE_MORA",(function(){return N})),t.d(n,"VER_LISTA_DE_MORA_REGIONAL",(function(){return C})),t.d(n,"AGREGAR_EMPLEADOR_EN_MORA",(function(){return L})),t.d(n,"AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return U})),t.d(n,"QUITAR_EMPLEADOR_EN_MORA",(function(){return w})),t.d(n,"QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return y})),t.d(n,"VER_MEDICOS",(function(){return P})),t.d(n,"VER_MEDICOS_REGIONAL",(function(){return D})),t.d(n,"REGISTRAR_MEDICOS",(function(){return T})),t.d(n,"REGISTRAR_MEDICOS_REGIONAL",(function(){return M})),t.d(n,"EDITAR_MEDICOS",(function(){return G})),t.d(n,"EDITAR_MEDICOS_REGIONAL",(function(){return V})),t.d(n,"BAJA_MEDICOS",(function(){return z})),t.d(n,"BAJA_MEDICOS_REGIONAL",(function(){return k})),t.d(n,"VER_PROVEEDORES",(function(){return F})),t.d(n,"VER_PROVEEDORES_REGIONAL",(function(){return B})),t.d(n,"REGISTRAR_PROVEEDORES",(function(){return q})),t.d(n,"REGISTRAR_PROVEEDORES_REGIONAL",(function(){return Q})),t.d(n,"EDITAR_PROVEEDORES",(function(){return K})),t.d(n,"EDITAR_PROVEEDORES_REGIONAL",(function(){return X})),t.d(n,"BAJA_PROVEEDOR",(function(){return H})),t.d(n,"BAJA_PROVEEDOR_REGIONAL",(function(){return W})),t.d(n,"VER_CONTRATOS_PROVEEDOR",(function(){return J})),t.d(n,"VER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return $})),t.d(n,"REGISTRAR_CONTRATOS_PROVEEDOR",(function(){return Z})),t.d(n,"REGISTRAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return Y})),t.d(n,"CONSUMIR_CONTRATOS_PROVEEDOR",(function(){return ee})),t.d(n,"CONSUMIR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return re})),t.d(n,"EXTENDER_CONTRATOS_PROVEEDOR",(function(){return te})),t.d(n,"EXTENDER_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return ne})),t.d(n,"ANULAR_CONTRATOS_PROVEEDOR",(function(){return ae})),t.d(n,"ANULAR_CONTRATOS_PROVEEDOR_REGIONAL",(function(){return ie})),t.d(n,"VER_ESPECIALIDADES",(function(){return oe})),t.d(n,"REGISTRAR_ESPECIALIDADES",(function(){return ce})),t.d(n,"EDITAR_ESPECIALIDADES",(function(){return se})),t.d(n,"ELIMINAR_ESPECIALIDADES",(function(){return le})),t.d(n,"IMPORTAR_ESPECIALIDADES",(function(){return de})),t.d(n,"VER_PRESTACIONES",(function(){return ue})),t.d(n,"REGISTRAR_PRESTACIONES",(function(){return je})),t.d(n,"EDITAR_PRESTACIONES",(function(){return be})),t.d(n,"ELIMINAR_PRESTACIONES",(function(){return Oe})),t.d(n,"IMPORTAR_PRESTACIONES",(function(){return me}));var a="Ver solicitudes de atencion externa",i="Ver solicitudes de atencion externa (misma regional)",o="Ver solicitudes de atencion externa (registrado por)",c="Registrar solicitudes de atencion externa",s="Registrar solicitudes de atencion externa (misma regional)",l="Emitir solicitudes de atencion externa",d="Emitir solicitudes de atencion externa (misma regional)",u="Emitir solicitudes de atencion externa (registrado por)",j="Ver usuarios",b="Ver usuarios (misma regional)",O="Registrar usuarios",m="Registrar usuarios (misma regional)",h="Editar usuarios",x="Editar usuarios (misma regional)",p="Bloquear usuarios",v="Bloquear usuarios (misma regional)",f="Desbloquear usuarios",E="Desbloquear usuarios (misma regional)",R="Cambiar contrase\xf1a",g="Cambiar contrase\xf1a (misma regional)",A="Ver roles",_="Registrar roles",I="Editar roles",S="Eliminar roles",N="Ver lista de mora",C="Ver lista de mora (regional)",L="Agregar empleador en mora",U="Agregar empleador en mora (misma regional)",w="Quitar empleador en mora",y="Quitar empleador en mora (misma regional)",P="Ver m\xe9dicos",D="Ver m\xe9dicos (regional)",T="Registrar m\xe9dicos",M="Registrar m\xe9dicos (regional)",G="Editar m\xe9dicos",V="Editar m\xe9dicos (regional)",z="Baja m\xe9dicos",k="Baja m\xe9dicos (regional)",F="Ver proveedores",B="Ver proveedores (regional)",q="Registrar proveedores",Q="Registrar proveedores (regional)",K="Editar proveedores",X="Editar proveedores (regional)",H="Baja proveedores",W="Baja proveedores (regional)",J="Ver contratos de proveedores",$="Ver contratos de proveedores (regional)",Z="Registrar contratos de proveedores",Y="Registrar contratos de proveedores (regional)",ee="Consumir contratos de proveedores",re="Consumir contratos de proveedores (regional)",te="Extender contratos de proveedores",ne="Extender contratos de proveedores (regional)",ae="Anular contratos de proveedores",ie="Anular contratos de proveedores (regional)",oe="Ver especialidades",ce="Registrar especialidades",se="Editar especialidades",le="Eliminar especialidades",de="Importar especialidades",ue="Ver prestaciones",je="Registrar prestaciones",be="Editar prestaciones",Oe="Eliminar prestaciones",me="Importar prestaciones"},622:function(e,r,t){"use strict";var n=t(139);t.d(r,"b",(function(){return n.b})),t.d(r,"c",(function(){return n.c}));var a=t(140);t.d(r,"d",(function(){return a.a}));var i=t(621);t.d(r,"a",(function(){return i.a}))},623:function(e,r,t){},624:function(e,r,t){"use strict";var n=t(16),a=t(1),i=t.n(a),o=t(625),c=t(41);function s(e,r){Object(a.useEffect)((function(){var t=function(t){var n=null===e||void 0===e?void 0:e.current;n&&!n.contains(t.target)&&document.querySelector("html")!=t.target&&r(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,r])}var l=t(32),d=t(3),u=function(e){var r=e.children,t=e.onClickOutside,i=Object(l.a)(e,["children","onClickOutside"]),o=Object(a.useRef)(null);return s(o,t),Object(d.jsx)("div",Object(n.a)(Object(n.a)({ref:o},i),{},{children:r}))},j=t(629),b=t(24),O=t(58),m=function(e){var r=Object(b.j)(e.path||"");return Object(d.jsxs)(d.Fragment,{children:[e.path?Object(d.jsxs)(j.a.Item,{as:O.b,to:e.path,action:!0,active:!!r,className:"border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id):Object(d.jsxs)("div",{className:"list-group-item border-0 text-nowrap",style:{padding:".5rem 1rem"},children:[e.icon,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id),e.items&&e.items.map((function(e){return Object(d.jsxs)(O.b,{to:e.path,style:{padding:".5rem 1rem",paddingLeft:"2rem"},className:"list-group-item list-group-item-action border-0 text-nowrap",children:[e.icon||null,Object(d.jsx)("span",{style:{verticalAlign:"middle",marginLeft:"0.5rem"},children:e.title})]},e.id)}))]})},h=function(e){var r=e.className,t=void 0===r?"":r,a=e.side,i=void 0===a?"right":a,o=e.header,c=void 0===o?"":o,s=e.items,l=void 0===s?[]:s;e.renderItem;return Object(d.jsxs)("div",{className:"".concat(t,"  ").concat({left:"border-left",right:"border-right"}[i]),id:"sidebar-wrapper",children:[Object(d.jsx)("div",{className:"sidebar-heading mt-2",children:c}),Object(d.jsx)("hr",{className:"mx-2"}),Object(d.jsx)(j.a,{variant:"flush",children:l.map((function(e){return Object(d.jsx)(m,Object(n.a)({},e),e.id)}))})]})};t(623),r.a=function(e){var r=e.sidebar,t=e.children,a=Object(c.c)((function(e){return e.sidebarVisibility})),s=Object(c.b)(),l=i.a.useCallback((function(e){var r=document.querySelector('[aria-label="Toggle navigation"]');(null===r||void 0===r?void 0:r.contains(e.target))||s({type:"CLOSE_SIDEBAR"})}),[a]);return Object(d.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(a?" toggled":""),id:"wrapper",children:[Object(d.jsx)(u,{onClickOutside:l,children:Object(d.jsx)(h,Object(n.a)({className:"bg-white shadow-sm"},r))}),Object(d.jsx)(o.a,{className:"d-flex flex-column flex-grow-1",children:Object(d.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:t})})]})}},625:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.fluid,c=e.as,d=void 0===c?"div":c,u=e.className,j=Object(a.a)(e,["bsPrefix","fluid","as","className"]),b=Object(l.a)(t,"container"),O="string"===typeof i?"-"+i:"-fluid";return s.a.createElement(d,Object(n.a)({ref:r},j,{className:o()(u,i?""+b+O:b)}))}));d.displayName="Container",d.defaultProps={fluid:!1},r.a=d},626:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,c=e.striped,d=e.bordered,u=e.borderless,j=e.hover,b=e.size,O=e.variant,m=e.responsive,h=Object(a.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),x=Object(l.a)(t,"table"),p=o()(i,x,O&&x+"-"+O,b&&x+"-"+b,c&&x+"-striped",d&&x+"-bordered",u&&x+"-borderless",j&&x+"-hover"),v=s.a.createElement("table",Object(n.a)({},h,{className:p,ref:r}));if(m){var f=x+"-responsive";return"string"===typeof m&&(f=f+"-"+m),s.a.createElement("div",{className:f},v)}return v}));r.a=d},628:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(62),d=t(9),u=t(39),j=s.a.createContext(null);j.displayName="AccordionContext";var b=j;var O=s.a.forwardRef((function(e,r){var t=e.as,i=void 0===t?"button":t,o=e.children,l=e.eventKey,d=e.onClick,j=Object(a.a)(e,["as","children","eventKey","onClick"]),O=function(e,r){var t=Object(c.useContext)(b),n=Object(c.useContext)(u.a);return function(a){n&&n(e===t?null:e,a),r&&r(a)}}(l,d);return"button"===i&&(j.type="button"),s.a.createElement(i,Object(n.a)({ref:r,onClick:O},j),o)})),m=t(236),h=s.a.forwardRef((function(e,r){var t=e.children,i=e.eventKey,o=Object(a.a)(e,["children","eventKey"]),l=Object(c.useContext)(b);return s.a.createElement(u.a.Provider,{value:null},s.a.createElement(m.a,Object(n.a)({ref:r,in:l===i},o),s.a.createElement("div",null,s.a.Children.only(t))))}));h.displayName="AccordionCollapse";var x=h,p=s.a.forwardRef((function(e,r){var t=Object(l.a)(e,{activeKey:"onSelect"}),i=t.as,c=void 0===i?"div":i,j=t.activeKey,O=t.bsPrefix,m=t.children,h=t.className,x=t.onSelect,p=Object(a.a)(t,["as","activeKey","bsPrefix","children","className","onSelect"]),v=o()(h,Object(d.a)(O,"accordion"));return s.a.createElement(b.Provider,{value:j||null},s.a.createElement(u.a.Provider,{value:x||null},s.a.createElement(c,Object(n.a)({ref:r},p,{className:v}),m)))}));p.displayName="Accordion",p.Toggle=O,p.Collapse=x;r.a=p},629:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=(t(47),t(62)),d=t(9),u=t(239),j=t(238),b=t(39),O={variant:void 0,active:!1,disabled:!1},m=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.active,l=e.disabled,u=e.className,O=e.variant,m=e.action,h=e.as,x=e.eventKey,p=e.onClick,v=Object(a.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);t=Object(d.a)(t,"list-group-item");var f=Object(c.useCallback)((function(e){if(l)return e.preventDefault(),void e.stopPropagation();p&&p(e)}),[l,p]);return l&&void 0===v.tabIndex&&(v.tabIndex=-1,v["aria-disabled"]=!0),s.a.createElement(j.a,Object(n.a)({ref:r},v,{eventKey:Object(b.b)(x,v.href),as:h||(m?v.href?"a":"button":"div"),onClick:f,className:o()(u,t,i&&"active",l&&"disabled",O&&t+"-"+O,m&&t+"-action")}))}));m.defaultProps=O,m.displayName="ListGroupItem";var h=m,x={variant:void 0,horizontal:void 0},p=s.a.forwardRef((function(e,r){var t,i=Object(l.a)(e,{activeKey:"onSelect"}),c=i.className,j=i.bsPrefix,b=i.variant,O=i.horizontal,m=i.as,h=void 0===m?"div":m,x=Object(a.a)(i,["className","bsPrefix","variant","horizontal","as"]),p=Object(d.a)(j,"list-group");return t=O?!0===O?"horizontal":"horizontal-"+O:null,s.a.createElement(u.a,Object(n.a)({ref:r},x,{as:h,className:o()(c,p,b&&p+"-"+b,t&&p+"-"+t)}))}));p.defaultProps=x,p.displayName="ListGroup",p.Item=h;r.a=p},630:function(e,r,t){"use strict";var n=t(2),a=t(5),i=t(6),o=t.n(i),c=t(1),s=t.n(c),l=t(9),d=t(31),u=t(154),j=t(237),b=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,c=e.variant,d=e.as,u=void 0===d?"img":d,j=Object(a.a)(e,["bsPrefix","className","variant","as"]),b=Object(l.a)(t,"card-img");return s.a.createElement(u,Object(n.a)({ref:r,className:o()(c?b+"-"+c:b,i)},j))}));b.displayName="CardImg",b.defaultProps={variant:null};var O=b,m=Object(u.a)("h5"),h=Object(u.a)("h6"),x=Object(d.a)("card-body"),p=Object(d.a)("card-title",{Component:m}),v=Object(d.a)("card-subtitle",{Component:h}),f=Object(d.a)("card-link",{Component:"a"}),E=Object(d.a)("card-text",{Component:"p"}),R=Object(d.a)("card-header"),g=Object(d.a)("card-footer"),A=Object(d.a)("card-img-overlay"),_=s.a.forwardRef((function(e,r){var t=e.bsPrefix,i=e.className,d=e.bg,u=e.text,b=e.border,O=e.body,m=e.children,h=e.as,p=void 0===h?"div":h,v=Object(a.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),f=Object(l.a)(t,"card"),E=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:f+"-header"}}),[f]);return s.a.createElement(j.a.Provider,{value:E},s.a.createElement(p,Object(n.a)({ref:r},v,{className:o()(i,f,d&&"bg-"+d,u&&"text-"+u,b&&"border-"+b)}),O?s.a.createElement(x,null,m):m))}));_.displayName="Card",_.defaultProps={body:!1},_.Img=O,_.Title=p,_.Subtitle=v,_.Body=x,_.Link=f,_.Text=E,_.Header=R,_.Footer=g,_.ImgOverlay=A;r.a=_},633:function(e,r,t){"use strict";t.r(r),t.d(r,"IamApp",(function(){return me}));var n=t(1),a=t.n(n),i=t(24),o=t(30),c=t(624),s=t(139),l=t(140),d=t(16),u=t(28),j=t(611),b=t(600),O=t(628),m=t(630),h=t(328),x=t(322),p=t(599),v=t(95),f=t(175),E=t(615),R=t(619),g=t(184),A=t(61),_=t(44),I=function(e,r){return A.apiClient.get("/usuarios",{params:Object(_.c)({page:r,filter:e})})},S=function(e){return A.apiClient.get("/usuarios/".concat(e))},N=function(e){return A.apiClient.post("/usuarios",Object(_.c)(e))},C=function(e,r){return A.apiClient.put("/usuarios/".concat(e),Object(_.c)(r))},L=function(e,r){return A.apiClient.put("/usuarios/".concat(e,"/cambiar-contrasena"),Object(_.c)(r))},U=function(e){return A.apiClient.put("/usuarios/".concat(e,"/bloquear"))},w=function(e){return A.apiClient.put("/usuarios/".concat(e,"/desbloquear"))},y=function(e,r){return A.apiClient.get("/roles",{params:{filter:e,page:r}})},P=function(e){return A.apiClient.get("/roles/".concat(e))},D=function(e){return A.apiClient.post("roles",e)},T=function(e,r){return A.apiClient.put("roles/".concat(e),r)},M=function(e){return A.apiClient.delete("roles/".concat(e))},G=t(23),V=t(629),z=t(3),k=1,F=a.a.memo((function(e){var r,t=e.isInvalid,n=e.selected,a=void 0===n?[]:n,i=e.onChange,o=Object(E.a)("roles.buscar",(function(){return y()}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1});console.log("Render count",k++);var c=(null===(r=o.data)||void 0===r?void 0:r.data)||[];return Object(z.jsx)("div",{className:t?"is-invalid":"",children:o.isFetching?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(p.a,{animation:"border",size:"sm"}),Object(z.jsx)("span",{children:"Cargando"})]}):o.isError?Object(z.jsxs)(b.a,{variant:"danger",children:["Ocurrio un error al obtener la lista de roles. Haga clic ",Object(z.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o.refetch()},children:"aqui"})," para volver a intentar"]}):Object(z.jsx)(V.a,{as:"ul",className:"overflow-auto flex-grow-1",style:{maxHeight:"12rem"},children:c.map((function(e,r){return Object(z.jsx)(V.a.Item,{as:"li",className:"py-2 px-3 text-capitalize"+(t?" border-danger":""),action:!0,children:Object(z.jsx)(j.a.Check,{type:"checkbox",isInvalid:t,label:e.name,checked:a.some((function(r){return r.id==e.id})),onChange:function(r){var t=r.target.checked;i&&i(t?[].concat(Object(G.a)(a),[e]):a.filter((function(r){return r.id!=e.id})))}})},e.id)}))})})})),B=t(234),q=t(74),Q=t(621),K=function(){var e,r,t,a,o,c,s,A,_,I,L,U,w,y,P,D,T,M,G,V,k,K,X,H,W,J,$,Z,Y,ee=Object(l.a)(),re=Object(i.i)().id,te=Object(n.useMemo)((function(){return q.g().shape({informacionPersonal:q.g().shape({ci:q.f().label("carnet de identidad"),ciComplemento:q.d((function(e){return e?q.j().label("'complemento'").trim().length(2):q.j().nullable().optional()})),apellidoPaterno:q.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:q.j().required("Debe proporcionar al menos un apellido")}),apellidoMaterno:q.j().label("apellido materno").trim().when("apellidoPaterno",{is:function(e){return!e},then:q.j().required("Debe proporcionar al menos un apellido")}),nombres:q.j().label("nombres").trim().required().label("'Nombres'")},[["apellidoMaterno","apellidoPaterno"]]),informacionUsuario:q.g().shape(re?{roles:q.b().label("roles").min(1,"Debe seleccionar al menos un rol")}:{username:q.j().label("usuario").required().min(6).max(16).matches(/[a-zA-Z0-9]*/),password:q.j().label("contrase\xf1a").min(8).max(256).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\/()=?\*])(?=.{8,})/,"La contrase\xf1a debe contener al menos un caracter en minuscula, uno en mayuscula, un n\xfamero y uno de los siguientes caracter especial: !@#$%^&*").required(),passwordRepeat:q.j().label("confirmar contrase\xf1a").test("password-match","Las contrase\xf1as no coinciden",(function(e){return e===this.parent.password})),regional:q.b().length(1),roles:q.b().label("roles").min(1,"Debe seleccionar al menos un rol")})})}),[]),ne=Object(v.g)({resolver:Object(B.a)(te),mode:"onBlur",defaultValues:{informacionUsuario:{roles:[],regional:[]}}}),ae=ne.control,ie=ne.formState,oe=ne.handleSubmit,ce=ne.register,se=ne.setValue,le=ne.trigger,de=ne.watch,ue=ie.errors,je=Object(i.g)(),be=Object(f.b)(),Oe=["usuarios.cargar",re],me=Object(E.a)(Oe,(function(){return S(parseInt(re))}),{enabled:!!re&&!(null===(e=je.location.state)||void 0===e?void 0:e.user)}),he=Object(R.a)((function(e){var r=e.informacionPersonal,t=e.informacionUsuario;return re?C(parseInt(re),{regionalId:t.regional[0].id,roles:t.roles.map((function(e){return e.name})),ci:parseInt(r.ci),ciComplemento:r.ciComplemento,apellidoPaterno:r.apellidoPaterno,apellidoMaterno:r.apellidoMaterno,nombres:r.nombres}):N({username:t.username,password:t.password,regionalId:t.regional[0].id,roles:t.roles.map((function(e){return e.name})),ci:parseInt(r.ci),ciComplemento:r.ciComplemento,apellidoPaterno:r.apellidoPaterno,apellidoMaterno:r.apellidoMaterno,nombres:r.nombres})}),{onSuccess:function(e){var r=e.data;be.invalidateQueries("usuarios.buscar"),je.replace("/iam/usuarios/".concat(r.id),{user:r})}}),xe=Object(n.useState)([]),pe=Object(u.a)(xe,2),ve=pe[0],fe=pe[1],Ee=Object(n.useCallback)((function(e){return!!(null===ee||void 0===ee?void 0:ee.can(Q.a.REGISTRAR_USUARIOS))||e.id==(null===ee||void 0===ee?void 0:ee.regionalId)}),[ee]),Re=(null===(r=me.data)||void 0===r?void 0:r.data)||(null===(t=je.location.state)||void 0===t?void 0:t.user);return console.log(Re),Object(n.useEffect)((function(){Re&&ve.length&&(se("informacionPersonal",{ci:String(Re.ciRaiz),ciComplemento:Re.ciComplemento,apellidoPaterno:Re.apellidoPaterno,apellidoMaterno:Re.apellidoMaterno,nombres:Re.nombres}),se("informacionUsuario",{username:Re.username,roles:Re.roles,regional:[ve.find((function(e){return e.id==Re.id}))]}))}),[Re,ve]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(j.a,{onSubmit:oe((function(e){he.mutate(e)})),children:[Object(z.jsx)("h1",{style:{fontSize:"2rem"},children:"Usuarios"}),"error"==he.status||"success"==he.status?Object(z.jsx)(b.a,{variant:he.isError?"danger":"success",children:he.isError?(null===(a=he.error.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||he.error.message:"Guardado"}):null,Object(z.jsxs)(O.a,{className:"mb-2",defaultActiveKey:"0",children:[Object(z.jsxs)(m.a,{children:[Object(z.jsx)(O.a.Toggle,{as:m.a.Header,className:["text-light",ue.informacionPersonal?"bg-danger":"bg-primary"].join(" "),eventKey:"0",children:"Informaci\xf3n personal"}),Object(z.jsx)(O.a.Collapse,{eventKey:"0",children:Object(z.jsxs)(m.a.Body,{children:[Object(z.jsxs)(j.a.Row,{children:[Object(z.jsxs)(j.a.Group,{as:h.a,xs:8,md:4,children:[Object(z.jsx)(j.a.Label,{title:"Numero raiz del carnet de identidad",children:"Carnet de identidad"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"number",isInvalid:!!(null===(c=ie.errors.informacionPersonal)||void 0===c?void 0:c.ci)},ce("informacionPersonal.ci"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(s=ue.informacionPersonal)||void 0===s||null===(A=s.ci)||void 0===A?void 0:A.message})]}),Object(z.jsxs)(j.a.Group,{as:h.a,xs:4,md:2,children:[Object(z.jsx)(j.a.Label,{title:"Complemento del carnet de identiad",children:"Complemento"}),Object(z.jsx)(j.a.Control,Object(d.a)({isInvalid:!!(null===(_=ue.informacionPersonal)||void 0===_?void 0:_.ciComplemento)},ce("informacionPersonal.ciComplemento"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(I=ue.informacionPersonal)||void 0===I||null===(L=I.ciComplemento)||void 0===L?void 0:L.message})]})]}),Object(z.jsxs)(j.a.Row,{children:[Object(z.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(z.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(z.jsx)(j.a.Control,Object(d.a)(Object(d.a)({isInvalid:!!(null===(U=ue.informacionPersonal)||void 0===U?void 0:U.apellidoPaterno)},ce("informacionPersonal.apellidoPaterno")),{},{onChange:function(e){ce("informacionPersonal.apellidoPaterno").onChange(e),ie.isSubmitted&&le("informacionPersonal.apellidoMaterno")}})),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(w=ue.informacionPersonal)||void 0===w||null===(y=w.apellidoPaterno)||void 0===y?void 0:y.message})]}),Object(z.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(z.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(z.jsx)(j.a.Control,Object(d.a)(Object(d.a)({isInvalid:!!(null===(P=ue.informacionPersonal)||void 0===P?void 0:P.apellidoMaterno)},ce("informacionPersonal.apellidoMaterno")),{},{onChange:function(e){ce("informacionPersonal.apellidoPaterno").onChange(e),ie.isSubmitted&&le("informacionPersonal.apellidoMaterno")}})),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(D=ue.informacionPersonal)||void 0===D||null===(T=D.apellidoMaterno)||void 0===T?void 0:T.message})]}),Object(z.jsxs)(j.a.Group,{as:h.a,lg:4,children:[Object(z.jsx)(j.a.Label,{children:"Nombres"}),Object(z.jsx)(j.a.Control,Object(d.a)({isInvalid:!!(null===(M=ie.errors.informacionPersonal)||void 0===M?void 0:M.nombres)},ce("informacionPersonal.nombres"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(G=ie.errors.informacionPersonal)||void 0===G||null===(V=G.nombres)||void 0===V?void 0:V.message})]})]})]})})]}),Object(z.jsxs)(m.a,{children:[Object(z.jsx)(O.a.Toggle,{as:m.a.Header,className:["text-light",ue.informacionUsuario?"bg-danger":"bg-primary"].join(" "),eventKey:"1",children:"Informacion de usuario"}),Object(z.jsx)(O.a.Collapse,{eventKey:"1",children:Object(z.jsxs)(m.a.Body,{children:[Object(z.jsxs)(j.a.Row,{children:[Object(z.jsxs)(j.a.Group,{controlId:"username",as:h.a,md:4,children:[Object(z.jsx)(j.a.Label,{children:"Usuario"}),Object(z.jsx)(j.a.Control,Object(d.a)({disabled:!!re,isInvalid:!!(null===(k=ie.errors.informacionUsuario)||void 0===k?void 0:k.username)},ce("informacionUsuario.username"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(K=ie.errors.informacionUsuario)||void 0===K||null===(X=K.username)||void 0===X?void 0:X.message})]}),re?null:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(j.a.Group,{as:h.a,md:4,children:[Object(z.jsx)(j.a.Label,{children:"Contrase\xf1a"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!(null===(H=ie.errors.informacionUsuario)||void 0===H?void 0:H.password)},ce("informacionUsuario.password"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(W=ie.errors.informacionUsuario)||void 0===W||null===(J=W.password)||void 0===J?void 0:J.message})]}),Object(z.jsxs)(j.a.Group,{as:h.a,md:4,children:[Object(z.jsx)(j.a.Label,{children:"Confirmar contrase\xf1a"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!(null===($=ie.errors.informacionUsuario)||void 0===$?void 0:$.passwordRepeat)},ce("informacionUsuario.passwordRepeat",{required:{value:!0,message:"Este campo es requerido"},validate:{matchPassword:function(e){return e===de("informacionUsuario.password")||"Las contrase\xf1as no coinciden"}}}))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(Z=ie.errors.informacionUsuario)||void 0===Z||null===(Y=Z.passwordRepeat)||void 0===Y?void 0:Y.message})]})]})]}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Regional"}),Object(z.jsx)(v.a,{name:"informacionUsuario.regional",control:ae,render:function(e){var r,t=e.field,n=e.fieldState;return Object(z.jsx)(g.d,{id:"usuario/regionales-typeahead",onLoad:fe,isInvalid:!!n.error,feedback:null===(r=n.error)||void 0===r?void 0:r.message,filterBy:Ee,selected:t.value,onBlur:t.onBlur,onChange:t.onChange})}})]}),Object(z.jsx)(j.a.Row,{children:Object(z.jsxs)(j.a.Group,{as:h.a,children:[Object(z.jsx)(j.a.Label,{children:"Roles"}),Object(z.jsx)(v.a,{name:"informacionUsuario.roles",control:ae,render:function(e){var r,t=e.field,n=e.fieldState;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(F,{isInvalid:!!n.error,onChange:t.onChange,selected:t.value}),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(r=n.error)||void 0===r?void 0:r.message})]})}})]})})]})})]})]}),Object(z.jsx)(j.a.Row,{children:Object(z.jsx)(h.a,{children:Object(z.jsxs)(x.a,{type:"submit",children:[he.isLoading?Object(z.jsx)(p.a,{animation:"border",className:"mr-2",size:"sm"}):null,Object(z.jsx)("span",{className:"align-middle",children:"Guardar"})]})})})]})})},X=t(622),H=function(){var e,r,t,a,o,c=Object(i.i)().id,s=(Object(i.g)(),Object(X.d)()),l=Object(n.useMemo)((function(){return q.g().shape({oldPassword:c?q.e().notRequired():q.j().label("antig\xfca contrase\xf1a").trim().required(),password:q.j().label("nueva contrase\xf1a").min(8).max(32).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,"La contrase\xf1a debe contener al menos un caracter en minuscula, uno en mayuscula, un n\xfamero y uno de los siguientes caracter especial: !@#$%^&*").required(),passwordRepeat:q.j().label("repita la nueva contrase\xf1a").oneOf([q.h("password")],"Las contrase\xf1as no coinciden")})}),[]),u=Object(v.g)({mode:"onBlur",resolver:Object(B.a)(l),defaultValues:{oldPassword:"",password:"",passwordRepeat:""}}),O=u.formState,m=u.handleSubmit,h=u.register,f=Object(R.a)((function(e){var r=parseInt(c);return L(isNaN(r)?s.id:r,{password:e.password,oldPassword:e.oldPassword})}),{onSuccess:function(e){e.data}}),E=O.errors;return Object(z.jsxs)(j.a,{onSubmit:m((function(e){f.mutate(e)})),children:[Object(z.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Cambiar contrase\xf1a"}),"error"==f.status||"success"==f.status?Object(z.jsx)(b.a,{variant:f.isError?"danger":"success",children:f.isError?(null===(e=f.error.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||f.error.message:"Guardado"}):null,c?null:Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Antig\xfca contrase\xf1a"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!E.oldPassword},h("oldPassword"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=E.oldPassword)||void 0===t?void 0:t.message})]}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Nueva contrase\xf1a"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!E.password},h("password"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=E.password)||void 0===a?void 0:a.message})]}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Repita la nueva contrase\xf1a"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"password",isInvalid:!!E.passwordRepeat},h("passwordRepeat"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=E.passwordRepeat)||void 0===o?void 0:o.message})]}),Object(z.jsxs)(x.a,{type:"submit",children:[f.isLoading?Object(z.jsx)(p.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},W=t(236),J=t(626),$=t(608),Z=t(58),Y={index:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.VER_USUARIOS,X.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,X.a.REGISTRAR_USUARIOS,X.a.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},register:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.REGISTRAR_USUARIOS,X.a.REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},edit:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.EDITAR_USUARIOS,X.a.EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},view:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.VER_USUARIOS,X.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},changePassword:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.CAMBIAR_CONTRASE\u00d1A,X.a.CAMBIAR_CONTRASE\u00d1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},disable:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.BLOQUEAR_USUARIOS,X.a.BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])},enable:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.DESBLOQUEAR_USUARIOS,X.a.DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO])}},ee=function(e){var r=Object(v.g)(),t=(r.control,r.handleSubmit),n=r.register,a=r.reset;return Object(z.jsxs)(j.a,{onSubmit:t((function(r){var t={};r.numCi&&(t.ci=r.numCi),r.compCi&&(t.ciComplemento=r.compCi),r.nombre&&(t.nombreCompleto=r.nombre),r.username&&(t.username=r.username),e.onFilter(t)})),children:[Object(z.jsxs)(j.a.Row,{children:[Object(z.jsxs)(j.a.Group,{as:h.a,sm:4,lg:3,children:[Object(z.jsx)(j.a.Label,{children:"N\xba Carnet"}),Object(z.jsx)(j.a.Control,Object(d.a)({},n("numCi")))]}),Object(z.jsxs)(j.a.Group,{as:h.a,sm:2,lg:1,children:[Object(z.jsx)(j.a.Label,{children:"Comp. Carnet"}),Object(z.jsx)(j.a.Control,Object(d.a)({},n("compCi")))]}),Object(z.jsxs)(j.a.Group,{as:h.a,sm:6,lg:8,children:[Object(z.jsx)(j.a.Label,{children:"Nombre"}),Object(z.jsx)(j.a.Control,Object(d.a)({},n("nombre")))]})]}),Object(z.jsx)(j.a.Row,{children:Object(z.jsxs)(j.a.Group,{as:h.a,sm:"6",children:[Object(z.jsx)(j.a.Label,{children:"Nombre de usuario"}),Object(z.jsx)(j.a.Control,Object(d.a)({},n("username")))]})}),Object(z.jsxs)(j.a.Row,{children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{type:"submit",children:"Aplicar"})}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{variant:"secondary",onClick:function(){return a()},children:"Limpiar"})})]})]})},re=t(94),te=t(70),ne=function(e){var r=e.user,t=Object(te.b)("queryLoader"),a=Object(f.b)(),i=Object(R.a)((function(){return r.estado?U(r.id):w(r.id)}),{onSuccess:function(){t.close(),a.setQueryData("usuarios.buscar",(function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{records:e.data.records.map((function(e){return e==r?Object(d.a)(Object(d.a)({},e),{},{estado:!r.estado}):Object(d.a)({},e)}))})})}))}});return Object(n.useEffect)((function(){"loading"==i.status?t.open({state:"loading"}):"error"==i.status&&t.open({state:"error",error:i.error})}),[i.status]),Object(z.jsxs)(re.a,{style:{position:"initial"},children:[Object(z.jsx)(re.a.Toggle,{as:g.e,variant:"link",id:"dropdown-users-".concat(r.id)}),Object(z.jsxs)(re.a.Menu,{children:[Object(z.jsx)(s.b,{authorize:Y.view,children:Object(z.jsx)(re.a.Item,{as:Z.b,to:{pathname:"/iam/usuarios/".concat(r.id),state:{user:r}},children:"Ver"})}),Object(z.jsx)(s.b,{authorize:Y.edit,children:Object(z.jsx)(re.a.Item,{as:Z.b,to:{pathname:"/iam/usuarios/".concat(r.id,"/editar"),state:{user:r}},children:"Editar"})}),Object(z.jsx)(s.b,{authorize:Y.changePassword,children:Object(z.jsx)(re.a.Item,{as:Z.b,to:{pathname:"/iam/usuarios/".concat(r.id,"/cambiar-contrasena"),state:{user:r}},children:"Cambiar contrase\xf1a"})}),Object(z.jsx)(s.b,{authorize:function(e){return r.estado?Y.disable(e):Y.enable(e)},children:Object(z.jsx)(re.a.Item,{className:"text-danger",onClick:function(){i.mutate()},children:r.estado?"Bloquear":"Desbloquear"})})]})]})},ae=function(){var e,r,t,a=Object(l.a)(),i=Object(n.useState)({current:1,size:10}),c=Object(u.a)(i,2),b=c[0],O=c[1],m=Object(n.useMemo)((function(){var e={};return(null===a||void 0===a?void 0:a.can(Q.a.VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO,!1))&&(e.regionalId=a.regionalId),e}),[a]),v=Object(n.useState)(m),f=Object(u.a)(v,2),R=f[0],A=f[1],_=Object(n.useState)(!1),S=Object(u.a)(_,2),N=S[0],C=S[1],L=Object(E.a)("usuarios.buscar",(function(){return I(R,b)}),{enabled:Y.view(a),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),U=(null===(e=L.data)||void 0===e||null===(r=e.data)||void 0===r||null===(t=r.meta)||void 0===t?void 0:t.total)||0;return Object(z.jsxs)("div",{className:"px-1",children:[Object(z.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Usuarios"}),Object(z.jsx)("div",{className:"d-flex my-2",children:Object(z.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(z.jsxs)(s.b,{authorize:Y.view,children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{onClick:function(){L.refetch()},children:Object(z.jsx)(o.g,{})})}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{onClick:function(){C((function(e){return!e}))},children:Object(z.jsx)(o.d,{})})})]}),Object(z.jsx)(s.b,{authorize:Y.register,children:Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsxs)(x.a,{as:Z.b,to:"/iam/usuarios/registrar",className:"d-flex align-items-center",children:[Object(z.jsx)(o.j,{className:"mr-2"}),"Nuevo"]})})})]})}),Object(z.jsxs)(s.b,{authorize:Y.view,children:[Object(z.jsx)(W.a,{in:N,children:Object(z.jsx)("div",{children:Object(z.jsx)(ee,{onFilter:function(e){A(Object(d.a)(Object(d.a)({},e),m))}})})}),Object(z.jsx)("div",{className:"d-flex",children:Object(z.jsx)("div",{className:"ml-auto mb-2",children:Object(z.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(z.jsx)("span",{children:"Mostrar"}),Object(z.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:b.size,onChange:function(e){var r=e.target.value;O((function(e){return Object(d.a)(Object(d.a)({},e),{},{size:parseInt(r)})}))},children:[Object(z.jsx)("option",{value:10,children:"10"}),Object(z.jsx)("option",{value:20,children:"20"}),Object(z.jsx)("option",{value:30,children:"30"}),Object(z.jsx)("option",{value:50,children:"50"}),Object(z.jsx)("option",{value:100,children:"100"})]}),Object(z.jsx)("span",{children:"filas"})]})})}),Object(z.jsxs)(J.a,{responsive:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{style:{width:1},children:"#"}),Object(z.jsx)("th",{children:"Propietario"}),Object(z.jsx)("th",{children:"Usuario"}),Object(z.jsx)("th",{children:"Estado"}),Object(z.jsx)("th",{style:{width:1}})]})}),Object(z.jsx)("tbody",{children:function(){if(L.isFetching)return Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(z.jsx)(p.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(L.isError){var e,r,t=L.error;return Object(z.jsx)("tr",{children:Object(z.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||t.message})})}if(L.data){var n=L.data.data.records;return 0==n.length?Object(z.jsx)("tr",{children:Object(z.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,r){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:r+1}),Object(z.jsxs)("td",{children:[e.ci," - ",e.nombreCompleto]}),Object(z.jsx)("td",{children:e.username}),Object(z.jsx)("td",{children:e.estado?"Activo":"Bloqueado"}),Object(z.jsx)("td",{children:Object(z.jsx)(ne,{user:e})})]},e.id)}))}}()})]}),Object(z.jsxs)($.a,{children:[Object(z.jsx)(h.a,{children:Object(z.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(U," resultados")})}),Object(z.jsx)(h.a,{children:Object(z.jsx)(g.a,{current:b.current,total:Math.ceil((U-b.size)/b.size)+1,onChange:function(e){return O((function(r){return Object(d.a)(Object(d.a)({},r),{},{current:e})}))}})})]})]})]})},ie=function(){var e,r,t=Object(i.h)().state,n=Object(i.i)().id,a=Object(E.a)(["cargarUsuario",n],(function(){return S(parseInt(n))}),{enabled:!(null===t||void 0===t?void 0:t.user),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),o=(null===t||void 0===t?void 0:t.user)||(null===(e=a.data)||void 0===e?void 0:e.data);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h2",{style:{fontSize:"1.75rem"},children:null===o||void 0===o?void 0:o.username}),Object(z.jsx)(J.a,{children:Object(z.jsxs)("tbody",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Carnet de identidad"}),Object(z.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.ci]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Nombre completo"}),Object(z.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.nombreCompleto]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"text-nowrap",scope:"row",style:{width:"1px"},children:"Nombre de usuario"}),Object(z.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.username]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Estado"}),Object(z.jsxs)("td",{children:[": ",(null===o||void 0===o?void 0:o.estado)?"Activo":!1===(null===o||void 0===o?void 0:o.estado)?"Bloqueado":""]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Creado el"}),Object(z.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.createdAt]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Actualizado el"}),Object(z.jsxs)("td",{children:[": ",null===o||void 0===o?void 0:o.updatedAt]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Roles"}),Object(z.jsxs)("td",{className:"text-capitalize",children:[": ",null===o||void 0===o||null===(r=o.roles)||void 0===r?void 0:r.map((function(e){return e.name}))]})]})]})}),o?Object(z.jsxs)(j.a.Row,{children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{as:Z.b,to:{pathname:"/iam/usuarios/".concat(o.id,"/editar"),state:{user:o}},children:"Editar"})}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{variant:"danger",children:"Bloquear"})})]}):null]})},oe=function(){return A.apiClient.get("/permisos")},ce=function(e){var r,t=e.isInvalid,n=e.selected,a=void 0===n?[]:n,i=e.onChange,o=Object(E.a)("permisos.buscar",(function(){return oe()}),{refetchOnWindowFocus:!1,refetchOnReconnect:!1}),c=(null===(r=o.data)||void 0===r?void 0:r.data)||[];return Object(z.jsx)("div",{className:t?"is-invalid":"",children:o.isFetching?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(p.a,{animation:"border",size:"sm"}),Object(z.jsx)("span",{children:"Cargando"})]}):o.isError?Object(z.jsxs)(b.a,{variant:"danger",children:["Ocurrio un error al obtener la lista de permisos. Haga clic ",Object(z.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o.refetch()},children:"aqui"})," para volver a intentar"]}):Object(z.jsx)(V.a,{as:"ul",className:"overflow-auto flex-grow-1",style:{maxHeight:"12rem"},children:c.map((function(e,r){return Object(z.jsx)(V.a.Item,{as:"li",className:"py-2 px-3 text-capitalize"+(t?" border-danger":""),action:!0,children:Object(z.jsx)(j.a.Check,{type:"checkbox",isInvalid:t,label:e,checked:a.some((function(r){return r==e})),onChange:function(r){var t=r.target.checked;i&&i(t?[].concat(Object(G.a)(a),[e]):a.filter((function(r){return r!=e})))}})},e)}))})})},se=function(){var e,r,t,a,o,c=Object(n.useMemo)((function(){return q.g().shape({name:q.j().label("nombre").trim().required().max(50),description:q.j().label("descripcion").trim().nullable().optional().max(250),permissions:q.b().label("permisos").min(1)})}),[]),s=Object(v.g)({mode:"onBlur",resolver:Object(B.a)(c),defaultValues:{name:"",description:"",permissions:[]}}),l=s.handleSubmit,u=s.register,b=s.control,O=s.formState,m=s.reset,g=s.setError,A=Object(i.i)().id,_=Object(i.g)(),I=Object(te.b)("queryLoader"),S=Object(f.b)(),N=Object(E.a)(["fetchRole",A],(function(){return P(parseInt(A))}),{enabled:!!A&&!(null===(e=_.location.state)||void 0===e?void 0:e.rol),refetchOnWindowFocus:!1,refetchOnReconnect:!1}),C=Object(R.a)((function(e){return A?T(parseInt(A),{name:e.name,description:e.description,permissions:e.permissions}):D({name:e.name,description:e.description,permissions:e.permissions})}),{onSuccess:function(e){var r=e.data;S.invalidateQueries("roles.buscar"),_.replace("/iam/roles/".concat(r.id),{rol:r,ignoreAuthorization:!0})},onError:function(e){var r;422!==(null===(r=e.response)||void 0===r?void 0:r.status)&&I.open({state:"error",error:e})}}),L=(null===(r=N.data)||void 0===r?void 0:r.data)||(null===(t=_.location.state)||void 0===t?void 0:t.rol),U=O.errors;return Object(n.useEffect)((function(){L&&m({name:L.name,description:L.description,permissions:L.permissionNames})}),[L]),Object(n.useEffect)((function(){N.isFetching&&I.open({state:"loading"})}),[N.isFetching]),Object(n.useEffect)((function(){if(C.error){var e,r=C.error;if(422==(null===(e=r.response)||void 0===e?void 0:e.status)){var t=r.response.data.errors;t.name&&g("name",{message:t.name}),t.description&&g("description",{message:t.description}),t.permissions&&g("permissions",{message:t.permissions})}}}),[C.error]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(j.a,{noValidate:!0,validated:O.isValid,onSubmit:l((function(e){C.mutate(e)})),children:[Object(z.jsx)("h1",{style:{fontSize:"2rem"},children:"Roles"}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Nombre"}),Object(z.jsx)(j.a.Control,Object(d.a)({isInvalid:!!O.errors.name},u("name"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=U.name)||void 0===a?void 0:a.message})]}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Descripcion"}),Object(z.jsx)(j.a.Control,Object(d.a)({as:"textarea",isInvalid:!!U.description},u("description"))),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=U.description)||void 0===o?void 0:o.message})]}),Object(z.jsxs)(j.a.Group,{children:[Object(z.jsx)(j.a.Label,{children:"Permisos"}),Object(z.jsx)(v.a,{name:"permissions",control:b,render:function(e){var r,t=e.field,n=e.fieldState;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(ce,{isInvalid:!!n.error,onChange:t.onChange,selected:t.value}),Object(z.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(r=n.error)||void 0===r?void 0:r.message})]})}})]}),Object(z.jsx)(j.a.Row,{children:Object(z.jsx)(h.a,{children:Object(z.jsxs)(x.a,{type:"submit",children:[C.isLoading?Object(z.jsx)(p.a,{animation:"border",className:"mr-2",size:"sm"}):null,Object(z.jsx)("span",{className:"align-middle",children:"Registrar"})]})})})]})})},le=function(e){var r=Object(v.g)(),t=r.register,n=r.handleSubmit;return Object(z.jsx)(j.a,{onSubmit:n((function(r){var t=r.texto;e.onSearch(t)})),children:Object(z.jsxs)(j.a.Row,{className:"flex-nowrap",children:[Object(z.jsxs)(h.a,{children:[Object(z.jsx)(j.a.Label,{htmlFor:"texto",srOnly:!0,children:"Texto"}),Object(z.jsx)(j.a.Control,Object(d.a)({type:"search",id:"texto",style:{minWidth:"10rem"}},t("texto")))]}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{className:"ml-2",type:"submit",children:Object(z.jsx)(o.f,{})})})]})})},de={index:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.VER_ROLES,X.a.REGISTRAR_ROLES])},register:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.REGISTRAR_ROLES])},edit:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.EDITAR_ROLES])},view:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.VER_ROLES])},delete:function(e){return null===e||void 0===e?void 0:e.canAny([X.a.ELIMINAR_ROLES])}},ue=function(e){var r=e.rol,t=e.queryKey,a=Object(te.b)("queryLoader"),i=Object(f.b)(),o=Object(R.a)((function(e){return M(e)}),{onSuccess:function(){a.close(),i.invalidateQueries("roles.buscar",{inactive:!0}),i.setQueryData(t,(function(e){return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{records:e.data.records.filter((function(e){return e!==r}))})})}))}});return Object(n.useEffect)((function(){"loading"==o.status?a.open({state:"loading"}):"error"==o.status&&a.open({state:"error",error:o.error})}),[o.status]),Object(z.jsxs)(re.a,{style:{position:"initial"},children:[Object(z.jsx)(re.a.Toggle,{as:g.e,variant:"link",id:"dropdown-roles-".concat(r.id)}),Object(z.jsxs)(re.a.Menu,{children:[Object(z.jsx)(s.b,{authorize:de.view,children:Object(z.jsx)(re.a.Item,{as:Z.b,to:{pathname:"/iam/roles/".concat(r.id),state:{rol:r}},children:"Ver"})}),Object(z.jsx)(s.b,{authorize:de.edit,children:Object(z.jsx)(re.a.Item,{as:Z.b,to:{pathname:"/iam/roles/".concat(r.id,"/editar"),state:{rol:r}},children:"Editar"})}),Object(z.jsx)(s.b,{authorize:de.delete,children:Object(z.jsx)(re.a.Item,{className:"text-danger",onClick:function(){window.confirm("Esta accion es irreversible, \xbfEsta seguro de continuar?")&&o.mutate(r.id)},children:"Eliminar"})})]})]})},je=function(){var e=Object(l.a)(),r=Object(n.useState)(0),t=Object(u.a)(r,2),a=t[0],i=t[1],c=Object(n.useState)({current:1,size:10}),b=Object(u.a)(c,2),O=b[0],m=b[1],v=Object(n.useState)({}),f=Object(u.a)(v,2),R=f[0],A=f[1],_=["roles.buscar",O,R],I=Object(E.a)(_,(function(){return y(R,O)}),{enabled:de.view(e),refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var r=e.data.meta;i(r.total)}});return Object(z.jsxs)("div",{className:"px-1",children:[Object(z.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Roles"}),Object(z.jsx)("div",{className:"d-flex my-2",children:Object(z.jsx)($.a,{className:"ml-auto flex-nowrap",children:Object(z.jsx)(s.b,{authorize:de.register,children:Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsxs)(x.a,{as:Z.b,to:"/iam/roles/registrar",className:"d-flex align-items-center",children:[Object(z.jsx)(o.e,{className:"mr-2"}),"Nuevo"]})})})})}),Object(z.jsxs)(s.b,{authorize:de.view,children:[Object(z.jsxs)($.a,{children:[Object(z.jsx)(h.a,{className:"mb-2",children:Object(z.jsx)(le,{onSearch:function(e){A({texto:e})}})}),Object(z.jsx)(h.a,{className:"mb-2",xs:"auto",children:Object(z.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(z.jsx)("span",{children:"Mostrar"}),Object(z.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:O.size,onChange:function(e){var r=e.target.value;m((function(e){return{current:1,size:parseInt(r)}}))},children:[Object(z.jsx)("option",{value:10,children:"10"}),Object(z.jsx)("option",{value:20,children:"20"}),Object(z.jsx)("option",{value:30,children:"30"}),Object(z.jsx)("option",{value:50,children:"50"}),Object(z.jsx)("option",{value:100,children:"100"})]}),Object(z.jsx)("span",{children:"filas"})]})})]}),Object(z.jsxs)(J.a,{responsive:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{style:{width:1},children:"#"}),Object(z.jsx)("th",{children:"Nombre"}),Object(z.jsx)("th",{children:"Descripcion"}),Object(z.jsx)("th",{style:{width:1}})]})}),Object(z.jsx)("tbody",{children:function(){if(I.isFetching)return Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(z.jsx)(p.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(I.isError){var e,r,t=I.error;return Object(z.jsx)("tr",{children:Object(z.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||t.message})})}if(I.data){var n=I.data.data.records;return 0==n.length?Object(z.jsx)("tr",{children:Object(z.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):n.map((function(e,r){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:r+1}),Object(z.jsx)("td",{className:"text-capitalize",children:e.name}),Object(z.jsx)("td",{children:e.description}),Object(z.jsx)("td",{children:Object(z.jsx)(ue,{rol:e,queryKey:_})})]},e.id)}))}}()})]}),Object(z.jsxs)("div",{className:"row",children:[Object(z.jsx)(h.a,{children:Object(z.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")})}),Object(z.jsx)(h.a,{children:Object(z.jsx)(g.a,{current:O.current,total:Math.ceil((a-O.size)/O.size)+1,onChange:function(e){return m((function(r){return Object(d.a)(Object(d.a)({},r),{},{current:e})}))}})})]})]})]})},be=function(){var e,r=Object(i.h)(),t=(r.pathname,r.state),a=Object(i.i)().id,o=Object(te.b)("queryLoader"),c=Object(E.a)(["cargar",a],(function(){return P(parseInt(a))}),{enabled:!(null===t||void 0===t?void 0:t.rol),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){o.close()},onError:function(e){o.open({state:"error",error:e})}}),s=Object(R.a)((function(){return M(parseInt(a))}),{onSuccess:function(){o.close()},onError:function(e){o.open({state:e,error:e})}}),l=(null===(e=c.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.rol);return Object(n.useEffect)((function(){c.isFetching&&o.open({state:"loading"})}),[c.isFetching]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h2",{style:{fontSize:"1.75rem"},children:null===l||void 0===l?void 0:l.name}),Object(z.jsx)(J.a,{children:Object(z.jsxs)("tbody",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",style:{width:"1px"},children:"Nombre"}),Object(z.jsx)("td",{className:"text-capitalize",children:null===l||void 0===l?void 0:l.name})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"text-nowrap",scope:"row",children:"Descripci\xf3n"}),Object(z.jsx)("td",{className:(null===l||void 0===l?void 0:l.description)?"":"bg-light",children:(null===l||void 0===l?void 0:l.description)||"Sin descripci\xf3n"})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Fecha de creaci\xf3n"}),Object(z.jsx)("td",{children:null===l||void 0===l?void 0:l.createdAt})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Fecha de actualizaci\xf3n"}),Object(z.jsx)("td",{children:null===l||void 0===l?void 0:l.updatedAt})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{scope:"row",children:"Permisos"}),Object(z.jsx)("td",{className:"d-flex ".concat((null===l||void 0===l?void 0:l.permissionNames.length)?"":"bg-light"),children:(null===l||void 0===l?void 0:l.permissionNames.length)?Object(z.jsx)("ul",{className:"d-inline-block",children:null===l||void 0===l?void 0:l.permissionNames.map((function(e,r){return Object(z.jsx)("li",{className:"text-capitalize",children:e},r)}))}):"No se agregaron permisos"})]})]})}),l?Object(z.jsxs)(j.a.Row,{children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(x.a,{as:Z.b,to:{pathname:"/iam/roles/".concat(l.id,"/editar"),state:{rol:l}},children:"Editar"})}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsxs)(x.a,{variant:"danger",onClick:function(){o.open({state:"loading"}),s.mutate()},children:[s.isLoading?Object(z.jsx)(p.a,{className:"mr-2",animation:"border",size:"sm"}):null,"Eliminar"]})})]}):null]})},Oe=t(607),me=function(){var e=Object(i.j)().url,r=Object(l.a)(),t=Object(n.useMemo)((function(){var t=[];return Y.index(r)&&t.push({id:"users",icon:Object(z.jsx)(o.k,{}),path:"".concat(e,"/usuarios"),title:"Usuarios"}),de.index(r)&&t.push({id:"roles",icon:Object(z.jsx)(o.h,{}),path:"".concat(e,"/roles"),title:"Roles"}),t}),[r]);return Object(z.jsx)(c.a,{sidebar:{header:Object(z.jsx)("div",{className:"d-flex justify-content-center",children:Object(z.jsx)(Oe.a,{src:"/logo-lg.png"})}),items:t},children:Object(z.jsxs)(i.d,{children:[Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios"),authorize:Y.index,children:Object(z.jsx)(ae,{})}),Object(z.jsx)(s.c,{exact:!0,path:["".concat(e,"/usuarios/registrar"),"".concat(e,"/usuarios/:id/editar")],authorize:function(r,t){return t=="".concat(e,"/usuarios/registrar")?Y.register(r):Y.edit(r)},children:Object(z.jsx)(K,{})}),Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/:id/cambiar-contrasena"),authorize:Y.changePassword,children:Object(z.jsx)(H,{})}),Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/cambiar-contrasena"),children:Object(z.jsx)(H,{})}),Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/usuarios/:id"),authorize:Y.view,children:Object(z.jsx)(ie,{})}),Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/roles"),authorize:de.index,children:Object(z.jsx)(je,{})}),Object(z.jsx)(s.c,{exact:!0,path:["".concat(e,"/roles/registrar"),"".concat(e,"/roles/:id/editar")],authorize:function(r,t){return t=="".concat(e,"/roles/registrar")?de.register(r):de.edit(r)},children:Object(z.jsx)(se,{})}),Object(z.jsx)(s.c,{exact:!0,path:"".concat(e,"/roles/:id"),authorize:de.view,children:Object(z.jsx)(be,{})})]})})};r.default=me}}]);
//# sourceMappingURL=3.1e33f679.chunk.js.map