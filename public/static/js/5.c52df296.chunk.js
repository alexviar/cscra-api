(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{436:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={};a.r(r),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return n})),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return i})),a.d(r,"VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return c})),a.d(r,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return o})),a.d(r,"REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return s})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA",(function(){return l})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL",(function(){return d})),a.d(r,"EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR",(function(){return j})),a.d(r,"VER_USUARIOS",(function(){return u})),a.d(r,"VER_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return b})),a.d(r,"REGISTRAR_USUARIOS",(function(){return O})),a.d(r,"REGISTRAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return h})),a.d(r,"EDITAR_USUARIOS",(function(){return m})),a.d(r,"EDITAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return x})),a.d(r,"BLOQUEAR_USUARIOS",(function(){return p})),a.d(r,"BLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return f})),a.d(r,"DESBLOQUEAR_USUARIOS",(function(){return v})),a.d(r,"DESBLOQUEAR_USUARIOS_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return g})),a.d(r,"CAMBIAR_CONTRASE\xd1A",(function(){return E})),a.d(r,"CAMBIAR_CONTRASE\xd1A_DE_LA_MISMA_REGIONAL_QUE_EL_USUARIO",(function(){return R})),a.d(r,"VER_ROLES",(function(){return S})),a.d(r,"REGISTRAR_ROLES",(function(){return I})),a.d(r,"EDITAR_ROLES",(function(){return _})),a.d(r,"ELIMINAR_ROLES",(function(){return N})),a.d(r,"VER_LISTA_DE_MORA",(function(){return A})),a.d(r,"VER_LISTA_DE_MORA_REGIONAL",(function(){return C})),a.d(r,"AGREGAR_EMPLEADOR_EN_MORA",(function(){return y})),a.d(r,"AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return L})),a.d(r,"QUITAR_EMPLEADOR_EN_MORA",(function(){return D})),a.d(r,"QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL",(function(){return T})),a.d(r,"VER_MEDICOS",(function(){return M})),a.d(r,"VER_MEDICOS_REGIONAL",(function(){return w})),a.d(r,"REGISTRAR_MEDICOS",(function(){return G})),a.d(r,"REGISTRAR_MEDICOS_REGIONAL",(function(){return k})),a.d(r,"EDITAR_MEDICOS",(function(){return P})),a.d(r,"EDITAR_MEDICOS_REGIONAL",(function(){return z})),a.d(r,"BAJA_MEDICOS",(function(){return V})),a.d(r,"BAJA_MEDICOS_REGIONAL",(function(){return F})),a.d(r,"VER_PROVEEDORES",(function(){return B})),a.d(r,"VER_PROVEEDORES_REGIONAL",(function(){return U})),a.d(r,"REGISTRAR_PROVEEDORES",(function(){return q})),a.d(r,"REGISTRAR_PROVEEDORES_REGIONAL",(function(){return X})),a.d(r,"EDITAR_PROVEEDORES",(function(){return Q})),a.d(r,"EDITAR_PROVEEDORES_REGIONAL",(function(){return H})),a.d(r,"REGISTRAR_CONTRATO_PROVEEDOR",(function(){return W})),a.d(r,"REGISTRAR_CONTRATO_PROVEEDOR_REGIONAL",(function(){return K})),a.d(r,"BAJA_PROVEEDORES",(function(){return J})),a.d(r,"BAJA_PROVEEDORES_REGIONAL",(function(){return $})),a.d(r,"VER_ESPECIALIDADES",(function(){return Y})),a.d(r,"REGISTRAR_ESPECIALIDADES",(function(){return Z})),a.d(r,"EDITAR_ESPECIALIDADES",(function(){return ee})),a.d(r,"ELIMINAR_ESPECIALIDADES",(function(){return te})),a.d(r,"IMPORTAR_ESPECIALIDADES",(function(){return ae})),a.d(r,"VER_PRESTACIONES",(function(){return re})),a.d(r,"REGISTRAR_PRESTACIONES",(function(){return ne})),a.d(r,"EDITAR_PRESTACIONES",(function(){return ie})),a.d(r,"ELIMINAR_PRESTACIONES",(function(){return ce})),a.d(r,"IMPORTAR_PRESTACIONES",(function(){return oe}));var n="Ver solicitudes de atencion externa",i="Ver solicitudes de atencion externa (misma regional)",c="Ver solicitudes de atencion externa (registrado por)",o="Registrar solicitudes de atencion externa",s="Registrar solicitudes de atencion externa (misma regional)",l="Emitir solicitudes de atencion externa",d="Emitir solicitudes de atencion externa (misma regional)",j="Emitir solicitudes de atencion externa (registrado por)",u="Ver usuarios",b="Ver usuarios (misma regional)",O="Registrar usuarios",h="Registrar usuarios (misma regional)",m="Editar usuarios",x="Editar usuarios (misma regional)",p="Bloquear usuarios",f="Bloquear usuarios (misma regional)",v="Desbloquear usuarios",g="Desbloquear usuarios (misma regional)",E="Cambiar contrase\xf1a",R="Cambiar contrase\xf1a (misma regional)",S="Ver roles",I="Registrar roles",_="Editar roles",N="Eliminar roles",A="Ver lista de mora",C="Ver lista de mora (regional)",y="Agregar empleador en mora",L="Agregar empleador en mora (misma regional)",D="Quitar empleador en mora",T="Quitar empleador en mora (misma regional)",M="Ver m\xe9dicos",w="Ver m\xe9dicos (regional)",G="Registrar m\xe9dicos",k="Registrar m\xe9dicos (regional)",P="Editar m\xe9dicos",z="Editar m\xe9dicos (regional)",V="Baja m\xe9dicos",F="Baja m\xe9dicos (regional)",B="Ver proveedores",U="Ver proveedores (regional)",q="Registrar proveedores",X="Registrar proveedores (regional)",Q="Editar proveedores",H="Editar proveedores (regional)",W="Registrar contratos de preveedores",K="Registrar contratos de preveedores (regional)",J="Baja proveedores",$="Baja proveedores (regional)",Y="Ver especialidades",Z="Registrar especialidades",ee="Editar especialidades",te="Eliminar especialidades",ae="Importar especialidades",re="Ver prestaciones",ne="Registrar prestaciones",ie="Editar prestaciones",ce="Eliminar prestaciones",oe="Importar prestaciones"},437:function(e,t,a){"use strict";var r=a(15),n=(a(1),a(440)),i=a(37),c=a(23),o=a(169),s=(a(438),a(4));t.a=function(e){var t=e.sidebar,a=e.children,l=Object(i.c)((function(e){return e.main.showSidebar})),d=Object(c.j)();d.path,d.url;return Object(s.jsxs)("div",{className:"position-relative d-flex flex-grow-1 bg-light"+(l?"":" toggled"),id:"wrapper",children:[Object(s.jsx)(o.a,Object(r.a)({className:"bg-white shadow-sm"},t)),Object(s.jsx)(n.a,{className:"d-flex flex-column flex-grow-1",children:Object(s.jsx)("div",{className:"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1",children:a})})]})}},438:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t),a.d(t,"ClinicaApp",(function(){return Pt}));var r=a(1),n=a(23),i=a(437),c=a(30),o=a(443),s=a(15),l=a(26),d=a(416),j=a(426),u=a(232),b=a(161),O=a(441),h=a(428),m=a(60),x=a(168),p=a(107),f=a(108),v=a(436),g=a(66),E=function(e){return g.b.get("empleadores/buscar-por-patronal",{params:{numero_patronal:e}})},R=a(47),S=a(36),I=function(e,t){return R.apiClient.get("/lista-mora",{params:Object(S.c)({page:t,filter:e})})},_=function(e){return R.apiClient.post("lista-mora/agregar",{empleador_id:e})},N=function(e){return console.log(e),R.apiClient.post("lista-mora/quitar",{empleador_id:e})},A=function(e){return null},C=a(73),y=a(130),L=a(432),D=a(74),T={index:function(e){return e.canAny([v.a.VER_LISTA_DE_MORA,v.a.VER_LISTA_DE_MORA_REGIONAL,v.a.AGREGAR_EMPLEADOR_EN_MORA,v.a.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])},view:function(e){return e.canAny([v.a.VER_LISTA_DE_MORA,v.a.VER_LISTA_DE_MORA_REGIONAL])},agregar:function(e){return e.canAny([v.a.AGREGAR_EMPLEADOR_EN_MORA,v.a.AGREGAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])},quitar:function(e){return e.canAny([v.a.QUITAR_EMPLEADOR_EN_MORA,v.a.QUITAR_EMPLEADOR_EN_MORA_DE_LA_MISMA_REGIONAL])}},M=a(4),w=function(e){var t=e.item,a=Object(D.b)("queryLoader"),n=Object(y.b)(),i=Object(L.a)((function(){return N(t.empleadorId)}),{onSuccess:function(){a.close(),n.setQueryData("listaMora.buscar",(function(e){return console.log(e),Object(s.a)(Object(s.a)({},e),{},{data:Object(s.a)(Object(s.a)({},e.data),{},{records:e.data.records.filter((function(e){return e!==t}))})})}))}});return Object(r.useEffect)((function(){"loading"==i.status?a.open({state:"loading"}):"error"==i.status&&(console.log(i.error),a.open({state:"error",error:i.error}))}),[i.status]),Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:x.j,variant:"link",id:"dropdown-".concat(t.id)}),Object(M.jsx)(C.a.Menu,{children:Object(M.jsx)(p.b,{authorize:T.quitar,children:Object(M.jsx)(C.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&i.mutate()},children:"Quitar"})})})]})},G=function(){var e,t,a,n=Object(r.useState)({current:1,size:10}),i=Object(l.a)(n,2),o=i[0],g=i[1],E=Object(f.a)(),R=Object(r.useState)((function(){var e={};return E.can(v.a.VER_LISTA_DE_MORA)||E.can(v.a.VER_LISTA_DE_MORA_REGIONAL)&&(e.regionalId=E.regionalId),e})),S=Object(l.a)(R,2),_=S[0],N=S[1],C=Object(r.useState)(!1),y=Object(l.a)(C,2),L=(y[0],y[1]),D=Object(h.a)("listaMora.buscar",(function(){return I(_,o)}),{enabled:T.view(E),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),G=(null===(e=D.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0,k=Object(r.useRef)(!1);Object(r.useEffect)((function(){k.current?T.view(E)&&D.refetch():k.current=!0}),[o,_,E]);return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Empleadores en mora"}),Object(M.jsx)("div",{className:"d-flex my-2",children:Object(M.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(M.jsxs)(p.b,{authorize:T.view,children:[Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{className:"my-2",onClick:function(){D.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{className:"my-2",onClick:function(){L((function(e){return!e}))},children:Object(M.jsx)(c.f,{})})})]}),Object(M.jsx)(p.b,{authorize:T.agregar,children:Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(b.a,{as:m.b,to:"/clinica/lista-mora/agregar",className:"my-2",children:[Object(M.jsx)(c.i,{className:"mr-1"}),"Agregar"]})})})]})}),Object(M.jsxs)(p.b,{authorize:T.view,children:[Object(M.jsxs)(j.a.Row,{className:"mb-2",children:[Object(M.jsx)(u.a,{children:Object(M.jsx)(A,{onApply:function(e){N(e)}})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:o.size,onChange:function(e){var t=e.target.value;g((function(e){return Object(s.a)(Object(s.a)({},e),{},{size:parseInt(t)})}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,className:"text-nowrap",children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{style:{width:1},children:"N\xba Patronal"}),Object(M.jsx)("th",{children:"Nombre"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(D.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}return D.data?D.data.data.records.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{style:{lineHeight:"26px"},children:t+1}),Object(M.jsx)("td",{style:{lineHeight:"26px"},children:e.numeroPatronal}),Object(M.jsx)("td",{style:{lineHeight:"26px"},children:e.nombre}),Object(M.jsx)("td",{children:Object(M.jsx)(w,{item:e})})]},e.id)})):null}()})]}),"success"===D.status?Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(G," resultados")}),Object(M.jsx)(x.f,{current:o.current,total:Math.ceil((G-o.size)/o.size)+1,onChange:function(e){return g((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}):null]})]})},k=a(417),P=a(422),z=a(167),V=a(435),F=a(83),B=F.g().shape({numeroPatronal:F.j().label("n\xfamero patronal").trim().uppercase().required(),nombre:F.j().required()}),U=function(){var e,t,a=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(B),defaultValues:{nombre:"",numeroPatronal:""}}),i=a.handleSubmit,o=a.register,l=a.watch,O=a.setError,m=a.clearErrors,x=a.setValue,p=(a.reset,a.trigger),f=a.formState,v=f.errors;console.log("Vlues",l(),v);var g=Object(n.g)(),R=Object(y.b)(),S=l("numeroPatronal"),I=Object(h.a)(["buscarEmpleadorPorPatronal",S],(function(){return E(S)}),{enabled:!1,onSuccess:function(e){var t=e.data;console.log("Nombre",t.nombre),x("nombre",t.nombre)}}),N=Object(L.a)((function(e){return _(e)}),{onSuccess:function(){R.invalidateQueries("listaMora.buscar"),g.replace("/clinica/lista-mora")}});Object(r.useEffect)((function(){if(I.isError){var e,t=I.error;O("numeroPatronal",{type:"searchError",message:404==(null===(e=t.response)||void 0===e?void 0:e.status)?"Empleador no encontrado":"Ocurrio un error"})}}),[I.isError]);return Object(M.jsxs)(j.a,{id:"form-empleador-mora",onSubmit:i((function(){N.mutate(I.data.data.id)})),children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Agregar empleador en mora"}),function(){if(N.isSuccess)return Object(M.jsx)(k.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"});if(N.isError){var e,t,a=N.error;return Object(M.jsx)(k.a,{variant:"danger",children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})}return null}(),Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"N\xba Patronal"}),Object(M.jsxs)(P.a,{hasValidation:!0,className:"mb-2",children:[Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!v.numeroPatronal,className:"text-uppercase"},o("numeroPatronal"))),Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:v.numeroPatronal?"danger":"outline-secondary",onClick:function(){p("numeroPatronal").then((function(e){v.numeroPatronal||(m(),I.data||I.refetch())}))},children:I.isFetching?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):Object(M.jsx)(c.j,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(e=v.numeroPatronal)||void 0===e?void 0:e.message})]})]})}),Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!f.errors.nombre},o("nombre"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=f.errors.nombre)||void 0===t?void 0:t.message})]})}),Object(M.jsxs)(b.a,{type:"subimt",children:[N.isLoading?Object(M.jsx)(d.a,{className:"mr-2",animation:"border",size:"sm"}):null,Object(M.jsx)("span",{className:""}),"Agregar"]})]})},q=a(0),X=function(e){return Object(q.a)({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{d:"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z"}},{tag:"path",attr:{d:"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z"}},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z"}},{tag:"polygon",attr:{points:"14.4,40 10,40 10,44 14.1,44"}}]},{tag:"circle",attr:{cx:"36",cy:"36",r:"10"}},{tag:"path",attr:{fill:"#fff",d:"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z"}}]})(e)},Q=function(e,t){return R.apiClient.get("solicitudes-atencion-externa",{params:{filter:Object(S.c)(e),page:t}})},H=function(e,t,a,r,n){return R.apiClient.post("solicitudes-atencion-externa",{regional_id:e,asegurado_id:t,medico_id:a,proveedor_id:r,prestaciones_solicitadas:n})},W=function(e){return null},K=a(408),J=function(){var e=Object(D.b)("dm11Viewer");return Object(M.jsxs)(K.a,{centered:!0,show:e.show,onHide:function(){e.close()},children:[Object(M.jsx)(K.a.Header,{children:"D.M. - 11"}),Object(M.jsx)(K.a.Body,{children:e.url?Object(M.jsx)(x.e,{url:e.url}):null})]})},$=a(173),Y=function(e){var t=e.solicitud,a=Object(D.b)("dm11Viewer");return Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:x.j,variant:"link",id:"dropdown-solicitud-".concat(t.id)}),Object(M.jsx)(C.a.Menu,{children:Object(M.jsx)(C.a.Item,{href:"#",onClick:function(){a.open({url:t.urlDm11})},children:"Ver D.M. - 11"})})]})},Z={index:function(e){return e.canAny([v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR,v.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL])},register:function(e){return e.canAny([v.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL])},view:function(e){return e.canAny([v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])},emit:function(e){return e.canAny([v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])}},ee=function(){var e=Object(n.h)().pathname,t=Object(r.useState)(0),a=Object(l.a)(t,2),i=a[0],o=a[1],p=Object(r.useState)({current:1,size:10}),g=Object(l.a)(p,2),E=g[0],R=g[1],S=Object(f.a)(),I=function(){var e={};return S.can(v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA)||((null===S||void 0===S?void 0:S.can(v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL))&&(e.regionalId=S.regionalId),(null===S||void 0===S?void 0:S.can(v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR))&&(e.registradoPor=S.id)),e},_=Object(r.useState)(I),N=Object(l.a)(_,2),A=N[0],C=N[1],y=Object(h.a)(["solicitudesAtencionExterna.buscar",E,A],(function(){return Q(Object(s.a)(Object(s.a)({},A),I()),E)}),{enabled:S.canAny([v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL,v.a.VER_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR]),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;o(t.total)}});return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitudes de atenci\xf3n externa"}),Object(M.jsx)("div",{className:"d-flex my-2",children:Object(M.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(M.jsxs)($.a,{authorize:Z.view,children:[Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){y.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){},children:Object(M.jsx)(c.f,{})})})]}),Object(M.jsx)($.a,{authorize:Z.register,children:Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(b.a,{as:m.b,to:"".concat(e,"/registrar"),className:"d-flex align-items-center",children:[Object(M.jsx)(c.i,{className:"mr-2"}),"Nuevo"]})})})]})}),Object(M.jsxs)($.a,{authorize:Z.view,children:[Object(M.jsxs)(j.a.Row,{className:"mb-2",children:[Object(M.jsx)(u.a,{children:Object(M.jsx)(W,{onFilter:function(e){C(e)}})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:E.size,onChange:function(e){var t=e.target.value;R((function(e){return Object(s.a)(Object(s.a)({},e),{},{size:parseInt(t)})}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"N\xba"}),Object(M.jsx)("th",{children:"Fecha y hora"}),Object(M.jsx)("th",{children:"Matr\xedcula asegurado"}),Object(M.jsx)("th",{children:"Doctor"}),Object(M.jsx)("th",{children:"Proveedor"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(y.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(y.isError){var e,t,a=y.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(y.data){var r=y.data.data.records;return 0===r.length?Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:t+1}),Object(M.jsx)("td",{children:e.numero}),Object(M.jsx)("td",{children:e.fecha}),Object(M.jsx)("td",{children:e.asegurado.matricula}),Object(M.jsx)("td",{children:e.medico}),Object(M.jsx)("td",{children:e.proveedor}),Object(M.jsx)("td",{children:Object(M.jsx)(Y,{solicitud:e})})]},e.id)}))}}()})]}),"success"===y.status?Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(i," resultados")}),Object(M.jsx)(x.f,{current:E.current,total:Math.ceil((i-E.size)/E.size)+1,onChange:function(e){return R((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}):null]}),Object(M.jsx)(J,{})]})},te=a(444),ae=a(445),re=a(439),ne=a.n(re),ie=a(28),ce=a(229),oe=a(170);var se={1:"Alta",2:"Baja"},le={1:"Alta",2:"Baja",3:"Baja temporal"},de=Object(r.forwardRef)((function(e,t){return console.log(e.asegurados.length),Object(M.jsxs)(oe.a,Object(s.a)(Object(s.a)({},e),{},{ref:t,children:[Object(M.jsx)(K.a.Header,{children:e.title}),Object(M.jsx)(K.a.Body,{children:Object(M.jsxs)(O.a,{responsive:!0,className:"small",children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"Matricula"}),Object(M.jsx)("th",{children:"Nombre completo"}),Object(M.jsx)("th",{children:"Estado"}),Object(M.jsx)("th",{})]})}),Object(M.jsx)("tbody",{children:e.asegurados.length?e.asegurados.map((function(t,a){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",children:a+1}),Object(M.jsxs)("td",{children:[t.matricula,"-",t.matriculaComplemento]}),Object(M.jsx)("td",{children:(r=t.apellidoPaterno,n=t.apellidoMaterno,i=t.nombres,(r?r+" ":"")+"".concat(n,"  ").concat(i))}),Object(M.jsx)("td",{className:se[t.estado]?"":"bg-ligth",children:se[t.estado]||"Desconocido"}),Object(M.jsx)("td",{children:Object(M.jsx)(b.a,{onClick:function(){console.log(t),e.onSelect(t)},children:"Seleccionar"})})]},t.id);var r,n,i})):Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})})})]})})]}))})),je=function(e){return R.apiClient.get("asegurados",{params:{filter:{matricula:e},page:{size:10},include:"empleador,titular"}})},ue=function(){var e,t,a,n,i,o,l,O,m,x,p,f,v,g,E,R,S,I,_,N,A,C,y,L,D,T,w,G,k,V,F,B,U=Object(z.i)(),q=U.register,X=U.formState,Q=U.trigger,H=U.setValue,W=U.clearErrors,K=U.control,J=(U.watch,Object(z.j)({control:K,name:"asegurado"})),$=(Object(z.j)({control:K,name:"titular"}),Object(z.j)({control:K,name:"empleador"}),Object(r.useRef)(null)),Y=J.matricula,Z=Object(h.a)(["asegurados.buscar",Y],(function(){return je(Y)}),{enabled:!1,onSuccess:function(e){var t=e.data.records;if(1==t.length){var a=t[0];ee(a)}else{var r;null===(r=$.current)||void 0===r||r.show(!0)}}}),ee=function(e){var t,a,r,n,i=e.empleador,c=e.titular,o=Object(ie.a)(e,["empleador","titular"]);H("asegurado.id",o.id),H("asegurado.apellidoPaterno",o.apellidoPaterno||""),H("asegurado.apellidoMaterno",o.apellidoMaterno||""),H("asegurado.nombres",o.nombres),H("asegurado.tipo",o.tipo),H("asegurado.estado",se[o.estado]),H("asegurado.tieneBaja",!!o.baja),H("asegurado.fechaRegBaja",null===(t=o.baja)||void 0===t?void 0:t.regDate),H("asegurado.fechaValidezSeguro",null===(a=o.baja)||void 0===a?void 0:a.fechaValidezSeguro),H("asegurado.fechaExtincion",o.fechaExtincion),H("titular.id",null===c||void 0===c?void 0:c.id),H("titular.matricula",null===c||void 0===c?void 0:c.matricula),H("titular.apellidoPaterno",null===c||void 0===c?void 0:c.apellidoPaterno),H("titular.apellidoMaterno",null===c||void 0===c?void 0:c.apellidoMaterno),H("titular.nombres",null===c||void 0===c?void 0:c.nombres),H("titular.estado",se[null===c||void 0===c?void 0:c.estado]),H("titular.tieneBaja",!!(null===c||void 0===c?void 0:c.baja)),H("titular.fechaRegBaja",null===c||void 0===c||null===(r=c.baja)||void 0===r?void 0:r.regDate),H("titular.fechaValidezSeguro",null===c||void 0===c||null===(n=c.baja)||void 0===n?void 0:n.fechaValidezSeguro),H("empleador.id",null===i||void 0===i?void 0:i.id),H("empleador.numeroPatronal",null===i||void 0===i?void 0:i.numeroPatronal),H("empleador.nombre",null===i||void 0===i?void 0:i.nombre),H("empleador.estado",le[null===i||void 0===i?void 0:i.estado]),H("empleador.fechaBaja",null===i||void 0===i?void 0:i.fecha_baja),H("empleador.aportes",2==(null===i||void 0===i?void 0:i.aportes)?"S\xed":1==(null===i||void 0===i?void 0:i.aportes)?"No":"")};Object(r.useEffect)((function(){var e;J.id&&(null===(e=X.dirtyFields.asegurado)||void 0===e?void 0:e.matricula)&&(H("asegurado.id",""),H("asegurado.apellidoPaterno",""),H("asegurado.apellidoMaterno",""),H("asegurado.nombres",""),H("asegurado.tipo",-1),H("asegurado.estado",""),H("asegurado.tieneBaja",!1),H("asegurado.fechaRegBaja",""),H("asegurado.fechaValidezSeguro",null),H("asegurado.fechaExtincion",null),H("titular",{id:"",matricula:"",apellidoPaterno:"",apellidoMaterno:"",nombres:"",estado:"",tieneBaja:!1,fechaRegBaja:"",fechaValidezSeguro:null}),H("empleador.id",""),H("empleador.numeroPatronal",""),H("empleador.nombre",""),H("empleador.estado",""),H("empleador.fechaBaja",""),H("empleador.aportes",""))}),[Y]);var re=X.errors,oe=re.asegurado||re.titular||re.empleador;return Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(te.a.Toggle,{as:ae.a.Header,className:"text-light "+(oe?"bg-danger":"bg-primary"),eventKey:"0",children:"Asegurado"}),Object(M.jsx)(te.a.Collapse,{eventKey:"0",children:Object(M.jsxs)(ae.a.Body,{children:[Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(u.a,{lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{htmlFor:"asegurado-matricula",children:"Matr\xedcula"}),Object(M.jsxs)(P.a,{hasValidation:!0,className:"mb-2",children:[Object(M.jsx)(ce.a,Object(s.a)({id:"asegurado-matricula",isInvalid:!!(null===(e=re.asegurado)||void 0===e?void 0:e.matricula)||!!(null===(t=re.asegurado)||void 0===t?void 0:t.id),className:"text-uppercase"},q("asegurado.matricula"))),Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:"outline-secondary",onClick:function(){var e,t,a;(Q("asegurado.matricula"),null===(e=re.asegurado)||void 0===e?void 0:e.matricula)||((null===(t=X.dirtyFields.asegurado)||void 0===t?void 0:t.matricula)&&delete X.dirtyFields.asegurado.matricula,W(["asegurado","titular","empleador"]),Z.data?1==Z.data.data.records.length||null===(a=$.current)||void 0===a||a.show(!0):Z.refetch())},children:Z.isFetching?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):Object(M.jsx)(c.j,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=re.asegurado)||void 0===a||null===(n=a.matricula)||void 0===n?void 0:n.message})]})]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("asegurado.apellidoPaterno")))]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("asegurado.apellidoMaterno")))]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("asegurado.nombres")))]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Estado"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!(null===(i=re.asegurado)||void 0===i?void 0:i.estado)},q("asegurado.estado"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=re.asegurado)||void 0===o||null===(l=o.estado)||void 0===l?void 0:l.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Validez del seguro"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,type:"date",isInvalid:!!(null===(O=re.asegurado)||void 0===O?void 0:O.fechaValidezSeguro)},q("asegurado.fechaValidezSeguro"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(m=re.asegurado)||void 0===m||null===(x=m.fechaValidezSeguro)||void 0===x?void 0:x.message})]}),2==J.tipo?Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Fecha extinsion"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,type:"date",isInvalid:!!(null===(p=re.asegurado)||void 0===p?void 0:p.fechaExtincion)},q("asegurado.fechaExtincion",{validate:{afterDate:function(e){var t=ne()();if(e&&ne()(e,"DD/MM/YYYY").isSameOrBefore(t))return"Se ha cumplido la fecha de extincion"}}}))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(f=re.asegurado)||void 0===f||null===(v=f.fechaExtincion)||void 0===v?void 0:v.message})]}):null]}),2==J.tipo?Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Titular"}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Matricula"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("titular.matricula")))]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("titular.apellidoPaterno")))]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("titular.apellidoMaterno")))]}),Object(M.jsxs)(j.a.Group,{as:u.a,lg:3,md:6,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("titular.nombres")))]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Estado"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!(null===(g=re.titular)||void 0===g?void 0:g.estado)},q("titular.estado"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(E=re.titular)||void 0===E||null===(R=E.estado)||void 0===R?void 0:R.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Fecha de baja"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,type:"date",isInvalid:!!(null===(S=re.titular)||void 0===S?void 0:S.fechaValidezSeguro)},q("titular.fechaValidezSeguro"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(I=re.titular)||void 0===I||null===(_=I.fechaValidezSeguro)||void 0===_?void 0:_.message})]})]})]}):null,Object(M.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Empleador"}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"N\xba Patronal"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!(null===(N=re.empleador)||void 0===N?void 0:N.numeroPatronal)},q("empleador.numeroPatronal"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(A=re.empleador)||void 0===A||null===(C=A.numeroPatronal)||void 0===C?void 0:C.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:8,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0},q("empleador.nombre")))]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Estado"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!(null===(y=re.empleador)||void 0===y?void 0:y.estado)},q("empleador.estado"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(L=re.empleador)||void 0===L||null===(D=L.estado)||void 0===D?void 0:D.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Fecha de baja"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,type:"date",isInvalid:!!(null===(T=re.empleador)||void 0===T?void 0:T.fechaBaja)},q("empleador.fechaBaja"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(w=re.empleador)||void 0===w||null===(G=w.fechaBaja)||void 0===G?void 0:G.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"En mora"}),Object(M.jsx)(j.a.Control,Object(s.a)({readOnly:!0,isInvalid:!!(null===(k=re.empleador)||void 0===k?void 0:k.aportes)},q("empleador.aportes"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(V=re.empleador)||void 0===V||null===(F=V.aportes)||void 0===F?void 0:F.message})]})]}),Object(M.jsx)(de,{ref:$,title:"Resultados",asegurados:(null===(B=Z.data)||void 0===B?void 0:B.data.records)||[],onSelect:function(e){ee(e),$.current.show(!1)}})]})})]})},be=a(65),Oe=function(e,t){return R.apiClient.get("medicos",{params:Object(S.c)({filter:e,page:t})})},he=function(e){return R.apiClient.get("medicos/".concat(e))},me=function(e,t,a,r,n,i){return R.apiClient.post("medicos",{ci:e.raiz,ci_complemento:e.complemento,apellido_paterno:t,apellido_materno:a,nombres:r,especialidad_id:n,regional_id:i})},xe=function(e,t,a,r,n,i,c){return R.apiClient.put("medicos/".concat(e),{ci:t.raiz,ci_complemento:t.complemento,apellido_paterno:a,apellido_materno:r,nombres:n,especialidad_id:i,regional_id:c})},pe=function(e,t){return R.apiClient.put("medicos/".concat(e,"/cambiar-estado"),{estado:t})},fe=a(86),ve=a.n(fe),ge=function(e,t){return R.apiClient.get("proveedores",{params:{filter:e,page:t}})},Ee=function(e,t){var a=ve.a.CancelToken.source(),r=R.apiClient.get("prestaciones",{params:{filter:e,page:t}});return r.cancel=function(){a.cancel("Query was cancelled by React Query")},r},Re=(a(109),function(e){var t,a,n,i,o=e.isInvalid,l=e.feedback,d=e.filterBy,u=Object(ie.a)(e,["isInvalid","feedback","filterBy"]),O=Object(h.a)("medicos.buscar",(function(){return Oe()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(r.useEffect)((function(){var e;O.data&&(u.onLoad&&u.onLoad(null===(e=O.data)||void 0===e?void 0:e.data))}),[O.data]),Object(M.jsxs)(P.a,{hasValidation:!0,children:[Object(M.jsx)(be.a,Object(s.a)(Object(s.a)({className:O.isError||o?"is-invalid":"",isInvalid:O.isError||o},u),{},{filterBy:function(e,t){return(Object(S.a)(e.nombreCompleto,t)||Object(S.a)(e.especialidad,t))&&!("function"!==typeof d||!d(e,t))},isLoading:O.isFetching,options:(null===(t=O.data)||void 0===t?void 0:t.data)||[],labelKey:"nombreCompleto",minLength:0,renderMenuItemChildren:function(e){return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{children:e.nombreCompleto}),Object(M.jsx)("div",{className:"small text-secondary",children:e.especialidad})]})}})),O.isError?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:"outline-danger",onClick:function(){return O.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:(null===(a=O.error)||void 0===a||null===(n=a.response)||void 0===n?void 0:n.message)||(null===(i=O.error)||void 0===i?void 0:i.message)})]}):null,l?Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:l}):null]})}),Se=function(e){var t,a,n,i,o=e.isInvalid,l=e.feedback,d=e.filterBy,u=Object(ie.a)(e,["isInvalid","feedback","filterBy"]),O=Object(h.a)("prestaciones.buscar",(function(){return Ee({})}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(r.useEffect)((function(){var e;O.data&&(u.onLoad&&u.onLoad(null===(e=O.data)||void 0===e?void 0:e.data))}),[O.data]),Object(M.jsxs)(P.a,{hasValidation:!0,children:[Object(M.jsx)(be.a,Object(s.a)(Object(s.a)({className:O.isError||o?"is-invalid":"",isInvalid:O.isError||o},u),{},{filterBy:function(e,t){return(!t.text||Object(S.a)(e.nombre,t))&&(!d||"function"===typeof d&&d(e,t))},isLoading:O.isFetching,options:(null===(t=O.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre",minLength:0})),O.isError?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:"outline-danger",onClick:function(){return O.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:(null===(a=O.error)||void 0===a||null===(n=a.response)||void 0===n?void 0:n.message)||(null===(i=O.error)||void 0===i?void 0:i.message)})]}):null,l?Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:l}):null]})},Ie=function(e){var t,a,n,i,o=e.isInvalid,l=e.feedback,d=e.filterBy,u=Object(ie.a)(e,["isInvalid","feedback","filterBy"]),O=Object(h.a)("proveedores.buscar",(function(){return ge({activos:1})}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(r.useEffect)((function(){var e;O.data&&(u.onLoad&&u.onLoad(null===(e=O.data)||void 0===e?void 0:e.data))}),[O.data]),Object(M.jsxs)(P.a,{hasValidation:!0,children:[Object(M.jsx)(be.a,Object(s.a)(Object(s.a)({className:O.isError||o?"is-invalid":"",isInvalid:O.isError||o},u),{},{filterBy:function(e,t){return(!t.text||(e.medico?Object(S.a)(e.medico.nombreCompleto,t):Object(S.a)(e.nombre,t)))&&(!d||"function"===typeof d&&d(e,t))},isLoading:O.isFetching,options:(null===(t=O.data)||void 0===t?void 0:t.data)||[],labelKey:function(e){if(e.medico){var t=e.medico;return t.nombres+(t.apellidoPaterno?" "+t.apellidoPaterno:"")+(t.apellidoMaterno?" "+t.apellidoMaterno:"")}return e.nombre},minLength:0,renderMenuItemChildren:function(e){var t,a;if(e.medico){var r=e.medico;t=r.nombres+(r.apellidoPaterno?" "+r.apellidoPaterno:"")+(r.apellidoMaterno?" "+r.apellidoMaterno:""),a=r.especialidad}else t=e.nombre,a="Empresa";return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{children:t}),Object(M.jsx)("div",{className:"small text-secondary",children:a})]})}})),O.isError?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:"outline-danger",onClick:function(){return O.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:(null===(a=O.error)||void 0===a||null===(n=a.response)||void 0===n?void 0:n.message)||(null===(i=O.error)||void 0===i?void 0:i.message)})]}):null,l?Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:l}):null]})},_e=function(){var e,t=Object(r.useState)(1),a=Object(l.a)(t,2),n=a[0],i=a[1],o=Object(z.i)(),d=o.register,u=o.control,h=o.formState,m=o.watch,x=Object(z.f)({name:"proveedor",control:u}),p=Object(z.g)({control:u,name:"prestacionesSolicitadas"}),f=p.fields,v=p.append,g=p.remove,E=h.errors,R=!!E.prestacionesSolicitadas||!!E.proveedor;return Object(M.jsxs)(ae.a,{style:{overflow:"visible"},children:[Object(M.jsx)(te.a.Toggle,{as:ae.a.Header,className:"text-light "+(R?"bg-danger":"bg-primary"),eventKey:"3",children:"Prestaciones"}),Object(M.jsx)(te.a.Collapse,{eventKey:"3",children:Object(M.jsxs)("div",{children:[Object(M.jsxs)(O.a,{className:E.prestacionesSolicitadas?"is-invalid":"",children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"Prestacion"}),Object(M.jsx)("th",{children:"Proveedor"}),Object(M.jsx)("th",{children:"Nota"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsxs)("tbody",{children:[f.map((function(e,t){var a,r,n,i,o,l,O;return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:t+1}),Object(M.jsx)("td",{children:Object(M.jsx)(z.a,{name:"prestacionesSolicitadas.".concat(t,".prestacion"),control:u,render:function(e){var a,r=e.field,n=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(Se,{id:"solicitud-atencion-externa/prestacionesSolicitadas.".concat(t,".prestacion"),className:n.error?"is-invalid":"",isInvalid:!!n.error,filterBy:function(e){var t=m("proveedor.0"),a=m("prestacionesSolicitadas");return!t||t.contrato.prestaciones.some((function(t){return t.id==e.id}))&&!a.some((function(t){var a;return(null===(a=t.prestacion)||void 0===a?void 0:a.length)&&t.prestacion[0].id==e.id}))},feedback:null===(a=n.error)||void 0===a?void 0:a.message,selected:r.value,onBlur:r.onBlur,onChange:r.onChange})})}})}),Object(M.jsx)("td",{children:Object(M.jsx)(Ie,{id:"solicitud-atencion-externa/proveedor",className:(null===(a=x.fieldState)||void 0===a?void 0:a.error)?"is-invalid":"",isInvalid:!!(null===(r=x.fieldState)||void 0===r?void 0:r.error),filterBy:function(e){return!(e.regionalId!=m("regional.0.id")||!m("prestacionesSolicitadas").every((function(t){return e.contrato.prestaciones.some((function(e){return e.id==(t.prestacion.length&&t.prestacion[0].id)}))})))},feedback:null===(n=x.fieldState)||void 0===n||null===(i=n.error)||void 0===i?void 0:i.message,onChange:x.field.onChange,onBlur:x.field.onBlur,selected:x.field.value})}),Object(M.jsxs)("td",{children:[Object(M.jsx)(j.a.Control,Object(s.a)({as:"textarea",isInvalid:!(!h.errors.prestacionesSolicitadas||!(null===(o=h.errors.prestacionesSolicitadas[t])||void 0===o?void 0:o.nota))},d("prestacionesSolicitadas.".concat(t,".nota")))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:h.errors.prestacionesSolicitadas&&(null===(l=h.errors.prestacionesSolicitadas[t])||void 0===l||null===(O=l.nota)||void 0===O?void 0:O.message)})]}),Object(M.jsx)("td",{children:Object(M.jsx)(b.a,{variant:"link",onClick:function(){console.log("Remove",t),g(t)},className:"btn-icon",children:Object(M.jsx)(c.h,{})})})]},e.id)})),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{}),Object(M.jsx)("td",{}),Object(M.jsx)("td",{}),Object(M.jsx)("td",{children:Object(M.jsx)(b.a,{variant:"link",onClick:function(){console.log(n),v({id:n}),i((function(e){return e+1}))},className:"btn-icon",children:Object(M.jsx)(c.i,{})})})]})]})]}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(e=E.prestacionesSolicitadas)||void 0===e?void 0:e.message})]})})]})},Ne=ne()(),Ae=F.j().label("estado").oneOf(Object.values(se),"Estado desconocido").test("estado-incoherente","",(function(e,t){return e==se[1]&&t.parent.tieneBaja?t.createError({message:"El asegurado figura como activo, pero hay un registro de su baja con fecha ${date}",params:{date:t.parent.fechaRegBaja}}):!(e==se[2]&&!t.parent.tieneBaja)||t.createError({message:"El asegurado figura como dado de baja, aunque no se encontraron registros de la baja"})})),Ce=F.e().label("fecha de extinsion").test("min","",(function(e,t){var a=t.parent,r=a.estado,n=a.tieneBaja;return r==se[2]&&n&&!e?t.createError({message:"Fecha sin especificar, se asume que el seguro ya no tiene validez"}):!ne()(e).isSameOrBefore(Ne)||t.createError({message:"El seguro ya no tiene validez"})})),ye=F.g().shape({asegurado:F.g().shape({matricula:F.j().label("matricula").trim().uppercase().required().matches(/^\d{2}-\d{4}-[a-zA-Z\xf1\xd1]{2,3}$/,"Formato incorrecto."),estado:Ae,fechaExtincion:F.d((function(e){return e?F.c().label("fecha de extinsion").nullable().notRequired().min(Ne.toDate(),"Fecha de extinsion alcanzada"):F.e()})),fechaValidezSeguro:Ce}),titular:F.d((function(e){return(null===e||void 0===e?void 0:e.id)?F.g().shape({matricula:F.j().label("matricula").required(),estado:Ae,fechaValidezSeguro:Ce}):F.g()})),empleador:F.g().shape({numeroPatronal:F.j().label("numero patronal").required(),estado:F.j().label("estado").oneOf(Object.values(le),"Estado desconocido").test("estado-incoherente","El empleador figura como activo, pero tiene fecha de baja",(function(e,t){return e!=le[1]||!t.parent.fechaBaja})),fechaBaja:F.e().when("estado",{is:function(e){return e==le[2]||e==le[3]},then:F.c().required("Fecha sin especificar, se asume que el seguro ya no tiene validez").min(Ne.subtract(2,"months").toDate())}),aportes:F.d((function(e){return e?F.j().oneOf(["No"],"El empleador esta en mora"):F.j()}))}),regional:F.b().length(1,"Debe seleccionar una regional"),medico:F.b().length(1,"Debe seleccionar un medico"),proveedor:F.b().length(1,"Debe seleccionar un proveedor"),prestacionesSolicitadas:F.b().of(F.g().shape({prestacion:F.b().length(1,"Debe seleccionar una prestacion"),nota:F.j().label("nota").nullable().notRequired().max(150)})).min(1,"Debe solicitar un servicio").max(1,"Solo puede solicitar un servicio por solicitud")}),Le=function(){var e=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(ye),defaultValues:{regional:[],medico:[],proveedor:[],prestacionesSolicitadas:[{id:0,prestacion:[],nota:""}],asegurado:{},titular:{},empleador:{}}}),t=e.handleSubmit,a=(e.trigger,e.formState),n=e.control,i=(e.reset,e.setValue),c=e.setError,o=e.watch,l=Object(D.b)("dm11Viewer"),O=Object(f.a)();console.log("Errors",o(),a.errors);var h=Object(L.a)((function(e){return H(e.regional[0].id,e.asegurado.id,e.medico[0].id,e.proveedor[0].id,e.prestacionesSolicitadas.map((function(e){var t=e.prestacion,a=e.nota;return{prestacion_id:t[0].id,nota:a}})))}),{onSuccess:function(e){var t=e.data,a=t.urlDm11,r=t.regionalId;(O.canAny([v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA,v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_REGISTRADO_POR])||O.can(v.a.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)&&r==O.regionalId)&&l.open({url:a})}}),m=a.errors,p=h.error;Object(r.useEffect)((function(){var e;if(422==(null===p||void 0===p||null===(e=p.response)||void 0===e?void 0:e.status)){var t,a=(null===(t=p.response)||void 0===t?void 0:t.data).errors;Object.keys(a).forEach((function(e){var t=e;"asegurado.id"==e&&(t="asegurado.matricula"),c(t,{type:"serverError",message:a[e]})}))}}),[p]);return Object(M.jsxs)(z.b,Object(s.a)(Object(s.a)({},e),{},{children:[Object(M.jsxs)(j.a,{onSubmit:t((function(e){h.mutate(e)})),children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Solicitud de atenci\xf3n externa"}),function(){return h.isSuccess?Object(M.jsx)(k.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"}):h.isError&&422!=(null===(e=p.response)||void 0===e?void 0:e.status)?Object(M.jsx)(k.a,{variant:"danger",children:p?(null===(t=p.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||p.message:""}):null;var e,t,a}(),Object(M.jsxs)(te.a,{className:"mt-3",defaultActiveKey:"0",children:[Object(M.jsx)(ue,{}),Object(M.jsxs)(ae.a,{style:{overflow:"visible"},children:[Object(M.jsx)(te.a.Toggle,{as:ae.a.Header,className:"text-light "+(m.regional?"bg-danger":"bg-primary"),eventKey:"1",children:"Regional"}),Object(M.jsx)(te.a.Collapse,{eventKey:"1",children:Object(M.jsx)(ae.a.Body,{children:Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(z.a,{control:n,name:"regional",render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(x.i,{id:"solicitud-atencion-externa-form/regionales",filterBy:function(e){return!!O.can(v.a.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA)||e.id==O.regionalId},isInvalid:!!r.error,feedback:null===(t=r.error)||void 0===t?void 0:t.message,selected:a.value,onBlur:a.onBlur,onChange:function(e){i("medico",[]),i("proveedor",[]),a.onChange(e)}})}})]})})})})]}),Object(M.jsxs)(ae.a,{style:{overflow:"visible"},children:[Object(M.jsx)(te.a.Toggle,{as:ae.a.Header,className:"text-light "+(m.medico?"bg-danger":"bg-primary"),eventKey:"2",children:"M\xe9dico"}),Object(M.jsx)(te.a.Collapse,{eventKey:"2",children:Object(M.jsx)(ae.a.Body,{children:Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(z.a,{control:n,name:"medico",render:function(e){var t,r=e.field,n=e.fieldState;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Re,{id:"solicitud-atencion-externa-form/medicos",filterBy:function(e){return e.regionalId==o("regional.0.id")},className:n.error?"is-invalid":"",isInvalid:!!a.errors.medico,selected:r.value,onBlur:r.onBlur,onChange:r.onChange}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=n.error)||void 0===t?void 0:t.message})]})}})]})})})})]}),Object(M.jsx)(_e,{})]}),Object(M.jsxs)(b.a,{className:"mt-3",type:"submit",children:[h.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]}),Object(M.jsx)(J,{})]}))},De=a(424),Te=a(446),Me=a(171),we=a(172),Ge=function(e,t){var a=ve.a.CancelToken.source(),r=g.b.get("/especialidades",{params:{filter:{nombre:e||void 0},page:t}});return r.cancel=function(){a.cancel("Query was cancelled by React Query")},r},ke=function(e){return g.b.get("especialidades/".concat(e))},Pe=function(e){return g.b.post("especialidades",{nombre:e})},ze=function(e,t){return g.b.put("especialidades/".concat(e),{nombre:t})},Ve=function(e){return g.b.delete("especialidades/".concat(e))},Fe=function(e,t,a){var r=new FormData;return r.append("archivo",e,e.name),r.append("separador",t),r.append("formato",a),g.b.post("/especialidades/importar",r,{headers:{"Content-Type":"multipart/form-data"}})},Be=function(e){var t=Object(z.h)(),a=t.register,r=t.handleSubmit;return Object(M.jsx)(j.a,{onSubmit:r((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(M.jsxs)(j.a.Row,{className:"flex-nowrap",children:[Object(M.jsxs)(u.a,{children:[Object(M.jsx)(j.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{className:"ml-2",type:"submit",children:Object(M.jsx)(c.j,{})})})]})})},Ue=a(139),qe=function(e){var t,a,n,i=e.modalRef,c=Object(r.useState)(!1),o=Object(l.a)(c,2),d=o[0],O=o[1],h=Object(z.h)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),m=h.register,x=h.formState,p=h.handleSubmit,f=Object(L.a)((function(e){return Fe(e.archivo,e.separador,e.formatoSaltoLinea)}));return Object(r.useEffect)((function(){i.current={show:O}}),[]),Object(M.jsxs)(K.a,{centered:!0,show:d,onHide:function(){return O(!1)},children:[Object(M.jsx)(K.a.Header,{children:"Importar Datos"}),Object(M.jsx)(K.a.Body,{children:Object(M.jsxs)(j.a,{id:"importar-especialidades-form",onSubmit:p((function(e){var t=e.archivo,a=e.separador,r=e.formatoSaltoLinea;f.mutate({archivo:t[0],separador:a,formatoSaltoLinea:r})})),children:[Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(M.jsx)(u.a,{className:"d-flex align-items-center",sm:"auto",children:Object(M.jsx)(j.a.File,Object(s.a)(Object(s.a)({isInvalid:!!x.errors.archivo},m("archivo",{required:Ue.a()})),{},{feedback:null===(t=x.errors.archivo)||void 0===t?void 0:t.message}))})]}),Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Separador"}),Object(M.jsxs)(u.a,{xs:"auto",children:[Object(M.jsx)(j.a.Control,Object(s.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!x.errors.separador},m("separador",{required:Ue.a()}))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=x.errors.separador)||void 0===a?void 0:a.message})]})]}),Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(M.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(M.jsx)(j.a.Check,Object(s.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},m("formatoSaltoLinea"))),Object(M.jsx)(j.a.Check,Object(s.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},m("formatoSaltoLinea")))]})]}),Object(M.jsx)(j.a.Check,Object(s.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!x.errors.aggrement,feedback:null===(n=x.errors.aggrement)||void 0===n?void 0:n.message},m("aggrement",{required:Ue.a()})))]})}),Object(M.jsxs)(K.a.Footer,{children:[Object(M.jsx)(b.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:"Importar"}),Object(M.jsx)(b.a,{children:"Cancelar"})]})]})},Xe=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)({current:1,size:10}),o=Object(l.a)(i,2),x=o[0],p=o[1],f=Object(r.useState)(""),v=Object(l.a)(f,2),g=v[0],E=v[1],R=Object(r.useRef)(),S=Object(h.a)(["especialidades.buscar",x,g],(function(){return Ge(g,x)}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;n(t.total)}}),I=Object(L.a)((function(e){return Ve(e)}));return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Especialidades"}),Object(M.jsxs)(De.a,{className:"mb-2",children:[Object(M.jsx)(u.a,{className:"ml-auto pr-0",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){return S.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(C.a,{as:Te.a,children:[Object(M.jsx)(b.a,{as:m.b,replace:!0,to:"/clinica/configuracion/especialidades/registrar",children:"Nuevo"}),Object(M.jsx)(C.a.Toggle,{split:!0,id:"especialidades-dropdown"}),Object(M.jsx)(C.a.Menu,{children:Object(M.jsx)(C.a.Item,{onClick:function(){console.log(R),R.current&&R.current.show(!0)},children:"Importar"})})]})})]}),Object(M.jsxs)(De.a,{children:[Object(M.jsx)(u.a,{className:"mb-2",children:Object(M.jsx)(Be,{onSearch:function(e){E(e)}})}),Object(M.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:x.size,onChange:function(e){var t=e.target.value;p((function(e){return{current:1,size:parseInt(t)}}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"Nombre"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(S.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(S.isError){var e,t,a=S.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var r=S.data.data.records;return 0==r.length?Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:t+1}),Object(M.jsx)("td",{children:e.nombre}),Object(M.jsx)("td",{children:Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:we.b,variant:"link",id:"dropdown-especialidad-".concat(e.id)}),Object(M.jsxs)(C.a.Menu,{children:[Object(M.jsxs)(C.a.Item,{as:m.b,replace:!0,to:{pathname:"/clinica/configuracion/especialidades/".concat(e.id,"/editar"),state:{especialidad:e}},children:[Object(M.jsx)(c.d,{}),Object(M.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(M.jsx)(C.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&I.mutate(e.id)},children:"Eliminar"})]})]})})]},e.id)}))}()})]}),"success"===S.status?Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")}),Object(M.jsx)(Me.b,{current:x.current,total:Math.ceil((a-x.size)/x.size)+1,onChange:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}):null,Object(M.jsx)(qe,{modalRef:R})]})},Qe=function(){var e,t,a,i=Object(n.i)().id,c=Object(n.g)(),o=(c.location.state,Object(r.useRef)(!1)),l=Object(z.h)(),u=l.handleSubmit,O=l.register,m=l.setValue,x=l.formState,p=Object(L.a)((function(e){var t=e.nombre;return i?ze(parseInt(i),t):Pe(t)}),{onSuccess:function(){o.current||c.replace("/clinica/configuracion/especialidades")}}),f=Object(h.a)(["especialidades.cargar",i],(function(){return ke(parseInt(i))}),{enabled:!!i&&!(null===(e=c.location.state)||void 0===e?void 0:e.especialidad),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),v=(null===(t=f.data)||void 0===t?void 0:t.data)||(null===(a=c.location.state)||void 0===a?void 0:a.especialidad);Object(r.useEffect)((function(){v&&m("nombre",v.nombre)}),[v]);return Object(M.jsxs)(K.a,{show:!0,centered:!0,onHide:function(){c.replace("/clinica/configuracion/especialidades")},children:[Object(M.jsx)(K.a.Header,{children:i?"Editar":"Registrar"}),Object(M.jsx)(K.a.Body,{children:function(){var e,t,a;if(f.isFetching)return Object(M.jsx)(d.a,{animation:"border",children:"Cargando"});var r,n,i=f.error;return i?Object(M.jsx)(k.a,{variant:"danger",children:(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||i.message}):Object(M.jsxs)(j.a,{id:"especialidad-form",onSubmit:u((function(e){p.mutate(e)})),children:["error"==p.status||"success"==p.status?Object(M.jsx)(k.a,{variant:p.isError?"danger":"success",children:p.isError?(null===(e=p.error.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||p.error.message:"Guardado"}):null,Object(M.jsxs)(j.a.Group,{children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!x.errors.nombre},O("nombre",{required:Ue.a()}))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=x.errors.nombre)||void 0===a?void 0:a.message})]})]})}()}),Object(M.jsxs)(K.a.Footer,{children:[i?null:Object(M.jsxs)(b.a,{type:"submit",form:"especialidad-form",onClick:function(){o.current=!0},children:[p.isLoading&&o.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(M.jsxs)(b.a,{type:"submit",form:"especialidad-form",onClick:function(){o.current=!1},children:[p.isLoading&&!o.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]})},He=Object(r.forwardRef)((function(e,t){var a,r,n,i=Object(z.h)({mode:"onBlur",defaultValues:{archivo:null,separador:",",formatoSaltoLinea:"UNIX",aggrement:!1}}),c=i.register,o=i.formState,l=i.handleSubmit,O=Object(L.a)((function(t){var a=t.file,r=t.options;return e.import(a,r)}));return Object(M.jsxs)(oe.a,Object(s.a)(Object(s.a)({ref:t},e),{},{children:[Object(M.jsx)(K.a.Header,{children:"Importar Datos"}),Object(M.jsx)(K.a.Body,{children:Object(M.jsxs)(j.a,{id:"importar-especialidades-form",onSubmit:l((function(e){var t=e.archivo,a=e.separador,r=e.formatoSaltoLinea;O.mutate({file:t[0],options:{separator:a,format:r}})})),children:[O.data?Object(M.jsx)(k.a,{variant:O.isError?"danger":"success",children:O.isError?"Error":"Importacion existosa"}):null,Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Archivo"}),Object(M.jsx)(u.a,{className:"d-flex align-items-center",sm:"auto",children:Object(M.jsx)(j.a.File,Object(s.a)(Object(s.a)({isInvalid:!!o.errors.archivo},c("archivo",{required:Ue.a()})),{},{feedback:null===(a=o.errors.archivo)||void 0===a?void 0:a.message}))})]}),Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Separador"}),Object(M.jsxs)(u.a,{xs:"auto",children:[Object(M.jsx)(j.a.Control,Object(s.a)({className:"text-center",maxLength:1,style:{width:"2.5rem"},isInvalid:!!o.errors.separador},c("separador",{required:Ue.a()}))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(r=o.errors.separador)||void 0===r?void 0:r.message})]})]}),Object(M.jsxs)(j.a.Group,{as:De.a,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:4,children:"Salto de linea"}),Object(M.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(M.jsx)(j.a.Check,Object(s.a)({inline:!0,type:"radio",label:"DOS",value:"DOS"},c("formatoSaltoLinea"))),Object(M.jsx)(j.a.Check,Object(s.a)({inline:!0,type:"radio",label:"UNIX",value:"UNIX"},c("formatoSaltoLinea")))]})]}),Object(M.jsx)(j.a.Check,Object(s.a)({label:"Entiendo los riesgos y he revisado cuidadosamente el contenido del archivo.",isInvalid:!!o.errors.aggrement,feedback:null===(n=o.errors.aggrement)||void 0===n?void 0:n.message},c("aggrement",{required:Ue.a()})))]})}),Object(M.jsxs)(K.a.Footer,{children:[Object(M.jsxs)(b.a,{variant:"danger",type:"submit",form:"importar-especialidades-form",children:[O.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Importar"]}),Object(M.jsx)(b.a,{children:"Cancelar"})]})]}))})),We=function(e,t){return R.apiClient.get("/prestaciones",{params:{filter:{nombre:t||void 0},page:e}})},Ke=function(e){return R.apiClient.get("prestaciones/".concat(e))},Je=function(e){return R.apiClient.post("prestaciones",{nombre:e})},$e=function(e,t){return R.apiClient.put("prestaciones/".concat(e),{nombre:t})},Ye=function(e){return R.apiClient.delete("prestaciones/".concat(e))},Ze=function(e,t,a){var r=new FormData;return r.append("archivo",e,e.name),r.append("separador",t),r.append("formato",a),R.apiClient.post("/prestaciones/importar",r,{headers:{"Content-Type":"multipart/form-data"}})},et=function(e){var t=Object(z.h)(),a=t.register,r=t.handleSubmit;return Object(M.jsx)(j.a,{onSubmit:r((function(t){var a=t.nombre;e.onSearch(a)})),children:Object(M.jsxs)(j.a.Row,{className:"flex-nowrap",children:[Object(M.jsxs)(u.a,{children:[Object(M.jsx)(j.a.Label,{htmlFor:"nombre",srOnly:!0,children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({id:"nombre",style:{minWidth:"10rem"}},a("nombre")))]}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{className:"ml-2",type:"submit",children:Object(M.jsx)(c.j,{})})})]})})},tt=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)({current:1,size:10}),o=Object(l.a)(i,2),x=o[0],p=o[1],f=Object(r.useState)(""),v=Object(l.a)(f,2),g=v[0],E=v[1],R=Object(r.useRef)(null),S=Object(h.a)(["buscarPrestaciones",x,g],(function(){return We(x,g)}),{refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(e){var t=e.data.meta;n(t.total)}}),I=Object(L.a)((function(e){return Ye(e)}));return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Servicios subrogados"}),Object(M.jsxs)(De.a,{className:"mb-2",children:[Object(M.jsx)(u.a,{className:"ml-auto pr-0",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){return S.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(C.a,{as:Te.a,children:[Object(M.jsx)(b.a,{as:m.b,replace:!0,to:"/clinica/configuracion/prestaciones/registrar",children:"Nuevo"}),Object(M.jsx)(C.a.Toggle,{split:!0,id:"especialidades-dropdown"}),Object(M.jsx)(C.a.Menu,{children:Object(M.jsx)(C.a.Item,{onClick:function(){console.log(R),R.current&&R.current.show(!0)},children:"Importar"})})]})})]}),Object(M.jsxs)(De.a,{children:[Object(M.jsx)(u.a,{className:"mb-2",children:Object(M.jsx)(et,{onSearch:function(e){E(e)}})}),Object(M.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:x.size,onChange:function(e){var t=e.target.value;p((function(e){return Object(s.a)(Object(s.a)({},e),{},{size:parseInt(t)})}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"Nombre"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(S.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(S.isError){var e,t,a=S.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}var r=S.data.data.records;return 0==r.length?Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:t+1}),Object(M.jsx)("td",{children:e.nombre}),Object(M.jsx)("td",{children:Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:we.b,variant:"link",id:"dropdown-prestacion-".concat(e.id)}),Object(M.jsxs)(C.a.Menu,{children:[Object(M.jsxs)(C.a.Item,{as:m.b,replace:!0,to:{pathname:"/clinica/configuracion/prestaciones/".concat(e.id,"/editar"),state:{prestacion:e}},children:[Object(M.jsx)(c.d,{}),Object(M.jsx)("span",{className:"ml-2 align-middle",children:"Editar"})]}),Object(M.jsxs)(C.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&I.mutate(e.id)},children:[Object(M.jsx)(c.m,{}),Object(M.jsx)("span",{className:"ml-2 align-middle",children:"Eliminar"})]})]})]})})]},e.id)}))}()})]}),Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(a," resultados")}),Object(M.jsx)(Me.b,{current:x.current,total:Math.ceil((a-x.size)/x.size)+1,onChange:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}),Object(M.jsx)(He,{ref:R,import:function(e,t){return Ze(e,t.separator,t.format)}})]})},at=function(){var e=Object(n.i)().id,t=Object(n.g)(),a=t.location.state,i=null===a||void 0===a?void 0:a.prestacion,c=Object(r.useRef)(!1),o=Object(z.h)(),l=o.handleSubmit,u=o.register,O=o.setValue,m=o.formState,x=Object(L.a)((function(t){var a=t.nombre;return e?$e(parseInt(e),a):Je(a)}),{onSuccess:function(){c.current||t.replace("/clinica/configuracion/prestaciones")}}),p=Object(h.a)(["verPrestacion",e],(function(){return Ke(parseInt(e))}),{enabled:!!e&&!i,refetchOnWindowFocus:!1,refetchOnReconnect:!1});Object(r.useEffect)((function(){var e,t;((null===(e=p.data)||void 0===e?void 0:e.data)||i)&&O("nombre",((null===(t=p.data)||void 0===t?void 0:t.data)||i).nombre)}),[p.data]);return Object(M.jsxs)(K.a,{show:!0,centered:!0,onHide:function(){t.replace("/clinica/configuracion/prestaciones")},children:[Object(M.jsx)(K.a.Header,{children:e?"Editar":"Registrar"}),Object(M.jsx)(K.a.Body,{children:function(){var e,t,a;if(p.isFetching)return Object(M.jsx)(d.a,{animation:"border",children:"Cargando"});var r,n,i=p.error;return i?Object(M.jsx)(k.a,{variant:"danger",children:(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||i.message}):Object(M.jsxs)(j.a,{id:"prestacion-form",onSubmit:l((function(e){x.mutate(e)})),children:["error"==x.status||"success"==x.status?Object(M.jsx)(k.a,{variant:x.isError?"danger":"success",children:x.isError?(null===(e=x.error.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||x.error.message:"Guardado"}):null,Object(M.jsxs)(j.a.Group,{children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!m.errors.nombre},u("nombre",{required:Ue.a()}))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=m.errors.nombre)||void 0===a?void 0:a.message})]})]})}()}),Object(M.jsxs)(K.a.Footer,{children:[e?null:Object(M.jsxs)(b.a,{type:"submit",form:"prestacion-form",onClick:function(){c.current=!0},children:[x.isLoading&&c.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(M.jsxs)(b.a,{type:"submit",form:"prestacion-form",onClick:function(){c.current=!1},children:[x.isLoading&&!c.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})]})},rt={index:function(e){return e.canAny([v.a.VER_MEDICOS,v.a.VER_MEDICOS_REGIONAL,v.a.REGISTRAR_MEDICOS,v.a.REGISTRAR_MEDICOS_REGIONAL])},register:function(e){return e.canAny([v.a.REGISTRAR_MEDICOS,v.a.REGISTRAR_MEDICOS_REGIONAL])},edit:function(e){return e.canAny([v.a.EDITAR_MEDICOS,v.a.EDITAR_MEDICOS_REGIONAL])},view:function(e){return e.canAny([v.a.VER_MEDICOS,v.a.VER_MEDICOS_REGIONAL])},baja:function(e){return e.canAny([v.a.BAJA_MEDICOS,v.a.BAJA_MEDICOS_REGIONAL])}},nt=function(e){return null},it=function(e){var t=e.medico,a=Object(D.b)("queryLoader"),n=Object(y.b)(),i=Object(L.a)((function(){return pe(t.id,1==t.estado?2:1)}),{onSuccess:function(){a.close(),n.setQueryData("listaMora.buscar",(function(e){return console.log(e),Object(s.a)(Object(s.a)({},e),{},{data:Object(s.a)(Object(s.a)({},e.data),{},{records:e.data.records.map((function(e){return e==t?Object(s.a)(Object(s.a)({},e),{},{estado:2}):e}))})})}))}});return Object(r.useEffect)((function(){"loading"==i.status?a.open({state:"loading"}):"error"==i.status&&a.open({state:"error",error:i.error})}),[i.status]),Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:x.j,variant:"link",id:"dropdown-medicos-".concat(t.id)}),Object(M.jsxs)(C.a.Menu,{children:[Object(M.jsx)(p.b,{authorize:rt.edit,children:Object(M.jsx)(C.a.Item,{as:m.b,to:{pathname:"/clinica/medicos/".concat(t.id,"/editar"),state:{medico:t}},children:Object(M.jsx)("span",{className:"align-middle",children:"Editar"})})}),Object(M.jsx)(p.b,{authorize:rt.baja,children:Object(M.jsx)(C.a.Item,{className:"text-danger",href:"#",onClick:function(){window.confirm("\xbfEst\xe1 seguro?")&&i.mutate()},children:1==t.estado?"Baja":"Alta"})})]})]})},ct=function(){var e,t,a,i=Object(n.h)().pathname,o=Object(r.useState)({current:1,size:10}),g=Object(l.a)(o,2),E=g[0],R=g[1],S=Object(f.a)(),I=Object(r.useState)((function(){var e={tipo:1};return S.can(v.a.VER_MEDICOS)||S.can(v.a.VER_MEDICOS_REGIONAL)&&(e.regionalId=S.regionalId),e})),_=Object(l.a)(I,2),N=_[0],A=_[1],C=Object(r.useState)(!1),y=Object(l.a)(C,2),L=(y[0],y[1]),D=Object(h.a)("medicos.buscar",(function(){return Oe(N,E)}),{enabled:rt.view(S),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),T=(null===(e=D.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0,w=Object(r.useRef)(!1);Object(r.useEffect)((function(){w.current?rt.view(S)&&D.refetch():w.current=!0}),[E,N,S]);return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Medicos"}),Object(M.jsx)("div",{className:"d-flex my-2",children:Object(M.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(M.jsxs)(p.b,{authorize:rt.view,children:[Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){D.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){L((function(e){return!e}))},children:Object(M.jsx)(c.f,{})})})]}),Object(M.jsx)(p.b,{authorize:rt.register,children:Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(b.a,{as:m.b,to:"".concat(i,"/registrar"),className:"d-flex align-items-center",children:[Object(M.jsx)(c.i,{className:"mr-1"}),Object(M.jsx)("span",{children:"Nuevo"})]})})})]})}),Object(M.jsxs)(p.b,{authorize:rt.view,children:[Object(M.jsxs)(De.a,{children:[Object(M.jsx)(u.a,{className:"mb-2",children:Object(M.jsx)(nt,{onFilter:function(e){A(e)}})}),Object(M.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:E.size,onChange:function(e){var t=e.target.value;R((function(e){return Object(s.a)(Object(s.a)({},e),{},{size:parseInt(t)})}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"C.I."}),Object(M.jsx)("th",{children:"Nombre"}),Object(M.jsx)("th",{children:"Especialidad"}),Object(M.jsx)("th",{children:"Estado"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(D.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(D.data){var r=D.data.data.records;return 0==r.length?Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",children:t+1}),Object(M.jsx)("td",{children:e.ciText}),Object(M.jsx)("td",{children:e.nombreCompleto}),Object(M.jsx)("td",{children:e.especialidad}),Object(M.jsx)("td",{children:e.estadoText}),Object(M.jsx)("td",{children:Object(M.jsx)(it,{medico:e})})]},e.id)}))}}()})]}),"success"===D.status?Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(T," resultados")}),Object(M.jsx)(x.f,{current:E.current,total:Math.ceil((T-E.size)/E.size)+1,onChange:function(e){return R((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}):null]})]})},ot=function(e){var t,a,n,i,o=e.isInvalid,l=e.feedback,d=e.filterBy,u=Object(ie.a)(e,["isInvalid","feedback","filterBy"]),O=Object(h.a)("especialidades.buscar",(function(){return Ge("")}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return Object(r.useEffect)((function(){var e;O.data&&(u.onLoad&&u.onLoad(null===(e=O.data)||void 0===e?void 0:e.data))}),[O.data]),Object(M.jsxs)(P.a,{hasValidation:!0,children:[Object(M.jsx)(be.a,Object(s.a)(Object(s.a)({className:O.isError||o?"is-invalid":"",isInvalid:O.isError||o},u),{},{filterBy:function(e,t){return!t.text||Object(S.a)(e.nombre,t)&&!(d&&("function"!==typeof d||!d(e,t)))},isLoading:O.isFetching,options:(null===(t=O.data)||void 0===t?void 0:t.data)||[],labelKey:"nombre"})),O.isError?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(P.a.Append,{children:Object(M.jsx)(b.a,{variant:"outline-danger",onClick:function(){return O.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:(null===(a=O.error)||void 0===a||null===(n=a.response)||void 0===n?void 0:n.message)||(null===(i=O.error)||void 0===i?void 0:i.message)})]}):null,l?Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:l}):null]})},st=F.g().shape({ci:F.f().label("n\xfamero de carnet").typeError("El ${path}No es un numero valido"),ciComplemento:F.j().transform((function(e){return""===e?null:e})).trim().uppercase().nullable().notRequired().length(2).matches(/[0-1A-Z]/),apellidoPaterno:F.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido")}),apellidoMaterno:F.j().label("apellido materno").trim().when("apellidoPaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido")}),nombres:F.j().label("nombres").trim().required().label("'Nombres'"),especialidad:F.b().length(1,"Debe indicar una especialidad"),regional:F.b().length(1,"Debe indicar una regional")},[["apellidoMaterno","apellidoPaterno"]]),lt=function(){var e,t,a,i,c,o,O,m,p,g,E=Object(n.i)().id,R=Object(n.g)(),S=Object(D.b)("queryLoader"),I=Object(f.a)(),_=Object(r.useState)([]),N=Object(l.a)(_,2),A=N[0],C=N[1],y=Object(r.useState)([]),T=Object(l.a)(y,2),w=T[0],G=T[1],P=Object(r.useRef)(!1),F=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(st),defaultValues:{especialidad:[],regional:[]}}),B=F.handleSubmit,U=F.register,q=F.clearErrors,X=F.setError,Q=F.setValue,H=F.control,W=F.formState,K=Object(L.a)((function(e){return E?xe(parseInt(E),{raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id):me({raiz:parseInt(e.ci),complemento:e.ciComplemento},e.apellidoPaterno,e.apellidoMaterno,e.nombres,e.especialidad[0].id,e.regional[0].id)}),{onSuccess:function(){P.current||R.replace("/clinica/medicos",{ignoreAuthorization:!0})},onError:function(e){var t;if(422==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var a,r=(null===(a=e.response)||void 0===a?void 0:a.data).errors;Object.keys(r).forEach((function(e){X(e,{type:"serverError",message:r[e]})}))}}}),J=Object(h.a)(["medicos.cargar",E],(function(){return he(parseInt(E))}),{enabled:!!E&&!(null===(e=R.location.state)||void 0===e?void 0:e.medico),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){S.close()},onError:function(e){S.open({state:"error",error:e})}}),$=(null===(t=J.data)||void 0===t?void 0:t.data)||(null===(a=R.location.state)||void 0===a?void 0:a.medico);return Object(r.useEffect)((function(){$&&(Q("ci",String($.ci.raiz)),Q("ciComplemento",$.ci.complemento),Q("apellidoPaterno",$.apellidoPaterno),Q("apellidoMaterno",$.apellidoMaterno),Q("nombres",$.nombres))}),[$]),Object(r.useEffect)((function(){J.isFetching&&S.open({state:"loading"})}),[J.isFetching]),Object(r.useEffect)((function(){$&&A.length&&Q("regional",A.filter((function(e){return e.id==$.regionalId})))}),[$,A]),Object(r.useEffect)((function(){$&&w.length&&Q("especialidad",w.filter((function(e){return e.id==$.especialidadId})))}),[$,w]),Object(M.jsxs)(j.a,{id:"medico-form",onSubmit:B((function(e){K.mutate(e)})),children:[Object(M.jsx)("h1",{style:{fontSize:"2rem"},children:E?"Actualizar":"Registrar Medico"}),"error"==K.status||"success"==K.status?Object(M.jsx)(k.a,{variant:K.isError?"danger":"success",children:K.isError?(null===(i=K.error.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message)||K.error.message:"Guardado"}):null,Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:4,xs:8,children:[Object(M.jsx)(j.a.Label,{children:"Carnet de identidad"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!W.errors.ci},U("ci"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=W.errors.ci)||void 0===o?void 0:o.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:2,xs:4,children:[Object(M.jsx)(j.a.Label,{children:"Complemento"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!W.errors.ciComplemento},U("ciComplemento"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(O=W.errors.ciComplemento)||void 0===O?void 0:O.message})]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!W.errors.ci},U("apellidoPaterno"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(m=W.errors.apellidoPaterno)||void 0===m?void 0:m.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!W.errors.ci},U("apellidoMaterno"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(p=W.errors.apellidoMaterno)||void 0===p?void 0:p.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Nombres"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!W.errors.ci},U("nombres"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(g=W.errors.nombres)||void 0===g?void 0:g.message})]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:8,children:[Object(M.jsx)(j.a.Label,{children:"Especialidad"}),Object(M.jsx)(z.a,{name:"especialidad",control:H,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(ot,{id:"medicos-form/especialidades-typeahead",onLoad:function(e){return G(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,className:r.error?"is-invalid":"",isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Regional"}),Object(M.jsx)(z.a,{name:"regional",control:H,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(x.i,{id:"medicos-form/regionales-typeahead",onLoad:function(e){return C(e)},filterBy:function(e){return I.can(v.a.REGISTRAR_MEDICOS)||I.regionalId==e.id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,className:r.error?"is-invalid":"",isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),Object(M.jsxs)("div",{className:"m-n1",children:[E?null:Object(M.jsxs)(b.a,{className:"m-1",type:"submit",onClick:function(){P.current=!0},children:[K.isLoading&&P.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar y continuar"]}),Object(M.jsxs)(b.a,{className:"m-1",type:"submit",onClick:function(){P.current=!1},children:[K.isLoading&&!P.current?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]}),Object(M.jsx)(b.a,{className:"m-1",variant:"secondary",type:"reset",onClick:function(){Q("regional",[]),Q("especialidad",[]),q()},children:"Limpiar"})]})]})},dt={index:function(e){return e.canAny([v.a.VER_PROVEEDORES,v.a.VER_PROVEEDORES_REGIONAL,v.a.REGISTRAR_PROVEEDORES,v.a.REGISTRAR_PROVEEDORES_REGIONAL])},register:function(e){return e.canAny([v.a.REGISTRAR_PROVEEDORES,v.a.REGISTRAR_PROVEEDORES_REGIONAL])},edit:function(e){return e.canAny([v.a.EDITAR_PROVEEDORES,v.a.EDITAR_PROVEEDORES_REGIONAL])},view:function(e){return e.canAny([v.a.VER_PROVEEDORES,v.a.VER_PROVEEDORES_REGIONAL])},baja:function(e){return e.canAny([v.a.BAJA_PROVEEDORES,v.a.BAJA_PROVEEDORES_REGIONAL])}},jt=function(e,t){return R.apiClient.get("proveedores",{params:{filter:e,page:t}})},ut=function(e){return R.apiClient.get("proveedores/".concat(e))},bt=function(e){return R.apiClient.post("proveedores",Object(S.c)(e))},Ot=function(e,t){return R.apiClient.put("proveedores/".concat(e),Object(S.c)(t))},ht=function(e,t){return R.apiClient.put("proveedores/".concat(e,"/contacto"),Object(S.c)(t))},mt=function(e,t){return R.apiClient.post("proveedores/".concat(e,"/contratos"),t)},xt=function(e){return null},pt=function(e){var t=e.proveedor;return Object(M.jsxs)(C.a,{children:[Object(M.jsx)(C.a.Toggle,{as:x.j,variant:"link",id:"dropdown-proveedores-".concat(t.id)}),Object(M.jsxs)(C.a.Menu,{children:[Object(M.jsx)(p.b,{authorize:dt.view,children:Object(M.jsx)(C.a.Item,{as:m.b,to:{pathname:"/clinica/proveedores/".concat(t.id),state:{proveedor:t}},children:Object(M.jsx)("span",{className:"align-middle",children:"Ver"})})}),Object(M.jsx)(p.b,{authorize:dt.edit,children:Object(M.jsx)(C.a.Item,{as:m.b,to:{pathname:"/clinica/proveedores/".concat(t.id,"/editar"),state:{proveedor:t}},children:Object(M.jsx)("span",{className:"align-middle",children:"Editar"})})})]})]})},ft=function(){var e,t,a,i=Object(n.h)().pathname,o=Object(r.useState)({current:1,size:10}),g=Object(l.a)(o,2),E=g[0],R=g[1],S=Object(f.a)(),I=Object(r.useState)((function(){var e={};return S.can(v.a.VER_PROVEEDORES)||S.can(v.a.VER_PROVEEDORES_REGIONAL)&&(e.regionalId=S.regionalId),e})),_=Object(l.a)(I,2),N=_[0],A=_[1],C=Object(r.useState)(!1),y=Object(l.a)(C,2),L=(y[0],y[1]),D=Object(h.a)(["proveedores.buscar"],(function(){return jt(N,E)}),{enabled:dt.view(S),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),T=(null===(e=D.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.total)||0,w=Object(r.useRef)(!1);Object(r.useEffect)((function(){w.current?dt.view(S)&&D.refetch():w.current=!0}),[E,N,S]);return Object(M.jsxs)("div",{className:"px-1",children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Proveedores"}),Object(M.jsx)("div",{className:"d-flex my-2",children:Object(M.jsxs)(j.a.Row,{className:"ml-auto flex-nowrap",children:[Object(M.jsxs)(p.b,{authorize:dt.view,children:[Object(M.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){D.refetch()},children:Object(M.jsx)(c.k,{})})}),Object(M.jsx)(u.a,{className:"pr-0",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){L((function(e){return!e}))},children:Object(M.jsx)(c.f,{})})})]}),Object(M.jsx)(p.b,{authorize:dt.register,children:Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsxs)(b.a,{as:m.b,to:"".concat(i,"/registrar"),className:"d-flex align-items-center",children:[Object(M.jsx)(c.i,{}),Object(M.jsx)("span",{className:"mr-2",children:"Nuevo"})]})})})]})}),Object(M.jsxs)(p.b,{authorize:dt.view,children:[Object(M.jsxs)(j.a.Row,{children:[Object(M.jsx)(u.a,{className:"mb-2",children:Object(M.jsx)(xt,{onFilter:function(e){A(e)}})}),Object(M.jsx)(u.a,{className:"mb-2",xs:"auto",children:Object(M.jsxs)("div",{className:"d-flex flex-row flex-nowrap align-items-center",children:[Object(M.jsx)("span",{children:"Mostrar"}),Object(M.jsxs)(j.a.Control,{className:"mx-2",as:"select",value:E.size,onChange:function(e){var t=e.target.value;R((function(e){return Object(s.a)(Object(s.a)({},e),{},{size:parseInt(t)})}))},children:[Object(M.jsx)("option",{value:10,children:"10"}),Object(M.jsx)("option",{value:20,children:"20"}),Object(M.jsx)("option",{value:30,children:"30"}),Object(M.jsx)("option",{value:50,children:"50"}),Object(M.jsx)("option",{value:100,children:"100"})]}),Object(M.jsx)("span",{children:"filas"})]})})]}),Object(M.jsxs)(O.a,{responsive:!0,children:[Object(M.jsx)("thead",{className:"text-center",children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{style:{width:1},children:"#"}),Object(M.jsx)("th",{children:"Nombre"}),Object(M.jsx)("th",{style:{width:1},children:"Tipo"}),Object(M.jsx)("th",{style:{width:1}})]})}),Object(M.jsx)("tbody",{children:function(){if(D.isFetching)return Object(M.jsx)("tr",{children:Object(M.jsxs)("td",{className:"bg-light text-center",colSpan:100,children:[Object(M.jsx)(d.a,{className:"mr-2",variant:"primary",animation:"border",size:"sm"}),"Cargando"]})});if(D.isError){var e,t,a=D.error;return Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-danger text-light text-center",colSpan:100,children:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message})})}if(D.data){var r=D.data.data.records;return 0==r.length?Object(M.jsx)("tr",{children:Object(M.jsx)("td",{className:"bg-light text-center",colSpan:100,children:"No se encontraron resultados"})}):r.map((function(e,t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",style:{lineHeight:"26px"},children:t+1}),Object(M.jsx)("td",{style:{lineHeight:"26px"},children:e.medico&&e.medico.nombreCompleto||e.nombre}),Object(M.jsx)("td",{style:{lineHeight:"26px"},children:e.tipo}),Object(M.jsx)("td",{children:Object(M.jsx)(pt,{proveedor:e})})]},e.id)}))}}()})]}),"success"===D.status?Object(M.jsxs)("div",{className:"d-flex flex-row",children:[Object(M.jsx)("span",{className:"mr-auto",children:"Se encontraron ".concat(T," resultados")}),Object(M.jsx)(x.f,{current:E.current,total:Math.ceil((T-E.size)/E.size)+1,onChange:function(e){return R((function(t){return Object(s.a)(Object(s.a)({},t),{},{current:e})}))}})]}):null]})]})},vt=function(){var e,t=Object(n.h)(),a=(t.pathname,t.state),i=Object(n.i)().id,c=(Object(f.a)(),Object(D.b)("queryLoader")),o=Object(h.a)(["cargar",i],(function(){return ut(parseInt(i))}),{enabled:!(null===a||void 0===a?void 0:a.proveedor),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onSuccess:function(){c.close()},onError:function(e){c.open({state:"error",error:e})}}),s=(null===(e=o.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.proveedor);Object(r.useEffect)((function(){o.isFetching&&c.open({state:"loading"})}),[o.isFetching]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h2",{style:{fontSize:"1.75rem"},children:"Proveedor"}),Object(M.jsxs)("div",{id:"general-info",children:[Object(M.jsx)(O.a,{children:function(){var e,t,a;return 1==(null===s||void 0===s?void 0:s.tipoId)?Object(M.jsxs)("tbody",{children:[Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",children:"Tipo"}),Object(M.jsx)("td",{children:"M\xe9dico especialista"})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",style:{width:"1px"},children:"Carnet de identidad"}),Object(M.jsx)("td",{children:null===s||void 0===s||null===(e=s.medico)||void 0===e?void 0:e.ciText})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",style:{width:"1px"},children:"Nombre"}),Object(M.jsx)("td",{children:null===s||void 0===s||null===(t=s.medico)||void 0===t?void 0:t.nombreCompleto})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",children:"Especialidad"}),Object(M.jsx)("td",{children:null===s||void 0===s||null===(a=s.medico)||void 0===a?void 0:a.especialidad})]})]}):2==(null===s||void 0===s?void 0:s.tipoId)?Object(M.jsxs)("tbody",{children:[Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",children:"Tipo"}),Object(M.jsx)("td",{children:"Empresa"})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",style:{width:"1px"},children:"NIT"}),Object(M.jsx)("td",{children:null===s||void 0===s?void 0:s.nit})]}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{scope:"row",style:{width:"1px"},children:"Nombre"}),Object(M.jsx)("td",{children:null===s||void 0===s?void 0:s.nombre})]})]}):null}()}),s?Object(M.jsx)(j.a.Row,{children:Object(M.jsx)(p.b,{authorize:dt.edit,children:Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{as:m.b,to:{pathname:"/clinica/proveedores/".concat(s.id,"/editar"),state:{proveedor:s}},children:"Editar"})})})}):null]})]})},gt=a(442),Et=a.n(gt),Rt=F.g().shape({nit:F.f().label("NIT").emptyStringTo().typeError("El ${path} no es un numero valido").required(),nombre:F.j().required().max(150),regional:F.b().length(1,"Debe indicar una regional")}),St=function(e){var t,a,i=e.proveedor,c=e.onSubmit,o=Object(n.i)().id,O=Object(n.g)(),h=Object(f.a)(),m=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(Rt),defaultValues:{tipo:2,nit:null===i||void 0===i?void 0:i.nit,nombre:null===i||void 0===i?void 0:i.nombre,regional:[]}}),p=m.control,g=m.formState,E=m.handleSubmit,R=m.setValue,S=m.register,I=g.errors,_=Object(r.useState)([]),N=Object(l.a)(_,2),A=N[0],C=N[1],y=Object(L.a)((function(e){return Ot(parseInt(o),{tipoId:e.tipo,nit:e.nit,nombre:e.nombre,regionalId:e.regional[0].id})}),{onSuccess:function(e){var t=e.data;O.replace("/clinica/proveedores/".concat(t.id))}});return Object(r.useEffect)((function(){i&&A.length&&R("regional",A.filter((function(e){return e.id==i.regionalId})))}),[i,A]),Object(M.jsxs)(j.a,{id:"proveedor-form",onSubmit:E(c||function(e){y.mutate(e)}),children:[Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"NIT"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!I.nit},S("nit"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=I.nit)||void 0===t?void 0:t.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:8,children:[Object(M.jsx)(j.a.Label,{children:"Nombre"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!I.nombre},S("nombre"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=I.nombre)||void 0===a?void 0:a.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Regional"}),Object(M.jsx)(z.a,{name:"regional",control:p,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(x.i,{id:"proveedor-form/regionales-typeahead",onLoad:function(e){return C(e)},filterBy:function(e){return!!h.can(v.a.REGISTRAR_PROVEEDORES)||(!(!h.can(v.a.REGISTRAR_PROVEEDORES_REGIONAL)||h.regionalId!=e.id)||(!(!o||!h.can(v.a.EDITAR_PROVEEDORES))||!(!o||!h.can(v.a.EDITAR_PROVEEDORES_REGIONAL)||h.regionalId!=e.id)))},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),c?null:Object(M.jsxs)(b.a,{type:"submit",children:[y.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},It=F.g().shape({nit:F.f().label("NIT").emptyStringToNull().typeError("El ${path} no es un numero valido").nullable().notRequired(),ci:F.f().label("n\xfamero de carnet").emptyStringToNull().typeError("El ${path} no es un numero valido").nullable().required(),ciComplemento:F.j().transform((function(e){return""===e?null:e})).trim().uppercase().nullable().notRequired().length(2).matches(/[0-1A-Z]/),apellidoPaterno:F.j().label("apellido paterno").trim().when("apellidoMaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido").max(50)}),apellidoMaterno:F.j().label("apellido materno").trim().when("apellidoPaterno",{is:function(e){return!e},then:F.j().required("Debe proporcionar al menos un apellido").max(50)}),nombres:F.j().label("nombres").trim().required().label("'Nombres'").max(50),especialidad:F.b().length(1,"Debe indicar una especialidad"),regional:F.b().length(1,"Debe indicar una regional")},[["apellidoMaterno","apellidoPaterno"]]),_t=function(e){var t,a,i,c,o,O,h,m,p,g,E,R,S,I,_=e.proveedor,N=e.onSubmit,A=Object(n.i)().id,C=Object(n.g)(),y=Object(f.a)(),D=Object(r.useState)([]),T=Object(l.a)(D,2),w=T[0],G=T[1],P=Object(r.useState)([]),F=Object(l.a)(P,2),B=F[0],U=F[1],q=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(It),defaultValues:{tipo:1,nit:null===_||void 0===_?void 0:_.nit,ci:null===_||void 0===_||null===(t=_.medico)||void 0===t||null===(a=t.ci)||void 0===a?void 0:a.raiz,ciComplemento:null===_||void 0===_||null===(i=_.medico)||void 0===i?void 0:i.ci.complemento,apellidoPaterno:(null===_||void 0===_||null===(c=_.medico)||void 0===c?void 0:c.apellidoPaterno)||"",apellidoMaterno:(null===_||void 0===_||null===(o=_.medico)||void 0===o?void 0:o.apellidoMaterno)||"",nombres:(null===_||void 0===_||null===(O=_.medico)||void 0===O?void 0:O.nombres)||"",especialidad:[],regional:[]}}),X=q.handleSubmit,Q=q.register,H=q.setValue,W=q.control,K=q.formState,J=q.watch,$=K.errors,Y=Object(L.a)((function(e){return Ot(parseInt(A),{tipoId:1,nit:e.nit,ci:e.ci,ciComplemento:e.ciComplemento,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,nombres:e.nombres,especialidadId:e.especialidad[0].id,regionalId:e.regional[0].id})}),{onSuccess:function(e){var t=e.data;C.replace("/clinica/proveedores/".concat(t.id))}});return Object(r.useEffect)((function(){_&&w.length&&H("especialidad",w.filter((function(e){var t;return e.id==(null===(t=_.medico)||void 0===t?void 0:t.especialidadId)})))}),[_,w]),Object(r.useEffect)((function(){_&&B.length&&H("regional",B.filter((function(e){return e.id==_.regionalId})))}),[_,B]),console.log("Errors",$,J()),Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(j.a,{id:"proveedor-form",onSubmit:X(N||function(e){Y.mutate(e)}),children:["error"==Y.status||"success"==Y.status?Object(M.jsx)(k.a,{variant:Y.isError?"danger":"success",children:Y.isError?(null===(h=Y.error.response)||void 0===h||null===(m=h.data)||void 0===m?void 0:m.message)||Y.error.message:"Guardado"}):null,Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:4,xs:8,children:[Object(M.jsx)(j.a.Label,{children:"NIT"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.nit},Q("nit"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(p=$.nit)||void 0===p?void 0:p.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,xs:8,children:[Object(M.jsx)(j.a.Label,{children:"Carnet de identidad"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.ci},Q("ci"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(g=$.ci)||void 0===g?void 0:g.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:2,xs:4,children:[Object(M.jsx)(j.a.Label,{children:"Complemento"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.ciComplemento},Q("ciComplemento"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(E=$.ciComplemento)||void 0===E?void 0:E.message})]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Paterno"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.apellidoPaterno},Q("apellidoPaterno"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(R=$.apellidoPaterno)||void 0===R?void 0:R.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Apellido Materno"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.apellidoMaterno},Q("apellidoMaterno"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(S=$.apellidoMaterno)||void 0===S?void 0:S.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Nombres"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!$.nombres},Q("nombres"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(I=$.nombres)||void 0===I?void 0:I.message})]})]}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,md:8,children:[Object(M.jsx)(j.a.Label,{children:"Especialidad"}),Object(M.jsx)(z.a,{name:"especialidad",control:W,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(ot,{id:"medicos-form/especialidades-typeahead",align:"left",onLoad:function(e){return G(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,className:K.errors.especialidad?"is-invalid":"",isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]}),Object(M.jsxs)(j.a.Group,{as:u.a,md:4,children:[Object(M.jsx)(j.a.Label,{children:"Regional"}),Object(M.jsx)(z.a,{name:"regional",control:W,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(x.i,{id:"proveedor-form/regionales-typeahead",onLoad:function(e){return U(e)},filterBy:function(e){return!!y.can(v.a.REGISTRAR_PROVEEDORES)||(!(!y.can(v.a.REGISTRAR_PROVEEDORES_REGIONAL)||y.regionalId!=e.id)||(!(!A||!y.can(v.a.EDITAR_PROVEEDORES))||!(!A||!y.can(v.a.EDITAR_PROVEEDORES_REGIONAL)||y.regionalId!=e.id)))},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})})}})]})]}),N?null:Object(M.jsxs)(b.a,{type:"submit",children:[Y.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})})},Nt=function(e){var t,a,i,c=Object(r.useState)(0),o=Object(l.a)(c,2),s=o[0],d=o[1],b=Object(n.i)().id,O=Object(n.g)();console.log("Proveedor",b);var m=Object(D.b)("queryLoader"),x=Object(h.a)(["proveedor.cargar",b],(function(){return ut(parseInt(b))}),{enabled:!!b&&!(null===(t=O.location.state)||void 0===t?void 0:t.proveedor),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(){m.close()},onError:function(e){m.open({state:"error",error:e})}}),p=(null===(a=x.data)||void 0===a?void 0:a.data)||(null===(i=O.location.state)||void 0===i?void 0:i.proveedor);Object(r.useEffect)((function(){p&&d(p.tipoId)}),[p]),Object(r.useEffect)((function(){x.isLoading&&m.open({state:"loading"})}),[x.isLoading]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:b?"Actualizacion de Proveedor":"Registro de Proveedor"}),Object(M.jsxs)(j.a.Group,{as:j.a.Row,children:[Object(M.jsx)(j.a.Label,{column:!0,sm:"auto",children:"Tipo de proveedor"}),Object(M.jsxs)(u.a,{className:"d-flex",xs:"auto",children:[Object(M.jsx)(j.a.Check,{disabled:!!b,inline:!0,type:"radio",label:"M\xe9dico",value:1,checked:1==s,onChange:function(e){e.target.checked&&!b&&d(1)}}),Object(M.jsx)(j.a.Check,{disabled:!!b,inline:!0,type:"radio",label:"Empresa",value:2,checked:2==s,onChange:function(e){e.target.checked&&!b&&d(2)}})]})]}),1==s?Object(M.jsx)(_t,{proveedor:p,onSubmit:e.onSubmit}):2==s?Object(M.jsx)(St,{proveedor:p,onSubmit:e.onSubmit}):null]})},At=F.g().shape({municipio:F.b().label("municipio").length(1,"Debe indicar un municipio"),direccion:F.j().label("direcci\xf3n").trim().required(),ubicacion:F.e().label("ubicaci\xf3n").required(),telefono1:F.f().label("telefono 1").typeError("No es un numero v\xe1lido").emptyStringTo().required(),telefono2:F.f().label("telefono 2").emptyStringToNull().typeError("No es un numero v\xe1lido").nullable().notRequired()}),Ct=function(e){var t,a,i,c,o,O,m=Object(n.i)().id,p=Object(n.g)(),f=Object(D.b)("queryLoader"),v=Object(r.useState)([]),g=Object(l.a)(v,2),E=g[0],R=g[1],S=Object(r.useState)([]),I=Object(l.a)(S,2),_=I[0],N=I[1],A=Object(r.useState)([]),C=Object(l.a)(A,2),y=C[0],T=C[1],w=Object(z.h)({mode:"onBlur",resolver:Object(V.a)(At),defaultValues:{departamento:[],provincia:[],municipio:[],ubicacion:[-17.78629,-63.18117]}}),G=w.handleSubmit,P=w.register,F=w.control,B=w.watch,U=w.setError,q=w.setValue,X=w.formState.errors;console.log("Proveedor",m);var Q=Object(h.a)(["proveedor.cargar",m],(function(){return ut(parseInt(m))}),{enabled:!!m&&!(null===(t=p.location.state)||void 0===t?void 0:t.proveedor),refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onSuccess:function(){f.close()},onError:function(e){f.open({state:"error",error:e})}}),H=Object(L.a)((function(e){var t,a;if(Array.isArray(e.ubicacion)){var r=e.ubicacion,n=Object(l.a)(r,2);t=n[0],a=n[1]}else{var i=e.ubicacion;t=i.lat,a=i.lng}return ht(parseInt(m),{municipioId:e.municipio[0].id,direccion:e.direccion,ubicacion:{latitud:t,longitud:a},telefono1:e.telefono1,telefono2:e.telefono2})}),{onSuccess:function(e){var t=e.data;p.replace("/clinica/proveedores/".concat(t.id))},onError:function(e){var t;if(422==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var a,r=(null===(a=e.response)||void 0===a?void 0:a.data).errors;Object.keys(r).forEach((function(e){U(e,{type:"serverError",message:r[e]})}))}}}),W=(null===(a=p.location.state)||void 0===a?void 0:a.proveedor)||(null===(i=Q.data)||void 0===i?void 0:i.data);Object(r.useEffect)((function(){q("direccion",(null===W||void 0===W?void 0:W.direccion)||"");var e=(null===W||void 0===W?void 0:W.ubicacion)||{latitud:-17.78629,longitud:-63.18117},t=e.latitud,a=e.longitud;q("ubicacion",[t,a]),q("telefono1",null===W||void 0===W?void 0:W.telefono1),q("telefono2",null===W||void 0===W?void 0:W.telefono2)}),[W]),Object(r.useEffect)((function(){if(W){var e=y.filter((function(e){return e.id==(null===W||void 0===W?void 0:W.municipioId)})),t=_.filter((function(e){return y.some((function(t){return t.provinciaId==e.id}))})),a=E.filter((function(e){return _.some((function(t){return t.departamentoId==e.id}))}));q("municipio",e),q("provincia",t),q("departamento",a)}}),[W,E,_,y]),Object(r.useEffect)((function(){Q.isLoading&&f.open({state:"loading"})}),[Q.isLoading]);return console.log("Errors",X,B()),Object(M.jsxs)(j.a,{id:"proveedor-contacto-form",onSubmit:G(e.onSubmit||function(e){H.mutate(e)}),children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Informaci\xf3n de contacto"}),function(){if(H.isSuccess)return Object(M.jsx)(k.a,{variant:"success",children:"La operacion se realiz\xf3 exitosamente"});if(H.isError){var e,t,a=H.error;return Object(M.jsx)(k.a,{variant:"danger",children:a?(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message:""})}return null}(),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Departamento"}),Object(M.jsx)(z.a,{name:"departamento",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(x.a,{id:"contacto-form/departamentos",onLoad:function(e){R(e)},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:function(e){a.onChange(e),q("provincia",[]),q("municipio",[])},onBlur:a.onBlur})}})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Provincia"}),Object(M.jsx)(z.a,{name:"provincia",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(x.g,{id:"contacto-form/provincias",onLoad:function(e){N(e)},filterBy:function(e){var t=B("departamento");return!!t.length&&e.departamentoId==t[0].id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:function(e){a.onChange(e),q("municipio",[])},onBlur:a.onBlur})}})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Municipio"}),Object(M.jsx)(z.a,{name:"municipio",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsx)(x.d,{id:"contacto-form/municipios",onLoad:function(e){T(e)},filterBy:function(e){var t=B("provincia");return!!t.length&&e.provinciaId==t[0].id},feedback:null===(t=r.error)||void 0===t?void 0:t.message,isInvalid:!!r.error,selected:a.value,onChange:a.onChange,onBlur:a.onBlur})}})]})]}),Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,children:[Object(M.jsx)(j.a.Label,{children:"Direccion"}),Object(M.jsx)(j.a.Control,Object(s.a)({as:"textarea",isInvalid:!!X.direccion},P("direccion"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(c=X.direccion)||void 0===c?void 0:c.message})]})}),Object(M.jsx)(j.a.Row,{children:Object(M.jsxs)(j.a.Group,{as:u.a,children:[Object(M.jsx)(j.a.Label,{children:"Ubicaci\xf3n"}),Object(M.jsx)(z.a,{name:"ubicacion",control:F,render:function(e){var t,a=e.field,r=e.fieldState;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(x.c,{isInvalid:!!r.error,center:a.value||[-17.78629,-63.18117],value:a.value,onChange:a.onChange}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]})}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Tel\xe9fono 1"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!X.telefono1},P("telefono1"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(o=X.telefono1)||void 0===o?void 0:o.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:4,children:[Object(M.jsx)(j.a.Label,{children:"Tel\xe9fono 2"}),Object(M.jsx)(j.a.Control,Object(s.a)({isInvalid:!!X.telefono2},P("telefono2"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(O=X.telefono2)||void 0===O?void 0:O.message})]})]}),e.onSubmit?null:Object(M.jsxs)(b.a,{children:[H.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,Object(M.jsx)("span",{className:"ml-2 align-middle",children:"Guardar"})]})]})},yt=function(){var e,t=Object(z.i)(),a=(t.register,t.control),r=(t.trigger,t.formState.errors),n=t.watch,i=Object(z.g)({name:"prestaciones",control:a}),c=i.fields,o=i.append,s=i.remove;return Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{style:{fontSize:"1.25rem"},children:"Servicios subrogados"}),Object(M.jsx)("div",{className:r.prestaciones?"is-invalid":"",children:c.map((function(e,t){return Object(M.jsx)(j.a.Row,{className:"py-2 border-bottom",children:Object(M.jsx)(j.a.Group,{as:u.a,xs:12,children:Object(M.jsx)(z.a,{name:"prestaciones.".concat(t,".prestacion"),control:a,rules:{required:Ue.a()},render:function(e){var a,r=e.field,i=e.fieldState;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(u.a,{children:[Object(M.jsx)(Se,{id:"proveedor-contrato/prestaciones.".concat(t),className:i.error?"is-invalid":"",isInvalid:!!i.error,filterBy:function(e){return!n("prestaciones").some((function(t){var a;return(null===(a=t.prestacion)||void 0===a?void 0:a.id)==e.id}))},selected:r.value?[r.value]:[],onChange:function(e){r.onChange(e.length?e[0]:0)},onBlur:r.onBlur}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=i.error)||void 0===a?void 0:a.message})]}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{variant:"danger",onClick:function(){s(t)},children:"Quitar"})})]})})}})})},e.id)}))}),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(e=r.prestaciones)||void 0===e?void 0:e.message}),Object(M.jsx)(j.a.Row,{className:"py-2",children:Object(M.jsx)(u.a,{className:"ml-auto",xs:"auto",children:Object(M.jsx)(b.a,{onClick:function(){o({})},children:"Agregar"})})})]})},Lt=F.g().shape({inicio:F.c().label("fecha de inicio").emptyStringTo().typeError("No es una fecha valida").required(),fin:F.c().label("fecha de finalizacion").emptyStringTo(null).typeError("No es una fecha valida").min(F.h("inicio"),"La fecha de finalizacion debe ser mayor a la fecha de inicio").nullable().notRequired(),prestaciones:F.b().min(1,"Debe seleccionar al menos una prestaci\xf3n")}),Dt=function(e){var t,a,r=e.onSubmit,i=Object(n.i)().idProveedor,c=Object(n.g)(),o=(Object(f.a)(),Object(z.h)({mode:"onBlur",resolver:Object(V.a)(Lt),defaultValues:{prestaciones:[{}]}})),l=o.handleSubmit,O=o.register,h=o.formState,m=(o.control,h.errors);console.log("Errors",m);var x=Object(L.a)((function(e){return mt(parseInt(i)||c.location.state.proveedor.id,{inicio:e.inicio,fin:e.fin,prestacion_ids:e.prestaciones.map((function(e){return e.prestacion.id}))})}),{onSuccess:function(e){e.data;c.replace("/clinica/proveedores/".concat(parseInt(i)||c.location.state.proveedor.id))}});return Object(M.jsx)(z.b,Object(s.a)(Object(s.a)({},o),{},{children:Object(M.jsxs)(j.a,{id:"proveedor-contrato-form",onSubmit:l(r||function(e){console.log(e),x.mutate(e)}),children:[Object(M.jsx)("h1",{style:{fontSize:"1.75rem"},children:"Contrato"}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsxs)(j.a.Group,{as:u.a,sm:6,children:[Object(M.jsx)(j.a.Label,{children:"Inicio"}),Object(M.jsx)(j.a.Control,Object(s.a)({type:"date",isInvalid:!!h.errors.inicio},O("inicio"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(t=h.errors.inicio)||void 0===t?void 0:t.message})]}),Object(M.jsxs)(j.a.Group,{as:u.a,sm:6,children:[Object(M.jsx)(j.a.Label,{children:"Fin"}),Object(M.jsx)(j.a.Control,Object(s.a)({type:"date",isInvalid:!!h.errors.fin},O("fin"))),Object(M.jsx)(j.a.Control.Feedback,{type:"invalid",children:null===(a=h.errors.fin)||void 0===a?void 0:a.message})]})]}),Object(M.jsx)(j.a.Row,{children:Object(M.jsx)(u.a,{children:Object(M.jsx)(yt,{})})}),r?null:Object(M.jsxs)(b.a,{type:"submit",children:[x.isLoading?Object(M.jsx)(d.a,{className:"mr-1",animation:"border",size:"sm"}):null,Object(M.jsx)("span",{className:"align-middle",children:"Guardar"})]})]})}))},Tt=function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Nt,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(M.jsx)(j.a.Row,{children:Object(M.jsx)(u.a,{className:"ml-auto",xs:"auto",children:Object(M.jsx)(b.a,{type:"submit",form:"proveedor-form",children:"Siguiente"})})})]})},Mt=function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ct,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{onClick:e.previousStep,children:"Anterior"})}),Object(M.jsx)(u.a,{className:"ml-auto",xs:"auto",children:Object(M.jsx)(b.a,{variant:"link",onClick:e.nextStep,children:"Omitir"})}),Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{type:"submit",form:"proveedor-contacto-form",children:"Siguiente"})})]})]})},wt=function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Dt,{onSubmit:function(t){e.onSubmit(t),e.nextStep()}}),Object(M.jsxs)(j.a.Row,{children:[Object(M.jsx)(u.a,{xs:"auto",children:Object(M.jsx)(b.a,{onClick:e.previousStep,children:"Anterior"})}),Object(M.jsx)(u.a,{className:"ml-auto",xs:"auto",children:Object(M.jsx)(b.a,{type:"submit",form:"proveedor-contrato-form",children:"Siguiente"})})]})]})},Gt=function(e){var t=e.generalInfo,a=e.contactInfo,r=e.contractInfo,i=Object(n.g)();var c=Object(L.a)((function(){var e,n,i,c=1==t.tipo?{tipoId:t.tipo,nit:t.nit,ci:t.ci,ciComplemento:t.ciComplemento,apellidoPaterno:t.apellidoPaterno,apellidoMaterno:t.apellidoMaterno,nombres:t.nombres,especialidadId:t.especialidad[0].id,regionalId:t.regional[0].id}:{tipoId:t.tipo,nit:t.nit,nombre:t.nombre,regionalId:t.regional[0].id};if(a){var o,s;if(Array.isArray(a.ubicacion)){var d=a.ubicacion,j=Object(l.a)(d,2);o=j[0],s=j[1]}else{var u=a.ubicacion;o=u.lat,s=u.lng}i={municipioId:a.municipio[0].id,direccion:a.direccion,ubicacion:{latitud:o,longitud:s},telefono1:a.telefono1,telefono2:a.telefono2}}var b={inicio:r.inicio.toISOString().split("T")[0],fin:null===(e=r.fin)||void 0===e||null===(n=e.toISOString())||void 0===n?void 0:n.split("T")[0],prestacionIds:r.prestaciones.map((function(e){return e.prestacion.id}))};return bt({general:c,contacto:i,contrato:b})}),{onSuccess:function(e){var t=e.data;i.push("/clinica/proveedores/".concat(t.id))}});return Object(M.jsxs)("div",{children:["Fin.",Object(M.jsxs)(b.a,{onClick:function(){c.mutate()},children:[c.isLoading?Object(M.jsx)(d.a,{animation:"border",size:"sm"}):null,"Guardar"]})]})},kt=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(),c=Object(l.a)(i,2),o=c[0],s=c[1],d=Object(r.useState)(),j=Object(l.a)(d,2),u=j[0],b=j[1];return Object(M.jsxs)(Et.a,{children:[Object(M.jsx)(Tt,{onSubmit:function(e){n(e)}}),Object(M.jsx)(Mt,{onSubmit:function(e){s(e)}}),Object(M.jsx)(wt,{onSubmit:function(e){b(e)}}),Object(M.jsx)(Gt,{generalInfo:a,contactInfo:o,contractInfo:u})]})},Pt=function(){var e=Object(n.j)().url,t=Object(f.a)(),a=Object(r.useMemo)((function(){var a=[];return a.push({id:"lista-mora",path:"".concat(e,"/lista-mora"),title:"Lista de mora",icon:Object(M.jsx)(X,{})}),Z.index(t)&&a.push({id:"atencion-externa",path:"".concat(e,"/atencion-externa"),title:"Atenci\xf3n externa",icon:Object(M.jsx)(o.a,{})}),rt.index(t)&&a.push({id:"medicos",path:"".concat(e,"/medicos"),title:"Medicos",icon:Object(M.jsx)(c.o,{})}),dt.index(t)&&a.push({id:"proveedores",path:"".concat(e,"/proveedores"),title:"Proveedores",icon:Object(M.jsx)(c.g,{})}),a.push({id:"configuracion",title:"Configuraci\xf3n",icon:Object(M.jsx)(c.c,{}),items:[{id:"configuracion/especialidades",path:"".concat(e,"/configuracion/especialidades"),title:"Especialidades",icon:Object(M.jsx)(c.c,{})},{id:"configuracion/prestaciones",path:"".concat(e,"/configuracion/prestaciones"),title:"Servicios subrogados",icon:Object(M.jsx)(c.c,{})}]}),a}),[t]);return Object(M.jsxs)(i.a,{sidebar:{items:a},children:[Object(M.jsxs)(n.d,{children:[Object(M.jsx)(n.b,{exact:!0,path:"".concat(e,"/lista-mora/agregar"),children:Object(M.jsx)(U,{})}),Object(M.jsx)(n.b,{path:"".concat(e,"/lista-mora"),children:Object(M.jsx)(G,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/atencion-externa"),authorize:Z.index,children:Object(M.jsx)(ee,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/atencion-externa/registrar"),authorize:Z.register,children:Object(M.jsx)(Le,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/medicos"),authorize:rt.index,children:Object(M.jsx)(ct,{})}),Object(M.jsx)(p.c,{exact:!0,path:["".concat(e,"/medicos/registrar"),"".concat(e,"/medicos/:id/editar")],authorize:function(t,a){return a=="".concat(e,"/medicos/registrar")?rt.register(t):rt.edit(t)},children:Object(M.jsx)(lt,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/proveedores"),authorize:dt.index,children:Object(M.jsx)(ft,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/proveedores/:id"),authorize:dt.view,children:Object(M.jsx)(vt,{})}),Object(M.jsx)(p.c,{exact:!0,path:["".concat(e,"/proveedores/registrar")],authorize:dt.register,children:Object(M.jsx)(kt,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/proveedores/:id/editar"),authorize:dt.edit,children:Object(M.jsx)(Nt,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/proveedores/:id/editar-contacto"),authorize:function(e){return dt.register(e)||dt.edit(e)},children:Object(M.jsx)(Ct,{})}),Object(M.jsx)(p.c,{exact:!0,path:"".concat(e,"/proveedores/:idProveedor/contratos/registrar"),authorize:function(e){return dt.register(e)||dt.edit(e)},children:Object(M.jsx)(Dt,{})}),Object(M.jsx)(n.b,{path:"".concat(e,"/configuracion/especialidades"),children:Object(M.jsx)(Xe,{})}),Object(M.jsx)(n.b,{path:"".concat(e,"/configuracion/prestaciones"),children:Object(M.jsx)(tt,{})})]}),Object(M.jsx)(n.b,{exact:!0,path:["".concat(e,"/configuracion/prestaciones/registrar"),"".concat(e,"/configuracion/prestaciones/:id/editar")],children:Object(M.jsx)(at,{})}),Object(M.jsx)(n.b,{exact:!0,path:["".concat(e,"/configuracion/especialidades/registrar"),"".concat(e,"/configuracion/especialidades/:id/editar")],children:Object(M.jsx)(Qe,{})})]})};t.default=Pt}}]);
//# sourceMappingURL=5.c52df296.chunk.js.map