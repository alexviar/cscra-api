{"version":3,"file":"static/js/454.f010df27.chunk.js","mappings":"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","sources":["commons/components/icons/FcDebt.tsx","apps/clinica/mora/services/EmpleadorService.ts","apps/clinica/mora/services/ListaMoraService.ts","apps/clinica/mora/components/ListaMoraFilterForm.tsx","apps/clinica/mora/policies/index.ts","apps/clinica/mora/policies/ListaMoraPolicy.ts","apps/clinica/mora/policies/Permisos.ts","apps/clinica/mora/components/RowOptions.tsx","apps/clinica/mora/components/ListaMoraIndex.tsx","apps/clinica/mora/components/EmpleadorChooser.tsx","apps/clinica/mora/components/ListaMoraItemForm.tsx","apps/clinica/solicitud_atencion_externa/services/SolicitudesAtencionExternaService.ts","apps/clinica/medicos/services/MedicoService.ts","apps/clinica/medicos/policies/Permisos.ts","apps/clinica/medicos/policies/index.ts","apps/clinica/medicos/policies/MedicoPolicy.ts","apps/clinica/medicos/components/MedicosFilterForm.tsx","apps/clinica/medicos/components/RowOptions.tsx","apps/clinica/medicos/components/MedicosIndex.tsx","apps/clinica/medicos/components/MedicoView.tsx","apps/clinica/medicos/components/MedicoForm.tsx","apps/clinica/medicos/components/MedicosTypeahead.tsx","apps/clinica/proveedores/policies/index.ts","apps/clinica/proveedores/policies/ProveedorPolicy.ts","apps/clinica/proveedores/policies/Permisos.ts","apps/clinica/proveedores/services/ProveedoresService.ts","apps/clinica/proveedores/components/ProveedoresFilterForm.tsx","apps/clinica/proveedores/components/RowOptions.tsx","apps/clinica/proveedores/components/ProveedoresIndex.tsx","apps/clinica/proveedores/components/ProveedorView.tsx","apps/clinica/proveedores/components/ProveedorEmpresaFieldset.tsx","apps/clinica/proveedores/components/ProveedorMedicoFieldset.tsx","apps/clinica/proveedores/components/ProveedorFieldset.tsx","apps/clinica/proveedores/components/ContactoFieldset.tsx","apps/clinica/proveedores/components/ProveedorForm.tsx","apps/clinica/proveedores/components/ProveedoresTypeahead.tsx","apps/clinica/solicitud_atencion_externa/policies/index.ts","apps/clinica/solicitud_atencion_externa/policies/SolicitudAtencionExternaPolicy.ts","apps/clinica/solicitud_atencion_externa/policies/Permisos.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaFilterForm.tsx","apps/clinica/solicitud_atencion_externa/components/RowOptions.tsx","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaIndex.tsx","apps/clinica/solicitud_atencion_externa/components/AseguradoChooser.tsx","apps/clinica/solicitud_atencion_externa/services/AseguradosService.ts","apps/clinica/solicitud_atencion_externa/components/AseguradoCard.tsx","apps/clinica/solicitud_atencion_externa/utils/EstadosAfi.ts","apps/clinica/solicitud_atencion_externa/utils/EstadosEmp.ts","apps/clinica/solicitud_atencion_externa/components/SolicitudAtencionExternaForm.tsx","apps/clinica/ClinicaApp.tsx","commons/components/IndexTemplate.tsx","commons/click-outside-handler/useOnClickOutside.ts","commons/click-outside-handler/ClickOutsideHandler.tsx","commons/components/layouts/Sidebar.tsx","commons/components/layouts/SidebarLayout.tsx"],"sourcesContent":["import { GenIcon, IconBaseProps } from \"react-icons/lib\";\r\n\r\nexport const FcDebt = function FcDebt (props: IconBaseProps) {\r\n  //@ts-ignore\r\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"version\":\"1\",\"viewBox\":\"0 0 48 48\",\"enableBackground\":\"new 0 0 48 48\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M10,12c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S12.8,12,10,12z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M2,22v8l3,2l1,14h8l1-14l3-2v-8c0-4.4-3.6-8-8-8h0C5.6,14,2,17.6,2,22z\"}},{\"tag\":\"g\",\"attr\":{},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M22.4,40.4c-0.6,2.5-1,3.6-2.4,3.6c-0.6,0-1.2-0.5-1.9-1.1c-1-0.8-2.2-1.9-4.1-1.9v2c1.1,0,1.9,0.7,2.8,1.4 c0.9,0.7,1.9,1.6,3.2,1.6c3.1,0,3.8-2.9,4.4-5.2C25,38.2,25.4,37,27,37v-2C23.7,35,22.9,38.1,22.4,40.4z\"}},{\"tag\":\"polygon\",\"attr\":{\"points\":\"14.4,40 10,40 10,44 14.1,44\"}}]},\r\n    //@ts-ignore\r\n    {\"tag\":\"circle\",\"attr\":{\"cx\":\"36\",\"cy\":\"36\",\"r\":\"10\"}},\r\n    //@ts-ignore\r\n    {\"tag\":\"path\",\"attr\":{\"fill\":\"#fff\",\"d\":\"M35,34c0.1,0.2,0.1,0.3,0.3,0.4c0.1,0.1,0.3,0.2,0.5,0.4c0.2,0.1,0.5,0.2,0.8,0.3c0.5,0.2,0.9,0.4,1.3,0.6 c0.4,0.2,0.7,0.4,1,0.7c0.3,0.3,0.5,0.6,0.7,0.9c0.2,0.4,0.2,0.8,0.2,1.3c0,0.4-0.1,0.8-0.2,1.2c-0.1,0.4-0.3,0.7-0.6,0.9 c-0.3,0.3-0.6,0.5-0.9,0.6c-0.4,0.2-0.8,0.3-1.2,0.3v1.5h-1.2v-1.5c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.7-0.4-1-0.6 c-0.3-0.3-0.5-0.6-0.7-1.1c-0.2-0.4-0.3-0.9-0.3-1.5h2.2c0,0.4,0,0.7,0.1,0.9c0.1,0.2,0.2,0.4,0.4,0.6c0.2,0.1,0.3,0.2,0.5,0.3 c0.2,0.1,0.4,0.1,0.6,0.1c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.1-0.3,0.1-0.5 c0-0.2,0-0.4-0.1-0.6c-0.1-0.2-0.1-0.3-0.3-0.4c-0.1-0.1-0.3-0.3-0.5-0.4c-0.2-0.1-0.4-0.2-0.7-0.3c-0.5-0.2-0.9-0.4-1.3-0.6 c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-0.9c-0.2-0.4-0.2-0.8-0.2-1.3c0-0.4,0.1-0.8,0.2-1.2c0.1-0.3,0.3-0.7,0.6-0.9 c0.3-0.3,0.6-0.5,0.9-0.6c0.4-0.2,0.8-0.3,1.2-0.3v-1.6h1.2v1.6c0.4,0.1,0.8,0.2,1.2,0.4c0.4,0.2,0.6,0.4,0.9,0.7 c0.2,0.3,0.4,0.6,0.6,1c0.1,0.4,0.2,0.9,0.2,1.4h-2.2c0-0.6-0.1-1-0.4-1.3c-0.2-0.3-0.6-0.4-1-0.4c-0.2,0-0.4,0-0.6,0.1 c-0.2,0.1-0.3,0.2-0.4,0.3C35.1,32.7,35,32.8,35,33s-0.1,0.3-0.1,0.5C34.9,33.7,34.9,33.9,35,34z\"}}\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"d\":\"M34.36918731037488,32.43804760584102 c0.2049905379011744,-0.1362195187343288 0.4575917813793953,-0.25921384147503324 0.7498686128384906,-0.353112733029765 v2.2456382797173764 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,-0.353112733029765 C33.88911269580633,33.657410676453175 33.79653632385097,33.358521246997256 33.79653632385097,33.207754012669945 c0,-0.1507672343273157 0.09257637195536918,-0.449656663783222 0.5726509865239253,-0.7697064068289254 zM37.764095121938205,39.620651549978284 v-2.2456382797173764 c0.2909543118597318,0.09389889155473126 0.5448780749373151,0.21689321429543612 0.7498686128384906,0.353112733029765 c0.4813971341679188,0.3213722626450675 0.5726509865239253,0.6189391725016105 0.5726509865239253,0.7697064068289254 c0,0.1507672343273157 -0.09257637195536918,0.449656663783222 -0.5726509865239253,0.7697064068289254 a3.04840767653036,3.04840767653036 0 0 1 -0.7498686128384906,0.353112733029765 z\"}},\r\n    // //@ts-ignore\r\n    // {\"tag\":\"path\",\"attr\":{\"fill-rule\":\"evenodd\", \"clip-rule\": \"evenodd\",\"d\":\"M36.456693151701,46.34645688299114 a10.519685476315033,10.519685476315033 0 1 0 0,-21.039370952630065 a10.519685476315033,10.519685476315033 0 0 0 0,21.039370952630065 zm1.314960684539379,-17.094488899011928 a1.314960684539379,1.314960684539379 0 1 0 -2.629921369078758,0 v0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 -2.203874107288,0.8705039731650693 C31.988456745636196,30.874629468700803 31.196850413543487,31.89372399921882 31.196850413543487,33.19685003759734 c0,1.3018110776939853 0.7916063320927069,2.320905608212004 1.741007946330138,2.9534016974754462 c0.6311811285789025,0.4207874190526019 1.385968561504506,0.7166535730739616 2.203874107288,0.8705039731650693 v2.5523386886909347 c-0.5141496276548978,-0.16700000693650122 -0.8941732654867787,-0.4168425369989835 -1.108511857066697,-0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 -1.9855906336544624,1.7225984967465875 c0.7390079047111311,0.8534094842660581 1.8580394472541435,1.414897696564372 3.094102490721159,1.6476457377278424 V42.401574829373004 a1.314960684539379,1.314960684539379 0 1 0 2.629921369078758,0 v-0.120976382977623 a5.963346704386084,5.963346704386084 0 0 0 2.203874107288,-0.8705039731650693 C40.92492955776581,40.77891334465141 41.71653588985852,39.75981881413339 41.71653588985852,38.45669277575487 c0,-1.3018110776939853 -0.7916063320927069,-2.320905608212004 -1.741007946330138,-2.9534016974754462 A5.963346704386084,5.963346704386084 0 0 0 37.77165383624038,34.63278710511435 V32.08044841642341 c0.5141496276548978,0.16700000693650122 0.8941732654867787,0.4168425369989835 1.108511857066697,0.662740185007847 a1.314960684539379,1.314960684539379 0 1 0 1.9869055943390022,-1.7225984967465875 c-0.7403228653956706,-0.8534094842660581 -1.8580394472541435,-1.414897696564372 -3.0954174514056985,-1.6476457377278424 V29.25196798397921 z\"}}\r\n  ]})(props);\r\n}","import { apiClient , PaginatedResponse, Page} from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Empleador = {\r\n  id: string\r\n  numeroPatronal: string\r\n  nombre: string\r\n  // regionalId: number\r\n}\r\n\r\ntype Filter = {\r\n  numeroPatronal?: string\r\n  regionalId?: number\r\n}\r\n\r\nexport const EmpleadorService = {\r\n  buscar: (page: Page, filter: Filter) => {\r\n    return apiClient.get<PaginatedResponse<Empleador>>(\"empleadores\", {\r\n      params: {\r\n        filter: keysToUnderscore(filter),\r\n        page: page\r\n      }\r\n    })\r\n  }\r\n}","import { apiClient, Page, PaginatedResponse} from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type ListaMoraFilter = {\r\n  _busqueda?: string,\r\n  numeroPatronal?: string,\r\n  nombre?: string,\r\n  regionalId?: number\r\n}\r\n\r\nexport type ListaMoraItem = {\r\n  id: number,\r\n  empleadorId: string\r\n  numeroPatronal: string\r\n  nombre: string\r\n  regionalId: number\r\n  regional?: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n}\r\n\r\nexport const ListaMoraService = {\r\n  buscar: (filter: ListaMoraFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<ListaMoraItem>>(\"/lista-mora\", {\r\n      params: keysToUnderscore({\r\n        page, filter\r\n      })\r\n    })\r\n  },\r\n  agregar: (idEmpleador: string) =>{\r\n    return apiClient.post<ListaMoraItem>(\"lista-mora\", {\r\n      empleador_id: idEmpleador\r\n    })\r\n  },\r\n  quitar: (id: number) =>{\r\n    return apiClient.delete(`lista-mora/${id}`)\r\n  }\r\n}","import { Button, Col, Form } from \"react-bootstrap\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { ListaMoraFilter as Filter } from \"../services\"\r\n\r\ntype Inputs = {\r\n  numeroPatronal: string\r\n  nombre: string\r\n}\r\n\r\ntype Props = {\r\n  onApply: (filter: Filter) => void\r\n}\r\n\r\nexport const ListaMoraFilterForm = (props: Props)=>{\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>()\r\n\r\n  return <Form className=\"p-2 border rounded\" onSubmit={handleSubmit((inputs)=>{\r\n    const filter: Filter = {}\r\n    if(inputs.nombre) filter.nombre = inputs.nombre\r\n    if(inputs.numeroPatronal) filter.numeroPatronal = inputs.numeroPatronal\r\n    props.onApply(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label htmlFor=\"numeroPatronal\">N.º Patronal</Form.Label>\r\n        <Form.Control id=\"numeroPatronal\" {...register(\"numeroPatronal\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label htmlFor=\"nombre\">Nombre</Form.Label>\r\n        <Form.Control id=\"nombre\" {...register(\"nombre\")} />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { ListaMoraPolicy }from \"./ListaMoraPolicy\"\r\n\r\nexport const listaMoraPolicy = new ListaMoraPolicy()","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class ListaMoraPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }  \r\n\r\n  view = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.viewByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.VER_LISTA_DE_MORA)) return true\r\n  }\r\n\r\n  viewByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.VER_LISTA_DE_MORA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  register = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.registerByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.AGREGAR_A_LA_LISTA_DE_MORA)) return true\r\n  }\r\n\r\n  registerByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.AGREGAR_A_LA_LISTA_DE_MORA_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  remove = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.removeByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.QUITAR_DE_LA_LISTA_DE_MORA)) return true\r\n  }\r\n\r\n  removeByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.QUITAR_DE_LA_LISTA_DE_MORA_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n}","export const VER_LISTA_DE_MORA = \"Ver la lista de mora\";\r\nexport const VER_LISTA_DE_MORA_REGIONAL = \"Ver la lista de mora (misma regional)\";\r\nexport const AGREGAR_A_LA_LISTA_DE_MORA = \"Agregar a la lista de mora\";\r\nexport const AGREGAR_A_LA_LISTA_DE_MORA_MISMA_REGIONAL = \"Agregar a la lista de mora (misma regional)\";\r\nexport const QUITAR_DE_LA_LISTA_DE_MORA = \"Quitar de la lista de mora\";\r\nexport const QUITAR_DE_LA_LISTA_DE_MORA_MISMA_REGIONAL = \"Quitar de la lista de mora (misma regional)\";","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { useMutation, useQueryClient, QueryKey } from \"react-query\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { ListaMoraItem, ListaMoraService } from \"../services\"\r\nimport { listaMoraPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  item: ListaMoraItem\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({item, queryKey}: Props) => {\r\n\r\n  const modal = useModal(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const quitar = useMutation(()=>{\r\n    return ListaMoraService.quitar(item.id)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.filter((i: any)=>{\r\n              return i !== item\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(quitar.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(quitar.status == \"error\"){\r\n      console.error(quitar.error)\r\n      modal.open({\r\n        state: \"error\",\r\n        error: quitar.error\r\n      })\r\n    }\r\n  }, [quitar.status])\r\n\r\n  return <Dropdown>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-${item.id}`}\r\n    />\r\n    \r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(user)=> listaMoraPolicy.remove(user, {regionalId: item.regionalId})}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n          if (window.confirm(\"¿Está seguro?\")) {\r\n            quitar.mutate()\r\n          }\r\n        }}>Quitar</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>  \r\n}","import { useMemo, useRef, useState } from \"react\"\r\nimport { Breadcrumb, Button } from \"react-bootstrap\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useUser } from \"../../../../commons/auth\"\r\nimport { ListaMoraService, ListaMoraFilter as Filter } from \"../services\"\r\nimport { ListaMoraFilterForm } from \"./ListaMoraFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { listaMoraPolicy } from \"../policies\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\nexport default () => {\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const user = useUser();\r\n\r\n  const [filter, setFilter] = useState<Filter>(()=>{\r\n    const defaultFilter: Filter = {}\r\n    if(listaMoraPolicy.viewByRegionalOnly(user)){\r\n      defaultFilter.regionalId = user?.regionalId;\r\n    }\r\n    return defaultFilter\r\n  })\r\n\r\n  const canView = !!superUserPolicyEnhancer(listaMoraPolicy.view)(user)\r\n  const queryKey = [\"listaMora.buscar\", filter, page]\r\n  const buscar = useQuery(queryKey, () => {\r\n    return ListaMoraService.buscar(filter, page)\r\n  }, {\r\n    enabled: canView,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n\r\n  const updateFilter = (filter: Filter)=>{\r\n    buscar.remove()\r\n    setFilter(oldFilter => ({...oldFilter, ...filter}));\r\n    setPage(page => ({...page, current: 1}))\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let i = 0; i < page.size; i++){\r\n      rows.push(<tr key={i}>\r\n        <th scope=\"row\">\r\n          {i + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Lista de mora</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={listaMoraPolicy}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      total={totalRef.current}\r\n      page={page}\r\n      data={buscar.data?.data.records}\r\n      onSearch={(search)=>updateFilter({_busqueda: search})}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      renderData={(item, index)=>{\r\n        return <tr key={item.id}>\r\n          <td>\r\n            {(page.current - 1)*page.size + index + 1}\r\n          </td>\r\n          <td>\r\n            {item.empleadorId}\r\n          </td>\r\n          <td>\r\n            {item.numeroPatronal}\r\n          </td>\r\n          <td>\r\n            {item.nombre}\r\n          </td>\r\n          <td>\r\n            {item.regional!.nombre}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions item={item} queryKey={queryKey} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>ID Empleador</th>\r\n          <th>N.º Patronal</th>\r\n          <th style={{minWidth: 250}}>Razón social</th>\r\n          <th>Regional</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      }}\r\n      renderFilterForm={()=>{\r\n        return <ListaMoraFilterForm onApply={updateFilter} />\r\n      }}\r\n      renderCreateButton={()=>{\r\n        return <Button as={Link}\r\n          to=\"/clinica/lista-mora/agregar\"\r\n        >\r\n          <FaPlus className=\"mr-1\" />\r\n          Agregar\r\n        </Button>\r\n      }}\r\n      onPageChange={(page)=>setPage(page)}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n    />\r\n  </div>\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { Empleador } from \"../services\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  empleadores: Empleador[]\r\n  onSelect: (Empleador: Empleador) => void\r\n  title?: string\r\n}\r\n\r\nexport const EmpleadorChooser = (props: Props) => {\r\n  return <Modal {...props} >\r\n    <Modal.Header>\r\n      {props.title||\"Empleadores\"}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>ID</th>\r\n            <th>Número patronal</th>\r\n            <th>Razón social</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.empleadores.length ? props.empleadores.map((empleador, index)=>{\r\n            return <tr key={empleador.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{empleador.id}</td>\r\n              <td>{empleador.numeroPatronal}</td>\r\n              <td>{empleador.nombre}</td>\r\n              <td><Button onClick={()=>{\r\n                props.onSelect(empleador)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </Modal>\r\n}","import { useEffect, useState } from 'react'\r\nimport { Alert, Breadcrumb, Button, Col, Form, InputGroup, Spinner } from 'react-bootstrap'\r\nimport { FieldError, useForm } from 'react-hook-form'\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport { Empleador, EmpleadorService, ListaMoraItem, ListaMoraService } from '../services'\r\nimport { useUser } from '../../../../commons/auth'\r\nimport { listaMoraPolicy } from '../policies'\r\nimport { EmpleadorChooser } from './EmpleadorChooser'\r\n\r\ntype Inputs = {\r\n  empleador: Empleador\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  empleador: yup.object().when(\"$empleador\", function(empleador:Empleador, schema: yup.ObjectSchema<any>){\r\n    if(!empleador) return schema.test(\"\", \"\", function(value: any, context: any){\r\n      return context.createError({\r\n        message: \"Debe indicar un empleador\"\r\n      })\r\n    })\r\n    return schema\r\n  })\r\n})\r\n\r\nexport default ()=>{\r\n  const [empleador, setEmpleador] = useState<Empleador|null>(null)\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    watch,\r\n    setError,\r\n    clearErrors,\r\n    setValue,\r\n    reset,\r\n    trigger,\r\n    formState\r\n  } = useForm<Inputs>({\r\n    context: {empleador},\r\n    resolver: yupResolver(schema)\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n\r\n  const user = useUser()\r\n\r\n  const [showChooser, setShowChooser] = useState(false)\r\n\r\n  const history = useHistory()\r\n\r\n  const queryClient = useQueryClient()\r\n  \r\n  const buscarEmpleador = useQuery([\"empleadores\", \"buscar\", \"porPatronal\"], ()=>{\r\n    return EmpleadorService.buscar({current: 1, size: 10}, {\r\n      numeroPatronal: watch(\"empleador.numeroPatronal\"),\r\n      regionalId: listaMoraPolicy.registerByRegionalOnly(user) ? user!.regionalId : undefined\r\n    })\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({data}) =>{\r\n      if(data.records.length == 1){\r\n        setEmpleador(data.records[0])\r\n      }\r\n      else {\r\n        setShowChooser(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const guardar = useMutation((empleadorId: string)=>{\r\n    return ListaMoraService.agregar(empleadorId)\r\n  }, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(\"listaMora.buscar\")\r\n      history.replace(\"/clinica/lista-mora\")\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    const error = guardar.error as any\r\n    if(error?.response?.status == 422) {\r\n      const {errors} = error?.response?.data\r\n      Object.keys(errors).forEach((key: any)=>{\r\n        let localKey = key\r\n        if(key == \"empleadorId\") localKey = \"numeroPatronal\"\r\n        setError(localKey, {type: \"serverError\", message: errors[key]})\r\n      })\r\n    }\r\n  }, [guardar.isError])\r\n\r\n  useEffect(()=>{\r\n    if(empleador) {\r\n      setValue(\"empleador\", empleador)\r\n    }\r\n  }, [empleador])\r\n  const renderAlert = ()=>{\r\n    if((formErrors.empleador as FieldError)?.message){\r\n      return <Alert variant=\"danger\">\r\n        {(formErrors.empleador as FieldError)?.message}\r\n      </Alert>\r\n    }\r\n    if(guardar.isSuccess){\r\n      return <Alert variant=\"success\">\r\n        La operacion se realizó exitosamente\r\n      </Alert>\r\n    }\r\n    if(guardar.error && (guardar.error as any).response?.status != 422){\r\n      return <Alert variant=\"danger\">\r\n        Ocurrio un error al realizar la solicitud\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  const { onChange: onChangeNumeroPatronal, ...numeroPatronalField} = register(\"empleador.numeroPatronal\")\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/clinica/lista-mora\"}}>Lista de mora</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Registro</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <Form id=\"form-empleador-mora\"\r\n      onSubmit={handleSubmit(({empleador})=>{\r\n        guardar.mutate(empleador.id)\r\n    })}>\r\n      {renderAlert()}\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={4}>\r\n          <Form.Label>\r\n            Nº Patronal\r\n          </Form.Label>\r\n          <InputGroup hasValidation>\r\n            <Form.Control\r\n              className=\"text-uppercase\"\r\n              isInvalid={buscarEmpleador.isError}\r\n              {...numeroPatronalField}\r\n              onChange={(e)=>{\r\n                setEmpleador(null)\r\n                onChangeNumeroPatronal(e)\r\n              }}\r\n            />\r\n            <InputGroup.Append >\r\n              <Button variant={buscarEmpleador.isError ? \"danger\" : \"outline-secondary\"} onClick={()=>{\r\n                  clearErrors()\r\n                  buscarEmpleador.refetch()\r\n              }}>\r\n                {buscarEmpleador.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n              </Button>\r\n            </InputGroup.Append>\r\n            <Form.Control.Feedback type=\"invalid\">Ocurrio un error al realizar la busqueda</Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} sm={4}>\r\n            <Form.Label>\r\n              ID\r\n            </Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"empleador.id\")}\r\n            />\r\n        </Form.Group>\r\n        <Form.Group as={Col} sm={8}>\r\n            <Form.Label>\r\n              Nombre\r\n            </Form.Label>\r\n            <Form.Control\r\n              readOnly\r\n              {...register(\"empleador.nombre\")}\r\n            />\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Button type=\"subimt\">\r\n        {guardar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\" /> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n    <EmpleadorChooser show={showChooser}\r\n      empleadores={buscarEmpleador.data?.data.records || []}\r\n      onSelect={(empleador)=>{\r\n        setEmpleador(empleador)\r\n        setShowChooser(false)\r\n      }}\r\n      onHide={()=>setShowChooser(false)}\r\n    />\r\n  </div>\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type SolicitudesAtencionExternaFilter = {\r\n  _busqueda?: string\r\n  desde?: string\r\n  hasta?: string\r\n  numeroPatronal?: string\r\n  matricula?: string\r\n  medicoId?: number\r\n  proveedorId?: string\r\n  regionalId?: number\r\n}\r\n\r\nexport type SolicitudAtencionExterna = {\r\n  id: number\r\n  numero: string\r\n  fecha: string\r\n  prestacion: string,\r\n  regionalId: number\r\n  paciente: {\r\n    matricula: string\r\n    nombreCompleto: string\r\n  }\r\n  titular: {\r\n    matricula: string\r\n    nombreCompleto: string\r\n  } | null\r\n  medico: {\r\n    id: number\r\n    nombreCompleto?: string\r\n    especialidad: string\r\n  },\r\n  proveedor: {\r\n    id: string\r\n    tipo: number\r\n    razonSocial: string\r\n    especialidad: string\r\n  }\r\n  empleador: {\r\n    nombre: string\r\n    numeroPatronal: string\r\n  }\r\n  regional: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n  urlDm11: string\r\n}\r\n\r\nexport const SolicitudesAtencionExternaService = {\r\n  buscar: (filter: SolicitudesAtencionExternaFilter, page: Page)=>{\r\n    return apiClient.get<PaginatedResponse<SolicitudAtencionExterna>>(\"solicitudes-atencion-externa\", {\r\n      params: keysToUnderscore({filter, page})\r\n    })\r\n  },\r\n  generarDm11: (solicitud_id: number) => {\r\n    return apiClient.put<{url: string}>(`solicitudes-atencion-externa/${solicitud_id}/generar-dm11`)\r\n  },\r\n  registrar: (regional_id: number, paciente_id: string, medico_id: number, proveedor_id: string, prestacion: string) => {\r\n    return apiClient.post(\"solicitudes-atencion-externa\", {\r\n      regional_id,\r\n      paciente_id,\r\n      medico_id,\r\n      proveedor_id,\r\n      prestacion\r\n    })\r\n  }\r\n}","import { apiClient, PaginatedResponse, Page } from \"../../../../commons/services\"\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Medico = {\r\n  id: number\r\n  ci: {\r\n    raiz: number\r\n    complemento: string | null\r\n    texto?: string\r\n  },\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombre: string\r\n  nombreCompleto?: string\r\n  especialidad: string\r\n  estado: number\r\n  regionalId: number\r\n  regional?: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n}\r\n\r\nexport type MedicoFilter = {\r\n  ci?: {\r\n    raiz: number,\r\n    complemento?: string\r\n  }\r\n  nombre?: string,\r\n  especialidad?: string\r\n  regionalId?: number\r\n  estado?: number\r\n  _busqueda?: string\r\n}\r\n\r\nexport const MedicosService = {\r\n  buscar: (page: Page, filter?: MedicoFilter) => {\r\n    return apiClient.get<PaginatedResponse<Medico>>(\"medicos\", {\r\n      params: keysToUnderscore({\r\n        filter,\r\n        page\r\n      })\r\n    })\r\n  },\r\n  load: (id: number) => {\r\n    return apiClient.get<Medico>(`medicos/${id!}`);\r\n  },\r\n  registrar: (medico: Omit<Medico, \"id\" | \"estado\">) => {\r\n    return apiClient.post<Medico>(\"medicos\", keysToUnderscore(medico))\r\n  },\r\n  actualizar: (medico: Omit<Medico, \"estado\">) => {\r\n    return apiClient.put<Medico>(`medicos/${medico.id}`, keysToUnderscore(medico))\r\n  },\r\n  cambiarEstado: (id: number, estado: number) => {\r\n    return apiClient.put(`medicos/${id}/actualizar-estado`, {\r\n      estado\r\n    })\r\n  }\r\n}","/**\r\n * Medicos\r\n */\r\nexport const VER_MEDICOS = \"Ver médicos\";\r\nexport const VER_MEDICOS_REGIONAL = \"Ver médicos (misma regional)\";\r\nexport const REGISTRAR_MEDICOS = \"Registrar médicos\";\r\nexport const REGISTRAR_MEDICOS_REGIONAL = \"Registrar médicos (misma regional)\";\r\nexport const ACTUALIZAR_MEDICOS = \"Actualizar médicos\";\r\nexport const ACTUALIZAR_MEDICOS_REGIONAL = \"Actualizar médicos (misma regional)\";\r\nexport const ACTUALIZAR_ESTADO_MEDICOS = \"Actualizar el estado de los médicos\";\r\nexport const ACTUALIZAR_ESTADO_MEDICOS_REGIONAL = \"Actualizar el estado de los médicos (misma regional)\";","import { MedicoPolicy } from \"./MedicoPolicy\";\r\n\r\nexport const medicoPolicy = new MedicoPolicy()","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class MedicoPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }  \r\n\r\n  view = (user: User, context?: {\r\n    regionalId: number\r\n  }) => { \r\n    const byRegionalOnly = this.viewByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.VER_MEDICOS)) return true\r\n  }\r\n\r\n  viewByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.VER_MEDICOS_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  register = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.registerByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.REGISTRAR_MEDICOS)) return true\r\n  }\r\n\r\n  registerByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.REGISTRAR_MEDICOS_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  edit = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.editByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_MEDICOS)) return true\r\n  }\r\n\r\n  editByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_MEDICOS_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  updateStatus = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.updateStatusByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_MEDICOS)) return true\r\n  }\r\n\r\n  updateStatusByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_MEDICOS_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n}","import { Button, Col, InputGroup, Form } from \"react-bootstrap\"\r\nimport { useForm, Controller } from \"react-hook-form\"\r\nimport { useUser } from \"../../../../commons/auth\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { MedicoFilter as Filter } from \"../services\"\r\nimport { medicoPolicy } from \"../policies\"\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\n\r\ntype Inputs = {\r\n  numCi?: string\r\n  compCi?: string\r\n  nombre?: string\r\n  especialidad?: string\r\n  regional: Regional[]\r\n  estado?: 1 | 2 | \"\"\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  numCi: yup.number().nonEmpty().nullable().when(\"compCi\", {\r\n    is: true,\r\n    then: (schema) => schema.required(),\r\n    otherwise: (schema) => schema.optional()\r\n  }),\r\n  compCi: yup.string().nonEmpty().uppercase().optional(),\r\n  nombre: yup.string().nonEmpty().uppercase().optional(),\r\n  especialidad: yup.string().nonEmpty().uppercase().optional(),\r\n  estado: yup.number().nonEmpty().optional()\r\n})\r\n\r\nexport const MedicosFilterForm = (props: Props) => {\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      regional: [],\r\n      estado: \"\"\r\n    }\r\n  })\r\n\r\n  const user = useUser()\r\n\r\n  if(!user) return null\r\n  \r\n  return <Form className=\"p-2 border rounded\" onSubmit={handleSubmit((data) => {\r\n    const filter: Filter = {}\r\n    if(data.numCi) {\r\n      filter.ci = {\r\n        raiz: parseInt(data.numCi)\r\n      }\r\n      if(data.compCi) filter.ci!.complemento = data.compCi\r\n    }\r\n    if(data.especialidad) filter.especialidad = data.especialidad\r\n    if(data.regional.length) filter.regionalId = data.regional[0].id\r\n    if(data.estado) filter.estado = data.estado\r\n    props.onFilter(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={6} lg={4} xl={3}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Carnet de identidad</Form.Label>\r\n          <Form.Row>\r\n            <Col xs={9}>\r\n              <Form.Control\r\n                aria-label=\"Número raiz\"\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formState.errors.numCi}\r\n                {...register(\"numCi\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.numCi?.message}</Form.Control.Feedback>\r\n            </Col>\r\n            <Col xs={3}>\r\n              <Form.Control\r\n                aria-label=\"Número complemento\"\r\n                className=\"text-uppercase\"\r\n                {...register(\"compCi\")}\r\n              />\r\n            </Col>\r\n          </Form.Row>\r\n        </fieldset>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={6} lg={4} xl={3}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"regional\"\r\n          render={({field: {ref, value, ...field}, fieldState})=>{\r\n            return <RegionalesTypeahead\r\n              className=\"text-uppercase\"\r\n              id=\"medico-filter-regional\"\r\n              selected={medicoPolicy.viewByRegionalOnly(user) ? [user.regional as Regional] : value}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} lg={4} xl={3}>\r\n        <Form.Label>Especialidad</Form.Label>\r\n        <Form.Control\r\n          className=\"text-uppercase\"\r\n          {...register(\"especialidad\")}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} lg={4} xl={3}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Estado</Form.Label>\r\n          <Controller\r\n            control={control}\r\n            name=\"estado\"\r\n            render={({field: {value, ...field}})=>{\r\n              console.log(value)\r\n              return <Form.Row>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Activos\"\r\n                    value={1}\r\n                    checked={value == 1}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Bajas\"\r\n                    value={2}\r\n                    checked={value == 2}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Todos\"\r\n                    value=\"\"\r\n                    checked={value === \"\"}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n              </Form.Row>\r\n            }}\r\n          />\r\n        </fieldset>\r\n      </Form.Group>\r\n    </Form.Row>\r\n\r\n    <Form.Row>\r\n      <Col xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\nimport { QueryKey, useMutation, useQueryClient } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Medico, MedicosService } from \"../services\"\r\nimport { medicoPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  medico: Medico,\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({medico, queryKey}: Props) => {\r\n\r\n  const modal = useModal(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cambiarEstado = useMutation(()=>{\r\n    return MedicosService.cambiarEstado(medico.id, medico.estado == 1 ? 2 : 1)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.invalidateQueries(\"medicos.buscar\", { inactive: true })\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.map((i: any)=>{\r\n              return i == medico ? {\r\n                ...i,\r\n                estado: medico.estado == 1 ? 2 : 1,\r\n                estadoText: medico.estado == 1 ? \"De baja\" : \"Activo\"\r\n              } : i\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(cambiarEstado.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(cambiarEstado.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: cambiarEstado.error\r\n      })\r\n    }\r\n  }, [cambiarEstado.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-medicos-${medico.id}`}\r\n    />\r\n    \r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(user) => medicoPolicy.view(user, {regionalId: medico.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/clinica/medicos/${medico.id}`,\r\n          state: {\r\n            medico\r\n          }\r\n        }} ><span className=\"align-middle\">Ver</span></Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(user)=>medicoPolicy.edit(user, {regionalId: medico.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/clinica/medicos/${medico.id}/editar`,\r\n          state: {\r\n            medico\r\n          }\r\n        }} ><span className=\"align-middle\">Editar</span></Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(user)=>medicoPolicy.updateStatus(user, {regionalId: medico.regionalId})}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" href=\"#\" onClick={() => {\r\n          // if (window.confirm(\"¿Está seguro?\")) {\r\n            cambiarEstado.mutate()\r\n          // }\r\n        }}>{medico.estado == 1 ? \"Baja\" : \"Alta\"}</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>  \r\n}","import { AxiosPromise } from \"axios\"\r\nimport { useMemo, useRef, useState } from \"react\"\r\nimport { Breadcrumb, Button } from \"react-bootstrap\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { useUser } from \"../../../../commons/auth\"\r\nimport { PaginatedResponse } from \"../../../../commons/services\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\nimport { Medico, MedicosService, MedicoFilter as Filter } from \"../services\"\r\nimport { medicoPolicy } from \"../policies\"\r\nimport { MedicosFilterForm } from \"./MedicosFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\n\r\nexport const MedicosIndex = () => {\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const user = useUser();\r\n  \r\n  const [filter, setFilter] = useState<Filter>(() => {\r\n    const defaultFilter: Filter = {}\r\n    if(medicoPolicy.viewByRegionalOnly(user)){\r\n      defaultFilter.regionalId = user!.regionalId;\r\n    }\r\n    return defaultFilter\r\n  })\r\n\r\n  const queryKey = [\"medicos\", \"buscar\", filter, page];\r\n\r\n  const buscar = useQuery(queryKey, () => {\r\n    return MedicosService.buscar(page, filter) as AxiosPromise<PaginatedResponse<Medico>>\r\n  }, {\r\n    enabled: !!superUserPolicyEnhancer(medicoPolicy.view)(user),\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n  \r\n  const updateFilter = (filter: Filter)=>{\r\n    buscar.remove()\r\n    setFilter(oldFilter => ({...oldFilter, ...filter}));\r\n    setPage(page => ({...page, current: 1}))\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let i = 0; i < page.size; i++){\r\n      rows.push(<tr key={i}>\r\n        <th scope=\"row\">\r\n          {(page.current - 1)*page.size  + i + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Médicos</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={medicoPolicy}\r\n      page={page}\r\n      onSearch={(search) => updateFilter({_busqueda: search})}\r\n      onPageChange={setPage}\r\n      total={totalRef.current}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      data={buscar.data?.data.records}\r\n      renderData={(medico, index) => {\r\n        return <tr key={medico.id}>\r\n          <th scope=\"row\">\r\n            {(page.current - 1)*page.size  + index + 1}\r\n          </th>\r\n          <td>\r\n            {medico.ci.texto}\r\n          </td>\r\n          <td>\r\n            {medico.nombreCompleto}\r\n          </td>\r\n          <td>\r\n            {medico.especialidad}\r\n          </td>\r\n          <td>\r\n            {medico.regional!.nombre}\r\n          </td>\r\n          <td>\r\n            {medico.estado == 1 ? \"Activo\" : medico.estado == 2 ? \"De baja\" : \"\"}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions queryKey={queryKey} medico={medico} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th>Carnet de identidad</th>\r\n          <th style={{ minWidth: 250}}>Nombre</th>\r\n          <th>Especialidad</th>\r\n          <th>Regional</th>\r\n          <th>Estado</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      }}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      renderFilterForm={()=>{\r\n        return <MedicosFilterForm onFilter={updateFilter} />\r\n      }}\r\n      renderCreateButton={()=>{\r\n        return  <Button\r\n          as={Link}\r\n          to={`${path}/registrar`}\r\n          className=\"d-flex align-items-center\">\r\n            <FaPlus className=\"mr-1\" /><span>Nuevo</span>\r\n        </Button>\r\n      }}\r\n    />\r\n  </div>\r\n}","import { useEffect } from 'react'\r\nimport { Alert, Breadcrumb, Table } from 'react-bootstrap'\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { Medico, MedicosService } from '../services'\r\nimport { useQuery, useMutation } from 'react-query'\r\nimport { Link, useLocation, useParams } from 'react-router-dom'\r\nimport { useUser } from \"../../../../commons/auth\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { medicoPolicy } from \"../policies\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\nexport const MedicoView = () => {\r\n  const { pathname, state: locationState } = useLocation<{\r\n    medico?: Medico\r\n  }>()\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const user = useUser()\r\n\r\n  const cargar = useQuery([\"cargar\", id], () => {\r\n    return MedicosService.load(parseInt(id))\r\n  }, {\r\n    initialData: locationState?.medico && { status: 200, statusText: \"OK\", headers: {}, config: {}, data: locationState?.medico },\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const medico = cargar.data?.data\r\n\r\n  const renderAlert = () => {\r\n    if (cargar.error) {\r\n      const { response } = cargar.error as any\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          !response ? \"No fue posible realizar la solicitud, verifique si tiene conexion a internet\" :\r\n            response.status == 404 ? \"El proveedor que busca no existe\" :\r\n              \"Ocurrio un error inesperado\"\r\n        }\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{ to: \"/clinica/medicos\" }}>Médicos</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>{id}</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Detalles</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    {renderAlert()}\r\n    <Table>\r\n      <tbody>\r\n        <tr>\r\n          <th style={{ width: 1 }}>Carnet de identidad</th>\r\n          <td>: {medico ? medico.ci.texto : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th style={{ width: 1 }}>Nombre</th>\r\n          <td>: {medico ? medico.nombreCompleto : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th style={{ width: 1 }}>Regional</th>\r\n          <td>: {medico ? medico.regional!.nombre : <Skeleton />}</td>\r\n        </tr>\r\n        <tr>\r\n          <th style={{ width: 1 }}>Especialidad</th>\r\n          <td>: {medico ? medico.especialidad : <Skeleton />}</td>\r\n        </tr>\r\n      </tbody>\r\n    </Table>\r\n  </div>\r\n}","\r\nimport { useEffect } from 'react'\r\nimport { AxiosError } from 'axios'\r\nimport { Alert, Breadcrumb, Button, Col, Form, Spinner } from 'react-bootstrap'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { Link, useHistory, useParams } from \"react-router-dom\"\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport { Medico, MedicosService } from '../services'\r\nimport { Regional, RegionalesTypeahead } from '../../../../commons/components'\r\nimport { medicoPolicy } from '../policies'\r\nimport { useUser } from '../../../../commons/auth'\r\n\r\ntype Inputs = {\r\n  initialized: boolean\r\n  ci: string\r\n  ciComplemento: string | null\r\n  apellidoPaterno: string\r\n  apellidoMaterno: string\r\n  nombres: string\r\n  especialidad: string\r\n  regional: Regional[]\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  ci: yup.number().label(\"número de carnet\")\r\n    .nonEmpty()\r\n    .typeError(\"El ${path} no es un numero valido\")\r\n    .required(),\r\n  ciComplemento: yup.string().label(\"complemento del carnet\").nonEmpty().uppercase().default(null).nullable()\r\n    .notRequired()\r\n    .matches(/^[1-9][A-Z]$/, \"Complemento invalido.\"),\r\n    // .matches(/(?=.*[A-Z])(?=.*[0-9])/, \"El complemento del carnet esta conformado por un numero y una letra. (No confundir con el expedido)\"),\r\n  apellidoPaterno: yup.string().label(\"apellido paterno\").nonEmpty().uppercase().default(null).nullable()\r\n    .when(\"apellidoMaterno\", {\r\n      is: (apellidoMaterno: string) => !apellidoMaterno,\r\n      then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\").max(25)\r\n    }),\r\n  apellidoMaterno: yup.string().trim().label(\"apellido materno\").nonEmpty().uppercase().default(null).nullable()\r\n  .when(\"apellidoPaterno\", {\r\n    is: (apellidoPaterno: string) => !apellidoPaterno,\r\n    then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\").max(25)\r\n  }),\r\n  nombres: yup.string().label(\"nombres\").nonEmpty().uppercase().trim().required(),\r\n  especialidad: yup.string().nonEmpty().uppercase().required(\"Debe indicar la especialidad del médico\"),\r\n  regional: yup.array().length(1, \"Debe indicar una regional\")\r\n}, [[\"apellidoMaterno\", \"apellidoPaterno\"]])\r\n\r\nexport const MedicoForm = ()=>{\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const history = useHistory<{\r\n    medico?: Medico\r\n  }>()\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    clearErrors,\r\n    setError,\r\n    setValue,\r\n    reset,\r\n    watch,\r\n    control,\r\n    formState,\r\n  } = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      initialized: !id,\r\n      regional: []\r\n    }\r\n  })\r\n\r\n  const initialized = watch(\"initialized\")\r\n\r\n  const queryClient = useQueryClient()\r\n  \r\n  const cargar = useQuery([\"medicos\", \"cargar\", id], ()=>{\r\n    return MedicosService.load(parseInt(id as string))\r\n  }, {\r\n    enabled: !!id && !initialized,\r\n    initialData: history.location.state?.medico && {status: 200, statusText: \"OK\", data: history.location.state.medico, headers: {}, config: {}},\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const guardar = useMutation((inputs: Inputs)=>{\r\n    return id ? MedicosService.actualizar({\r\n      id: parseInt(id),\r\n      ci: {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombre: inputs.nombres,\r\n      especialidad: inputs.especialidad,\r\n      regionalId: inputs.regional![0].id\r\n    }) : MedicosService.registrar({\r\n      ci: {\r\n        raiz: parseInt(inputs.ci),\r\n        complemento: inputs.ciComplemento\r\n      },\r\n      apellidoPaterno: inputs.apellidoPaterno,\r\n      apellidoMaterno: inputs.apellidoMaterno,\r\n      nombre: inputs.nombres,\r\n      especialidad: inputs.especialidad,\r\n      regionalId: inputs.regional![0].id\r\n    })\r\n  }, {\r\n    onSuccess: (response)=>{\r\n      reset()\r\n      queryClient.invalidateQueries([\"medicos\", \"buscar\"])\r\n      if(id) {\r\n        queryClient.setQueryData([\"medicos\", \"cargar\", id], response)\r\n        history.push(\"/clinica/medicos\")\r\n      }\r\n    },\r\n    onError: (error) => {\r\n      if((error as AxiosError)?.response?.status == 422){\r\n        const {errors} = (error as AxiosError).response?.data\r\n        Object.keys(errors).forEach((key: any)=>{\r\n          let localKey = key\r\n          setError(localKey, {type: \"serverError\", message: errors[key]})\r\n        })\r\n      }\r\n    }\r\n  })\r\n\r\n  const medico = cargar.data?.data\r\n\r\n  useEffect(()=>{\r\n    if(medico){\r\n      setValue(\"initialized\", true)\r\n      setValue(\"ci\", String(medico.ci.raiz))\r\n      setValue(\"ciComplemento\", medico.ci.complemento)\r\n      setValue(\"apellidoPaterno\", medico.apellidoPaterno)\r\n      setValue(\"apellidoMaterno\", medico.apellidoMaterno)\r\n      setValue(\"nombres\", medico.nombre)\r\n      setValue(\"especialidad\", medico.especialidad)\r\n      setValue(\"regional\", [ medico.regional as Regional ])\r\n    }\r\n  }, [medico])\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/clinica/medicos\"}}>Médicos</Breadcrumb.Item>\r\n      {id ? <Breadcrumb.Item active>{id}</Breadcrumb.Item> : null}\r\n      <Breadcrumb.Item active>{!id ? \"Registro\" : \"Actualización\"}</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n      \r\n    <Form id=\"medico-form\"\r\n      onSubmit={handleSubmit((inputs)=>{\r\n        guardar.mutate(inputs)\r\n      })}\r\n    >\r\n      {guardar.status == \"error\" || guardar.status == \"success\"  ? <Alert variant={guardar.isError ? \"danger\" : \"success\"}>\r\n        {guardar.isError ? (guardar.error as AxiosError).response?.data?.message || (guardar.error as AxiosError).message : \"Guardado\"}\r\n      </Alert> : null}\r\n      <Form.Row>\r\n        <Form.Group as={Col} xs={12} sm={6} md={4}>\r\n          <fieldset className={`border${formState.errors.ci || formState.errors.ciComplemento ? \" border-danger \" : \" \"}rounded`}\r\n            style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n            <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Carnet de identidad</Form.Label>\r\n            <Form.Row>\r\n              <Col xs={8}>\r\n                {initialized ? <Form.Control\r\n                  aria-label=\"Número raiz\"\r\n                  className=\"text-uppercase\"\r\n                  isInvalid={!!formState.errors.ci}\r\n                  {...register(\"ci\")}\r\n                /> : <Skeleton />}\r\n                <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n              </Col>\r\n              <Col xs={4}>\r\n                {initialized ? <Form.Control\r\n                  aria-label=\"Número complemento\"\r\n                  className=\"text-uppercase\"\r\n                  isInvalid={!!formState.errors.ciComplemento}\r\n                  {...register(\"ciComplemento\")}\r\n                /> : <Skeleton />}\r\n                <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n              </Col>\r\n            </Form.Row>\r\n          </fieldset>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Paterno</Form.Label>\r\n          {initialized ? <Form.Control\r\n            className=\"text-uppercase\"\r\n            isInvalid={!!formState.errors.apellidoPaterno}\r\n            {...register(\"apellidoPaterno\")}\r\n          /> : <Skeleton />}\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Apellido Materno</Form.Label>\r\n          {initialized ? <Form.Control\r\n            className=\"text-uppercase\"\r\n            isInvalid={!!formState.errors.apellidoMaterno}\r\n            {...register(\"apellidoMaterno\")}\r\n          /> : <Skeleton />}\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Nombres</Form.Label>\r\n          {initialized ? <Form.Control\r\n            className=\"text-uppercase\"\r\n            isInvalid={!!formState.errors.nombres}\r\n            {...register(\"nombres\")}\r\n          /> : <Skeleton />}\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.nombres?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label htmlFor=\"medico-especialidad\">Especialidad</Form.Label>\r\n          {initialized ? <Form.Control\r\n            id=\"medico-especialidad\"\r\n            className=\"text-uppercase\"\r\n            isInvalid={!!formState.errors.especialidad}\r\n            {...register(\"especialidad\")}\r\n          /> : <Skeleton />}\r\n          <Form.Control.Feedback type=\"invalid\">{formState.errors.especialidad?.message}</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={4}>\r\n          <Form.Label>Regional</Form.Label>\r\n          {initialized ? <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"medicos-form/regionales-typeahead\"\r\n                  className=\"text-uppercase\"\r\n                  filterBy={(regional) => {\r\n                    if(id){\r\n                      return medicoPolicy.editByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                    }\r\n                    else {\r\n                      return medicoPolicy.registerByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                    }\r\n                  }}\r\n                  feedback={fieldState.error?.message}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n              </>\r\n            }}\r\n          /> : <Skeleton />}\r\n        </Form.Group>\r\n      </Form.Row>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n          {guardar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\"/> : null}\r\n          Guardar\r\n        </Button>\r\n    </Form>\r\n  </div>\r\n}","import { useEffect, useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { FaSync } from \"react-icons/fa\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useInfiniteQuery } from 'react-query'\r\nimport { Medico, MedicoFilter, MedicosService } from \"../services\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css'\r\n\r\nexport type { Medico }\r\n\r\ntype Props = {\r\n  feedback?: string,\r\n  filter?: MedicoFilter\r\n  defaultOptions?: Medico[]\r\n} & Omit<AsyncTypeaheadProps<Medico>, \"isLoading\" | \"options\" | \"onSearch\">\r\n\r\nexport const MedicosTypeahead = ({isInvalid, feedback, filter, ...props}: Props) => {\r\n\r\n  const [options, setOptions] = useState<Medico[]>(props.defaultOptions || [])\r\n  const [ search, setSearch ] = useState(\"\")\r\n\r\n  filter = {\r\n    ...filter,\r\n    _busqueda: search\r\n  }\r\n\r\n  const queryKey = [\"medicos.buscar\", filter]\r\n\r\n  const buscar = useInfiniteQuery(queryKey, ({pageParam = 1})=>{\r\n    return MedicosService.buscar({\r\n      current: pageParam,\r\n      size: pageParam === 1 ? 20 : 10\r\n    }, filter)\r\n  }, {\r\n    enabled: !!search,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    getNextPageParam: (lastPage, allPages) => {\r\n      let nextPage = lastPage.data.meta.nextPage \r\n      if(nextPage === 2) return 3\r\n      return nextPage\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(buscar.data){\r\n      const { pages } = buscar.data\r\n      setOptions(pages.flatMap((response)=>response.data.records, 1))\r\n    }\r\n  }, [buscar.data])\r\n\r\n  return <InputGroup hasValidation  className=\"position-unset\">\r\n    <AsyncTypeahead\r\n      clearButton\r\n      align=\"left\"\r\n      emptyLabel={buscar.isError ? \"\" : \"No se encontraron resultados\"}\r\n      promptText=\"Escribe un nombre o especialidad para buscar\"\r\n      searchText=\"Buscando...\"\r\n      paginationText=\"Cargar más...\"\r\n      {...props}\r\n      labelKey={medico => medico.nombreCompleto!}\r\n      className={props.className + ((buscar.isError || isInvalid) ? \" is-invalid\" : \"\")}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={()=>true}\r\n      maxResults={10}\r\n      minLength={0}\r\n      options={options}\r\n      isLoading={buscar.status == \"loading\" || buscar.isFetchingNextPage}\r\n      onSearch={(search) => {\r\n        setSearch(search)\r\n      }}\r\n      \r\n      paginate\r\n      onPaginate={()=>{\r\n        buscar.fetchNextPage()\r\n      }}\r\n      useCache={false}\r\n\r\n      renderMenuItemChildren={(medico) => {\r\n        return <div>\r\n          <div>{medico.nombreCompleto}</div>\r\n          <small className={\"text-muted\"}>{medico.especialidad}</small> \r\n        </div>\r\n      }}\r\n    />\r\n    {buscar.isError ? <InputGroup.Append>\r\n      <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n    </InputGroup.Append> : null}\r\n    <Form.Control.Feedback type=\"invalid\">{buscar.isError ? \"Ocurrio un error al realizar la busqueda\" : feedback}</Form.Control.Feedback>\r\n  </InputGroup>\r\n}","import { ProveedorPolicy } from \"./ProveedorPolicy\"\r\n\r\nexport const proveedorPolicy = new ProveedorPolicy()","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class ProveedorPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }  \r\n\r\n  view = (user: User, context?: {\r\n    regionalId: number\r\n  }) => { \r\n    const byRegionalOnly = this.viewByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.VER_PROVEEDORES)) return true\r\n  }\r\n\r\n  viewByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.VER_PROVEEDORES_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  register = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.registerByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.REGISTRAR_PROVEEDORES)) return true\r\n  }\r\n\r\n  registerByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.REGISTRAR_PROVEEDORES_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  edit = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.editByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.ACTUALIZAR_PROVEEDORES)) return true\r\n  }\r\n\r\n  editByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_PROVEEDORES_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  updateStatus = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.updateStatusByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_PROVEEDORES)) return true\r\n  }\r\n\r\n  updateStatusByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.ACTUALIZAR_ESTADO_PROVEEDORES_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n}","/**\r\n* Permisos sobre proveedores\r\n*/\r\nexport const VER_PROVEEDORES = \"Ver proveedores\";\r\nexport const VER_PROVEEDORES_REGIONAL = \"Ver proveedores (misma regional)\";\r\nexport const REGISTRAR_PROVEEDORES = \"Registrar proveedores\";\r\nexport const REGISTRAR_PROVEEDORES_REGIONAL = \"Registrar proveedores (misma regional)\";\r\nexport const ACTUALIZAR_PROVEEDORES = \"Actualizar proveedores\";\r\nexport const ACTUALIZAR_PROVEEDORES_REGIONAL = \"Actualizar proveedores (misma regional)\";\r\nexport const ACTUALIZAR_ESTADO_PROVEEDORES = \"Actualizar el estado de los proveedores\";\r\nexport const ACTUALIZAR_ESTADO_PROVEEDORES_REGIONAL = \"Actualizar el estado de los proveedores (misma regional)\";","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\nimport axios, { AxiosPromise } from 'axios'\r\nimport { keysToUnderscore } from \"../../../../commons/utils\"\r\n\r\nexport type Empresa = {\r\n  id: string\r\n  tipo: 2\r\n  nit: string\r\n  nombre: string  \r\n  estado: 1 | 2\r\n  regionalId: number\r\n  regional?: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n}\r\n\r\nexport type Medico = {\r\n  id: string\r\n  tipo: 1\r\n  nit: string\r\n  ci: {\r\n    raiz: number\r\n    complemento: string | null\r\n    texto?: string\r\n  }\r\n  nombre: string\r\n  apellidoPaterno: string | null\r\n  apellidoMaterno: string | null\r\n  nombreCompleto: string\r\n  especialidad: string  \r\n  estado: 1 | 2\r\n  regionalId: number\r\n  regional?: {\r\n    id: number\r\n    nombre: string\r\n  }\r\n}\r\n\r\nexport type InformacionContacto = {\r\n  razonSocial?: string\r\n  direccion: string\r\n  ubicacion: {\r\n    latitud: number\r\n    longitud: number\r\n  } | null\r\n  telefono1: number\r\n  telefono2: number | null\r\n}\r\n\r\nexport type Proveedor = (Empresa | Medico) & InformacionContacto\r\n\r\nexport type Filter = {\r\n  tipo?: number\r\n  _busqueda?: string\r\n  regionalId?: number\r\n  estado?: number\r\n}\r\n\r\n\r\nexport const ProveedoresService = {\r\n  buscar(page: Page, filter?: Filter) {\r\n    return apiClient.get<PaginatedResponse<Proveedor>>(\"proveedores\", {\r\n      params: keysToUnderscore({\r\n        filter,\r\n        page\r\n      })\r\n    })\r\n  },\r\n  cargar(id: string): AxiosPromise<Proveedor>{\r\n    return apiClient.get(`proveedores/${id}`)\r\n  },\r\n  registrar(fields: Omit<Proveedor, \"id\" | \"nombreCompleto\" | \"estado\">): AxiosPromise<Proveedor> {\r\n    return apiClient.post(\"proveedores\", keysToUnderscore(fields))\r\n  },\r\n  actualizar({id, ...fields}: Omit<Proveedor, \"nombreCompleto\" | \"estado\">): AxiosPromise<Proveedor>{\r\n    return apiClient.put(`proveedores/${id}`, keysToUnderscore(fields))\r\n  },\r\n  actualizarEstado(id: string, estado: 1 | 2): AxiosPromise<Proveedor>{\r\n    return apiClient.put(`proveedores/${id}/actualizar-estado`, keysToUnderscore({estado}))\r\n  }\r\n}","import { Button, Col, Form } from \"react-bootstrap\"\r\nimport { useForm, Controller } from \"react-hook-form\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { Filter } from \"../services\"\r\nimport { proveedorPolicy } from \"../policies\"\r\n\r\ntype Inputs ={\r\n  tipo: number\r\n  regional: Regional[]\r\n  estado: number\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: Filter) => void\r\n}\r\n\r\nexport const ProveedoresFilterForm = (props: Props)=>{\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    reset\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      regional: proveedorPolicy.viewByRegionalOnly(user) ? [user!.regional as Regional] : [],\r\n      estado: 0,\r\n      tipo: 0\r\n    }\r\n  })\r\n  \r\n  return <Form className=\"p-2 border rounded\" onSubmit={handleSubmit((data)=>{\r\n    const filter: Filter = {}\r\n    filter.regionalId = data.regional.length && data.regional[0].id\r\n    filter.estado = data.estado\r\n    filter.tipo = data.tipo\r\n    props.onFilter(filter)\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"regional\"\r\n          render={({field: {ref, value, ...field}, fieldState})=>{\r\n            return <RegionalesTypeahead\r\n              className=\"text-uppercase\"\r\n              id=\"medico-filter-regional\"\r\n              selected={proveedorPolicy.viewByRegionalOnly(user) ? [user!.regional as Regional] : value}\r\n              filterBy={(regional) => proveedorPolicy.viewByRegionalOnly(user, {regionalId: regional.id}) !== false}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Estado</Form.Label>\r\n          <Controller\r\n            control={control}\r\n            name=\"estado\"\r\n            render={({field: {value, ...field}})=>{\r\n              return <Form.Row>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Activos\"\r\n                    value={1}\r\n                    checked={value == 1}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Bajas\"\r\n                    value={2}\r\n                    checked={value == 2}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Todos\"\r\n                    value={0}\r\n                    checked={value == 0}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n              </Form.Row>\r\n            }}\r\n          />\r\n        </fieldset>\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6} lg={4}>\r\n        <fieldset className=\"border rounded\" style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Tipo</Form.Label>\r\n          <Controller\r\n            control={control}\r\n            name=\"tipo\"\r\n            render={({field: {value, ...field}})=>{\r\n              return <Form.Row>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Medicos\"\r\n                    value={1}\r\n                    checked={value == 1}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Empresas\"\r\n                    value={2}\r\n                    checked={value == 2}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    style={{\r\n                      height: \"calc(1.5em + 0.75rem + 2px)\",\r\n                      paddingTop: \"0.375rem\",\r\n                      paddingBottom: \"0.375rem\"\r\n                    }}\r\n                    type=\"radio\"\r\n                    label=\"Ambos\"\r\n                    value={0}\r\n                    checked={value == 0}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n              </Form.Row>\r\n            }}\r\n          />\r\n        </fieldset>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Col className=\"ml-auto\" xs=\"auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset({\r\n          regional: proveedorPolicy.viewByRegionalOnly(user) ? [user!.regional!] : [],\r\n          estado: 0,\r\n          tipo: 0\r\n        })}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { useEffect } from \"react\"\r\nimport { Dropdown } from \"react-bootstrap\"\r\n// import { FaEdit } from \"react-icons/fa\"\r\nimport { useMutation, useQueryClient, QueryKey } from \"react-query\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\nimport { proveedorPolicy } from \"../policies\"\r\n\r\ntype Props = {\r\n  proveedor: Proveedor\r\n  queryKey: QueryKey\r\n}\r\nexport const RowOptions = ({proveedor, queryKey}: Props) => {\r\n\r\n  \r\n  const modal = useModal<{\r\n    state: \"loading\" | \"error\"\r\n    error?: Error\r\n  }>(\"queryLoader\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const actualizarEstado = useMutation((estado: 1 | 2)=>{\r\n    return ProveedoresService.actualizarEstado(proveedor.id, estado)\r\n  }, {\r\n    onSuccess: ()=>{\r\n      modal.close()\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        return {\r\n          ...oldData,\r\n          data: {\r\n            ...oldData.data,\r\n            records: oldData.data.records.map((p: any)=>{\r\n              return p.id == proveedor.id ? {\r\n                ...p,\r\n                estado: p.estado == 1 ? 2 : 1\r\n              } : p\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(actualizarEstado.status == \"loading\"){\r\n      modal.open({\r\n        state: \"loading\"\r\n      })\r\n    }\r\n    else if(actualizarEstado.status == \"error\"){\r\n      modal.open({\r\n        state: \"error\",\r\n        error: actualizarEstado.error as any\r\n      })\r\n    }\r\n  }, [actualizarEstado.status])\r\n\r\n  return <Dropdown style={{position: \"initial\"}} alignRight>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-proveedores-${proveedor.id}`}\r\n    />\r\n\r\n    <Dropdown.Menu>\r\n      <ProtectedContent\r\n        authorize={(user)=>proveedorPolicy.view(user, {regionalId: proveedor.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/clinica/proveedores/${proveedor.id}`,\r\n          state: {\r\n            proveedor\r\n          }\r\n        }} ><span className=\"align-middle\">Ver</span></Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(user)=>proveedorPolicy.edit(user, {regionalId: proveedor.regionalId})}\r\n      >\r\n        <Dropdown.Item as={Link} to={{\r\n          pathname: `/clinica/proveedores/${proveedor.id}/editar`,\r\n          state: {\r\n            proveedor\r\n          }\r\n        }} ><span className=\"align-middle\">Editar</span></Dropdown.Item>\r\n      </ProtectedContent>\r\n      <ProtectedContent\r\n        authorize={(login) => proveedorPolicy.updateStatus(login, {regionalId: proveedor.regionalId})}\r\n      >\r\n        <Dropdown.Item className=\"text-danger\" onClick={()=>{\r\n            actualizarEstado.mutate(proveedor.estado == 1 ? 2 : 1)\r\n        }}>\r\n          {proveedor.estado == 1 ? \"Baja\" : \"Alta\"}\r\n        </Dropdown.Item>\r\n      </ProtectedContent>\r\n\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { useMemo, useRef, useState } from \"react\"\r\nimport { Button, Breadcrumb } from \"react-bootstrap\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { proveedorPolicy } from \"../policies\"\r\nimport { ProveedoresService, Filter } from \"../services\"\r\nimport { ProveedoresFilterForm } from \"./ProveedoresFilterForm\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { useUser } from \"../../../../commons/auth\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\nexport const ProveedoresIndex = () => {\r\n  const { pathname: path } = useLocation()\r\n  const [page, setPage] = useState({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const user = useUser()\r\n\r\n  const [filter, setFilter] = useState<Filter>(() => {\r\n    const defaultFilter: Filter = {}\r\n    if(proveedorPolicy.viewByRegionalOnly(user)) {\r\n      defaultFilter.regionalId = user?.regionalId;\r\n    }\r\n    return defaultFilter\r\n  })\r\n\r\n  const queryKey = [\"proveedores\", \"buscar\", filter, page]\r\n\r\n  const buscar = useQuery(queryKey, () => {\r\n    return ProveedoresService.buscar(page, filter)\r\n  }, {\r\n    enabled: !!superUserPolicyEnhancer(proveedorPolicy.view)(user),\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n  \r\n  const updateFilter = (filter: Filter)=>{\r\n    buscar.remove()\r\n    setFilter(oldFilter => ({...oldFilter, ...filter}));\r\n    setPage(page => ({...page, current: 1}))\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let i = 0; i < page.size; i++){\r\n      rows.push(<tr key={i}>\r\n        <th scope=\"row\" style={{ width: 1 }}>\r\n          {i + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Proveedores</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={proveedorPolicy}\r\n      page={page}\r\n      onSearch={(search)=>{\r\n        updateFilter({_busqueda: search})\r\n      }}\r\n      onPageChange={setPage}\r\n      total={totalRef.current}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      data={buscar.data?.data.records}\r\n      renderData={(item, index) => {\r\n        return <tr key={item.id}>\r\n          <th scope=\"row\">\r\n            {(page.current - 1)*page.size  + index + 1}\r\n          </th>\r\n          <td>\r\n            {item.tipo == 1 ? \"Medico\" : \"Empresa\"}\r\n          </td>\r\n          <td>\r\n            {item.razonSocial}\r\n          </td>\r\n          <td>\r\n            {item.regional!.nombre}\r\n          </td>\r\n          <td>\r\n            {item.estado == 1 ? \"Activo\" : item.estado == 2 ? \"Baja\" : \"\"}\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions proveedor={item} queryKey={queryKey} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{ width: 1 }}>#</th>\r\n          <th>Tipo</th>\r\n          <th style={{ minWidth: 250}}>Nombre</th>\r\n          <th>Regional</th>\r\n          <th>Estado</th>\r\n          <th style={{ width: 1 }}></th>\r\n        </tr>\r\n      }}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      renderFilterForm={()=>{\r\n        return <ProveedoresFilterForm onFilter={updateFilter} />\r\n      }}\r\n      renderCreateButton={()=>{\r\n        return <Button\r\n          as={Link}\r\n          to={`${path}/registrar`}\r\n          className=\"d-flex align-items-center\">\r\n          <FaPlus className=\"mr-1\" /><span>Nuevo</span>\r\n        </Button>\r\n      }}\r\n    />\r\n  </div>\r\n}","import { Alert, Breadcrumb, Button, Col, Form, Row } from 'react-bootstrap'\r\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { LatLngExpression } from \"leaflet\"\r\nimport { Proveedor, ProveedoresService } from '../services'\r\nimport { useQuery } from 'react-query'\r\nimport { Link, useLocation, useParams } from 'react-router-dom'\r\nimport { useUser, ProtectedContent } from \"../../../../commons/auth\"\r\nimport { proveedorPolicy } from \"../policies\"\r\nimport \"../../../../commons/utils/leafletDefaults\"\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n\r\nexport const ProveedorView = ()=>{\r\n\r\n  const { pathname, state: locationState } = useLocation<{\r\n    proveedor?: Proveedor\r\n  }>()\r\n\r\n  const { id } = useParams<{\r\n    id: string\r\n  }>()\r\n\r\n  const tipo = id?.startsWith(\"EMP\") ? 2 : id?.startsWith(\"MED\") ? 1 : -1\r\n\r\n  const userser = useUser()\r\n\r\n  const cargar = useQuery([\"cargar\", id], ()=>{\r\n    return ProveedoresService.cargar(id)\r\n  }, {\r\n    initialData: locationState?.proveedor && { status: 200, statusText: \"OK\", headers: {}, config: {}, data: locationState?.proveedor },\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false\r\n  })\r\n\r\n  const proveedor = cargar.data?.data || locationState?.proveedor\r\n\r\n  const position: LatLngExpression | null | undefined = proveedor?.ubicacion && [proveedor.ubicacion.latitud, proveedor.ubicacion.longitud]\r\n    \r\n  const renderAlert = () => {\r\n    if(cargar.error) {\r\n      const { response } = cargar.error as any\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          !response ? \"No fue posible realizar la solicitud, verifique si tiene conexion a internet\" :\r\n          response.status == 404 ? \"El proveedor que busca no existe\" : \r\n          \"Ocurrio un error inesperado\"\r\n        }\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <div>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/clinica/proveedores\"}}>Proveedores</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>{id}</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Detalles</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    {renderAlert()}\r\n    <Row>\r\n      <Col lg={5} md={4}>\r\n        <dl className=\"form-row\">\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">Tipo</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor ? (proveedor.tipo == 1 ? \"Médico\" : proveedor?.tipo == 2 ? \"Empresa\" : null) : <Skeleton />}</dd>\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">NIT</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor? proveedor.nit : <Skeleton />}</dd>\r\n          {\r\n            proveedor ? \r\n              proveedor.tipo == 1 ? <>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Carnet de identidad</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor.ci.texto}</dd>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Nombre</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor.razonSocial}</dd>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Especialidad</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor.especialidad}</dd>\r\n              </> : (proveedor.tipo == 2 ? <>\r\n                <dt className=\"col-lg-5 col-md-12 col-sm-5\">Nombre</dt>\r\n                <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor.razonSocial}</dd>\r\n              </> : null) :\r\n              tipo == 1 ? <>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Carnet de identidad</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{<Skeleton />}</dd>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Nombre</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{<Skeleton />}</dd>\r\n                  <dt className=\"col-lg-5 col-md-12 col-sm-5\">Especialidad</dt>\r\n                  <dd className=\"col-lg-7 col-md-12 col-sm-7\">{<Skeleton />}</dd>\r\n              </> : (tipo == 2 ? <>\r\n                <dt className=\"col-lg-5 col-md-12 col-sm-5\">Nombre</dt>\r\n                <dd className=\"col-lg-7 col-md-12 col-sm-7\">{<Skeleton />}</dd>\r\n              </> : null)\r\n          }\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">Regional</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor ? proveedor.regional?.nombre : <Skeleton />}</dd>\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">Dirección</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor ? proveedor.direccion : <Skeleton />}</dd>\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">Teléfono 1</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor ? proveedor.telefono1 : <Skeleton />}</dd>\r\n          <dt className=\"col-lg-5 col-md-12 col-sm-5\">Teléfono 2</dt>\r\n          <dd className=\"col-lg-7 col-md-12 col-sm-7\">{proveedor ? proveedor.telefono2 || 'No proporcionado' : <Skeleton />}</dd>\r\n        </dl>\r\n      </Col>\r\n      <Col lg={7} md={8}>\r\n        {position !== undefined ? <MapContainer\r\n          center={position||[-17.78629, -63.18117]}\r\n          zoom={13} dragging={false}\r\n          scrollWheelZoom={false}\r\n          doubleClickZoom={false}\r\n          style={{minHeight: 480, height: \"100%\"}}\r\n        >\r\n          <TileLayer\r\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          {position ? <Marker position={position}>\r\n            <Popup>\r\n              <a href={`geo:${position.join(\",\")}`}>Abrir con</a>\r\n            </Popup>\r\n          </Marker> : null}\r\n        </MapContainer> : <Skeleton style={{minHeight: 480}} />}\r\n      </Col>\r\n    </Row>\r\n    {proveedor ? <Form.Row>\r\n      <ProtectedContent\r\n        authorize={(user)=>proveedorPolicy.edit(user, {regionalId: proveedor.regionalId})}\r\n      >\r\n        <Col xs=\"auto\">\r\n          <Button as={Link} to={{\r\n            pathname: `/clinica/proveedores/${proveedor.id}/editar`,\r\n            state: {\r\n              proveedor\r\n            }\r\n          }} >Editar</Button>\r\n        </Col>\r\n      </ProtectedContent>\r\n    </Form.Row> : null}\r\n  </div>\r\n}","import { Form, Col } from \"react-bootstrap\"\r\nimport { Controller, useFormContext } from \"react-hook-form\"\r\nimport { useParams } from \"react-router\"\r\nimport { Regional, RegionalesTypeahead, LazyControl } from '../../../../commons/components'\r\nimport { useUser } from '../../../../commons/auth'\r\nimport { proveedorPolicy } from \"../policies\"\r\n\r\nexport type Inputs = {\r\n  initialized: boolean\r\n  tipo: 2\r\n  nit?: string,\r\n  ci?: never\r\n  ciComplemento?: never\r\n  apellidoPaterno?: never\r\n  apellidoMaterno?: never\r\n  nombre?: string\r\n  especialidad?: never\r\n  regional?: Regional[]\r\n}\r\n\r\nexport const ProveedorEmpresaFieldset = ()=>{\r\n\r\n  const { id } = useParams<{id: string}>()\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    register,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n\r\n  const user = useUser()\r\n\r\n  const formErrors = formState.errors\r\n  const initialized = watch(\"initialized\")\r\n\r\n  return <>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label htmlFor=\"proveedor-nit\">NIT</Form.Label>\r\n        <LazyControl\r\n          id=\"proveedor-nit\"\r\n          initialized={initialized}\r\n          className=\"text-uppercase\"\r\n          isInvalid={!!formErrors.nit}\r\n          {...register(\"nit\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.nit?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={8}>\r\n        <Form.Label htmlFor=\"proveedor-nombre\">Nombre</Form.Label>\r\n        <LazyControl\r\n          id=\"proveedor-nombre\"\r\n          initialized={initialized}\r\n          className=\"text-uppercase\"\r\n          isInvalid={!!formErrors.nombre}\r\n          {...register(\"nombre\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>      \r\n      <Form.Group as={Col} md={4}>\r\n          <Form.Label htmlFor=\"proveedor-form/regionales-typeahead\">Regional</Form.Label>\r\n          <Controller\r\n            name=\"regional\"\r\n            control={control}\r\n            render={({field, fieldState})=>{\r\n              return <>\r\n                <RegionalesTypeahead\r\n                  id=\"proveedor-form/regionales-typeahead\"\r\n                  initialized={initialized}\r\n                  className=\"text-uppercase\"\r\n                  filterBy={(regional) => { \r\n                    if(id){\r\n                      return proveedorPolicy.editByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                    }\r\n                    else{\r\n                      return proveedorPolicy.registerByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                    }\r\n                  }}\r\n                  feedback={fieldState.error?.message}\r\n                  isInvalid={!!fieldState.error}\r\n                  selected={field.value}\r\n                  onChange={field.onChange}\r\n                  onBlur={field.onBlur}\r\n                />\r\n              </>\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      \r\n    </Form.Row>\r\n  </>\r\n}","import {  Col, Form } from 'react-bootstrap'\r\nimport { Controller, useFormContext } from 'react-hook-form'\r\nimport { useParams } from 'react-router'\r\nimport { Regional, RegionalesTypeahead, LazyControl } from '../../../../commons/components'\r\nimport { useUser } from '../../../../commons/auth'\r\nimport { proveedorPolicy } from '../policies'\r\n\r\nexport type Inputs = {\r\n  initialized: boolean\r\n  tipo?: 1\r\n  nit?: string\r\n  ci?: number\r\n  ciComplemento?: string | null\r\n  apellidoPaterno?: string | null\r\n  apellidoMaterno?: string | null\r\n  nombre?: string\r\n  especialidad?: string\r\n  regional?: Regional[]\r\n}\r\n\r\nexport const ProveedorMedicoFieldset = ()=>{\r\n\r\n  const {id} = useParams<{\r\n    id?: string\r\n  }>()\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    register,\r\n    control,\r\n    formState,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n\r\n  const formErrors = formState.errors\r\n\r\n  const initialized = watch(\"initialized\")\r\n\r\n  return <>\r\n    <Form.Row>\r\n      <Form.Group as={Col} xs={12} sm={6} md={4}>\r\n        <Form.Label htmlFor=\"nit\">NIT</Form.Label>\r\n        <LazyControl\r\n          isInvalid={!!formErrors.nit}\r\n          className=\"text-uppercase\"\r\n          initialized={initialized}\r\n          {...register(\"nit\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.nit?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} xs={12} sm={6} md={4}>\r\n        <fieldset className={`border${formState.errors.ci || formState.errors.ciComplemento ? \" border-danger \" : \" \"}rounded`}\r\n          style={{padding: 5, paddingTop: 0, marginBottom: -6}}>\r\n          <Form.Label as=\"legend\" style={{width: \"auto\", fontSize:\"1rem\"}}>Carnet de identidad</Form.Label>\r\n          <Form.Row>\r\n            <Col xs={8}>\r\n              <LazyControl\r\n                aria-label=\"Número raiz\"\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formState.errors.ci}\r\n                initialized={initialized}\r\n                {...register(\"ci\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.ci?.message}</Form.Control.Feedback>\r\n            </Col>\r\n            <Col xs={4}>\r\n              <LazyControl\r\n                aria-label=\"Número complemento\"\r\n                className=\"text-uppercase\"\r\n                initialized={initialized}\r\n                isInvalid={!!formState.errors.ciComplemento}\r\n                {...register(\"ciComplemento\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formState.errors.ciComplemento?.message}</Form.Control.Feedback>\r\n            </Col>\r\n          </Form.Row>\r\n        </fieldset>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Apellido Paterno</Form.Label>\r\n        <LazyControl\r\n          isInvalid={!!formErrors.apellidoPaterno}\r\n          className=\"text-uppercase\"\r\n          initialized={initialized}\r\n          {...register(\"apellidoPaterno\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.apellidoPaterno?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Apellido Materno</Form.Label>\r\n        <LazyControl\r\n          isInvalid={!!formErrors.apellidoMaterno}\r\n          className=\"text-uppercase\"\r\n          initialized={initialized}\r\n          {...register(\"apellidoMaterno\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.apellidoMaterno?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Nombres</Form.Label>\r\n        <LazyControl\r\n          isInvalid={!!formErrors.nombre}\r\n          className=\"text-uppercase\"\r\n          initialized={initialized}\r\n          {...register(\"nombre\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.nombre?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label htmlFor=\"medico-especialidad\">Especialidad</Form.Label>\r\n        <LazyControl id=\"medico-especialidad\"\r\n          isInvalid={!!formErrors.especialidad}\r\n          className=\"text-uppercase\"\r\n          initialized={initialized}\r\n          {...register(\"especialidad\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.especialidad?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          name=\"regional\"\r\n          control={control}\r\n          render={({field, fieldState})=>{\r\n            return <>\r\n              <RegionalesTypeahead\r\n                id=\"proveedor-form/regionales-typeahead\"\r\n                className=\"text-uppercase\"\r\n                initialized={initialized}\r\n                filterBy={(regional) => {\r\n                  if(id){\r\n                    return proveedorPolicy.editByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                  }\r\n                  else{\r\n                    return proveedorPolicy.registerByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                  }\r\n                }}\r\n                feedback={fieldState.error?.message}\r\n                isInvalid={!!fieldState.error}\r\n                selected={field.value}\r\n                onChange={field.onChange}\r\n                onBlur={field.onBlur}\r\n              />\r\n            </>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n  </>\r\n}","\r\nimport { useState, useEffect } from \"react\"\r\nimport { Form, Col } from \"react-bootstrap\"\r\nimport { Controller, useFormContext } from \"react-hook-form\"\r\nimport { useHistory, useParams } from \"react-router\"\r\nimport { useQuery } from \"react-query\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { Inputs as EmpresaInputs, ProveedorEmpresaFieldset } from \"./ProveedorEmpresaFieldset\"\r\nimport { Inputs as MedicoInput, ProveedorMedicoFieldset } from \"./ProveedorMedicoFieldset\"\r\nimport { Proveedor, ProveedoresService } from \"../services\"\r\n\r\nexport type Inputs = EmpresaInputs | MedicoInput\r\n\r\nexport const ProveedorFieldset = () => {\r\n\r\n  const { id } = useParams<{ id?: string }>()\r\n\r\n  const {\r\n    clearErrors,\r\n    control,\r\n    register,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n\r\n  const tipo = watch(\"tipo\")\r\n  \r\n  useEffect(()=>{\r\n    clearErrors()\r\n  }, [tipo])\r\n\r\n  const renderSpecificFieldset = () => {\r\n    if (tipo == 1) {\r\n      return <ProveedorMedicoFieldset />\r\n    }\r\n    if (tipo == 2) {\r\n      return <ProveedorEmpresaFieldset />\r\n    }\r\n    return null\r\n  }\r\n\r\n  const tipoField = register(\"tipo\")\r\n\r\n  return <fieldset>\r\n    <legend>Información general</legend>\r\n    <Form.Row>\r\n      <Form.Group as={Col} md={4}>\r\n        <Form.Label>Tipo de proveedor</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"tipo\"\r\n          render={({field: {value, ...field}, fieldState})=>{\r\n            return !id ? <>\r\n              <Form.Row className={fieldState.error ? \"is-invalid\" : \"\"}>\r\n                <Col>\r\n                  <Form.Check \r\n                    // disabled={!!id}\r\n                    readOnly={!!id}\r\n                    type=\"radio\"\r\n                    value={1}\r\n                    checked={value == 1}\r\n                    label=\"Médico\"\r\n                    isInvalid={!!fieldState.error}\r\n                    {...field}\r\n                  />\r\n                </Col>\r\n                <Col>\r\n                  <Form.Check\r\n                    // disabled={!!id}\r\n                    readOnly={!!id}\r\n                    type=\"radio\"\r\n                    value={2}\r\n                    checked={value == 2}\r\n                    label=\"Empresa\" \r\n                    isInvalid={!!fieldState.error}\r\n                    {...field} \r\n                  />\r\n                </Col>\r\n              </Form.Row>\r\n              <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n            </> : <Form.Control readOnly value={value == 1 ? \"MÉDICO\" : \"EMPRESA\"} />\r\n          }}\r\n        />        \r\n      </Form.Group>\r\n    </Form.Row>\r\n    {renderSpecificFieldset()}\r\n  </fieldset>\r\n}","import { useMemo } from \"react\"\r\nimport {  Col, Form } from \"react-bootstrap\"\r\nimport { LatLngExpression } from \"leaflet\"\r\nimport { Controller, useFormContext } from \"react-hook-form\"\r\nimport { Regional, LazyControl, LocationInput } from \"../../../../commons/components\"\r\nimport { useUser } from \"../../../../commons/auth\"\r\n\r\nexport type Inputs = {\r\n  initialized: boolean\r\n  regional: Regional[]\r\n  direccion?: string\r\n  ubicacion?: LatLngExpression | null\r\n  horario?: string, \r\n  telefono1?: number\r\n  telefono2?: number | null\r\n}\r\n\r\nexport const ContactoFieldset = () => {\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    register,\r\n    control,\r\n    formState,\r\n    watch\r\n  } = useFormContext<Inputs>()\r\n\r\n  const formErrors = formState.errors\r\n\r\n  const initialized = watch(\"initialized\")\r\n  const regional = watch(\"regional\")\r\n\r\n  const center: [number, number] = useMemo(()=>{\r\n    if(regional.length){\r\n      return [\r\n        regional[0].ubicacion.latitud,\r\n        regional[0].ubicacion.longitud\r\n      ]\r\n    }\r\n    return [\r\n      (user!.regional as Regional).ubicacion.latitud,\r\n      (user!.regional as Regional).ubicacion.longitud\r\n    ]\r\n  }, [user, regional.length])\r\n\r\n  return <fieldset>\r\n    <legend>Información de contacto</legend>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Direccion</Form.Label>\r\n        <LazyControl\r\n          as=\"textarea\"\r\n          initialized={initialized}\r\n          isInvalid={!!formErrors.direccion}\r\n          className=\"text-uppercase\"\r\n          aria-describedby=\"direccionHelpBlock\"\r\n          {...register(\"direccion\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.direccion?.message}</Form.Control.Feedback>\r\n        {!formErrors.direccion ? <Form.Text id=\"direccionHelpBlock\" muted>{`${watch(\"direccion\")!.length}/80` }</Form.Text> : null}\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col}>\r\n        <Form.Label>Ubicación</Form.Label>\r\n        <Controller\r\n          name=\"ubicacion\"\r\n          control={control}\r\n          render={({ field, fieldState }) => {\r\n            return <>\r\n              <LocationInput\r\n                initialized={initialized}\r\n                isInvalid={!!fieldState.error}\r\n                center={field.value || center}\r\n                value={field.value!}\r\n                onChange={field.onChange}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{fieldState.error?.message}</Form.Control.Feedback>\r\n            </>\r\n          }}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n    <Form.Row>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 1</Form.Label>\r\n        <LazyControl\r\n          initialized={initialized}\r\n          isInvalid={!!formErrors.telefono1}\r\n          {...register(\"telefono1\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.telefono1?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group as={Col} sm={4}>\r\n        <Form.Label>Teléfono 2</Form.Label>\r\n        <LazyControl\r\n          initialized={initialized}\r\n          isInvalid={!!formErrors.telefono2}\r\n          {...register(\"telefono2\")}\r\n        />\r\n        <Form.Control.Feedback type=\"invalid\">{formErrors.telefono2?.message}</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </Form.Row>\r\n  </fieldset>\r\n}","import { useEffect } from \"react\"\r\nimport { Alert, Button, Breadcrumb, Col, Form, Spinner } from \"react-bootstrap\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\"\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\"\r\nimport { useForm, FormProvider } from \"react-hook-form\"\r\nimport { Inputs as ProveedorInputs, ProveedorFieldset } from \"./ProveedorFieldset\"\r\nimport { Inputs as ContactoInputs, ContactoFieldset } from \"./ContactoFieldset\"\r\nimport { Proveedor, Empresa, Medico, InformacionContacto, ProveedoresService } from \"../services\"\r\nimport { AxiosError } from \"axios\"\r\nimport { useServerValidation } from \"../../../../commons/hooks\"\r\nimport { Regional } from \"../../../../commons/services\"\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\n\r\ntype Inputs = ProveedorInputs & ContactoInputs\r\n\r\nconst schema = yup.object().shape({\r\n  tipo: yup.number().required().oneOf([1,2]),\r\n  nit: yup.string().trim().label(\"NIT\")\r\n    .matches(/^[0-9]*$/, \"Este campo solo admite números\").required(),\r\n  ci: yup.number().label(\"número de carnet\")\r\n    .nonEmpty()\r\n    .typeError(\"El ${path} no es un numero valido\")\r\n    .when(\"tipo\", function(tipo: any, schema: any) {\r\n      if(tipo == 1) return schema.required()\r\n      return schema.optional()\r\n    }),\r\n  ciComplemento: yup.string().label(\"complemento del carnet\").nonEmpty().uppercase().default(null).nullable().notRequired()\r\n    .when(\"tipo\", {\r\n      is: (tipo: any) => tipo == 1,\r\n      then: (schema) => schema.matches(/^[1-9][A-Z]$/, \"Complemento invalido.\")\r\n    }),\r\n  apellidoPaterno: yup.string().label(\"apellido paterno\").nonEmpty().uppercase().default(null).nullable()\r\n    .when([\"tipo\", \"apellidoMaterno\"], {\r\n      is: (tipo: number, apellidoMaterno: string) => tipo == 1 && !apellidoMaterno,\r\n      then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\").max(25)\r\n    }),\r\n  apellidoMaterno: yup.string().trim().label(\"apellido materno\").nonEmpty().uppercase().default(null).nullable()\r\n  .when([\"tipo\", \"apellidoPaterno\"], {\r\n    is: (tipo: number, apellidoPaterno: string) => tipo == 1 && !apellidoPaterno,\r\n    then: (schema) => schema.required(\"Debe proporcionar al menos un apellido\").max(25)\r\n  }),\r\n  nombre: yup.string().label(\"nombre\").nonEmpty().uppercase().required().label(\"nombre\")\r\n    .when(\"tipo\", function(tipo: any, schema: any) {\r\n      return tipo ==  1 ? schema.max(50) : schema.max(100)\r\n    }),\r\n  especialidad: yup.string().label(\"especialidad\").nonEmpty().uppercase()\r\n    .when(\"tipo\", function(tipo: any, schema: any) {\r\n      return tipo ==  1 ? schema.required(\"Debe indicar una especialidad\") : schema.optional()\r\n    }),\r\n  regional: yup.array().length(1, \"Debe indicar una regional\").required(),\r\n\r\n  direccion: yup.string().label(\"dirección\").nonEmpty().uppercase().required().max(80),\r\n  ubicacion: yup.mixed().label(\"ubicación\").required(),\r\n  telefono1: yup.number().label(\"telefono 1\")\r\n    .nonEmpty()\r\n    .typeError(\"No es un numero válido\").required(),\r\n  telefono2: yup.number().label(\"telefono 2\")\r\n    .nonEmpty()\r\n    .typeError(\"No es un numero válido\").nullable().notRequired()\r\n}, [[\"apellidoMaterno\", \"apellidoPaterno\"]])\r\n\r\n\r\nexport const ProveedorForm = () => {\r\n\r\n  const { id } = useParams<{id?: string}>()\r\n  const history = useHistory<{\r\n    proveedor?: Proveedor\r\n  }>()\r\n\r\n\r\n  const formMethods = useForm<Inputs>({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: !id || id.startsWith(\"MED\") ? {\r\n      tipo: 1,\r\n      initialized: !id,\r\n      ciComplemento: null,\r\n      regional: [],\r\n      direccion: \"\",\r\n      ubicacion: null\r\n    } : {\r\n      tipo: 2,\r\n      initialized: !id,\r\n      regional: [],\r\n      direccion: \"\",\r\n      ubicacion: null\r\n    }\r\n  })\r\n\r\n  const {\r\n    formState,\r\n    handleSubmit,\r\n    reset,\r\n    setError,\r\n    setValue,\r\n    watch\r\n  } = formMethods\r\n\r\n  // if(Object.keys(formState.errors).length !== 0) console.log(formState.errors, watch())\r\n\r\n  const initialized = watch(\"initialized\")\r\n\r\n  const queryClient = useQueryClient()\r\n\r\n  const cargar = useQuery([\"proveedores\", \"cargar\", id], () => {\r\n    return ProveedoresService.cargar(id!)\r\n  }, {\r\n    enabled: !!id && !initialized,\r\n    initialData: history.location.state?.proveedor && {status: 200, statusText: \"OK\", data: history.location.state.proveedor, headers: {}, config: {}},\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    onError(){\r\n      setValue(\"initialized\", true)\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(cargar.data){\r\n      const { data } = cargar.data\r\n      setValue(\"initialized\", true)\r\n      setValue(\"tipo\", data.tipo)\r\n      setValue(\"nit\", data.nit)\r\n      setValue(\"nombre\", data.nombre)\r\n      setValue(\"regional\", [data.regional as Regional])\r\n      setValue(\"direccion\", data.direccion)\r\n      setValue(\"ubicacion\", data.ubicacion && [data.ubicacion.latitud, data.ubicacion.longitud])\r\n      setValue(\"telefono1\", data.telefono1)\r\n      setValue(\"telefono2\", data.telefono2)\r\n      if(data.tipo == 1){\r\n        setValue(\"ci\", data.ci.raiz)\r\n        setValue(\"ciComplemento\", data.ci.complemento)\r\n        setValue(\"apellidoMaterno\", data.apellidoMaterno)\r\n        setValue(\"apellidoPaterno\", data.apellidoPaterno)\r\n        setValue(\"especialidad\", data.especialidad)\r\n      }\r\n    }\r\n  }, [cargar.data])\r\n\r\n  const guardar = useMutation((values: Inputs)=>{\r\n\r\n    let general: Omit<Empresa, \"id\" | \"estado\"> | Omit<Medico, \"id\" | \"estado\" | \"nombreCompleto\">\r\n    if(values.tipo == 1) {\r\n      general = {\r\n        tipo: values.tipo!,\r\n        nit: values.nit!,\r\n        ci: {\r\n          raiz: values.ci!,\r\n          complemento: values.ciComplemento!\r\n        },\r\n        apellidoPaterno: values.apellidoPaterno!,\r\n        apellidoMaterno: values.apellidoMaterno!,\r\n        nombre: values.nombre!,\r\n        especialidad: values.especialidad!,\r\n        regionalId: values.regional![0].id\r\n      }\r\n    }\r\n    else {\r\n      general = {\r\n        tipo: values.tipo!,\r\n        nit: values.nit!,\r\n        nombre: values.nombre!,\r\n        regionalId: values.regional![0].id\r\n      }\r\n    }\r\n\r\n    let lat, lng\r\n    if(Array.isArray(values.ubicacion)){\r\n      [lat, lng] = values.ubicacion!\r\n    }\r\n    else{\r\n      ({lat, lng} = values.ubicacion!)\r\n    }\r\n    const contacto: InformacionContacto = {\r\n      direccion: values.direccion!,\r\n      ubicacion: {\r\n        latitud: lat,\r\n        longitud: lng\r\n      },\r\n      telefono1: values.telefono1!,\r\n      telefono2: values.telefono2!\r\n    }\r\n\r\n    return id ? ProveedoresService.actualizar({\r\n      id, ...general, ...contacto\r\n    }) : ProveedoresService.registrar({\r\n      ...general, ...contacto\r\n    })\r\n  }, {\r\n    onSuccess: ()=>{\r\n      reset({\r\n        tipo: 1,\r\n        initialized: true,\r\n        ciComplemento: null,\r\n        regional: [],\r\n        direccion: \"\",\r\n        ubicacion: null\r\n      })\r\n      queryClient.invalidateQueries(\"proveedores\");\r\n      if(id) history.push(\"/clinica/proveedores\")\r\n    }\r\n  })\r\n\r\n  // Efecto para agregar errores de validocion devueltos por el servidor\r\n  useServerValidation(guardar.error as AxiosError, setError)\r\n\r\n  const renderAlert = () => {\r\n    if(cargar.error) {\r\n      const { response } = cargar.error as AxiosError\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          !response ? \"Error: no se pudo conectar con el servidor\" :\r\n          response.status == 404 ? \"El proveedor no existe\" : \r\n          response.data.message\r\n        }\r\n      </Alert>\r\n    }\r\n    if(guardar.error) {\r\n      const { response } = guardar.error as AxiosError\r\n      return <Alert variant=\"danger\">\r\n        {\r\n          response?.data?.message || \"Error: no se pudo conectar con el servidor\"\r\n        }\r\n      </Alert>\r\n    }\r\n    if(guardar.isSuccess) {\r\n      return <Alert variant=\"success\">\r\n        La operacion se realizó con exito\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/clinica/proveedores\"}}>Proveedores</Breadcrumb.Item>\r\n      {id ? <Breadcrumb.Item active>{id}</Breadcrumb.Item> : null}\r\n      <Breadcrumb.Item active>{!id ? \"Registro\" : \"Actualización\"}</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      guardar.mutate(values)\r\n    })}>\r\n      {renderAlert()}\r\n      <ProveedorFieldset />\r\n      <ContactoFieldset />\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {guardar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\"/> : null}\r\n        Guardar\r\n      </Button>\r\n    </Form>\r\n  </FormProvider>\r\n}","import { useState } from \"react\"\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\"\r\nimport { FaSync } from \"react-icons/fa\"\r\nimport { AsyncTypeahead, AsyncTypeaheadProps } from 'react-bootstrap-typeahead'\r\nimport { useInfiniteQuery } from 'react-query'\r\nimport { Proveedor, Filter as ProveedorFilter, ProveedoresService } from \"../services\"\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css'\r\n\r\nexport type { Proveedor }\r\n\r\ntype Props = {\r\n  feedback?: string,\r\n  filter?: ProveedorFilter\r\n  defaultOptions?: Proveedor[]\r\n} & Omit<AsyncTypeaheadProps<Proveedor>, \"isLoading\" | \"options\" | \"onSearch\">\r\n\r\nexport const ProveedoresTypeahead = ({isInvalid, feedback, filter={}, ...props}: Props) => {\r\n  \r\n  const [options, setOptions] = useState<Proveedor[]>(props.defaultOptions || [])\r\n  const [ search, setSearch ] = useState(\"\")\r\n\r\n  filter = {\r\n    ...filter,\r\n    _busqueda: search\r\n  }\r\n\r\n  const queryKey = [\"proveedores\", \"buscar\", filter]\r\n\r\n  const buscar = useInfiniteQuery(queryKey, ({pageParam = 1})=>{\r\n    return ProveedoresService.buscar({\r\n      current: pageParam,\r\n      size: 10\r\n    }, filter)\r\n  }, {\r\n    enabled: !!search,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n    getNextPageParam: (lastPage) => lastPage.data.meta.nextPage,\r\n    onSuccess: ({pages}) =>{\r\n      setOptions(pages.flatMap((response)=>response.data.records, 1))\r\n    }\r\n  })\r\n\r\n  return <InputGroup hasValidation  className=\"position-unset\">\r\n    <AsyncTypeahead\r\n      clearButton\r\n      align=\"left\"\r\n      emptyLabel={buscar.isError ? \"\" : \"No se encontraron resultados\"}\r\n      promptText=\"Escribe un nombre o especialidad para buscar\"\r\n      searchText=\"Buscando...\"\r\n      paginationText=\"Cargar más...\"\r\n      {...props}\r\n      labelKey={(proveedor: Proveedor) => proveedor.razonSocial!}\r\n      className={props.className + ((buscar.isError || isInvalid) ? \" is-invalid\" : \"\")}\r\n      isInvalid={buscar.isError || isInvalid}\r\n      filterBy={()=>true}\r\n      maxResults={10}\r\n      minLength={0}\r\n      options={options}\r\n      isLoading={buscar.status == \"loading\" || buscar.isFetchingNextPage}\r\n      onSearch={(search) => {\r\n        setSearch(search)\r\n      }}\r\n      paginate\r\n      onPaginate={()=>{\r\n        buscar.fetchNextPage()\r\n      }}\r\n      useCache={false}\r\n\r\n      renderMenuItemChildren={(proveedor) => {\r\n        return <div>\r\n          <div>{proveedor.razonSocial}</div>\r\n          <small className=\"text-muted\">{proveedor.tipo == 1 ? proveedor.especialidad : \"Empresa\"}</small> \r\n        </div>\r\n      }}\r\n    />\r\n    {buscar.isError ? <InputGroup.Append>\r\n      <Button variant=\"outline-danger\" onClick={()=>buscar.refetch()}><FaSync /></Button>\r\n    </InputGroup.Append> : null}\r\n    <Form.Control.Feedback type=\"invalid\">{buscar.isError ? \"Ocurrio un error al realizar la busqueda\" : feedback}</Form.Control.Feedback>\r\n  </InputGroup>\r\n}","import { SolicitudAtencionExternaPolicy } from \"./SolicitudAtencionExternaPolicy\";\r\n\r\nexport const solicitudAtencionExternaPolicy = new SolicitudAtencionExternaPolicy()","import { User } from \"../../../../commons/auth\";\r\nimport * as Permisos from \"./Permisos\"\r\n\r\nexport class SolicitudAtencionExternaPolicy {\r\n  \r\n  index = (user: User) => {\r\n    return this.view(user) || this.register(user)\r\n  }\r\n\r\n  register = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.registerByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA)) return true\r\n  }\r\n\r\n  registerByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  view = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    // const restrictions = [this.viewByRegionalOnly(user, context)]\r\n    // let hasRestrictions;\r\n    // for(let restriction of restrictions){\r\n    //   if(restriction === false) return false\r\n    //   hasRestrictions ||= restriction\r\n    // }\r\n    // if(hasRestrictions) return true    \r\n    const byRegionalOnly = this.viewByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA)) return true\r\n  }\r\n\r\n  viewByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n\r\n  emit = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    const byRegionalOnly = this.emitByRegionalOnly(user, context)\r\n    if(byRegionalOnly !== undefined) return byRegionalOnly\r\n    if(user?.can(Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA)) return true\r\n  }\r\n\r\n  emitByRegionalOnly = (user: User, context?: {\r\n    regionalId: number\r\n  }) => {\r\n    if(user?.can(Permisos.EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL)) return !context?.regionalId || user.regionalId == context.regionalId\r\n  }\r\n}","/**\r\n * Permisos de solicitud de transferencia externa\r\n */\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA = \"Ver solicitudes de atención externa\";\r\nexport const VER_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Ver solicitudes de atención externa (misma regional)\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Registrar solicitudes de atención externa\";\r\nexport const REGISTRAR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Registrar solicitudes de atención externa (misma regional)\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA = \"Emitir solicitudes de atención externa\";\r\nexport const EMITIR_SOLICITUDES_DE_ATENCION_EXTERNA_MISMA_REGIONAL = \"Emitir solicitudes de atención externa (misma regional)\";\r\n   ","import React from \"react\"\r\nimport { Button, Col, Form } from 'react-bootstrap'\r\nimport { useForm, Controller }  from 'react-hook-form'\r\nimport { Medico, MedicosTypeahead } from \"../../medicos/components\"\r\nimport { Proveedor, ProveedoresTypeahead } from \"../../proveedores/components\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { SolicitudesAtencionExternaFilter } from \"../services/SolicitudesAtencionExternaService\"\r\nimport moment from \"moment\"\r\nimport { solicitudAtencionExternaPolicy } from \"../policies\"\r\nimport { medicoPolicy } from \"../../medicos\"\r\nimport { proveedorPolicy } from \"../../proveedores\"\r\n\r\ntype Inputs = {\r\n  numero: string\r\n  desde: string\r\n  hasta: string\r\n  numeroPatronal: string\r\n  matricula: string\r\n  medico: Medico[]\r\n  proveedor: Proveedor[]\r\n  regional: Regional[]\r\n}\r\n\r\ntype Props = {\r\n  onFilter: (filter: SolicitudesAtencionExternaFilter)=>void\r\n}\r\nexport const SolicitudAtencionExternaFilterForm = (props: Props)=>{\r\n\r\n  const user = useUser()\r\n\r\n  const {\r\n    control,\r\n    formState,\r\n    handleSubmit,\r\n    register,\r\n    reset,\r\n    watch\r\n  } = useForm<Inputs>({\r\n    defaultValues: {\r\n      medico: [],\r\n      proveedor: [],\r\n      regional: []\r\n    }\r\n  })\r\n  \r\n  return <Form className=\"p-2 border rounded\" onSubmit={handleSubmit((input)=>{\r\n    const filter: SolicitudesAtencionExternaFilter = {}\r\n    \r\n    props.onFilter({\r\n      numeroPatronal: input.numeroPatronal,\r\n      matricula: input.matricula,\r\n      desde: input.desde && moment(input.desde).format(\"YYYY-MM-DD\"),\r\n      hasta: input.hasta && moment(input.hasta).format(\"YYYY-MM-DD\"),\r\n      medicoId: input.medico.length && input.medico[0].id,\r\n      proveedorId: input.proveedor.length ? input.proveedor[0].id : undefined,\r\n      regionalId: input.regional.length && input.regional[0].id\r\n    })\r\n  })}>\r\n    <Form.Row>\r\n      <Form.Group as={Col} xs={6} md={4} xl={2}>\r\n        <Form.Label>Nº Patronal</Form.Label>\r\n        <Form.Control {...register(\"numeroPatronal\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} xs={6} md={4} xl={2}>\r\n        <Form.Label>Matricula</Form.Label>\r\n        <Form.Control {...register(\"matricula\")} />\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={4} xl={2}>\r\n        <Form.Label>Regional</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"regional\"\r\n          render={({field: {ref, value, ...field}})=>{\r\n            return <RegionalesTypeahead\r\n              className=\"text-uppercase\"\r\n              id=\"medico-filter-regional\"\r\n              selected={solicitudAtencionExternaPolicy.viewByRegionalOnly(user) ? [user!.regional as Regional] : value}\r\n              filterBy={(regional) => solicitudAtencionExternaPolicy.viewByRegionalOnly(user, {regionalId: regional.id}) !== false}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6}>\r\n        <Form.Label>Médico</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"medico\"\r\n          render={({field: {ref, value, ...field}})=>{\r\n            return <MedicosTypeahead\r\n              id=\"medicos-typeahead\"\r\n              filter={{\r\n                regionalId: medicoPolicy.viewByRegionalOnly(user) ? user!.regionalId : watch(\"regional\").length && watch(\"regional\")[0].id\r\n              }}\r\n              selected={value}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} md={6}>\r\n        <Form.Label>Proveedor</Form.Label>\r\n        <Controller\r\n          control={control}\r\n          name=\"proveedor\"\r\n          render={({field: {ref, value, ...field}})=>{\r\n            return <ProveedoresTypeahead\r\n              id=\"proveedores-typeahead\"\r\n              filter={{\r\n                regionalId: proveedorPolicy.viewByRegionalOnly(user) ? user!.regionalId : watch(\"regional\").length && watch(\"regional\")[0].id\r\n              }}\r\n              selected={value}\r\n              {...field}\r\n            />\r\n          }}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} xs={6} md={4} xl={2}>\r\n        <Form.Label>Desde</Form.Label>\r\n        <Form.Control\r\n          type=\"date\"\r\n          {...register(\"desde\")}\r\n        />\r\n      </Form.Group>\r\n      <Form.Group as={Col} xs={6} md={4} xl={2}>\r\n        <Form.Label>Hasta</Form.Label>\r\n        <Form.Control\r\n          type=\"date\"\r\n          {...register(\"hasta\")}\r\n        />\r\n      </Form.Group>\r\n    </Form.Row>\r\n\r\n    <Form.Row>\r\n      <Col xs=\"auto\" className=\"ml-auto\">\r\n        <Button type=\"submit\">Aplicar</Button>\r\n      </Col>\r\n      <Col xs=\"auto\">\r\n        <Button variant=\"secondary\" onClick={()=>reset()}>Limpiar</Button>\r\n      </Col>\r\n    </Form.Row>\r\n  </Form>\r\n}","import { Dropdown } from \"react-bootstrap\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { VerticalEllipsisDropdownToggle } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { ProtectedContent } from \"../../../../commons/auth/components\"\r\nimport { solicitudAtencionExternaPolicy } from \"../policies\"\r\nimport { SolicitudAtencionExterna } from \"../services\"\r\n\r\ntype Props = {\r\n  solicitud: SolicitudAtencionExterna\r\n}\r\nexport const RowOptions = ({solicitud}: Props) => {\r\n\r\n  const modal = useModal(\"pdfModal\")\r\n\r\n  return <Dropdown style={{position: \"initial\"}}>\r\n    <Dropdown.Toggle as={VerticalEllipsisDropdownToggle}\r\n      variant=\"link\" id={`dropdown-solicitud-${solicitud.id}`}\r\n    />\r\n    <Dropdown.Menu alignRight>\r\n      <ProtectedContent\r\n        authorize={(user) => solicitudAtencionExternaPolicy.emit(user, solicitud)}\r\n      >\r\n        <Dropdown.Item href=\"#\" onClick={() => {\r\n          modal.open({\r\n            title: \"Formulario D.M. - 11\",\r\n            url: solicitud.urlDm11\r\n          })\r\n        }}>Ver D.M. - 11</Dropdown.Item>\r\n      </ProtectedContent>\r\n    </Dropdown.Menu>\r\n  </Dropdown>\r\n}","import { useMemo, useRef, useState } from \"react\"\r\nimport { Button, Breadcrumb } from \"react-bootstrap\"\r\nimport Skeleton from \"react-loading-skeleton\"\r\nimport { FaPlus } from \"react-icons/fa\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { useQuery } from \"react-query\"\r\nimport { Page } from \"../../../../commons/services/Page\"\r\nimport { SolicitudesAtencionExternaFilter as Filter, SolicitudesAtencionExternaService } from \"../services/SolicitudesAtencionExternaService\"\r\nimport { SolicitudAtencionExternaFilterForm } from \"./SolicitudAtencionExternaFilterForm\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { RowOptions } from \"./RowOptions\"\r\nimport { solicitudAtencionExternaPolicy } from \"../policies\"\r\nimport { IndexTemplate } from \"../../../../commons/components/IndexTemplate\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\n\r\nexport const SolicitudAtencionExternaIndex = ()=>{\r\n  const {pathname: path} = useLocation()\r\n  const [page, setPage] = useState<Page>({\r\n    current: 1,\r\n    size: 10\r\n  })\r\n\r\n  const user = useUser();\r\n\r\n  const [filter, setFilter] = useState<Filter>(()=>{\r\n    const defaultFilter: Filter = {}\r\n    if(solicitudAtencionExternaPolicy.viewByRegionalOnly(user)){\r\n      defaultFilter.regionalId = user!.regionalId;\r\n    }\r\n    return defaultFilter\r\n  })\r\n\r\n  const canView = !!superUserPolicyEnhancer(solicitudAtencionExternaPolicy.view)(user)\r\n  const buscar = useQuery([\"solicitudesAtencionExterna.buscar\", page, filter], ()=>{\r\n    return SolicitudesAtencionExternaService.buscar(filter, page)\r\n  }, {\r\n    enabled: !!canView,\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false\r\n  })\r\n\r\n  const totalRef = useRef(-1)\r\n\r\n  if(buscar.data) {\r\n    totalRef.current = buscar.data.data.meta.total\r\n  }\r\n  \r\n  const updateFilter = (filter: Filter)=>{\r\n    buscar.remove()\r\n    setFilter(oldFilter => ({...oldFilter, ...filter}));\r\n    setPage(page => ({...page, current: 1}))\r\n  }\r\n\r\n  const loader = useMemo(()=>{\r\n    const rows = []\r\n    for(let i = 0; i < page.size; i++){\r\n      rows.push(<tr key={i}>\r\n        <th scope=\"row\">\r\n          {i + 1}\r\n        </th>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n          <Skeleton />\r\n        </td>\r\n        <td>\r\n        </td>\r\n      </tr>)\r\n    }\r\n    return rows\r\n  }, [page.size])\r\n\r\n  return <div className=\"px-1\">\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item active>Solicitudes de atencion externa</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <IndexTemplate\r\n      policy={solicitudAtencionExternaPolicy}\r\n      isLoading={buscar.isFetching}\r\n      hasError={buscar.isError}\r\n      total={totalRef.current}\r\n      page={page}\r\n      data={buscar.data?.data.records}\r\n      renderLoader={()=>{\r\n        return <>{loader}</>\r\n      }}\r\n      renderData={(solicitud, index)=>{\r\n        return <tr key={solicitud.id}>\r\n          <th scope=\"row\">\r\n              {(page.current - 1)*page.size + index + 1}\r\n          </th>\r\n          <td>{solicitud.id}</td>\r\n          <td>{solicitud.fecha}</td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.regional.nombre}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.paciente.nombreCompleto}</div>\r\n            <div className=\"text-small text-muted\">{solicitud.paciente.matricula}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.prestacion}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.medico.nombreCompleto}</div>\r\n            <div className=\"text-small text-muted\">{solicitud.medico.especialidad}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.proveedor.razonSocial}</div>\r\n            <div className=\"text-small text-muted\">{(solicitud.proveedor as any).especialidad}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.empleador.nombre}</div>\r\n            <div className=\"text-small text-muted\">{solicitud.empleador?.numeroPatronal}</div>\r\n          </td>\r\n          <td>\r\n            <div style={{width: \"max-content\", maxWidth: 300}}>{solicitud.titular?.nombreCompleto}</div>\r\n            <div className=\"text-small text-muted\">{solicitud.titular?.matricula}</div>\r\n          </td>\r\n          <td style={{textTransform: \"none\"}}>\r\n            <RowOptions solicitud={solicitud} />\r\n          </td>\r\n        </tr>\r\n      }}\r\n      renderDataHeaders={()=>{\r\n        return <tr>\r\n          <th style={{width: 1}}>#</th>\r\n          <th>Nº</th>\r\n          <th style={{minWidth: 155}}>Fecha</th>\r\n          <th>Regional</th>\r\n          <th>Paciente</th>\r\n          <th>Prestación</th>\r\n          <th>Médico</th>\r\n          <th>Proveedor</th>\r\n          <th>Empleador</th>\r\n          <th>Titular</th>\r\n          <th style={{width: 1}}></th>\r\n        </tr>\r\n      }}\r\n      renderFilterForm={()=>{\r\n        return <SolicitudAtencionExternaFilterForm onFilter={updateFilter} />\r\n      }}\r\n      renderCreateButton={()=>{\r\n        return <Button\r\n          as={Link}\r\n          to={`${path}/registrar`}\r\n          className=\"d-flex align-items-center\">\r\n            <FaPlus className=\"mr-1\" /><span>Nuevo</span>\r\n        </Button>\r\n      }}\r\n      onPageChange={(page)=>setPage(page)}\r\n      onRefetch={()=>{\r\n        buscar.remove()\r\n        buscar.refetch({throwOnError: true})\r\n      }}\r\n      onSearch={(search)=>{\r\n        updateFilter({_busqueda: search})\r\n      }}\r\n    />\r\n    {/* <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={solicitudAtencionExternaPolicy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              buscar.refetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              setShowFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={solicitudAtencionExternaPolicy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            <Button\r\n              as={Link}\r\n              to={`${path}/registrar`}\r\n              className=\"d-flex align-items-center\">\r\n                <FaPlus className=\"mr-1\" /><span>Nuevo</span>\r\n            </Button>\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={solicitudAtencionExternaPolicy.view}\r\n    >\r\n      <Form.Row className=\"mb-2\">\r\n        <Col xs={12}>\r\n          <Collapse in={showFilterForm}>\r\n            <div>\r\n              <SolicitudAtencionExternaFilterForm onFilter={(filter)=>{\r\n                setFilter(filter)\r\n                setPage(page=>({ ...page, current: 1 }))\r\n              }} />\r\n            </div>\r\n          </Collapse>\r\n        </Col>\r\n        <Col className=\"ml-auto\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Label htmlFor=\"pageSizeSelector\" srOnly>Tamaño de pagina</Form.Label>\r\n            <Form.Control id=\"pageSizeSelector\" className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              setPage({\r\n                current: 1,\r\n                size: parseInt(value)\r\n              })\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Form.Row>\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Nº</th>\r\n            <th>Fecha y hora</th>\r\n            <th>Matrícula asegurado</th>\r\n            <th>Doctor</th>\r\n            <th>Proveedor</th>\r\n            <th style={{width: 1}}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      {buscar.status === \"success\" ? <div className=\"d-flex flex-row\">\r\n        <span className=\"mr-auto\">{`Se encontraron ${total} resultados`}</span>\r\n        <Pagination\r\n          current={page.current}\r\n          total={Math.ceil((total - page.size) / page.size) + 1}\r\n          onChange={(current) => setPage((page) => ({ ...page, current }))}\r\n        />\r\n      </div> : null}\r\n    </ProtectedContent> */}\r\n  </div>\r\n}","import React, { forwardRef, useImperativeHandle, useRef, useCallback } from \"react\"\r\nimport { Button, Modal, ModalProps, Table } from \"react-bootstrap\"\r\nimport { Asegurado } from \"../services\"\r\n\r\ntype Props = Omit<ModalProps, \"children\"> & {\r\n  asegurados: Asegurado[]\r\n  onSelect: (asegurado: Asegurado) => void\r\n  title: string\r\n}\r\n\r\nexport const AseguradoChooser = (props: Props) => {\r\n  return <Modal {...props} >\r\n    <Modal.Header>\r\n      {props.title}\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n      <Table responsive className=\"small\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: 1}}>#</th>\r\n            <th>Matricula</th>\r\n            <th>Nombre completo</th>\r\n            <th>Estado</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {!!props.asegurados.length ? props.asegurados.map((asegurado, index)=>{\r\n            return <tr key={asegurado.id}>\r\n              <th scope=\"row\">{index+1}</th>\r\n              <td>{asegurado.matricula}-{asegurado.matriculaComplemento}</td>\r\n              <td>{asegurado.nombreCompleto}</td>\r\n              <td className={asegurado.estadoText ? \"\" : \"bg-ligth\"}>{asegurado.estadoText || \"Desconocido\"}</td>\r\n              <td><Button onClick={()=>{\r\n                props.onSelect(asegurado)\r\n              }}\r\n              >Seleccionar</Button></td>\r\n            </tr>\r\n          }) : <tr><td className=\"bg-light text-center\" colSpan={100}>No se encontraron resultados</td></tr>}\r\n        </tbody>\r\n      </Table>\r\n    </Modal.Body>\r\n  </Modal>\r\n}","import { apiClient, Page, PaginatedResponse } from \"../../../../commons/services\"\r\n\r\n// export type Titular = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   estado: string,\r\n//   fechaBaja?: string,\r\n//   fechaExtinsion?: string,\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     aportes: string\r\n//   }\r\n// }\r\n\r\n// type Beneficiario = Titular & {\r\n//   fechaExtinsion?: string\r\n// }\r\n\r\ninterface Afiliacion {\r\n  id: string\r\n  baja: {\r\n    regDate: string,\r\n    fechaValidezSeguro: string\r\n  } | null\r\n}\r\n\r\ninterface AfiliacionBeneficiario extends Afiliacion  {\r\n  parentesco: number\r\n  idAfiliacionTitular: string\r\n  fechaExtincion: string | null\r\n}\r\n\r\ninterface Afiliado {\r\n  id: string\r\n  matricula: string\r\n  matriculaComplemento: string\r\n  apellidoPaterno: string | null\r\n  apellidoMaterno: string | null\r\n  nombres: string\r\n  nombreCompleto: string\r\n  estado: number\r\n  estadoText: string\r\n  tipo: number\r\n  empleador: {\r\n    id: number\r\n    numeroPatronal: string\r\n    nombre: string\r\n    estado: number\r\n    estadoText: string\r\n    fechaBaja: string\r\n    enMora: boolean\r\n  }\r\n}\r\n\r\nexport interface Titular extends Afiliado {\r\n  tipo: 1\r\n  afiliacion: Afiliacion\r\n}\r\n\r\nexport interface Beneficiario extends Afiliado {\r\n  tipo: 2\r\n  titular: Titular\r\n  afiliacion: AfiliacionBeneficiario\r\n}\r\n\r\nexport type Asegurado = Titular | Beneficiario\r\n\r\n// export type Asegurado = {\r\n//   id: string,\r\n//   matricula: string,\r\n//   matriculaComplemento: string,\r\n//   apellidoPaterno: string | null,\r\n//   apellidoMaterno: string,\r\n//   nombres: string,\r\n//   tipo_id: number,\r\n//   estado: number,\r\n//   baja: {\r\n//     regDate: string,\r\n//     fechaValidezSeguro: string\r\n//   },\r\n//   fechaExtinsion?: string\r\n//   titularId: string\r\n//   empleador: {\r\n//     id: number,\r\n//     numeroPatronal: string,\r\n//     nombre: string,\r\n//     estado: string,\r\n//     fechaBaja: string,\r\n//     aportes: string\r\n//   }\r\n//   titular?: {\r\n//     id: string,\r\n//     matricula: string,\r\n//     apellidoPaterno: string | null,\r\n//     apellidoMaterno: string | null,\r\n//     nombres: string,\r\n//     estado: string,\r\n//     baja: {\r\n//       regDate: string,\r\n//       fechaValidezSeguro: string\r\n//     },\r\n//   }\r\n// }\r\n\r\nexport const AseguradosService = {\r\n  buscarPorMatricula: (matricula: string) =>{\r\n    return apiClient.get<PaginatedResponse<Asegurado>>(\"asegurados\", {\r\n      params: {\r\n        filter: {\r\n          matricula\r\n        },\r\n        page: {\r\n          size: 10\r\n        },\r\n        include: \"empleador,titular\"\r\n      },\r\n      // transformResponse: [...apiClient.defaults.transformResponse as AxiosTransformer[], (response:any)=>{\r\n      //   console.log(response)\r\n      //   return response\r\n      // }]\r\n    })\r\n  }\r\n}","import { useEffect, useState, useRef } from \"react\"\r\nimport { Accordion, Alert, Card, Form, Col, InputGroup, FormControl, Button, Spinner } from \"react-bootstrap\"\r\nimport { useFormContext } from \"react-hook-form\"\r\nimport { FaSearch } from \"react-icons/fa\"\r\nimport { useQuery } from \"react-query\"\r\nimport { AseguradoChooser } from \"./AseguradoChooser\"\r\nimport { Asegurado, AseguradosService } from \"../services/AseguradosService\"\r\nimport moment from 'moment';\r\n\r\nexport type AseguradoInputs = {\r\n  asegurado: {\r\n    matricula: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    parentesco: string\r\n    estado: string\r\n    baja: {\r\n      fechaValidezSeguro: string\r\n    }\r\n    fechaExtincion: string\r\n  }\r\n  titular: {\r\n    matricula: string\r\n    apellidoPaterno: string\r\n    apellidoMaterno: string\r\n    nombres: string\r\n    estado: string\r\n    baja: {\r\n      fechaValidezSeguro: string\r\n    }\r\n  }\r\n  empleador: {\r\n    numeroPatronal: string\r\n    nombre: string\r\n    estado: string\r\n    fechaBaja: string\r\n    enMora: string\r\n  }\r\n}\r\n\r\nexport const AseguradoCard = (props: {\r\n  value: Asegurado | null\r\n  onChange(asegurado: Asegurado | null): void\r\n}) => {\r\n\r\n  const {\r\n    register,\r\n    formState,\r\n    trigger,\r\n    setValue,\r\n    clearErrors,\r\n    control,\r\n    watch\r\n  } = useFormContext<AseguradoInputs>()\r\n\r\n  const [aseguradoChooserVisible, showAseguradoChooser] = useState(false)\r\n\r\n  const asegurado = props.value\r\n  const matricula = watch(\"asegurado.matricula\")\r\n  const buscar = useQuery([\"asegurados.buscar\", matricula], () => {\r\n    return AseguradosService.buscarPorMatricula(matricula)\r\n  }, {\r\n    enabled: false,\r\n    onSuccess: ({ data: { records } }) => {\r\n      if (records.length == 1) {\r\n        const asegurado = records[0]\r\n        props.onChange(asegurado)\r\n      }\r\n      else {\r\n        showAseguradoChooser(true)\r\n      }\r\n    }\r\n  })\r\n\r\n  const getParentesco = (code: number) => {\r\n    switch(code){\r\n      case 1: return \"Hijo(a)\"\r\n      case 2: return \"Esposa\"\r\n      case 3: return \"Conviviente\"\r\n      case 4: return \"Madre\"\r\n      case 5: return \"Padre\"\r\n      case 6: return \"Hermano(a)\"\r\n      case 7: return \"Esposo\"\r\n      case 8: return \"Derechohabiente\"\r\n      default: return \"\"\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    const empleador = asegurado?.empleador\r\n    // setValue(\"asegurado.matricula\", asegurado?.matricula || \"\")\r\n    setValue(\"asegurado.apellidoPaterno\", asegurado?.apellidoPaterno || \"\")\r\n    setValue(\"asegurado.apellidoMaterno\", asegurado?.apellidoMaterno || \"\")\r\n    setValue(\"asegurado.nombres\", asegurado?.nombres || \"\")\r\n    setValue(\"asegurado.estado\", asegurado?.estadoText || \"\")\r\n    // const valSeguro = asegurado?.afiliacion?.baja?.fechaValidezSeguro\r\n    if(asegurado?.afiliacion?.baja?.fechaValidezSeguro) setValue(\"asegurado.baja.fechaValidezSeguro\",  moment(asegurado?.afiliacion?.baja?.fechaValidezSeguro).format('L'))\r\n    setValue(\"empleador.numeroPatronal\", empleador?.numeroPatronal || \"\")\r\n    setValue(\"empleador.nombre\", empleador?.nombre || \"\")\r\n    setValue(\"empleador.estado\", empleador?.estadoText || \"\")\r\n    setValue(\"empleador.fechaBaja\", empleador?.fechaBaja ? moment(empleador?.fechaBaja).format(\"L\") : \"\")\r\n    setValue(\"empleador.enMora\", empleador?.enMora ? \"Sí\" : empleador?.enMora === false ? \"No\" : \"\")\r\n\r\n    if(asegurado?.tipo == 2) {\r\n      const titular = asegurado?.titular\r\n      const extincion = asegurado?.afiliacion?.fechaExtincion\r\n      const parentesco = getParentesco(asegurado?.afiliacion?.parentesco);\r\n\r\n      setValue(\"asegurado.parentesco\", parentesco)\r\n      setValue(\"asegurado.fechaExtincion\", extincion ? moment(extincion).format('L') : \"\")\r\n      setValue(\"titular.matricula\", titular?.matricula || \"\")\r\n      setValue(\"titular.apellidoPaterno\", titular?.apellidoPaterno || \"\")\r\n      setValue(\"titular.apellidoMaterno\", titular?.apellidoMaterno || \"\")\r\n      setValue(\"titular.nombres\", titular?.nombres || \"\")\r\n      setValue(\"titular.estado\", titular?.estadoText)\r\n      // const valSeguroTit = titular?.afiliacion?.baja?.fechaValidezSeguro\r\n      if(titular?.afiliacion?.baja?.fechaValidezSeguro) setValue(\"titular.baja.fechaValidezSeguro\", moment(titular?.afiliacion?.baja?.fechaValidezSeguro).format('L'))\r\n    }\r\n  }, [asegurado])\r\n\r\n  useEffect(() => {\r\n    if (asegurado && formState.dirtyFields.asegurado?.matricula) {\r\n      props.onChange(null)\r\n    }\r\n  }, [matricula])\r\n\r\n  const formErrors = formState.errors\r\n  const hasErrors = formErrors.asegurado || formErrors.titular || formErrors.empleador\r\n\r\n  const buscarAseguradoHandler = () => {\r\n    trigger(\"asegurado.matricula\")\r\n      .then((validation) => {\r\n        if (!formErrors.asegurado?.matricula) {\r\n          if (formState.dirtyFields.asegurado?.matricula)\r\n            delete formState.dirtyFields.asegurado.matricula\r\n          clearErrors([\"asegurado\", \"titular\", \"empleador\"])\r\n          if (!buscar.data) {\r\n            buscar.refetch()\r\n          }\r\n          else {\r\n            const { data: { records } } = buscar.data\r\n            if (records.length == 1) {\r\n              const asegurado = records[0]\r\n              props.onChange(asegurado)\r\n            }\r\n            else {\r\n              showAseguradoChooser(true)\r\n            }\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  return <Card >\r\n    <Accordion.Toggle as={Card.Header} className={\"text-light \" + (hasErrors ? \"bg-danger\" : \"bg-primary\")} eventKey=\"0\">\r\n      Asegurado\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <div>\r\n          {(formErrors.asegurado as any)?.message ? <Alert variant=\"danger\">\r\n            {(formErrors.asegurado as any)?.message}\r\n          </Alert> : null}\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label htmlFor=\"asegurado-matricula\">\r\n                Matrícula\r\n              </Form.Label>\r\n              <InputGroup hasValidation>\r\n                <FormControl id=\"asegurado-matricula\"\r\n                  isInvalid={!!formErrors.asegurado?.matricula || buscar.isError}\r\n                  className=\"text-uppercase\" {...register(\"asegurado.matricula\")}\r\n                  aria-describedby=\"matriculaHelpBlock\" />\r\n                <InputGroup.Append >\r\n                  <Button variant={(formErrors.asegurado?.matricula || buscar.isError) ? \"outline-danger\" : \"outline-secondary\"} onClick={buscarAseguradoHandler}>\r\n                    {buscar.isFetching ? <Spinner animation=\"border\" size=\"sm\" /> : <FaSearch />}\r\n                  </Button>\r\n                </InputGroup.Append>\r\n                <Form.Control.Feedback type=\"invalid\">{\r\n                  (buscar.error as any)?.response?.status == 404 ? \"Asegurado no encontrado\" :\r\n                  \"Ocurrio un error al realizar la busqueda\"\r\n                }</Form.Control.Feedback>\r\n              </InputGroup>            \r\n              {!formErrors.asegurado?.matricula && !buscar.isError ? <Form.Text id=\"matriculaHelpBlock\" muted>Ej: 98-0824-ABC</Form.Text> : null}\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"asegurado.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"asegurado.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"asegurado.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            {!!asegurado && <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formErrors.asegurado?.estado}\r\n                {...register(\"asegurado.estado\")}\r\n              >\r\n              </Form.Control>\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.asegurado?.estado?.message}</Form.Control.Feedback>\r\n            </Form.Group>}\r\n            {asegurado?.tipo == 2 && <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Parentesco</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                className=\"text-uppercase\"\r\n                {...register(\"asegurado.parentesco\")}\r\n              />\r\n            </Form.Group>}\r\n            {asegurado?.afiliacion?.baja && <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Validez del seguro</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.asegurado?.baja?.fechaValidezSeguro}\r\n                {...register(\"asegurado.baja.fechaValidezSeguro\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{\r\n                formErrors.asegurado?.baja?.fechaValidezSeguro?.message\r\n              }</Form.Control.Feedback>\r\n            </Form.Group>}\r\n            {asegurado?.tipo == 2 ? <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Fecha de extinción</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.asegurado?.fechaExtincion}\r\n                {...register(\"asegurado.fechaExtincion\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.asegurado?.fechaExtincion?.message}</Form.Control.Feedback>\r\n            </Form.Group> : null}\r\n          </Form.Row>\r\n        </div>\r\n        {asegurado?.tipo == 2 && <div /*className={asegurado.tipo == 2 ? \"\" : \"d-none\"}*/ >\r\n          {/* {watch(\"titular.id\") ? <> */}\r\n          <hr />\r\n          <h2 style={{ fontSize: \"1.25rem\" }}>Titular</h2>          \r\n          {(formErrors.titular as any)?.message ? <Alert variant=\"danger\">\r\n            {(formErrors.titular as any)?.message}\r\n          </Alert> : null}\r\n          <Form.Row>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Matricula</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.matricula\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Paterno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.apellidoPaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Apellido Materno</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.apellidoMaterno\")}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group as={Col} lg={3} md={6}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"titular.nombres\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formErrors.titular?.estado}\r\n                {...register(\"titular.estado\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.titular?.estado?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            {asegurado?.titular?.afiliacion?.baja && <Form.Group as={Col} sm={4}>\r\n              <Form.Label>Validez del seguro</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.titular?.baja?.fechaValidezSeguro}\r\n                {...register(\"titular.baja.fechaValidezSeguro\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.titular?.baja?.fechaValidezSeguro?.message}</Form.Control.Feedback>\r\n            </Form.Group>}\r\n          </Form.Row>\r\n        </div>}\r\n        {!!asegurado && <div>\r\n          <hr />\r\n          <h2 style={{ fontSize: \"1.25rem\"}}>Empleador</h2>\r\n          {(formErrors.empleador as any)?.message ? <Alert variant=\"danger\">\r\n            {(formErrors.empleador as any)?.message}\r\n          </Alert> : null}\r\n          <Form.Row>\r\n            <Form.Group as={Col} md={3}>\r\n              <Form.Label>Nº Patronal</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.empleador?.numeroPatronal}\r\n                {...register(\"empleador.numeroPatronal\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.numeroPatronal?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group as={Col} md={9}>\r\n              <Form.Label>Nombre</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                {...register(\"empleador.nombre\")}\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row>\r\n            <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Estado</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formErrors.empleador?.estado}\r\n                {...register(\"empleador.estado\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.estado?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={3}>\r\n              <Form.Label>Fecha de baja</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                isInvalid={!!formErrors.empleador?.fechaBaja}\r\n                {...register(\"empleador.fechaBaja\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.fechaBaja?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group as={Col} sm={3}>\r\n              <Form.Label>En mora</Form.Label>\r\n              <Form.Control\r\n                readOnly\r\n                className=\"text-uppercase\"\r\n                isInvalid={!!formErrors.empleador?.enMora}\r\n                {...register(\"empleador.enMora\")}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">{formErrors.empleador?.enMora?.message}</Form.Control.Feedback>\r\n            </Form.Group>\r\n          </Form.Row>\r\n        </div>}\r\n        <AseguradoChooser\r\n          title=\"Resultados\"\r\n          show={aseguradoChooserVisible}\r\n          asegurados={buscar.data?.data.records || []}\r\n          onSelect={(asegurado: Asegurado) => {\r\n            // asegurado.matricula = watch(\"asegurado.matricula\")\r\n            props.onChange(asegurado)\r\n            showAseguradoChooser(false)\r\n          }}\r\n          onHide={()=>showAseguradoChooser(false)}\r\n        />\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n}","export const EstadosAfi: {[k: number]: string} = {\r\n  1: \"Activo\",\r\n  2: \"Baja\"\r\n}","export const EstadosEmp: {[k: number]: string} = {\r\n  1: \"Activo\",\r\n  2: \"Baja\",\r\n  3: \"Baja temporal\"\r\n}","import { useEffect, useState } from \"react\"\r\nimport { AxiosError } from \"axios\"\r\nimport { Accordion, Alert, Breadcrumb, Button, Card, Col, Form, Spinner } from \"react-bootstrap\"\r\nimport { useForm, Controller, FormProvider } from \"react-hook-form\"\r\nimport { Link } from \"react-router-dom\"\r\nimport moment from \"moment\"\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport * as yup from \"yup\"\r\nimport { AseguradoCard, AseguradoInputs } from \"./AseguradoCard\"\r\nimport { useMutation } from \"react-query\"\r\nimport { Asegurado, SolicitudesAtencionExternaService } from \"../services\"\r\nimport { Regional, RegionalesTypeahead } from \"../../../../commons/components\"\r\nimport { useModal } from \"../../../../commons/reusable-modal\"\r\nimport { useUser } from \"../../../../commons/auth/hooks\"\r\nimport { superUserPolicyEnhancer } from \"../../../../commons/auth/utils\"\r\nimport { Medico, MedicosTypeahead } from \"../../medicos/components\"\r\nimport { Proveedor, ProveedoresTypeahead } from \"../../proveedores/components\"\r\nimport { EstadosAfi, EstadosEmp } from \"../utils\"\r\nimport { solicitudAtencionExternaPolicy } from \"../policies\"\r\nimport { proveedorPolicy } from \"../../proveedores\"\r\nimport { medicoPolicy } from \"../../medicos\"\r\n\r\ntype Inputs = AseguradoInputs & {\r\n  regional: Regional[]\r\n  medico: Medico[]\r\n  proveedor: Proveedor[]\r\n  prestacion: string\r\n}\r\n\r\nconst hoy = moment()\r\n\r\nconst estadoAfiSchema = function(asegurado: any, schema: any) {\r\n  schema.oneOf(Object.values(EstadosAfi), \"Estado desconocido\")\r\n  if(asegurado.afiliacion.baja)\r\n    return schema.notOneOf([EstadosAfi[1]], `El asegurado figura como activo, pero hay un registro de su baja con fecha ${asegurado.afiliacion.baja.fechaRegistro}.`)\r\n  else\r\n    return schema.notOneOf([EstadosAfi[2]], `El asegurado figura como dado de baja, aunque no se encontraron registros de la misma.`)\r\n}\r\n\r\nconst bajaAfiSchema = function(asegurado: any, schema: any) {\r\n  return asegurado.afiliacion.baja ? schema.shape({\r\n    fechaValidezSeguro: yup.date().format().emptyStringTo(null).nullable()\r\n      .min(hoy, \"El seguro ya no tiene validez\")\r\n      .required(\"Fecha sin especificar, se asume que el seguro ya no tiene validez\")\r\n  }) : schema\r\n}\r\n\r\nconst estadoEmpSchema = function(empleador: any, schema: any) {\r\n  schema.oneOf(Object.values(EstadosEmp), \"Estado desconocido\")\r\n  if(empleador.fechaBaja){\r\n    schema.notOneOf(EstadosEmp[1], \"El empleador figura como activo, pero tiene fecha de baja\")\r\n  }\r\n  return schema\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  asegurado: yup.object().when(\"$asegurado\", function(asegurado: any, schema: any) {\r\n    if(!asegurado) return schema.test(\"\", \"\", function(value: any, context: any){\r\n      return context.createError({\r\n        message: \"Debe proporcionar los datos del afiliado\"\r\n      })\r\n    })\r\n    else return schema.shape({\r\n      matricula: yup.string().label(\"matricula\").trim().uppercase().required(),  // .matches(/^\\d{2}-\\d{4}-[a-zA-ZñÑ]{2,3}$/, \"Formato incorrecto.\"),\r\n      estado: estadoAfiSchema(asegurado, yup.string().label(\"estado\")),\r\n      fechaExtincion: yup.date().format().emptyStringTo(null).nullable().label(\"fecha de extinsion\").notRequired()\r\n        .min(hoy.toDate(), \"Fecha de extinsion alcanzada\"),\r\n      baja: bajaAfiSchema(asegurado, yup.object())\r\n    })\r\n  }),\r\n  titular: yup.object().when(\"$asegurado\", function(asegurado: any, schema: any){\r\n    if(asegurado?.tipo == 2) {\r\n      if(!asegurado.titular){\r\n        return schema.oneOf([NaN], \"No se encontraron datos del titular\")\r\n      }\r\n      if(asegurado?.afiliacion?.parentesco != 8)\r\n        return schema.shape({\r\n          estado: estadoAfiSchema(asegurado.titular, yup.string().label(\"estado\")),\r\n          baja: bajaAfiSchema(asegurado, yup.object())\r\n        })\r\n    }\r\n  }),\r\n  empleador: yup.object().when(\"$asegurado\", function(asegurado: any, schema: any){\r\n    if(asegurado){\r\n      const empleador = asegurado.empleador\r\n      return !!empleador ? schema.shape({\r\n        estado: estadoEmpSchema(empleador, yup.string().label(\"estado\")),\r\n        fechaBaja: yup.date().format().emptyStringTo(null).nullable().when(\"estado\", {\r\n          is: (estado: string) => estado == EstadosEmp[2] || estado == EstadosEmp[3],\r\n          then: (schema) => schema.required(\"Fecha sin especificar, se asume que el seguro ya no tiene validez\")\r\n                   .min(hoy.subtract(2, \"months\").toDate(), \"Han pasado mas de 2 meses desde la baja, el seguro ya no tiene validez\")\r\n        }),\r\n        enMora: yup.string().oneOf([\"No\"], \"El empleador esta en mora\")\r\n      }) : schema.oneOf([NaN], \"No se encontraron datos del empleador\")\r\n    }\r\n  }),\r\n  regional: yup.array().length(1, \"Debe seleccionar una regional\"),\r\n  medico: yup.array().length(1, \"Debe indicar el medico que realiza la solicitud\"),\r\n  proveedor: yup.array().length(1, \"Debe indicar el proveedor que brindará el servicio\"),\r\n  prestacion: yup.string().trim().uppercase().required(\"Debe indicar la prestacion que se solicita\").max(100)\r\n})\r\n\r\nexport const SolicitudAtencionExternaForm = ()=>{\r\n  const [asegurado, setAsegurado] = useState<Asegurado|null>(null)\r\n  \r\n  const formMethods = useForm<Inputs>({\r\n    mode: \"onBlur\",\r\n    context: {\r\n      asegurado\r\n    },\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      asegurado: {},\r\n      titular: {},\r\n      empleador: {},\r\n      regional: [],\r\n      medico: [],\r\n      proveedor: [],\r\n      prestacion: \"\"\r\n    }\r\n  })\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState,\r\n    control,\r\n    reset,\r\n    setValue,\r\n    setError,\r\n    watch\r\n  } = formMethods\r\n\r\n  const dm11Viewer = useModal(\"pdfModal\")\r\n\r\n  const user = useUser()\r\n  \r\n  const registrar = useMutation((values: Inputs)=>{\r\n    return SolicitudesAtencionExternaService.registrar(\r\n      values.regional![0].id,\r\n      asegurado!.id,\r\n      values.medico![0].id,\r\n      values.proveedor![0].id,\r\n      values.prestacion\r\n    )\r\n  }, {\r\n    onSuccess: ({data: {urlDm11, regionalId}}) => {\r\n      reset()\r\n      if(superUserPolicyEnhancer(solicitudAtencionExternaPolicy.emit)(user, { regionalId })){\r\n        dm11Viewer.open({url: urlDm11, title: \"Formulario D.M. - 11\"})\r\n        setAsegurado(null)\r\n      }\r\n    }\r\n  })\r\n\r\n  const formErrors = formState.errors\r\n  const registrarError = registrar.error as AxiosError\r\n\r\n  useEffect(()=>{\r\n    if(registrarError?.response?.status == 422){\r\n      const {errors} = registrarError.response?.data\r\n      Object.keys(errors).forEach((key: any)=>{\r\n        let localKey = key\r\n        if(key == \"asegurado.id\") localKey = \"asegurado.matricula\"\r\n        if(key == \"empleador.aportes\") localKey = \"empleador.enMora\"\r\n        setError(localKey, {type: \"serverError\", message: errors[key]})\r\n      })\r\n    }\r\n  }, [registrarError])\r\n\r\n  const renderAlert = ()=>{\r\n    if(registrar.isSuccess){\r\n      return <Alert variant=\"success\">\r\n        La operacion se realizó exitosamente\r\n      </Alert>\r\n    }\r\n    if(registrar.isError){\r\n      const error = registrar.error as AxiosError\r\n      return <Alert variant=\"danger\">\r\n        {error.response?.data?.message || error.message}\r\n      </Alert>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <FormProvider {...formMethods}>\r\n    <Breadcrumb>\r\n      <Breadcrumb.Item linkAs={Link} linkProps={{to: \"/clinica/atencion-externa\"}}>Solicitudes de atencion externa</Breadcrumb.Item>\r\n      <Breadcrumb.Item active>Registro</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n    <Form onSubmit={handleSubmit((values)=>{\r\n      registrar.mutate(values)\r\n    })}>\r\n      {/* <h1 style={{fontSize: \"1.75rem\"}}>Solicitud de atención externa</h1> */}\r\n      {renderAlert()}\r\n      <Accordion className=\"mt-3\"  defaultActiveKey=\"0\">\r\n        <AseguradoCard value={asegurado} onChange={(asegurado)=>{\r\n          setAsegurado(asegurado)\r\n        }} />\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header} className={\"text-light \" + (formErrors.regional ? \"bg-danger\" : \"bg-primary\")} eventKey=\"1\">\r\n              Regional\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n              <Card.Body>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} className=\"position-unset\">\r\n                    <Form.Label>Nombre</Form.Label>\r\n                    <Controller \r\n                      control={control}\r\n                      name=\"regional\"\r\n                      render={({field, fieldState})=>{\r\n                        return <RegionalesTypeahead\r\n                          //@ts-ignore\r\n                          style={{textTransform: \"uppercase\"}}                        \r\n                          inputProps={{\r\n                            style: {textTransform: \"uppercase\"}\r\n                          }}\r\n                          id=\"solicitud-atencion-externa-form/regionales\"\r\n                          filterBy={(regional: Regional)=>{\r\n                            return solicitudAtencionExternaPolicy.registerByRegionalOnly(user, {regionalId: regional.id}) !== false\r\n                          }}\r\n                          isInvalid={!!fieldState.error}\r\n                          feedback={fieldState.error?.message}\r\n                          selected={field.value}\r\n                          onBlur={field.onBlur}\r\n                          onChange={(regional)=>{\r\n                            setValue(\"medico\", [])\r\n                            setValue(\"proveedor\", [])\r\n                            field.onChange(regional)\r\n                          }}\r\n                        />\r\n                      }}\r\n                    />\r\n                  </Form.Group> \r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header}  className={\"text-light \" + (formErrors.medico ? \"bg-danger\" : \"bg-primary\")} eventKey=\"2\">\r\n              Médico\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"2\">\r\n              <Card.Body>\r\n                <Controller\r\n                  control={control}\r\n                  name=\"medico\"\r\n                  render={({field, fieldState})=>{\r\n                    return <Form.Row>\r\n                      <Form.Group as={Col} sm={8} className=\"position-unset\">\r\n                        <Form.Label>Nombre</Form.Label>\r\n                        <MedicosTypeahead\r\n                          id=\"medicos-typeahead\"\r\n                          //@ts-ignore\r\n                          feedback={fieldState.error?.message}\r\n                          disabled={watch(\"regional\").length == 0}\r\n                          filter={{\r\n                            regionalId: medicoPolicy.viewByRegionalOnly(user) ? user!.regionalId : watch(\"regional\").length && watch(\"regional\")[0].id,\r\n                            estado: 1\r\n                          }}\r\n                          className=\"text-uppercase\"\r\n                          isInvalid={!!fieldState.error}\r\n                          selected={field.value}\r\n                          onBlur={field.onBlur}\r\n                          onChange={field.onChange}\r\n                        />\r\n                      </Form.Group>\r\n                      <Form.Group as={Col} sm={4}>\r\n                        <Form.Label>Especialidad</Form.Label>\r\n                        <Form.Control\r\n                          readOnly\r\n                          style={{textTransform: \"uppercase\"}}\r\n                          // isInvalid={!!formState.errors.especialidad}\r\n                          value={field.value.length ? field.value[0].especialidad : \"\"}\r\n                        />\r\n                      </Form.Group>\r\n                    </Form.Row>\r\n                  }}\r\n                />\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n        \r\n        <Card className=\"overflow-visible\">\r\n          <div className=\"overflow-hidden\">\r\n            <Accordion.Toggle as={Card.Header}  className={\"text-light \" + (formErrors.medico ? \"bg-danger\" : \"bg-primary\")} eventKey=\"3\">\r\n              Servicio solicitado\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"3\">\r\n              <Card.Body>\r\n                <Controller\r\n                  control={control}\r\n                  name=\"proveedor\"\r\n                  render={({field, fieldState})=>{\r\n                    return <Form.Row>                  \r\n                      <Form.Group as={Col} sm={8} className=\"position-unset\">\r\n                        <Form.Label>Proveedor</Form.Label>\r\n                        <ProveedoresTypeahead\r\n                            id=\"proveedores-typeahead\"\r\n                            //@ts-ignore\r\n                            feedback={fieldState.error?.message}\r\n                            disabled={watch(\"regional\").length == 0}\r\n                            filter={{\r\n                              regionalId: proveedorPolicy.viewByRegionalOnly(user) ? user!.regionalId : watch(\"regional\").length && watch(\"regional\")[0].id,\r\n                              estado: 1\r\n                            }}\r\n                            className=\"text-uppercase\"\r\n                            isInvalid={!!fieldState.error}\r\n                            selected={field.value}\r\n                            onBlur={field.onBlur}\r\n                            onChange={field.onChange}\r\n                        />\r\n                      </Form.Group>\r\n                      {(field.value.length && field.value[0].tipo == 1) ? <Form.Group as={Col} sm={4}>\r\n                        <Form.Label>Especialidad</Form.Label>\r\n                        <Form.Control\r\n                          readOnly\r\n                          style={{textTransform: \"uppercase\"}}\r\n                          // isInvalid={!!formState.errors.especialidad}\r\n                          value={field.value[0].especialidad}\r\n                        />\r\n                      </Form.Group> : null}\r\n                    </Form.Row>\r\n                  }}\r\n                />\r\n                <Form.Row>\r\n                  <Form.Group as={Col}>\r\n                    <Form.Label>Prestación</Form.Label>\r\n                    <Form.Control\r\n                      as=\"textarea\"\r\n                      style={{textTransform: \"uppercase\"}}\r\n                      isInvalid={!!formState.errors.prestacion}\r\n                      aria-describedby=\"prestacionHelpBlock\"\r\n                      {...register(\"prestacion\")}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">{formState.errors.prestacion?.message}</Form.Control.Feedback>\r\n                    {!formState.errors.prestacion ? <Form.Text id=\"prestacionHelpBlock\" muted>{`${watch(\"prestacion\").length}/100` }</Form.Text> : null}\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Card.Body>\r\n            </Accordion.Collapse>\r\n          </div>\r\n        </Card>\r\n      </Accordion>\r\n      <Button className=\"mt-3\" type=\"submit\">\r\n        {registrar.isLoading ? <Spinner className=\"mr-2\" animation=\"border\" size=\"sm\"/> : null}\r\n        <span>Guardar</span>\r\n      </Button>\r\n    </Form>\r\n  </FormProvider>\r\n}","import { useMemo } from \"react\"\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport SidebarLayout from '../../commons/components/layouts/SidebarLayout';\r\nimport { FaProcedures, /*FaCoins,*/ FaHandshake, FaUserMd } from 'react-icons/fa';  \r\nimport { GiRodOfAsclepius } from 'react-icons/gi';  \r\nimport { FcDebt } from '../../commons/components/icons/FcDebt';\r\nimport { BiTransfer } from 'react-icons/bi';\r\nimport ListaMoraIndex from './mora/components/ListaMoraIndex';\r\nimport ListaMoraItemForm from './mora/components/ListaMoraItemForm';\r\nimport { listaMoraPolicy } from \"./mora/policies\";\r\nimport { \r\n  SolicitudAtencionExternaIndex,\r\n  SolicitudAtencionExternaForm,\r\n  solicitudAtencionExternaPolicy\r\n} from './solicitud_atencion_externa';\r\nimport { \r\n  MedicosIndex, \r\n  MedicoView, \r\n  MedicoForm, \r\n  medicoPolicy } from './medicos';\r\nimport { \r\n  ProveedoresIndex,\r\n  ProveedorView,\r\n  ProveedorForm,\r\n  proveedorPolicy } from \"./proveedores\"\r\nimport { ProtectedRoute, useUser } from '../../commons/auth';\r\nimport { superUserPolicyEnhancer } from '../../commons/auth/utils';\r\nimport { Image } from \"react-bootstrap\";\r\n\r\nexport const ClinicaApp = ()=>{\r\n  const { url } = useRouteMatch()\r\n  const user = useUser()\r\n\r\n  const sidebarItems = useMemo(()=>{\r\n    const items = [] as any[]\r\n\r\n    if(superUserPolicyEnhancer(listaMoraPolicy.index)(user)){\r\n      items.push(\r\n        {\r\n          id: \"lista-mora\",\r\n          path: `${url}/lista-mora`,\r\n          title: \"Lista de mora\",\r\n          icon: <FcDebt  />\r\n        }\r\n      )\r\n    }\r\n    \r\n    if(superUserPolicyEnhancer(solicitudAtencionExternaPolicy.index)(user)) {\r\n      items.push({\r\n        id: \"atencion-externa\",\r\n        path: `${url}/atencion-externa`,\r\n        title: \"Atención externa\",\r\n        icon: <BiTransfer />\r\n      })\r\n    }\r\n\r\n    if(superUserPolicyEnhancer(medicoPolicy.index)(user)){\r\n      items.push({\r\n        id: \"medicos\",\r\n        path: `${url}/medicos`,\r\n        title: \"Medicos\",\r\n        icon: <FaUserMd />,\r\n      })\r\n    }\r\n\r\n    if(superUserPolicyEnhancer(proveedorPolicy.index)(user)){\r\n      items.push({\r\n        id: \"proveedores\",\r\n        path: `${url}/proveedores`,\r\n        title: \"Proveedores\",\r\n        icon: <FaHandshake />\r\n      })\r\n    }\r\n\r\n    // items.push(\r\n    //       {\r\n    //         id: \"especialidades\",\r\n    //         path: `${url}/especialidades`,\r\n    //         title: \"Especialidades\",\r\n    //         icon: <GiRodOfAsclepius />,\r\n    //       },\r\n    //       {\r\n    //         id: \"prestaciones\",\r\n    //         path: `${url}/prestaciones`,\r\n    //         title: \"Prestaciones\",\r\n    //         icon: <FaProcedures />,\r\n    //       }\r\n    // )\r\n    return items\r\n  }, [user])\r\n\r\n  return <SidebarLayout sidebar={{\r\n    header: <div className=\"d-flex justify-content-center\"><Image src=\"/logo-lg.png\" /></div>,\r\n    items: sidebarItems\r\n  }}>\r\n    <Switch>\r\n      <ProtectedRoute exact path={`${url}/lista-mora/agregar`}\r\n        authorize={(user) => listaMoraPolicy.register(user)}>\r\n        <ListaMoraItemForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute path={`${url}/lista-mora`}\r\n        authorize={listaMoraPolicy.index}>\r\n        <ListaMoraIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/atencion-externa`}\r\n        authorize={solicitudAtencionExternaPolicy.index}>\r\n        <SolicitudAtencionExternaIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/atencion-externa/registrar`}\r\n        authorize={(user) => solicitudAtencionExternaPolicy.register(user)}\r\n      >\r\n        <SolicitudAtencionExternaForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/medicos`}\r\n        authorize={medicoPolicy.index}\r\n      >\r\n        <MedicosIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/medicos/registrar`, `${url}/medicos/:id/editar`]}\r\n        authorize={(user, path) => path == `${url}/medicos/registrar` ? medicoPolicy.register(user) : medicoPolicy.edit(user) }\r\n      >\r\n        <MedicoForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/medicos/:id`}\r\n        authorize={(user)=>medicoPolicy.view(user)}\r\n      >\r\n        <MedicoView />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores`}\r\n        authorize={proveedorPolicy.index}\r\n      >\r\n        <ProveedoresIndex />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={[`${url}/proveedores/registrar`, `${url}/proveedores/:id/editar`]}\r\n        authorize={(user, path)=> path == `${url}/proveedores/registrar` ? proveedorPolicy.register(user) : proveedorPolicy.edit(user)}\r\n      >\r\n        <ProveedorForm />\r\n      </ProtectedRoute>\r\n      <ProtectedRoute exact path={`${url}/proveedores/:id`}\r\n        authorize={(user)=>proveedorPolicy.view(user)}\r\n      >\r\n        <ProveedorView />\r\n      </ProtectedRoute>\r\n    </Switch>\r\n  </SidebarLayout>\r\n}\r\n\r\nexport default ClinicaApp","import React, { useState} from \"react\"\r\nimport { Button, Col, Collapse, Form, InputGroup, Table } from \"react-bootstrap\"\r\nimport {FaFilter, FaSearch, FaSync} from \"react-icons/fa\"\r\nimport { Pagination } from \"./Pagination\"\r\nimport { Page } from \"../services/Page\"\r\nimport { User, ProtectedContent } from \"../auth\"\r\nimport { SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG } from \"constants\"\r\n\r\ntype Props<Data> = {\r\n  page: Page\r\n  total: number\r\n  data?: Data[]\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n  policy: {\r\n    view(user: User): boolean | undefined\r\n    register(user: User): boolean | undefined\r\n  }\r\n  renderLoader: () => React.ReactElement\r\n  renderData: (item: Data, index: number) => React.ReactElement\r\n  renderDataHeaders: () => React.ReactElement\r\n  renderFilterForm?: () => React.ReactElement\r\n  renderCreateButton: () => React.ReactElement\r\n  onRefetch: () => void\r\n  onPageChange: (page: Page) => void\r\n  onSearch?: (search: string) => void\r\n}\r\n\r\nexport function IndexTemplate<Data>({\r\n  total,\r\n  page,\r\n  data,\r\n  isLoading,\r\n  hasError,\r\n  policy,\r\n  onSearch,\r\n  onRefetch,\r\n  onPageChange,\r\n  renderLoader,\r\n  renderData,\r\n  renderDataHeaders,\r\n  renderCreateButton,\r\n  renderFilterForm\r\n}: Props<Data>) {\r\n  \r\n  const [ search, setSearch ] = useState(\"\")\r\n  const [ showFilterForm, setShowFilterForm] = useState(false)\r\n\r\n  const renderRows = ()=>{\r\n    if(data){\r\n      if(data.length === 0){\r\n        return  <tr>\r\n          <td className=\"bg-light text-center\" colSpan={100}>\r\n            No se encontraron resultados\r\n          </td>\r\n      </tr>\r\n      }\r\n      return data.map(renderData)\r\n    }\r\n    if (isLoading) {\r\n      return renderLoader()\r\n    }\r\n    if (hasError) {\r\n      return <tr>\r\n        <td className=\"bg-danger text-light text-center\" colSpan={100}>\r\n          Ocurrió un error al realizar la solicitud\r\n        </td>\r\n      </tr>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return <div>\r\n    <div className=\"d-flex my-2\">\r\n      <Form.Row className=\"ml-auto flex-nowrap\" >\r\n        <ProtectedContent\r\n          authorize={policy.view}\r\n        >\r\n          <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              onRefetch()\r\n            }}><FaSync /></Button>\r\n          </Col>\r\n          {renderFilterForm ? <Col xs=\"auto\" >\r\n            <Button onClick={()=>{\r\n              setShowFilterForm(visible=>!visible)\r\n            }}><FaFilter /></Button>\r\n          </Col> : null}\r\n        </ProtectedContent>\r\n        <ProtectedContent\r\n          authorize={policy.register}\r\n        >\r\n          <Col xs=\"auto\">\r\n            {renderCreateButton()}\r\n          </Col>\r\n        </ProtectedContent>\r\n      </Form.Row>\r\n    </div>\r\n    <ProtectedContent\r\n      authorize={policy.view}\r\n    >\r\n      {renderFilterForm ? <Collapse in={showFilterForm}>\r\n        <div className=\"mb-2\">\r\n          {renderFilterForm()}\r\n        </div>\r\n      </Collapse> : null}\r\n      <Form.Row className=\"mb-2\">\r\n        {onSearch ? <Col className=\"mb-2\">\r\n          {/* <Form.Row className=\"flex-nowrap\">\r\n            <Col>\r\n              <Form.Control aria-label=\"Busqueda\" type=\"search\" />\r\n            </Col>\r\n            <Col xs={\"auto\"}>\r\n              <Button className=\"ml-2\" type=\"submit\"><FaSearch /></Button>\r\n            </Col>\r\n          </Form.Row> */}\r\n          <InputGroup style={{minWidth: \"15rem\"}}>\r\n              <Form.Control aria-label=\"Busqueda\" type=\"search\" value={search} onChange={(e)=>{\r\n                setSearch(e.target.value)\r\n              }} />\r\n              <InputGroup.Append>\r\n                <Button onClick={()=>{\r\n                  onSearch(search)\r\n                }}><FaSearch /></Button>\r\n              </InputGroup.Append>\r\n          </InputGroup>\r\n        </Col> : null}\r\n        <Col className=\"ml-auto\" xs={\"auto\"}>\r\n          <div className=\"d-flex flex-row flex-nowrap align-items-center\">\r\n            <span>Mostrar</span>\r\n            <Form.Label htmlFor=\"pageSizeSelector\" srOnly>Tamaño de pagina</Form.Label>\r\n            <Form.Control id=\"pageSizeSelector\" className=\"mx-2\" as=\"select\" value={page.size} onChange={(e) => {\r\n              const value = e.target.value\r\n              onPageChange({\r\n                current: 1,\r\n                size: parseInt(value)\r\n              })\r\n            }}>\r\n              <option value={10}>10</option>\r\n              <option value={20}>20</option>\r\n              <option value={30}>30</option>\r\n              <option value={50}>50</option>\r\n              <option value={100}>100</option>\r\n            </Form.Control>\r\n            <span>filas</span>\r\n          </div>\r\n        </Col>\r\n      </Form.Row>\r\n      <Table responsive>\r\n        <thead>\r\n          {renderDataHeaders()}\r\n        </thead>\r\n        <tbody className=\"text-uppercase\">\r\n          {renderRows()}\r\n        </tbody>\r\n      </Table>\r\n      <Form.Row className=\"mt-2\">\r\n        <Col className=\"mr-auto\" xs=\"auto\">\r\n          {total > 0 ? <span style={{whiteSpace: \"nowrap\"}}>Se encontraron {total} resultados</span> : \"\"}\r\n        </Col>\r\n        <Col className=\"ml-auto\" xs=\"auto\">\r\n          <Pagination\r\n            current={page.current}\r\n            total={Math.ceil(total / page.size)}\r\n            onChange={(current) => onPageChange({ ...page, current })}\r\n          />\r\n        </Col>\r\n      </Form.Row>\r\n    </ProtectedContent>\r\n  </div>\r\n}","import { RefObject, useEffect } from 'react'\r\n\r\ntype AnyEvent = MouseEvent | TouchEvent\r\n\r\nexport function useOnClickOutside<T extends HTMLElement = HTMLElement>(\r\n  ref: RefObject<T>,\r\n  handler: (event: AnyEvent) => void,\r\n) {\r\n  useEffect(() => {\r\n    const listener = (event: AnyEvent) => {\r\n      const el = ref?.current\r\n\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!el || el.contains(event.target as Node) || document.querySelector('html') == event.target) {\r\n        return\r\n      }\r\n      handler(event)\r\n    }\r\n\r\n    document.addEventListener(`mousedown`, listener)\r\n    document.addEventListener(`touchstart`, listener)\r\n\r\n    return () => {\r\n      document.removeEventListener(`mousedown`, listener)\r\n      document.removeEventListener(`touchstart`, listener)\r\n    }\r\n\r\n    // Reload only if ref or handler changes\r\n  }, [ref, handler])\r\n}\r\n\r\nexport default useOnClickOutside\r\n","import { FC, useRef, ComponentProps } from 'react'\r\nimport { useOnClickOutside } from './useOnClickOutside'\r\n\r\ntype Props = {\r\n  onClickOutside: (event: MouseEvent | TouchEvent) => void\r\n} & ComponentProps<\"div\">\r\nexport const ClickOutsideHandler:FC<Props> = ({children, onClickOutside, ...props}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(containerRef, onClickOutside)\r\n  return <div ref={containerRef} {...props}>\r\n    {children}\r\n  </div>\r\n}","import React, { ComponentProps } from 'react'\r\nimport { ListGroup } from 'react-bootstrap';\r\nimport { Link, useRouteMatch } from 'react-router-dom'\r\n\r\ntype MenuItem = {\r\n  id: string,\r\n  title: string,\r\n  path: string,\r\n  icon?: React.ReactNode,\r\n  items?: undefined\r\n} | {\r\n  id: string,\r\n  title: string,\r\n  path?: string,\r\n  icon?: React.ReactNode,\r\n  items: {\r\n    id: string,\r\n    title: string,\r\n    path: string,\r\n    icon?: React.ReactNode,\r\n  }[]\r\n}\r\n\r\nconst SidebarItem = (item: MenuItem)=>{\r\n  const match = useRouteMatch(item.path || \"\")\r\n\r\n  return <>\r\n    {item.path ?\r\n      <ListGroup.Item as={Link} to={item.path} \r\n        action\r\n        active={!!match}\r\n        className=\"text-nowrap sidebar-navitem\"\r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          borderLeft: !!match ? \"0.25rem solid #f28c2b\" : 0\r\n        }}\r\n        key={item.id}>\r\n          <span className=\"sidebar-navitem-icon\">{item.icon}</span><span className=\"sidebar-navitem-title\">{item.title}</span>\r\n      </ListGroup.Item> : \r\n      <div\r\n        className=\"list-group-item border-0 text-nowrap\"\r\n        style={{\r\n          padding: \".5rem 1rem\"\r\n        }}\r\n        key={item.id}>\r\n          <span className=\"sidebar-navitem-icon\">{item.icon}</span><span className=\"sidebar-navitem-title\">{item.title}</span>\r\n      </div>\r\n    }\r\n    {item.items && item.items.map(subitem=>{\r\n      return <Link to={subitem.path} \r\n        style={{\r\n          padding: \".5rem 1rem\",\r\n          paddingLeft: \"2rem\"\r\n        }}\r\n        className=\"list-group-item list-group-item-action  border-left-3 text-nowrap\" \r\n        key={subitem.id}>\r\n          {subitem.icon || null}<span style={{verticalAlign: 'middle', marginLeft: '0.5rem'}}>{subitem.title}</span>\r\n      </Link>\r\n    })}\r\n  </>\r\n}\r\n\r\nexport type SidebarProps = ComponentProps<\"div\"> & {\r\n  side?: 'left' | 'right',\r\n  header?: string | JSX.Element,\r\n  items?: MenuItem[],\r\n  renderItem?: (item: MenuItem) => JSX.Element\r\n}\r\nexport const Sidebar = (props: SidebarProps) => {\r\n  const {className=\"\", side=\"right\", header=\"\", items=[], renderItem} = props\r\n  const borderClass = {left: 'border-left', right: 'border-right'}\r\n  return <div className={`${className}  ${borderClass[side]}`} id=\"sidebar-wrapper\">\r\n    <div className=\"sidebar-heading\">\r\n      <div className=\"sidebar-heading-content\">{header}</div>\r\n    </div>\r\n    <hr className=\"mx-2\"></hr>\r\n    <div className=\"sidebar-menu\">\r\n      <ListGroup variant=\"flush\">\r\n        {items.map(item=>(\r\n          <SidebarItem key={item.id} {...item} />\r\n        ))}      \r\n      </ListGroup>\r\n    </div>\r\n  </div>\r\n  \r\n}","import React from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ClickOutsideHandler } from '../../click-outside-handler'\r\nimport { Sidebar, SidebarProps } from './Sidebar'\r\nimport \"./simple-sidebar.css\"\r\n\r\ntype Props = {\r\n  sidebar: SidebarProps\r\n  children: React.ReactNode\r\n}\r\nexport const SidebarLayout = ({sidebar, children}: Props) => {\r\n  const showSidebar = useSelector((state:any) => state.sidebarVisibility)\r\n  const dispatch = useDispatch()\r\n\r\n  const onClickOutsideHandler = React.useCallback((event: MouseEvent | TouchEvent)=>{\r\n    const toggle = document.querySelector('[aria-label=\"Toggle navigation\"]')\r\n    if(!toggle?.contains(event.target as Node)){\r\n      dispatch({\r\n        type: \"CLOSE_SIDEBAR\"\r\n      })\r\n    }\r\n  }, [showSidebar])\r\n  \r\n  return <div className={\"position-relative d-flex flex-grow-1 bg-light\" + (showSidebar ? \"\" : \" collapsed\")}  id=\"wrapper\">\r\n    <ClickOutsideHandler className=\"shadow-sm\" style={{zIndex: 100}} onClickOutside={onClickOutsideHandler}>\r\n      <Sidebar className=\"bg-white shadow-sm\" {...sidebar}/>\r\n    </ClickOutsideHandler>\r\n    <div className=\"overflow-auto\" style={{width: \"100%\"}}>\r\n      <Container className=\"d-flex flex-column\">\r\n        <div className=\"d-flex flex-column bg-white rounded-lg shadow-sm m-2 p-3 flex-grow-1\">\r\n          {children}\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default SidebarLayout"],"names":["FcDebt","props","GenIcon","EmpleadorService","page","filter","apiClient","params","keysToUnderscore","ListaMoraService","idEmpleador","empleador_id","id","ListaMoraFilterForm","useForm","handleSubmit","register","reset","Form","className","onSubmit","inputs","nombre","numeroPatronal","onApply","as","Col","sm","htmlFor","xs","Button","type","variant","onClick","listaMoraPolicy","index","user","view","context","byRegionalOnly","viewByRegionalOnly","undefined","can","regionalId","registerByRegionalOnly","remove","removeByRegionalOnly","RowOptions","item","queryKey","modal","useModal","queryClient","useQueryClient","quitar","useMutation","onSuccess","close","setQueryData","oldData","data","records","i","useEffect","status","open","state","console","error","Dropdown","VerticalEllipsisDropdownToggle","authorize","href","window","confirm","mutate","useState","current","size","setPage","useUser","defaultFilter","setFilter","canView","superUserPolicyEnhancer","buscar","useQuery","enabled","refetchOnWindowFocus","refetchOnReconnect","totalRef","useRef","meta","total","updateFilter","oldFilter","loader","useMemo","rows","push","scope","Breadcrumb","active","IndexTemplate","I","policy","isLoading","isFetching","hasError","isError","onSearch","search","_busqueda","renderLoader","renderData","empleadorId","regional","style","textTransform","renderDataHeaders","width","minWidth","renderFilterForm","renderCreateButton","Link","to","onPageChange","onRefetch","refetch","throwOnError","EmpleadorChooser","Modal","title","Table","responsive","empleadores","length","map","empleador","onSelect","colSpan","schema","yup","shape","when","test","value","createError","message","setEmpleador","resolver","yupResolver","watch","setError","clearErrors","setValue","formErrors","trigger","formState","errors","showChooser","setShowChooser","history","useHistory","buscarEmpleador","guardar","invalidateQueries","replace","response","Object","keys","forEach","key","localKey","onChangeNumeroPatronal","onChange","numeroPatronalField","linkAs","linkProps","Alert","isSuccess","renderAlert","InputGroup","hasValidation","isInvalid","e","Spinner","animation","readOnly","show","onHide","SolicitudesAtencionExternaService","regional_id","paciente_id","medico_id","proveedor_id","prestacion","MedicosService","medico","estado","ACTUALIZAR_ESTADO_MEDICOS","ACTUALIZAR_ESTADO_MEDICOS_REGIONAL","medicoPolicy","edit","editByRegionalOnly","Permisos","updateStatus","updateStatusByRegionalOnly","numCi","nonEmpty","nullable","is","then","required","otherwise","optional","compCi","uppercase","especialidad","MedicosFilterForm","defaultValues","control","ci","raiz","parseInt","complemento","onFilter","lg","xl","padding","paddingTop","marginBottom","fontSize","name","render","field","ref","fieldState","selected","log","height","paddingBottom","label","checked","cambiarEstado","inactive","estadoText","position","pathname","MedicosIndex","path","useLocation","texto","nombreCompleto","MedicoView","locationState","useParams","cargar","initialData","statusText","headers","config","typeError","ciComplemento","default","notRequired","matches","apellidoPaterno","apellidoMaterno","max","trim","nombres","MedicoForm","initialized","location","refetchOnMount","onError","String","md","filterBy","feedback","onBlur","MedicosTypeahead","defaultOptions","options","setOptions","setSearch","useInfiniteQuery","pageParam","getNextPageParam","lastPage","allPages","nextPage","pages","flatMap","clearButton","align","emptyLabel","promptText","searchText","paginationText","labelKey","maxResults","minLength","isFetchingNextPage","paginate","onPaginate","fetchNextPage","useCache","renderMenuItemChildren","proveedorPolicy","ProveedoresService","fields","ProveedoresFilterForm","tipo","proveedor","actualizarEstado","p","alignRight","login","ProveedoresIndex","razonSocial","ProveedorView","startsWith","ubicacion","latitud","longitud","Row","nit","direccion","telefono1","telefono2","MapContainer","center","zoom","dragging","scrollWheelZoom","doubleClickZoom","minHeight","TileLayer","attribution","url","Marker","Popup","join","ProveedorEmpresaFieldset","useFormContext","ProveedorMedicoFieldset","ProveedorFieldset","ContactoFieldset","muted","oneOf","ProveedorForm","formMethods","values","general","lat","lng","Array","isArray","contacto","useServerValidation","ProveedoresTypeahead","solicitudAtencionExternaPolicy","emit","emitByRegionalOnly","SolicitudAtencionExternaFilterForm","input","matricula","desde","moment","format","hasta","medicoId","proveedorId","solicitud","urlDm11","SolicitudAtencionExternaIndex","fecha","maxWidth","paciente","titular","AseguradoChooser","asegurados","asegurado","matriculaComplemento","AseguradosService","include","AseguradoCard","aseguradoChooserVisible","showAseguradoChooser","afiliacion","baja","fechaValidezSeguro","fechaBaja","enMora","extincion","fechaExtincion","parentesco","code","getParentesco","dirtyFields","hasErrors","Card","Accordion","eventKey","FormControl","validation","EstadosAfi","EstadosEmp","hoy","estadoAfiSchema","notOneOf","fechaRegistro","bajaAfiSchema","emptyStringTo","min","estadoEmpSchema","toDate","NaN","subtract","SolicitudAtencionExternaForm","setAsegurado","mode","dm11Viewer","registrar","registrarError","defaultActiveKey","inputProps","disabled","ClinicaApp","useRouteMatch","sidebarItems","items","icon","SidebarLayout","sidebar","header","Image","src","exact","ListaMoraItemForm","ListaMoraIndex","showFilterForm","setShowFilterForm","visible","in","target","srOnly","whiteSpace","Math","ceil","useOnClickOutside","handler","listener","event","el","contains","document","querySelector","addEventListener","removeEventListener","ClickOutsideHandler","children","onClickOutside","containerRef","SidebarItem","match","ListGroup","action","borderLeft","subitem","paddingLeft","verticalAlign","marginLeft","Sidebar","side","renderItem","left","right","showSidebar","useSelector","sidebarVisibility","dispatch","useDispatch","onClickOutsideHandler","React","toggle","zIndex","Container"],"sourceRoot":""}